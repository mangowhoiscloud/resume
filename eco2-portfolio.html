<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïù¥ÏΩîÏóêÏΩî(Eco¬≤) Portfolio - Backend/Infrastructure</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Fira+Code:wght@400;500;600&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Mango Amber + Teal Theme */
            --accent-primary: #E5A83B;
            --accent-light: #F4C56A;
            --accent-dark: #C98A1F;
            --accent-glow: rgba(229,168,59,0.25);
            --accent-subtle: rgba(229,168,59,0.08);
            --accent-teal: #2D7A7A;
            --accent-teal-light: #3D9A9A;
            
            --bg-deep: #0A0C0C;
            --bg-primary: #0E1212;
            --bg-secondary: #141A1A;
            --bg-card: #182020;
            --bg-card-hover: #1E2828;
            --border-subtle: rgba(255,255,255,0.06);
            --border-glow: rgba(229,168,59,0.2);
            
            /* Category Colors - Mango + Teal harmony */
            --agent-primary: #10b981;
            --agent-glow: rgba(16,185,129,0.2);
            --k8s-primary: #3D9A9A;
            --k8s-glow: rgba(61,154,154,0.2);
            --auth-primary: #E5A83B;
            --auth-glow: rgba(229,168,59,0.2);
            --obs-primary: #4DAA8D;
            --obs-glow: rgba(77,170,141,0.2);
            --mq-primary: #F4C56A;
            --mq-glow: rgba(244,197,106,0.2);
            --stream-primary: #C98A1F;
            --stream-glow: rgba(201,138,31,0.2);
            --ec-primary: #5BA3A3;
            --ec-glow: rgba(91,163,163,0.2);
            --clean-primary: #2D7A7A;
            --clean-glow: rgba(45,122,122,0.2);
            
            --text-primary: #F7FAF9;
            --text-secondary: #A3ABA8;
            --text-muted: #6C7876;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-deep);
            color: var(--text-primary);
            line-height: 1.7;
            overflow-x: hidden;
            font-feature-settings: 'ss01' on, 'ss02' on;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 1rem 2rem;
            background: rgba(5,5,8,0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-logo {
            font-family: 'Inter', sans-serif;
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--accent-primary);
            letter-spacing: -0.02em;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--text-primary);
        }

        .lang-toggle {
            display: flex;
            gap: 0.5rem;
        }

        .lang-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid var(--border-subtle);
            background: transparent;
            color: var(--text-muted);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
            border-color: var(--border-glow);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 8rem 2rem 4rem;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200%;
            height: 100%;
            background: radial-gradient(ellipse at center top, rgba(229,168,59,0.12) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            border-radius: 100px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            animation: fadeInUp 0.8s ease-out;
        }

        .hero-badge::before {
            content: '';
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .hero-title {
            font-family: 'Inter', sans-serif;
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            letter-spacing: -0.03em;
            animation: fadeInUp 0.8s ease-out 0.1s both;
        }

        .hero-title .eco {
            color: var(--accent-primary);
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin-bottom: 3rem;
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        .hero-stats {
            display: flex;
            gap: 3rem;
            flex-wrap: wrap;
            justify-content: center;
            animation: fadeInUp 0.8s ease-out 0.3s both;
        }

        .hero-stat {
            text-align: center;
        }

        .hero-stat-value {
            font-family: 'Inter', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-primary);
            letter-spacing: -0.02em;
        }

        .hero-stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Section Base */
        .section {
            padding: 6rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-number {
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .section-title {
            font-family: 'Inter', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .section-desc {
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto;
        }

        /* Category Cards */
        .categories {
            display: grid;
            gap: 2rem;
        }

        .category-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 2.5rem;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--category-color);
            transform: scaleX(0);
            transition: transform 0.4s ease;
        }

        .category-card:hover::before {
            transform: scaleX(1);
        }

        .category-card:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-glow);
            transform: translateY(-5px);
            box-shadow: 0 20px 60px var(--category-glow);
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .category-info {
            flex: 1;
        }

        .category-icon {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--category-glow);
            border-radius: 12px;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .category-title {
            font-family: 'Inter', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--category-color);
            letter-spacing: -0.01em;
        }

        .category-posts {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .category-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tech-badge {
            padding: 0.3rem 0.7rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            font-size: 0.75rem;
            font-family: 'Fira Code', monospace;
            color: var(--text-secondary);
        }

        .category-content {
            margin-bottom: 1.5rem;
        }

        .category-desc {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        .achievements {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .achievement {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 1rem;
            background: rgba(255,255,255,0.02);
            border-radius: 10px;
            border: 1px solid var(--border-subtle);
        }

        .achievement-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .achievement-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            overflow-wrap: break-word;
            word-break: keep-all;
            min-width: 0;
        }

        .achievement-text strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .category-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-subtle);
            flex-wrap: wrap;
            gap: 1rem;
        }

        .blog-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--category-color);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            transition: gap 0.3s;
        }

        .blog-link:hover {
            gap: 0.75rem;
        }

        .blog-link::after {
            content: '‚Üí';
        }

        /* PR / Release References */
        .ref-links {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 0.6rem;
            flex-wrap: wrap;
        }

        .ref-count {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.55rem;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            font-size: 0.75rem;
            font-family: 'Fira Code', monospace;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .ref-chip {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.25rem 0.6rem;
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            text-decoration: none;
            font-size: 0.8rem;
            color: var(--text-secondary);
            transition: all 0.2s;
            white-space: nowrap;
        }

        .ref-chip:hover {
            border-color: var(--border-glow);
            color: var(--text-primary);
        }

        .ref-chip.release {
            color: var(--category-color);
        }

        .ref-chip.changelog {
            color: var(--text-secondary);
        }

        .modal-refs {
            margin-top: 1.25rem;
            padding: 1rem;
            background: rgba(0,0,0,0.25);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
        }

        .modal-refs-title {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }

        .modal-refs-links {
            display: flex;
            gap: 0.6rem;
            flex-wrap: wrap;
        }

        /* Architecture Section */
        .architecture-diagram {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 2rem;
            margin-top: 3rem;
        }

        .diagram-title {
            font-family: 'Inter', sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .diagram-content {
            font-family: 'Fira Code', monospace;
            font-size: 0.75rem;
            line-height: 1.5;
            color: var(--text-secondary);
            overflow-x: auto;
            white-space: pre;
            padding: 1rem;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }

        /* Tech Stack Section */
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .tech-category {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .tech-category-title {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        .tech-items {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tech-item {
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            font-size: 0.85rem;
            color: var(--text-secondary);
            transition: all 0.3s;
        }

        .tech-item:hover {
            background: rgba(255,255,255,0.08);
            color: var(--text-primary);
        }

        /* Timeline Section */
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 3rem auto 0;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--accent-primary);
            opacity: 0.5;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 2rem;
            padding-left: 2rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -0.45rem;
            top: 0.5rem;
            width: 12px;
            height: 12px;
            background: var(--bg-deep);
            border: 2px solid var(--text-secondary);
            border-radius: 50%;
        }

        .timeline-date {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .timeline-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .timeline-desc {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 4rem 2rem;
            border-top: 1px solid var(--border-subtle);
            margin-top: 4rem;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .footer-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .footer-link:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-primary);
            transform: translateY(-2px);
        }

        .footer-copyright {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-stats {
                gap: 2rem;
            }

            .category-header {
                flex-direction: column;
            }

            .category-badges {
                margin-top: 1rem;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-deep);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bg-card);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--bg-card-hover);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-card);
            border: 1px solid var(--border-glow);
            border-radius: 20px;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 2rem;
            position: relative;
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255,255,255,0.1);
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: rgba(255,255,255,0.2);
            color: var(--text-primary);
        }

        .modal-title {
            font-family: 'Inter', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 1.5rem;
            padding-right: 3rem;
        }

        .modal-diagram {
            font-family: 'Fira Code', monospace;
            font-size: 0.65rem;
            line-height: 1.4;
            color: var(--text-secondary);
            background: rgba(0,0,0,0.4);
            border-radius: 12px;
            padding: 1.5rem;
            overflow-x: auto;
            white-space: pre;
            margin-bottom: 1.5rem;
        }

        .modal-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .modal-table th,
        .modal-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-subtle);
        }

        .modal-table th {
            color: var(--accent-primary);
            font-weight: 600;
            background: rgba(229,168,59,0.1);
        }

        .modal-table td {
            color: var(--text-secondary);
        }

        .modal-table tr:hover td {
            background: rgba(255,255,255,0.03);
        }

        /* Clickable Achievement */
        .achievement.clickable {
            cursor: pointer;
            transition: all 0.3s;
        }

        .achievement.clickable:hover {
            background: rgba(229,168,59,0.15);
            border-color: var(--border-glow);
            transform: translateX(5px);
        }

        .achievement.clickable::after {
            content: 'üîç';
            margin-left: auto;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .achievement.clickable:hover::after {
            opacity: 1;
        }

        /* Language classes */
        .lang-en { display: none; }
        body.en .lang-ko { display: none; }
        body.en .lang-en { display: block; }
        body.en .lang-en-inline { display: inline; }
        body.en .lang-ko-inline { display: none; }
        .lang-ko-inline { display: inline; }
        .lang-en-inline { display: none; }

        /* Development Flow Diagram (Option 3 style) */
        .dev-flow-diagram {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .flow-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .flow-stages {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }
        .flow-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem;
            border-radius: 10px;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-subtle);
            min-width: 90px;
            transition: transform 0.2s, border-color 0.2s;
        }
        .flow-stage:hover {
            transform: translateY(-2px);
            border-color: rgba(229,168,59,0.5);
        }
        .flow-stage.client { border-color: rgba(52, 211, 153, 0.4); }
        .flow-stage.edge { border-color: rgba(96, 165, 250, 0.4); }
        .flow-stage.auth { border-color: rgba(251, 191, 36, 0.4); }
        .flow-stage.service { border-color: rgba(167, 139, 250, 0.4); }
        .flow-stage.integration { border-color: rgba(248, 113, 113, 0.4); }
        .flow-stage.llm { border-color: rgba(34, 211, 238, 0.4); }
        .stage-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .stage-content {
            text-align: center;
        }
        .stage-title {
            font-weight: 600;
            font-size: 0.8rem;
            color: var(--text-primary);
        }
        .stage-desc {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }
        .flow-connector {
            color: var(--text-muted);
            font-size: 1.2rem;
            font-weight: bold;
        }
        .flow-observability {
            background: var(--accent-subtle);
            border: 1px dashed rgba(229,168,59,0.4);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }
        .obs-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
        }
        .obs-tools {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        .obs-tool {
            padding: 0.25rem 0.75rem;
            background: rgba(229,168,59,0.15);
            border-radius: 4px;
            font-size: 0.75rem;
            color: var(--accent-primary);
        }

        /* LLM Pipeline Section */
        .llm-pipeline-section {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        .llm-pipeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .llm-pipeline-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0;
        }
        .llm-pipeline-credit {
            font-size: 0.8rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .credit-link {
            color: var(--accent-primary);
            text-decoration: none;
            font-weight: 500;
        }
        .credit-link:hover {
            text-decoration: underline;
        }
        .llm-pipeline-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
        }
        .pipeline-stage {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-subtle);
            min-width: 100px;
        }
        .pipeline-stage.vision { border-color: rgba(59,130,246,0.4); }
        .pipeline-stage.rule { border-color: rgba(245,158,11,0.4); }
        .pipeline-stage.answer { border-color: rgba(16,185,129,0.4); }
        .pipeline-stage.reward { border-color: rgba(236,72,153,0.4); }
        .pipeline-icon { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .pipeline-name { font-weight: 600; font-size: 0.9rem; color: var(--text-primary); }
        .pipeline-model { font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem; }
        .pipeline-arrow { color: var(--text-muted); font-size: 1.2rem; font-weight: bold; }
        .llm-pipeline-specs {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        .spec-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }
        .spec-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }
        .spec-value {
            font-size: 0.85rem;
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Pipeline Subsection */
        .pipeline-subsection {
            background: rgba(255,255,255,0.02);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 1.25rem;
            margin-bottom: 1rem;
        }
        .subsection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .subsection-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        .async-sse-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        .async-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            background: rgba(255,255,255,0.03);
            border: 1px solid rgba(229,168,59,0.3);
            min-width: 90px;
        }
        .async-icon { font-size: 1.25rem; margin-bottom: 0.25rem; }
        .async-name { font-weight: 600; font-size: 0.8rem; color: var(--text-primary); }
        .async-desc { font-size: 0.65rem; color: var(--text-muted); margin-top: 0.15rem; }
        .pipeline-detail {
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 1rem;
            padding-top: 0.75rem;
            border-top: 1px dashed var(--border-subtle);
        }

        /* Team Section in Footer */
        .footer-team {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border-subtle);
        }
        .footer-team-title {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
            text-align: center;
        }
        .team-members {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }
        .team-member {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }
        .team-role {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }
        .team-link {
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.85rem;
        }
        .team-link:hover {
            color: var(--accent-primary);
        }

        /* Methodology Section */
        .methodology-diagram {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            padding: 2.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Circular Flow Container */
        .cycle-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            aspect-ratio: 1;
            margin: 0 auto;
        }

        /* Animated Circular Path */
        .cycle-path {
            position: absolute;
            inset: 40px;
            border: 2px dashed rgba(229,168,59,0.3);
            border-radius: 50%;
        }

        /* Animated dot traveling perfect circle using offset-path */
        .cycle-dot {
            position: absolute;
            width: 16px;
            height: 16px;
            background: var(--accent-primary);
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(229,168,59,0.9), 0 0 40px rgba(229,168,59,0.5);
            /* Perfect circular path using offset-path */
            offset-path: circle(50% at 50% 50%);
            offset-rotate: 0deg;
            animation: orbit-circle 5s linear infinite, 
                       orbit-effects 5s ease-in-out infinite;
            top: 50%;
            left: 50%;
            margin-top: -8px;
            margin-left: -8px;
        }

        /* Motion blur trail - rotates with the dot */
        .cycle-dot::before {
            content: '';
            position: absolute;
            width: 40px;
            height: 10px;
            background: linear-gradient(90deg, rgba(229,168,59,0), rgba(229,168,59,0.7), rgba(229,168,59,0));
            border-radius: 50%;
            top: 3px;
            right: 16px;
            filter: blur(3px);
            transform-origin: 48px 5px;
            animation: trail-rotate 5s linear infinite,
                       trail-stretch 5s ease-in-out infinite;
        }
        
        .cycle-dot::after {
            content: '';
            position: absolute;
            width: 55px;
            height: 6px;
            background: linear-gradient(90deg, rgba(201,138,31,0), rgba(201,138,31,0.4), rgba(201,138,31,0));
            border-radius: 50%;
            top: 5px;
            right: 16px;
            filter: blur(5px);
            transform-origin: 63px 3px;
            animation: trail-rotate 5s linear infinite,
                       trail-stretch 5s ease-in-out infinite 0.05s;
        }

        /* Circular motion: accelerate from Developer, decelerate only at Observability‚ÜíDeveloper */
        @keyframes orbit-circle {
            /* Developer - START ACCELERATING */
            0% { offset-distance: 0%; }
            5% { offset-distance: 5%; }      /* Quick start */
            10% { offset-distance: 12%; }    /* Accelerating */
            /* Agent - FAST */
            15% { offset-distance: 20%; }
            20% { offset-distance: 28%; }    /* Fast */
            25% { offset-distance: 36%; }    /* Very fast */
            /* Cluster - FASTEST */
            30% { offset-distance: 44%; }
            35% { offset-distance: 52%; }    /* Maximum speed */
            40% { offset-distance: 58%; }
            /* After Cluster - STILL FAST */
            50% { offset-distance: 68%; }
            55% { offset-distance: 74%; }
            /* Observability - STARTING TO SLOW */
            65% { offset-distance: 82%; }
            70% { offset-distance: 86%; }    /* Slowing */
            /* Approaching Developer - DECELERATION ZONE */
            80% { offset-distance: 91%; }    /* Slower */
            88% { offset-distance: 95%; }    /* Much slower */
            94% { offset-distance: 98%; }    /* Nearly stopping */
            100% { offset-distance: 100%; }  /* Back to Developer */
        }

        /* Dynamic effects: scale and glow changes with position */
        @keyframes orbit-effects {
            /* Developer (top) - slow zone, large glow */
            0%, 100% { 
                transform: scale(1.4);
                box-shadow: 0 0 35px rgba(229,168,59,1), 0 0 70px rgba(229,168,59,0.6);
            }
            /* Accelerating phase */
            12.5% {
                transform: scale(1.2);
                box-shadow: 0 0 25px rgba(229,168,59,0.9), 0 0 50px rgba(229,168,59,0.5);
            }
            /* Agent (right) - medium speed */
            25% { 
                transform: scale(1);
                box-shadow: 0 0 30px rgba(229,168,59,1), 0 0 60px rgba(229,168,59,0.6);
            }
            /* Maximum speed zone */
            37.5% {
                transform: scale(0.8);
                box-shadow: 0 0 20px rgba(201,138,31,0.8), 0 0 40px rgba(201,138,31,0.4);
            }
            /* Cluster (bottom) - fastest, smallest */
            50% { 
                transform: scale(0.7);
                box-shadow: 0 0 40px rgba(201,138,31,1), 0 0 80px rgba(201,138,31,0.6);
            }
            /* Decelerating phase */
            62.5% {
                transform: scale(0.85);
                box-shadow: 0 0 25px rgba(244,197,106,0.8), 0 0 50px rgba(244,197,106,0.4);
            }
            /* Observability (left) - slowing down */
            75% { 
                transform: scale(1.1);
                box-shadow: 0 0 35px rgba(244,197,106,1), 0 0 70px rgba(244,197,106,0.6);
            }
            /* Final deceleration to Developer */
            87.5% {
                transform: scale(1.3);
                box-shadow: 0 0 30px rgba(229,168,59,0.9), 0 0 60px rgba(229,168,59,0.5);
            }
        }

        /* Trail follows the dot rotation */
        @keyframes trail-rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Trail stretches during high speed */
        @keyframes trail-stretch {
            0%, 100% { width: 25px; opacity: 0.4; }
            12.5% { width: 35px; opacity: 0.5; }
            25% { width: 45px; opacity: 0.6; }
            37.5%, 62.5% { width: 70px; opacity: 0.9; }
            50% { width: 80px; opacity: 1; }
            75% { width: 40px; opacity: 0.5; }
            87.5% { width: 30px; opacity: 0.4; }
        }

        /* Node positions around the circle */
        .cycle-node {
            position: absolute;
            width: 120px;
            text-align: center;
            transform: translate(-50%, -50%);
            z-index: 2;
        }

        .cycle-node.developer { top: 0; left: 50%; }
        .cycle-node.agent { top: 50%; left: 100%; }
        .cycle-node.cluster { top: 100%; left: 50%; }
        .cycle-node.observability { top: 50%; left: 0; }

        .node-card {
            background: var(--bg-card);
            border: 2px solid var(--border-subtle);
            border-radius: 16px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .node-card:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        .cycle-node.developer .node-card { border-color: var(--accent-primary); }
        .cycle-node.developer .node-card:hover { box-shadow: 0 0 30px rgba(229,168,59,0.4); }
        .cycle-node.agent .node-card { border-color: var(--accent-light); }
        .cycle-node.agent .node-card:hover { box-shadow: 0 0 30px rgba(244,197,106,0.4); }
        .cycle-node.cluster .node-card { border-color: var(--accent-dark); }
        .cycle-node.cluster .node-card:hover { box-shadow: 0 0 30px rgba(201,138,31,0.4); }
        .cycle-node.observability .node-card { border-color: var(--accent-light); }
        .cycle-node.observability .node-card:hover { box-shadow: 0 0 30px rgba(244,197,106,0.4); }

        .node-icon { font-size: 2rem; margin-bottom: 0.5rem; }
        .node-title { font-weight: 600; font-size: 0.85rem; color: var(--text-primary); }
        .node-subtitle { font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem; }

        /* Tooltip on hover */
        .node-tooltip {
            position: absolute;
            background: rgba(15,15,20,0.95);
            border: 1px solid var(--border-glow);
            border-radius: 12px;
            padding: 1rem;
            width: 200px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 100;
            font-size: 0.8rem;
            line-height: 1.4;
            color: var(--text-secondary);
        }

        .cycle-node.developer .node-tooltip,
        .cycle-node.cluster .node-tooltip { top: 100%; left: 50%; transform: translateX(-50%); margin-top: 10px; }
        .cycle-node.agent .node-tooltip { top: 50%; right: 100%; transform: translateY(-50%); margin-right: 10px; left: auto; }
        .cycle-node.observability .node-tooltip { top: 50%; left: 100%; transform: translateY(-50%); margin-left: 10px; }

        .node-card:hover .node-tooltip {
            opacity: 1;
            visibility: visible;
        }

        /* Directional arrows between nodes */
        .cycle-arrows {
            position: absolute;
            inset: 0;
            pointer-events: none;
        }

        .cycle-arrow {
            position: absolute;
            font-size: 1.2rem;
            color: rgba(229,168,59,0.5);
        }

        .cycle-arrow.top-right { 
            top: 18%; right: 18%; 
            transform: rotate(45deg);
            animation: arrow-pulse-1 6s ease-in-out infinite;
        }
        .cycle-arrow.right-bottom { 
            bottom: 18%; right: 18%; 
            transform: rotate(135deg);
            animation: arrow-pulse-2 6s ease-in-out infinite;
        }
        .cycle-arrow.bottom-left { 
            bottom: 18%; left: 18%; 
            transform: rotate(225deg);
            animation: arrow-pulse-3 6s ease-in-out infinite;
        }
        .cycle-arrow.left-top { 
            top: 18%; left: 18%; 
            transform: rotate(315deg);
            animation: arrow-pulse-4 6s ease-in-out infinite;
        }

        /* Feedback Flow: Observability ‚Üí Agent (keyframes curved arc) */
        .feedback-flow {
            position: absolute;
            top: 48%;
            left: 12%;
            width: 76%;
            height: 100px;
            pointer-events: none;
        }

        .feedback-svg {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: visible;
        }

        .feedback-arc {
            fill: none;
            stroke: url(#feedbackGradient);
            stroke-width: 2.5;
            stroke-dasharray: 8 5;
            opacity: 0.6;
        }

        /* Animated packets using keyframes (Bezier curve simulation) */
        .feedback-packet {
            position: absolute;
            font-size: 1.1rem;
            top: 0;
            filter: drop-shadow(0 0 10px rgba(245,158,11,0.9));
            will-change: left, top, opacity;
        }

        .feedback-packet:nth-of-type(1) {
            animation: packet-arc-move 4s linear infinite;
        }
        .feedback-packet:nth-of-type(2) {
            animation: packet-arc-move 4s linear infinite 1.3s;
        }
        .feedback-packet:nth-of-type(3) {
            animation: packet-arc-move 4s linear infinite 2.6s;
        }

        /* Smooth quadratic bezier curve animation (south-facing arc) */
        @keyframes packet-arc-move {
            0% {
                left: 0%;
                top: 5px;
                transform: scale(0.6);
                opacity: 0;
                filter: drop-shadow(0 0 8px rgba(245,158,11,1));
            }
            5% {
                left: 5%;
                top: 15px;
                transform: scale(0.8);
                opacity: 0.7;
            }
            15% {
                left: 15%;
                top: 38px;
                transform: scale(1);
                opacity: 1;
            }
            30% {
                left: 30%;
                top: 62px;
                transform: scale(1.15);
            }
            50% {
                left: 50%;
                top: 75px;
                transform: scale(1.25);
                filter: drop-shadow(0 0 16px rgba(255,200,80,1));
            }
            70% {
                left: 70%;
                top: 62px;
                transform: scale(1.15);
            }
            85% {
                left: 85%;
                top: 38px;
                transform: scale(1);
                opacity: 1;
            }
            95% {
                left: 95%;
                top: 15px;
                transform: scale(0.8);
                opacity: 0.7;
            }
            100% {
                left: 100%;
                top: 5px;
                transform: scale(0.6);
                opacity: 0;
                filter: drop-shadow(0 0 8px rgba(229,168,59,1));
            }
        }

        /* Labels at endpoints */
        .feedback-label {
            position: absolute;
            top: -5px;
            font-size: 0.6rem;
            font-weight: 500;
            color: rgba(255,255,255,0.8);
            white-space: nowrap;
            letter-spacing: 0.02em;
        }
        .feedback-label.from {
            left: -5px;
            color: rgba(245,158,11,1);
        }
        .feedback-label.to {
            right: -5px;
            color: rgba(229,168,59,1);
        }

        /* Staggered arrow animations synced with dot */
        @keyframes arrow-pulse-1 {
            0%, 20% { opacity: 0.3; color: rgba(229,168,59,0.4); }
            10%, 15% { opacity: 1; color: rgba(229,168,59,1); }
        }
        @keyframes arrow-pulse-2 {
            20%, 45% { opacity: 0.3; color: rgba(229,168,59,0.4); }
            30%, 40% { opacity: 1; color: rgba(229,168,59,1); }
        }
        @keyframes arrow-pulse-3 {
            45%, 70% { opacity: 0.3; color: rgba(229,168,59,0.4); }
            55%, 65% { opacity: 1; color: rgba(229,168,59,1); }
        }
        @keyframes arrow-pulse-4 {
            70%, 100% { opacity: 0.3; color: rgba(229,168,59,0.4); }
            80%, 95% { opacity: 1; color: rgba(229,168,59,1); }
        }

        /* Center label */
        .cycle-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            background: rgba(229,168,59,0.1);
            border: 2px solid rgba(229,168,59,0.5);
            border-radius: 50%;
            width: 140px;
            height: 140px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .cycle-center:hover {
            transform: translate(-50%, -50%) scale(1.08);
            border-color: var(--accent-primary);
            box-shadow: 0 0 30px rgba(229,168,59,0.5);
            background: rgba(229,168,59,0.15);
        }

        .cycle-center-icon { font-size: 1.5rem; margin-bottom: 0.25rem; }
        .cycle-center-text { font-size: 0.75rem; color: var(--accent-primary); font-weight: 600; }
        .cycle-center-sub { font-size: 0.65rem; color: var(--text-muted); }

        /* Single Source of Truth */
        .methodology-ssot {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .ssot-title {
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            color: #3b82f6;
        }

        .ssot-flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .ssot-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255,255,255,0.05);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.85rem;
        }

        .ssot-icon {
            font-size: 1rem;
        }

        .ssot-arrow {
            color: var(--text-muted);
            font-size: 1.2rem;
        }

        /* Development Steps - Card Style */
        .methodology-steps-card {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 4rem;
        }

        .steps-title {
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            color: #10b981;
        }

        .methodology-steps {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .step-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 0.75rem 1rem;
            transition: all 0.3s;
        }

        .step-item:hover {
            background: rgba(255,255,255,0.06);
        }

        .step-item.feedback {
            background: rgba(139, 92, 246, 0.15);
            border-color: rgba(139, 92, 246, 0.3);
        }

        .step-number {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--accent-primary);
            border-radius: 50%;
            font-family: 'Inter', sans-serif;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .step-content {
            text-align: left;
        }

        .step-title {
            font-weight: 600;
            font-size: 0.85rem;
        }

        .step-desc {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .step-arrow {
            color: var(--text-muted);
            font-size: 1.2rem;
        }

        /* Self-RAG Knowledge Base */
        .methodology-rag {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .rag-title {
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            color: var(--accent-primary);
        }

        .rag-items {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .rag-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            background: rgba(255,255,255,0.05);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            min-width: 120px;
        }

        .rag-icon {
            font-size: 1.5rem;
        }

        .rag-label {
            font-weight: 600;
            font-size: 0.85rem;
        }

        .rag-desc {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        /* Recursive Self-Improvement */
        .methodology-feedback {
            text-align: center;
        }

        .feedback-loop {
            display: inline-block;
            background: linear-gradient(90deg, rgba(229,168,59,0.2), rgba(229,168,59,0.2));
            border: 1px solid rgba(229,168,59,0.3);
            padding: 0.75rem 2rem;
            border-radius: 100px;
            font-size: 0.9rem;
            font-weight: 500;
            animation: glow-pulse 3s infinite;
        }

        @keyframes glow-pulse {
            0%, 100% { box-shadow: 0 0 10px rgba(229,168,59,0.2); }
            50% { box-shadow: 0 0 20px rgba(229,168,59,0.4); }
        }

        @media (max-width: 768px) {
            .cycle-container {
                max-width: 350px;
            }
            
            .node-card {
                padding: 0.75rem;
            }
            
            .node-icon {
                font-size: 1.5rem;
            }
            
            .node-title {
                font-size: 0.7rem;
            }
            
            .node-subtitle {
                display: none;
            }
            
            .cycle-center {
                width: 100px;
                height: 100px;
            }
            
            .node-tooltip {
                display: none;
            }

            .methodology-steps {
                flex-direction: column;
            }

            .step-arrow {
                transform: rotate(90deg);
            }

            .domain-showcase {
                grid-template-columns: repeat(2, 1fr);
            }

            .domain-card {
                padding: 1rem;
            }

            .domain-icon {
                font-size: 1.5rem;
            }

            .domain-title {
                font-size: 0.9rem;
            }
        }

        /* Domain Showcase Styles */
        .domain-showcase {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .domain-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.25rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .domain-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--ec-primary);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .domain-card:hover {
            transform: translateY(-4px);
            border-color: var(--ec-primary);
            box-shadow: 0 8px 32px rgba(91, 163, 163, 0.3);
        }

        .domain-card:hover::before {
            opacity: 1;
        }

        .domain-icon {
            font-size: 2rem;
            margin-bottom: 0.75rem;
        }

        .domain-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.5rem;
            text-align: center;
        }

        .domain-type {
            display: flex;
            gap: 0.25rem;
            margin-bottom: 0.5rem;
        }

        .domain-type-badge {
            font-size: 0.65rem;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            background: var(--domain-color, var(--primary));
            color: white;
            font-weight: 500;
        }

        .domain-type-badge.worker {
            background: var(--warning);
        }

        .domain-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-align: center;
            line-height: 1.4;
        }

        /* Domain Modal Styles */
        .domain-modal-content {
            max-width: 900px;
        }

        .domain-demo-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .domain-demo-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .domain-gif-link {
            display: block;
            text-decoration: none;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border-radius: 8px;
        }

        .domain-gif-link:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 20px rgba(91, 163, 163, 0.3);
        }

        .domain-gif-link:hover .domain-gif-container {
            border-color: var(--primary);
        }

        .domain-gif-container {
            width: 100%;
            max-height: 400px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            transition: border-color 0.2s ease;
        }

        .domain-gif-container img {
            max-width: 100%;
            max-height: 400px;
            object-fit: contain;
        }

        .domain-gif-placeholder {
            text-align: center;
            color: var(--text-muted);
        }

        .domain-gif-placeholder-icon {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        .domain-architecture {
            margin-top: 1.5rem;
        }

        .domain-flow {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .domain-flow-item {
            padding: 0.5rem 1rem;
            background: var(--domain-color, var(--primary));
            color: white;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .domain-flow-arrow {
            color: var(--text-muted);
            font-size: 1.2rem;
        }

        .domain-details {
            margin-top: 1.5rem;
        }

        .domain-detail-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .domain-detail-item {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .domain-detail-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .domain-detail-value {
            font-size: 0.9rem;
            color: var(--text);
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .domain-detail-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-logo">Eco¬≤</div>
        <ul class="nav-links">
            <li><a href="#overview">Overview</a></li>
            <li><a href="#methodology">Methodology</a></li>
            <li><a href="#categories">Categories</a></li>
            <li><a href="#architecture">Architecture</a></li>
            <li><a href="#tech">Tech Stack</a></li>
            <li><a href="#timeline">Timeline</a></li>
        </ul>
        <div class="lang-toggle">
            <button class="lang-btn active" onclick="setLang('ko')">ÌïúÍµ≠Ïñ¥</button>
            <button class="lang-btn" onclick="setLang('en')">EN</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="overview">
        <div class="hero-badge">
            <span class="lang-ko">üèÜ 2025 AI ÏÉàÏãπÌÜ§ Ïö∞ÏàòÏÉÅ</span>
            <span class="lang-en">üèÜ 2025 AI SeSACTHON Excellence Award</span>
        </div>
        <h1 class="hero-title">
            <span class="eco">Ïù¥ÏΩîÏóêÏΩî(Eco¬≤)</span><br>
            <span class="lang-ko">Backend Portfolio</span>
            <span class="lang-en">Backend Portfolio</span>
        </h1>
        <p class="hero-subtitle">
            <span class="lang-ko">Multi-LLM Agent Í∏∞Î∞ò ÎπÑÎèôÍ∏∞ Î∂ÑÏÇ∞ ÌÅ¥Îü¨Ïä§ÌÑ∞Î°ú<br>ÏÑúÎπÑÏä§ ÏàòÏ§ÄÏùò Ï†úÌíà ÏôÑÏÑ±ÎèÑÎ•º Î™©ÌëúÎ°ú Ìïú Í≥†ÎèÑÌôî Ïó¨Ï†ï</span>
            <span class="lang-en">Evolution journey toward production-ready quality<br>with Multi-LLM Agent based async distributed cluster</span>
        </p>
        <div class="hero-stats">
            <div class="hero-stat" style="cursor: pointer;" onclick="openModal('modal-cluster-nodes')">
                <div class="hero-stat-value" title="ÌÅ¥Îü¨Ïä§ÌÑ∞ ÎÖ∏Îìú ÏãúÍ∞ÅÌôî ‚Üí">24</div>
                <div class="hero-stat-label">
                    <span class="lang-ko">ÌÅ¥Îü¨Ïä§ÌÑ∞ ÎÖ∏Îìú üìä</span>
                    <span class="lang-en">Cluster Nodes üìä</span>
                </div>
            </div>
            <div class="hero-stat">
                <a href="https://snapshots.raintank.io/dashboard/snapshot/JbEhJRXD1vCt77ZOfCxy9N72wXJ3ZyKj?orgId=0&refresh=10s" target="_blank" rel="noopener" class="hero-stat-value" style="text-decoration: none; color: inherit; cursor: pointer;" title="Grafana Snapshot ‚Üí">2,500 VU</a>
                <div class="hero-stat-label">
                    <span class="lang-ko">1,477 RPS Baseline üìä</span>
                    <span class="lang-en">1,477 RPS Baseline üìä</span>
                </div>
            </div>
            <div class="hero-stat">
                <a href="https://snapshots.raintank.io/dashboard/snapshot/9LbgErvCS0N94vDc9NwO15kVAk7eLzLM" target="_blank" rel="noopener" class="hero-stat-value" style="text-decoration: none; color: inherit; cursor: pointer;" title="Grafana Snapshot ‚Üí">300 VU</a>
                <div class="hero-stat-label">
                    <span class="lang-ko">SLA 528 RPM (Scan SSE) üìä</span>
                    <span class="lang-en">SLA 528 RPM (Scan SSE) üìä</span>
                </div>
            </div>
            <div class="hero-stat">
                <a href="https://rooftopsnow.tistory.com/" target="_blank" rel="noopener" class="hero-stat-value" style="text-decoration: none; color: inherit; cursor: pointer;">100+ ¬∑ 76+</a>
                <div class="hero-stat-label">
                    <span class="lang-ko">Í∞úÎ∞ú Í∏∞Î°ù ¬∑ Knowledge Base</span>
                    <span class="lang-en">Dev Logs ¬∑ Knowledge Base</span>
                </div>
            </div>
            <div class="hero-stat">
                <div class="hero-stat-value"><a href="https://github.com/eco2-team/backend" target="_blank" style="color: inherit; text-decoration: none; border-bottom: 1px dashed currentColor;" id="dev-days">-ÏùºÏ∞®</a></div>
                <div class="hero-stat-label">
                    <span class="lang-ko">Í∞úÎ∞ú Í∏∞Í∞Ñ (10.31~) üñ±Ô∏è</span>
                    <span class="lang-en">Development (10.31~) üñ±Ô∏è</span>
                </div>
            </div>
            <div class="hero-stat">
                <div class="hero-stat-value"><a href="https://frontend.dev.growbin.app" target="_blank" style="color: inherit; text-decoration: none; border-bottom: 1px dashed currentColor;" id="service-days">-ÏùºÏ∞®</a></div>
                <div class="hero-stat-label">
                    <span class="lang-ko">ÏÑúÎπÑÏä§ Í∏∞Í∞Ñ (12.02~) üñ±Ô∏è</span>
                    <span class="lang-en">Live Service (12.02~) üñ±Ô∏è</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Agent-Driven Development Section -->
    <section class="section" id="methodology">
        <div class="section-header">
            <div class="section-number">01</div>
            <h2 class="section-title">
                <span class="lang-ko">Agent-Driven Development</span>
                <span class="lang-en">Agent-Driven Development</span>
            </h2>
            <p class="section-desc">
                <span class="lang-ko">AnthropicÏùò Claude Code Í∞úÎ∞úÎ°†ÏùÑ Ï†ÅÏö©Ìïú Context-First DevelopmentÏûÖÎãàÎã§. Íµ¨Ï°∞ÌôîÎêú Î¨∏ÏÑú(foundations/plans/reports)ÏôÄ 27Í∞ú SkillsÍ∞Ä AgentÏùò Self-RAG Ïª®ÌÖçÏä§Ìä∏Î°ú Ï∂ïÏ†ÅÎêòÎ©∞, Í∞Å ÏÑ∏ÏÖòÏùò Í≤∞Í≥ºÍ∞Ä Îã§Ïùå ÏÑ∏ÏÖòÏùò Ïª®ÌÖçÏä§Ìä∏Í∞Ä ÎêòÎäî Ïû¨Í∑ÄÏ†Å Í∞úÏÑ† Î£®ÌîÑÎ•º ÌòïÏÑ±Ìï©ÎãàÎã§. 25-ÎÖ∏Îìú Î∂ÑÏÇ∞ ÌÅ¥Îü¨Ïä§ÌÑ∞Îäî AgentÍ∞Ä Bash ÎèÑÍµ¨Î°ú ÏßÅÏ†ë Ï†ëÍ∑ºÌïòÎäî Runtime EnvironmentÎ°ú, Research ‚Üí Design ‚Üí Implement ‚Üí Deploy ‚Üí Report ÏÇ¨Ïù¥ÌÅ¥ÏùÑ ÌÜµÌï¥ Í∞úÎ∞úÏûêÏôÄ AgentÍ∞Ä Ìï®Íªò ÏÑ±Ïû•Ìï©ÎãàÎã§.</span>
                <span class="lang-en">Context-First Development applying Anthropic's Claude Code methodology. Structured documents (foundations/plans/reports) and 27 Skills accumulate as Agent's Self-RAG context, forming a recursive improvement loop where each session's results become the next session's context. The 24-node distributed cluster serves as a Runtime Environment that Agent directly accesses via Bash tools, evolving together with the developer through the Research ‚Üí Design ‚Üí Implement ‚Üí Deploy ‚Üí Report cycle.</span>
            </p>
        </div>

        <div class="methodology-diagram">
            <!-- Top Row: Actors -->
            <!-- Recursive Self-Improvement Cycle -->
            <div class="cycle-container">
                <!-- Animated circular path -->
                <div class="cycle-path">
                    <div class="cycle-dot"></div>
                </div>

                <!-- Directional arrows -->
                <div class="cycle-arrows">
                    <div class="cycle-arrow top-right">‚û§</div>
                    <div class="cycle-arrow right-bottom">‚û§</div>
                    <div class="cycle-arrow bottom-left">‚û§</div>
                    <div class="cycle-arrow left-top">‚û§</div>
                </div>

                <!-- Feedback Flow: Observability ‚Üí Agent (CSS offset-path curved arc) -->
                <div class="feedback-flow">
                    <!-- SVG for the curved dashed path visualization -->
                    <svg class="feedback-svg" viewBox="0 0 380 100" preserveAspectRatio="none">
                        <defs>
                            <linearGradient id="feedbackGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:rgba(245,158,11,0.8)"/>
                                <stop offset="50%" style="stop-color:rgba(255,180,60,0.7)"/>
                                <stop offset="100%" style="stop-color:rgba(229,168,59,0.8)"/>
                            </linearGradient>
                        </defs>
                        <!-- ÎÇ®Ï™ΩÏúºÎ°ú Î≥ºÎ°ùÌïú Í≥°ÏÑ† (ÏïÑÎûòÎ°ú ÍπäÍ≤å ÌúòÏñ¥ÏßÄÎäî Íµ¨ ÌòïÌÉú) -->
                        <path class="feedback-arc" d="M 0,10 Q 190,120 380,10"/>
                    </svg>
                    <!-- CSS offset-path animated packets -->
                    <div class="feedback-packet">üìä</div>
                    <div class="feedback-packet">üìà</div>
                    <div class="feedback-packet">üîî</div>
                    <!-- Labels -->
                    <div class="feedback-label from">
                        <span class="lang-ko">Î©îÌä∏Î¶≠</span>
                        <span class="lang-en">Metrics</span>
                    </div>
                    <div class="feedback-label to">
                        <span class="lang-ko">Ïª®ÌÖçÏä§Ìä∏ Ï£ºÏûÖ</span>
                        <span class="lang-en">Context Injection</span>
                    </div>
                </div>

                <!-- Center - Clickable -->
                <div class="cycle-center clickable" onclick="openModal('modal-context-first')" style="cursor: pointer;">
                    <div class="cycle-center-icon">üîÅ</div>
                    <div class="cycle-center-text">Recursive Self-Improvement</div>
                    <div class="cycle-center-sub">
                        <span class="lang-ko">üí° ÌÅ¥Î¶≠ÌïòÏó¨ ÏÉÅÏÑ∏ Î≥¥Í∏∞</span>
                        <span class="lang-en">üí° Click for details</span>
                    </div>
                </div>

                <!-- Developer Node (Top) - Clickable -->
                <div class="cycle-node developer clickable" data-modal="modal-developer-profile">
                    <div class="node-card" style="cursor: pointer;">
                        <div class="node-icon">üßë‚Äçüíª</div>
                        <div class="node-title">Developer</div>
                        <div class="node-subtitle">
                            <span class="lang-ko">ÏÑ§Í≥Ñ & Î¶¨Î∑∞</span>
                            <span class="lang-en">Design & Review</span>
                        </div>
                        <div class="node-tooltip">
                            <span class="lang-ko">üí° ÌÅ¥Î¶≠ÌïòÏó¨ ÌîÑÎ°úÌïÑ Î≥¥Í∏∞<br>Î•òÏßÄÌôò | Backend Engineer<br>FastAPI, LangGraph, Celery, Taskiq, RabbitMQ, Redis, PostgreSQL</span>
                            <span class="lang-en">üí° Click for profile<br>Jihwan Ryu | Backend Engineer<br>FastAPI, LangGraph, Celery, Taskiq, RabbitMQ, Redis, PostgreSQL</span>
                        </div>
                    </div>
                </div>

                <!-- Agent Node (Right) - Clickable -->
                <div class="cycle-node agent clickable" data-modal="modal-ai-agent">
                    <div class="node-card" style="cursor: pointer;">
                        <div class="node-icon">ü§ñ</div>
                        <div class="node-title">AI Agent</div>
                        <div class="node-subtitle">
                            <span class="lang-ko">Íµ¨ÌòÑ & ÎîîÎ≤ÑÍπÖ</span>
                            <span class="lang-en">Implement & Debug</span>
                        </div>
                        <div class="node-tooltip">
                            <span class="lang-ko">üí° ÌÅ¥Î¶≠ÌïòÏó¨ ÏÉÅÏÑ∏ Î≥¥Í∏∞<br>Cursor + Claude Code<br>27Í∞ú Skills Í∏∞Î∞ò</span>
                            <span class="lang-en">üí° Click for details<br>Cursor + Claude Code<br>27 Skills based</span>
                        </div>
                    </div>
                </div>

                <!-- Cluster Node (Bottom) - Clickable -->
                <div class="cycle-node cluster clickable" data-modal="modal-cluster-world">
                    <div class="node-card" style="cursor: pointer;">
                        <div class="node-icon">‚ò∏Ô∏è</div>
                        <div class="node-title">Cluster</div>
                        <div class="node-subtitle">
                            <span class="lang-ko">Runtime Environment</span>
                            <span class="lang-en">Runtime Environment</span>
                        </div>
                        <div class="node-tooltip">
                            <span class="lang-ko">üí° ÌÅ¥Î¶≠ÌïòÏó¨ ÏÉÅÏÑ∏ Î≥¥Í∏∞<br>24-Node K8s + Self-RAG<br>Context-First Development</span>
                            <span class="lang-en">üí° Click for details<br>24-Node K8s + Self-RAG<br>Context-First Development</span>
                        </div>
                    </div>
                </div>

                <!-- Observability Node (Left) -->
                <div class="cycle-node observability clickable" data-modal="modal-obs-cycle">
                    <div class="node-card">
                        <div class="node-icon">üìä</div>
                        <div class="node-title">Observability</div>
                        <div class="node-subtitle">
                            <span class="lang-ko">ÌîºÎìúÎ∞± ÏàòÏßë</span>
                            <span class="lang-en">Feedback</span>
                        </div>
                        <div class="node-tooltip">
                            <span class="lang-ko">EFK + Jaeger + Prometheus<br>trace.id Ïó∞Îèô (7.16% coverage)<br>ÏóêÎü¨ Í∞êÏßÄ ‚Üí Agent ÌîºÎìúÎ∞±</span>
                            <span class="lang-en">EFK + Jaeger + Prometheus<br>trace.id correlation (7.16% coverage)<br>Error detection ‚Üí Agent feedback</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Development Lifecycle -->
            <div class="methodology-steps-card">
                <div class="steps-title">
                    <span class="lang-ko">üîÑ Development Lifecycle</span>
                    <span class="lang-en">üîÑ Development Lifecycle</span>
                </div>
                <div class="methodology-steps">
                    <div class="step-item">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <div class="step-title">Research</div>
                            <div class="step-desc">Foundations</div>
                        </div>
                    </div>
                    <div class="step-arrow">‚Üí</div>
                    <div class="step-item">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <div class="step-title">Design</div>
                            <div class="step-desc">Plans</div>
                        </div>
                    </div>
                    <div class="step-arrow">‚Üí</div>
                    <div class="step-item">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <div class="step-title">Implement</div>
                            <div class="step-desc">Agent + Code</div>
                        </div>
                    </div>
                    <div class="step-arrow">‚Üí</div>
                    <div class="step-item">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <div class="step-title">Deploy</div>
                            <div class="step-desc">GitOps</div>
                        </div>
                    </div>
                    <div class="step-arrow">‚Üí</div>
                    <div class="step-item feedback">
                        <div class="step-number">‚àû</div>
                        <div class="step-content">
                            <div class="step-title">Feedback</div>
                            <div class="step-desc">Reports ‚Üí Loop</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Single Source of Truth -->
            <div class="methodology-ssot">
                <div class="ssot-title">
                    <span class="lang-ko">üéØ Single Source of Truth</span>
                    <span class="lang-en">üéØ Single Source of Truth</span>
                </div>
                <div class="ssot-flow">
                    <div class="ssot-item">
                        <span class="ssot-icon">üìù</span>
                        <span class="ssot-label">Codebase</span>
                    </div>
                    <div class="ssot-arrow">‚Üí</div>
                    <div class="ssot-item">
                        <span class="ssot-icon">üîÑ</span>
                        <span class="ssot-label">GitOps</span>
                    </div>
                    <div class="ssot-arrow">‚Üí</div>
                    <div class="ssot-item">
                        <span class="ssot-icon">‚ò∏Ô∏è</span>
                        <span class="ssot-label">Cluster State</span>
                    </div>
                    <div class="ssot-arrow">‚Üí</div>
                    <div class="ssot-item">
                        <span class="ssot-icon">üìä</span>
                        <span class="ssot-label">Observability</span>
                    </div>
                </div>
            </div>

            <!-- Self-RAG Knowledge Base -->
            <div class="methodology-rag">
                <div class="rag-title">
                    <span class="lang-ko">üß† Self-RAG Knowledge Base</span>
                    <span class="lang-en">üß† Self-RAG Knowledge Base</span>
                </div>

                <!-- docs/ ÏÑπÏÖò -->
                <div style="margin-bottom: 1.5rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                        <span style="font-size: 1.2rem;">üìÅ</span>
                        <span style="font-weight: 600; color: var(--primary); font-size: 0.9rem;">docs/</span>
                        <span style="color: var(--text-muted); font-size: 0.75rem;">
                            <span class="lang-ko">‚Äî ÌîÑÎ°úÏ†ùÌä∏ ÏùòÏÇ¨Í≤∞Ï†ï ÏïÑÏπ¥Ïù¥Î∏å</span>
                            <span class="lang-en">‚Äî Project decision archive</span>
                        </span>
                </div>
                <div class="rag-items">
                    <div class="rag-item foundations">
                        <span class="rag-icon">üìö</span>
                        <span class="rag-label">Foundations</span>
                        <span class="rag-desc">
                                <span class="lang-ko">Í∑ºÏõê Í∏∞Ïà† 21Ìé∏</span>
                                <span class="lang-en">21 core tech</span>
                        </span>
                    </div>
                    <div class="rag-item applied">
                        <span class="rag-icon">üîß</span>
                        <span class="rag-label">Applied</span>
                        <span class="rag-desc">
                                <span class="lang-ko">ÏùëÏö© Í∏∞Ïà† 10Ìé∏</span>
                                <span class="lang-en">10 applied</span>
                        </span>
                    </div>
                    <div class="rag-item plans">
                        <span class="rag-icon">üìã</span>
                        <span class="rag-label">Plans</span>
                        <span class="rag-desc">
                                <span class="lang-ko">ÏÑ§Í≥Ñ Î¨∏ÏÑú 10Ìé∏</span>
                                <span class="lang-en">10 ADRs</span>
                        </span>
                    </div>
                    <div class="rag-item reports">
                        <span class="rag-icon">üìà</span>
                        <span class="rag-label">Reports</span>
                        <span class="rag-desc">
                                <span class="lang-ko">Í≤∞Í≥º Í∏∞Î°ù 17Ìé∏</span>
                                <span class="lang-en">17 reports</span>
                        </span>
                    </div>
                        <div class="rag-item" style="background: rgba(239,68,68,0.15);">
                            <span class="rag-icon">üî•</span>
                            <span class="rag-label">Troubleshooting</span>
                            <span class="rag-desc">
                                <span class="lang-ko">Ìä∏Îü¨Î∏îÏäàÌåÖ 16Ìé∏</span>
                                <span class="lang-en">16 issues</span>
                            </span>
                </div>
                    </div>
                </div>

                <!-- .claude/skills/ ÏÑπÏÖò -->
                <div style="margin-bottom: 1rem;">
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
                        <span style="font-size: 1.2rem;">üõ†Ô∏è</span>
                        <span style="font-weight: 600; color: #8b5cf6; font-size: 0.9rem;">.claude/skills/</span>
                        <span style="color: var(--text-muted); font-size: 0.75rem;">
                            <span class="lang-ko">‚Äî 18Í∞ú ÎèÑÎ©îÏù∏ Ï†ÑÎ¨∏ÏÑ± Î™®Îìà</span>
                            <span class="lang-en">‚Äî 18 domain expertise modules</span>
                        </span>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 0.5rem;">
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">langgraph</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">pipeline</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">chat-agent</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">flow</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">event-driven</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">architecture</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">clean-arch</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">CQRS</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">k8s-debug</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">kubectl</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">redis</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">patterns</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">postgres</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">schema</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">grpc</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">service</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">rag</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">pipeline</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">prompt</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">engineering</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">celery</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">rabbitmq</div>
                        </div>
                        <div style="background: rgba(139,92,246,0.15); padding: 0.4rem 0.6rem; border-radius: 6px; text-align: center; font-size: 0.7rem;">
                            <div style="font-weight: 600; color: #8b5cf6;">+6 more</div>
                            <div style="color: var(--text-muted); font-size: 0.6rem;">skills</div>
                        </div>
                    </div>
                </div>

                <!-- ÏÑ§Î™Ö -->
                <div class="rag-explanation" style="padding: 1rem 1.5rem; background: rgba(0,0,0,0.3); border-radius: 12px; border-left: 3px solid var(--primary);">
                    <p style="color: var(--text-secondary); font-size: 0.85rem; line-height: 1.6; margin: 0;">
                            <span class="lang-ko">
                            <strong style="color: var(--primary);">docs/</strong>Îäî ÌîÑÎ°úÏ†ùÌä∏ ÏùòÏÇ¨Í≤∞Ï†ïÍ≥º Í∏∞Ïà† Í∑ºÍ±∞Î•º Îã¥ÏùÄ <strong>ÏïÑÏπ¥Ïù¥Î∏å</strong>Ïù¥Í≥†,
                            <strong style="color: #8b5cf6;">.claude/skills/</strong>Îäî AI AgentÏóêÍ≤å <strong>ÎèÑÎ©îÏù∏ Ï†ÑÎ¨∏ÏÑ±</strong>ÏùÑ Î∂ÄÏó¨ÌïòÎäî Î™®ÎìàÎ°ú ÏΩîÎî© ÏóêÏù¥Ï†ÑÌä∏Ïùò Ïò®Î≥¥Îî©ÏùÑ Í∞ÄÏÜçÌï©ÎãàÎã§.<br>
                            Ïù¥ Ï≤¥Í≥ÑÎäî <a href="https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents" target="_blank" rel="noopener" style="color: #8b5cf6;">Anthropic EngineeringÏùò Effective Harness</a> Ìå®ÌÑ¥(Feature List + Progress Docs + Session Onboarding + Init Script)Í≥º Íµ¨Ï°∞Ï†ÅÏúºÎ°ú ÎåÄÏùëÌï©ÎãàÎã§.<br>
                            ÏÑ†Î≥ÑÎêú Í∏ÄÏùÄ <a href="https://rooftopsnow.tistory.com/" target="_blank" rel="noopener" style="color: var(--primary);">Î∏îÎ°úÍ∑∏</a>Î°ú Ìè¨Ïä§ÌåÖÎêòÏñ¥ Í∏∞Ïà† Í≥µÏú†ÏôÄ Í∏∞Î°ùÏùÑ Î≥ëÌñâÌï©ÎãàÎã§.
                            </span>
                            <span class="lang-en">
                            <strong style="color: var(--primary);">docs/</strong> is an <strong>archive</strong> of project decisions and technical rationale,
                            while <strong style="color: #8b5cf6;">.claude/skills/</strong> are modules that grant <strong>domain expertise</strong> to AI Agents, accelerating coding agent onboarding.<br>
                            This system structurally corresponds to <a href="https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents" target="_blank" rel="noopener" style="color: #8b5cf6;">Anthropic Engineering's Effective Harness</a> pattern (Feature List + Progress Docs + Session Onboarding + Init Script).<br>
                            Selected articles are published to <a href="https://rooftopsnow.tistory.com/" target="_blank" rel="noopener" style="color: var(--primary);">blog</a> for sharing and documentation.
                            </span>
                        </p>
                </div>
            </div>

        </div>
    </section>

    <!-- Categories Section -->
    <section class="section" id="categories">
        <div class="section-header">
            <div class="section-number">02</div>
            <h2 class="section-title">
                <span class="lang-ko">ÌîÑÎ°úÏ†ùÌä∏ Ïπ¥ÌÖåÍ≥†Î¶¨</span>
                <span class="lang-en">Project Categories</span>
            </h2>
            <p class="section-desc">
                <span class="lang-ko">8Í∞úÏùò ÎèÑÎ©îÏù∏ API, 6Í∞úÏùò Worker, 3Í∞úÏùò Ïù∏ÌîÑÎùº ÌîºÏ≥êÎ•º ÏÑ§Í≥Ñ, Íµ¨ÌòÑ, Î∞∞Ìè¨, Ïö¥ÏòÅ Ï§ëÏûÖÎãàÎã§.</span>
                <span class="lang-en">Designing, implementing, deploying, and operating 8 domain APIs, 6 Workers, and 3 infrastructure features.</span>
            </p>
        </div>

        <!-- Domain Showcase -->
        <div class="domain-showcase">
            <!-- 1. Auth -->
            <div class="domain-card clickable" data-modal="modal-domain-auth" style="--domain-color: #6366f1;">
                <div class="domain-icon">üîê</div>
                <div class="domain-title">Auth</div>
                <div class="domain-type">
                    <span class="domain-type-badge">API</span>
                    <span class="domain-type-badge worker">Worker</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">OAuth 2.0 + JWT Ïù∏Ï¶ù</span>
                    <span class="lang-en">OAuth 2.0 + JWT Auth</span>
                </div>
            </div>

            <!-- 2. Chat -->
            <div class="domain-card clickable" data-modal="modal-domain-chat" style="--domain-color: #10b981;">
                <div class="domain-icon">üí¨</div>
                <div class="domain-title">Chat</div>
                <div class="domain-type">
                    <span class="domain-type-badge">API</span>
                    <span class="domain-type-badge worker">Worker</span>
                    <span class="domain-type-badge" style="background: #3b82f6;">FE</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">LangGraph ÏóêÏù¥Ï†ÑÌä∏</span>
                    <span class="lang-en">LangGraph Agent</span>
                </div>
            </div>

            <!-- 3. Scan -->
            <div class="domain-card clickable" data-modal="modal-domain-scan" style="--domain-color: #8b5cf6;">
                <div class="domain-icon">üì∑</div>
                <div class="domain-title">Scan</div>
                <div class="domain-type">
                    <span class="domain-type-badge">API</span>
                    <span class="domain-type-badge worker">Worker</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">Vision AI ÌèêÍ∏∞Î¨º Î∂ÑÎ•ò</span>
                    <span class="lang-en">Vision AI Waste Classifier</span>
                </div>
            </div>

            <!-- 4. Character -->
            <div class="domain-card clickable" data-modal="modal-domain-character" style="--domain-color: #f59e0b;">
                <div class="domain-icon">üåç</div>
                <div class="domain-title">Character</div>
                <div class="domain-type">
                    <span class="domain-type-badge">API</span>
                    <span class="domain-type-badge worker">Worker</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">Ï∫êÎ¶≠ÌÑ∞ ÏàòÏßë + gRPC</span>
                    <span class="lang-en">Character Collection + gRPC</span>
                </div>
            </div>

            <!-- 5. Location -->
            <div class="domain-card clickable" data-modal="modal-domain-location" style="--domain-color: #ef4444;">
                <div class="domain-icon">üìç</div>
                <div class="domain-title">Location</div>
                <div class="domain-type">
                    <span class="domain-type-badge">API</span>
                    <span class="domain-type-badge" style="background: rgba(59,130,246,0.2); color: #60a5fa;">FE</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">Kakao Í≤ÄÏÉâ + PostGIS Í≥µÍ∞Ñ ÏøºÎ¶¨</span>
                    <span class="lang-en">Kakao Search + PostGIS Spatial</span>
                </div>
            </div>

            <!-- 6. Users -->
            <div class="domain-card clickable" data-modal="modal-domain-users" style="--domain-color: #0ea5e9;">
                <div class="domain-icon">üë§</div>
                <div class="domain-title">Users</div>
                <div class="domain-type">
                    <span class="domain-type-badge">API</span>
                    <span class="domain-type-badge worker">Worker</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">ÌîÑÎ°úÌïÑ + Ï∫êÎ¶≠ÌÑ∞ ÏÜåÏú†</span>
                    <span class="lang-en">Profile + Character Ownership</span>
                </div>
            </div>

            <!-- 7. Images -->
            <div class="domain-card clickable" data-modal="modal-domain-image" style="--domain-color: #ec4899;">
                <div class="domain-icon">üñºÔ∏è</div>
                <div class="domain-title">Images</div>
                <div class="domain-type">
                    <span class="domain-type-badge">API</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">S3 + CloudFront CDN</span>
                    <span class="lang-en">S3 + CloudFront CDN</span>
                </div>
            </div>

            <!-- 8. Info -->
            <div class="domain-card clickable" data-modal="modal-domain-info" style="--domain-color: #14b8a6;">
                <div class="domain-icon">üì∞</div>
                <div class="domain-title">Info</div>
                <div class="domain-type">
                    <span class="domain-type-badge">API</span>
                    <span class="domain-type-badge worker">Worker</span>
                    <span class="domain-type-badge" style="background: #3b82f6;">FE</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">ÌôòÍ≤Ω/ÏóêÎÑàÏßÄ/AI Îâ¥Ïä§ÌîºÎìú</span>
                    <span class="lang-en">Eco/Energy/AI Newsfeed</span>
                </div>
            </div>
        </div>

        <!-- Infrastructure Features -->
        <div class="domain-showcase" style="grid-template-columns: repeat(3, 1fr); margin-top: 1rem;">
            <!-- ext-authz -->
            <div class="domain-card clickable" data-modal="modal-infra-extauthz" style="--domain-color: #dc2626;">
                <div class="domain-icon">üõ°Ô∏è</div>
                <div class="domain-title">ext-authz</div>
                <div class="domain-type">
                    <span class="domain-type-badge" style="background: #dc2626;">Infra</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">Istio Ïô∏Î∂Ä Ïù∏Í∞Ä (Go)</span>
                    <span class="lang-en">Istio External Auth (Go)</span>
                </div>
            </div>

            <!-- SSE Gateway -->
            <div class="domain-card clickable" data-modal="modal-infra-sse" style="--domain-color: #7c3aed;">
                <div class="domain-icon">üì°</div>
                <div class="domain-title">SSE Gateway</div>
                <div class="domain-type">
                    <span class="domain-type-badge" style="background: #7c3aed;">Infra</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">Ïã§ÏãúÍ∞Ñ Ïù¥Î≤§Ìä∏ Ïä§Ìä∏Î¶¨Î∞ç</span>
                    <span class="lang-en">Real-time Event Streaming</span>
                </div>
            </div>

            <!-- Event Router -->
            <div class="domain-card clickable" data-modal="modal-infra-eventrouter" style="--domain-color: #059669;">
                <div class="domain-icon">üîÄ</div>
                <div class="domain-title">Event Router</div>
                <div class="domain-type">
                    <span class="domain-type-badge" style="background: #059669;">Infra</span>
                </div>
                <div class="domain-desc">
                    <span class="lang-ko">Redis Streams ÎùºÏö∞ÌåÖ</span>
                    <span class="lang-en">Redis Streams Routing</span>
                </div>
            </div>
        </div>

        <div class="categories">
            <!-- 1. Multi-Agent Chat -->
            <div class="category-card" style="--category-color: var(--agent-primary); --category-glow: var(--agent-glow);">
                <div class="category-header">
                    <div class="category-info">
                        <div class="category-icon">ü§ñ</div>
                        <h3 class="category-title">Multi-Agent Chat</h3>
                        <div class="category-posts">11 posts</div>
                    </div>
                    <div class="category-badges">
                        <span class="status-badge deployed">
                            <span class="lang-ko">Í∞úÎ∞ú Î∞è E2E Í≤ÄÏ¶ù ÏôÑÎ£å, Ïã§ÏãúÍ∞Ñ Î∞∞Ìè¨ Ï§ë</span>
                            <span class="lang-en">Dev & E2E Verified, Live Deployed</span>
                        </span>
                        <span class="tech-badge">LangGraph</span>
                        <span class="tech-badge">Send API</span>
                        <span class="tech-badge">Token v2</span>
                        <span class="tech-badge">Function Calling</span>
                        <span class="tech-badge">Multi-Model</span>
                    </div>
                </div>
                <div class="category-content">
                    <p class="category-desc">
                        <span class="lang-ko"><strong>LangGraph Send API</strong>Î°ú 11Ï¢Ö ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏Î•º ÎèôÏ†Å Î≥ëÎ†¨ ÎùºÏö∞ÌåÖÌïòÎäî Î©ÄÌã∞ÏóêÏù¥Ï†ÑÌä∏ ÏãúÏä§ÌÖúÏûÖÎãàÎã§. <strong>9Î∂ÑÎ•ò Intent Î∂ÑÏÑù</strong> ÌõÑ <strong>Multi-Intent Fanout</strong>ÏùÑ ÌÜµÌï¥ "Ïù¥ ÌéòÌä∏Î≥ë Ïñ¥ÎñªÍ≤å Î∂ÑÎ¶¨Ìï¥? Í∑ºÏ≤ò ÏàòÍ±∞Ìï®ÎèÑ ÏïåÎ†§Ï§ò" Í∞ôÏùÄ Î≥µÌï© ÏßàÏùòÎ•º Îã®Ïùº ÏöîÏ≤≠ÏúºÎ°ú Î≥ëÎ†¨ Ï≤òÎ¶¨Ìï©ÎãàÎã§. Eco¬≤ Ï∫êÎ¶≠ÌÑ∞ 13Ï¢ÖÍ≥º ÎåÄÌïúÎØºÍµ≠ ÌèêÍ∏∞Î¨º Î∂ÑÎ•òÏ≤¥Í≥ÑÎ•º <strong>ÎèÑÎ©îÏù∏ ÏßÄÏãù</strong>ÏúºÎ°ú Ï£ºÏûÖÌïòÍ≥†, <strong>Nano Banana Pro</strong> Í∏∞Î∞ò Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±, ÏÇ¨Ïö©Ïûê ÏúÑÏπò Ïó∞Îèô <strong>Ïã§ÏãúÍ∞Ñ ÎÇ†Ïî®¬∑ÏàòÍ±∞Ìï®¬∑Ïû¨ÌôúÏö©ÏÑºÌÑ∞ Í≤ÄÏÉâ</strong>, <strong>ÎÑ§Ïù¥Ìã∞Î∏å Ïõπ Í≤ÄÏÉâ</strong>ÍπåÏßÄ ÏßÄÏõêÌï©ÎãàÎã§. <strong>3-Tier Memory</strong>(Redis hot + PostgreSQL persistent) ÏúÑÏóê <strong>Token v2 Ïä§Ìä∏Î¶¨Î∞ç</strong>ÏùÑ Íµ¨ÌòÑÌïòÏó¨ Ïó∞Í≤∞ Îã®Ï†à ÌõÑ Ïû¨Ï†ëÏÜç ÏãúÏóêÎèÑ ÌÜ†ÌÅ∞ catch-upÏù¥ Í∞ÄÎä•Ìï©ÎãàÎã§.</span>
                        <span class="lang-en">A multi-agent system that dynamically routes across 11 sub-agents in parallel via <strong>LangGraph Send API</strong>. After <strong>9-class intent classification</strong>, <strong>Multi-Intent Fanout</strong> decomposes compound queries like "How do I separate this PET bottle? Find nearby collection points too" into parallel branches within a single request. Injects <strong>domain knowledge</strong> (13 Eco¬≤ characters, Korean waste classification system), supports <strong>Nano Banana Pro</strong>-powered image generation, <strong>real-time weather and recycling center search</strong> linked to user location, and <strong>native web search</strong>. Built on <strong>3-Tier Memory</strong> (Redis hot + PostgreSQL persistent) with <strong>Token v2 streaming</strong>, enabling token catch-up even after connection drops.</span>
                    </p>
                    <div class="achievements">
                        <div class="achievement clickable" onclick="openModal('modal-chat-langgraph')" style="cursor: pointer;">
                            <span class="achievement-icon">üîÄ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>LangGraph Workflow</strong> 11Í∞ú ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏ StateGraph, Send API Î≥ëÎ†¨ Ïã§Ìñâ, Aggregator Í≤∞Í≥º ÏàòÏßë <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>LangGraph Workflow</strong> 11 subagent StateGraph, Send API parallel execution, Aggregator result collection <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-intent-classification')" style="cursor: pointer;">
                            <span class="achievement-icon">üéØ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>9Î∂ÑÎ•ò Intent + Multi-Intent</strong> ÌÇ§ÏõåÎìú Îßµ Ïã†Î¢∞ÎèÑ Î≥¥Ï†ï, Chain-of-IntentÎ°ú Ïó∞ÏÜç ÏßàÎ¨∏ Î¨∏Îß• Ïú†ÏßÄ <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>9-class Intent + Multi-Intent</strong> Keyword map confidence calibration, Chain-of-Intent for continuous query context <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-send-api')" style="cursor: pointer;">
                            <span class="achievement-icon">‚ö°</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Send API Î≥ëÎ†¨ ÎùºÏö∞ÌåÖ</strong> Dynamic Router + Enrichment RulesÎ°ú waste ‚Üí weather ÏûêÎèô Ï∂îÍ∞Ä, AggregatorÏóêÏÑú Í≤∞Í≥º ÏàòÏßë <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>Send API Parallel Routing</strong> Dynamic Router + Enrichment Rules auto-add weather for waste, results collected at Aggregator <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-chat-toolcalling')" style="cursor: pointer;">
                            <span class="achievement-icon">üîß</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Tool Calling</strong> GPT-5.2 Strict Mode + Gemini 3 Function Calling, MOIS¬∑KECO¬∑Kakao API ÎÑ§Ïù¥Ìã∞Î∏å ÎèÑÍµ¨ Ìò∏Ï∂ú <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>Tool Calling</strong> GPT-5.2 Strict Mode + Gemini 3 Function Calling, MOIS¬∑KECO¬∑Kakao API native tool invocation <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-chat-multimodel')" style="cursor: pointer;">
                            <span class="achievement-icon">üß†</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Multi-Model Orchestration</strong> LLMClientPort Ï∂îÏÉÅÌôî, OpenAI Agents SDK(Primary) + Responses API(Fallback) + Gemini SDK, Provider ÏûêÎèô Ï∂îÎ°† Î∞è Îü∞ÌÉÄÏûÑ Î™®Îç∏ Ï†ÑÌôò <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>Multi-Model Orchestration</strong> LLMClientPort abstraction, OpenAI Agents SDK (Primary) + Responses API (Fallback) + Gemini SDK, Provider auto-inference & runtime model switching <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-3tier-memory')" style="cursor: pointer;">
                            <span class="achievement-icon">üíæ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>3-Tier Memory</strong> Redis Primary(~1ms) + PostgreSQL Async Sync + ChatState, ReadThroughCheckpointer Ìå®ÌÑ¥ <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>3-Tier Memory</strong> Redis Primary (~1ms) + PostgreSQL Async Sync + ChatState, ReadThroughCheckpointer pattern <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-token-streaming')" style="cursor: pointer;">
                            <span class="achievement-icon">üîÑ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Token v2 + Context ÏïïÏ∂ï</strong> XRANGE Î≥µÍµ¨, ÎèôÏ†Å Summarization (272K trigger, 5-Tier Íµ¨Ï°∞) <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>Token v2 + Context Compression</strong> XRANGE recovery, dynamic Summarization (272K trigger, 5-Tier structure) <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-node-resilience')" style="cursor: pointer;">
                            <span class="achievement-icon">üõ°Ô∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Production Resilience</strong> NodePolicy (FAIL_OPEN/CLOSE/FALLBACK), Circuit Breaker 5Ìöå ‚Üí 60s <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>Production Resilience</strong> NodePolicy (FAIL_OPEN/CLOSE/FALLBACK), Circuit Breaker 5 fails ‚Üí 60s <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-fallback-chain')" style="cursor: pointer;">
                            <span class="achievement-icon">üìä</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Feedback + Fallback Chain</strong> 4-dim RAG ÌèâÍ∞Ä, rag ‚Üí web_search ‚Üí general_llm Ï≤¥Ïù∏ <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>Feedback + Fallback Chain</strong> 4-dim RAG eval, rag ‚Üí web_search ‚Üí general_llm chain <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-chat-observability')" style="cursor: pointer;">
                            <span class="achievement-icon">üî≠</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>LangSmith + OTEL</strong> TelemetryConfigPort Ï∂îÏÉÅÌôî, Feature Îã®ÏúÑ Run Ï∂îÏ†Å, OTEL Span ÌÜµÌï© <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>LangSmith + OTEL</strong> TelemetryConfigPort abstraction, Feature-level Run tracking, OTEL Span integration <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                        <div class="achievement clickable" onclick="openModal('modal-chat-consistency')" style="cursor: pointer;">
                            <span class="achievement-icon">üîí</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Data Consistency</strong> Lamport Clock ÏàúÏÑú Î≥¥Ïû•, cleanup_sequence Î©îÎ™®Î¶¨ Í¥ÄÎ¶¨, Aggregator Ï†ïÌï©ÏÑ± Í≤ÄÏ¶ù <span style="color: var(--primary); font-size: 0.85rem;">‚Üí ÏÉÅÏÑ∏ Î≥¥Í∏∞</span></span>
                                <span class="lang-en"><strong>Data Consistency</strong> Lamport Clock ordering, cleanup_sequence memory management, Aggregator integrity validation <span style="color: var(--primary); font-size: 0.85rem;">‚Üí View Details</span></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="category-footer">
                    <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Agent" target="_blank" class="blog-link">
                        <span class="lang-ko">Î∏îÎ°úÍ∑∏ÏóêÏÑú ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</span>
                        <span class="lang-en">Read more on blog</span>
                    </a>
                </div>
            </div>

            <!-- 2. Kubernetes + GitOps -->
            <div class="category-card" style="--category-color: var(--k8s-primary); --category-glow: var(--k8s-glow);">
                <div class="category-header">
                    <div class="category-info">
                        <div class="category-icon">‚ò∏Ô∏è</div>
                        <h3 class="category-title">Kubernetes Cluster + GitOps + Service Mesh</h3>
                        <div class="category-posts">8 posts</div>
                    </div>
                    <div class="category-badges">
                        <span class="tech-badge">AWS</span>
                        <span class="tech-badge">Terraform</span>
                        <span class="tech-badge">ArgoCD</span>
                        <span class="tech-badge">Istio</span>
                        <span class="tech-badge">DOMA</span>
                    </div>
                </div>
                <div class="category-content">
                    <p class="category-desc">
                        <span class="lang-ko"><strong>8Í∞ú ÎèÑÎ©îÏù∏ API(Auth, Character, Chat, Scan, Location, Users, Image, Info)</strong>Î•º Í∞úÎ∞úÌïòÍ≥†, Ïû•Ïï† Í≤©Î¶¨ÏôÄ ÎèÖÎ¶Ω Ïä§ÏºÄÏùºÎßÅÏùÑ ÏúÑÌï¥ <strong>DOMA ÏõêÏπô</strong> Í∏∞Î∞ò ÎÖ∏Îìú Î∂ÑÎ¶¨Î•º ÏÑ§Í≥ÑÌñàÏäµÎãàÎã§. <strong>Bridge Ingress Îã®Ïùº ÏßÑÏûÖÏ†ê</strong>ÏúºÎ°ú ALB ‚Üí Istio Gateway ‚Üí VirtualService ÌÜ†Ìè¥Î°úÏßÄÎ•º Íµ¨ÏÑ±ÌïòÍ≥†, <strong>North-South(NodePort)</strong>ÏôÄ <strong>East-West(ClusterIP/Calico VXLAN)</strong> Ìä∏ÎûòÌîΩÏùÑ Î∂ÑÎ¶¨Ìï©ÎãàÎã§. ArgoCD App-of-Apps + Sync Wave(00~63)Î°ú <strong>CRD ‚Üí Operator ‚Üí Instance</strong> ÏàúÏÑúÏùò ÏÑ†Ïñ∏Ï†Å Î∞∞Ìè¨Î•º ÏûêÎèôÌôîÌïòÍ≥†, <strong>Helm Chart + Kustomize Overlay</strong>Î°ú ÌôòÍ≤ΩÎ≥Ñ Ïò§Î≤ÑÎ†àÏù¥Î•º Í¥ÄÎ¶¨Ìï©ÎãàÎã§.</span>
                        <span class="lang-en">Developed <strong>8 domain APIs (Auth, Character, Chat, Scan, Location, Users, Image, Info)</strong> and designed <strong>DOMA-based</strong> node separation for fault isolation and independent scaling. Configured <strong>Bridge Ingress single entry point</strong> with ALB ‚Üí Istio Gateway ‚Üí VirtualService topology, separating <strong>North-South (NodePort)</strong> and <strong>East-West (ClusterIP/Calico VXLAN)</strong> traffic. Automated declarative deployment with ArgoCD App-of-Apps + Sync Wave (00~63) following <strong>CRD ‚Üí Operator ‚Üí Instance</strong> order, managing environment overlays with <strong>Helm Chart + Kustomize Overlay</strong>.</span>
                    </p>
                    <div class="achievements">
                        <div class="achievement clickable" data-modal="modal-platform">
                            <span class="achievement-icon">üèóÔ∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>24-nodes ÌÅ¥Îü¨Ïä§ÌÑ∞</strong> ÎèÑÎ©îÏù∏Î≥Ñ Ïû•Ïï† Í≤©Î¶¨ + Ïä§ÏºÄÏùº Ïã§Ìóò Î™©Ï†Å</span>
                                <span class="lang-en"><strong>24-node cluster</strong> domain fault isolation + scaling experiments</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-node-specs">
                            <span class="achievement-icon">üìä</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>ÎÖ∏Îìú Ïä§Ìéô</strong> 24-node EC2 Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉÅÏÑ∏ ÏÇ¨Ïñë</span>
                                <span class="lang-en"><strong>Node Specs</strong> 24-node EC2 instance specifications</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-5layer">
                            <span class="achievement-icon">üè∑Ô∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>5-Layer + Taints</strong> Label Í≥ÑÏ∏µ + Ïä§ÏºÄÏ§ÑÎßÅ Ï†ïÏ±Ö</span>
                                <span class="lang-en"><strong>5-Layer + Taints</strong> Label hierarchy + scheduling policy</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-syncwave">
                            <span class="achievement-icon">üîÑ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Sync Wave (00~63)</strong> ÏùòÏ°¥ÏÑ± Í∏∞Î∞ò Î∞∞Ìè¨ ÏàúÏÑú Ï†úÏñ¥</span>
                                <span class="lang-en"><strong>Sync Wave (00~63)</strong> dependency-based deployment ordering</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-operators">
                            <span class="achievement-icon">üì¶</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Operators & Helm Charts</strong> CR Í∏∞Î∞ò ÏÑ†Ïñ∏Ï†Å Í¥ÄÎ¶¨Î°ú ÌôïÏû•ÏÑ± ÌôïÎ≥¥</span>
                                <span class="lang-en"><strong>Operators & Helm Charts</strong> CR-based declarative management for extensibility</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-istio-mesh">
                            <span class="achievement-icon">üï∏Ô∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Istio Service Mesh</strong> Sidecar Injection + VirtualService ÎùºÏö∞ÌåÖ</span>
                                <span class="lang-en"><strong>Istio Service Mesh</strong> Sidecar Injection + VirtualService routing</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-aws-external">
                            <span class="achievement-icon">‚òÅÔ∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>AWS Ïô∏Î∂Ä Ïª¥Ìè¨ÎÑåÌä∏</strong> Route53, ALB, CloudFront, S3, ACM</span>
                                <span class="lang-en"><strong>AWS External Components</strong> Route53, ALB, CloudFront, S3, ACM</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-irsa-automation">
                            <span class="achievement-icon">üîó</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>IRSA ÏûêÎèôÌôî</strong> ExternalSecrets + ExternalDNS + ALB Controller</span>
                                <span class="lang-en"><strong>IRSA Automation</strong> ExternalSecrets + ExternalDNS + ALB Controller</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-ci-quality">
                            <span class="achievement-icon">‚úÖ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>CI Quality Gate</strong> black/ruff/pytest/coverageÎ°ú ÌíàÏßà Í∏∞Ï§Ä Í∞ïÏ†ú</span>
                                <span class="lang-en"><strong>CI Quality Gate</strong> enforce quality via black/ruff/pytest/coverage</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="category-footer">
                    <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Kubernetes%20Cluster%2BGitOps%2BService%20Mesh" target="_blank" class="blog-link">
                        <span class="lang-ko">Î∏îÎ°úÍ∑∏ÏóêÏÑú ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</span>
                        <span class="lang-en">Read more on blog</span>
                    </a>
                    <div class="ref-links">
                        <span class="ref-count">
                            <span class="lang-ko">PR 53Í∞ú</span>
                            <span class="lang-en">53 PRs</span>
                        </span>
                        <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v0.7.4" target="_blank" rel="noopener">
                            <span class="lang-ko">Release v0.7.4</span>
                            <span class="lang-en">Release v0.7.4</span>
                        </a>
                        <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.0" target="_blank" rel="noopener">
                            <span class="lang-ko">Release v1.0.0</span>
                            <span class="lang-en">Release v1.0.0</span>
                        </a>
                        <a class="ref-chip changelog" href="https://github.com/eco2-team/backend/blob/main/CHANGELOG.md#100---2025-12-02" target="_blank" rel="noopener">
                            <span class="lang-ko">Changelog v1.0.0</span>
                            <span class="lang-en">Changelog v1.0.0</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 3. Auth Offloading -->
            <div class="category-card" style="--category-color: var(--auth-primary); --category-glow: var(--auth-glow);">
                <div class="category-header">
                    <div class="category-info">
                        <div class="category-icon">üîê</div>
                        <h3 class="category-title">Auth Offloading (ext-authz)</h3>
                        <div class="category-posts">4 posts</div>
                    </div>
                    <div class="category-badges">
                        <span class="tech-badge">Envoy</span>
                        <span class="tech-badge">Go</span>
                        <span class="tech-badge">gRPC</span>
                        <span class="tech-badge">Redis</span>
                        <span class="tech-badge">HPA</span>
                        <span class="tech-badge">Fanout</span>
                    </div>
                </div>
                <div class="category-content">
                    <p class="category-desc">
                        <span class="lang-ko">Î™®Îì† ÏöîÏ≤≠Ïùò Ïù∏Ï¶ù/Ïù∏Í∞ÄÍ∞Ä ÌÜµÍ≥ºÌïòÎäî <strong>Global Choke Point</strong>Î•º Î≥ÑÎèÑ ÏÑúÎ≤ÑÎ°ú Î∂ÑÎ¶¨Ìï¥ API ÏÑúÎ≤Ñ Î∂ÄÌïòÎ•º Ï†úÍ±∞ÌñàÏäµÎãàÎã§. Python ÎåÄÎπÑ ÎèôÏãúÏÑ± Ï≤òÎ¶¨Ïóê Ïú†Î¶¨Ìïú Go + gRPCÎ•º ÏÑ†ÌÉùÌïòÍ≥†, Redis Î≥ëÎ™© Ìï¥Í≤∞ ÌõÑ Local Cache + FanoutÏúºÎ°ú ÌÅ¥Îü¨Ïä§ÌÑ∞ Ï≤òÎ¶¨Îüâ BaselineÏùÑ ÌôïÎ≥¥ÌñàÏäµÎãàÎã§.</span>
                        <span class="lang-en">Separated <strong>Global Choke Point</strong> (auth/authz for all requests) into a dedicated server, eliminating API server load. Chose Go + gRPC for better concurrency over Python, established cluster throughput baseline via Local Cache + Fanout after resolving Redis bottleneck.</span>
                    </p>
                    <div class="achievements">
                        <div class="achievement clickable" data-modal="modal-auth-perf">
                            <span class="achievement-icon">üéØ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Global Baseline</strong> 2,500 VU Í∏∞Ï§Ä RPS 1,200+ (ext-authz Îã®ÎèÖ)</span>
                                <span class="lang-en"><strong>Global Baseline</strong> RPS 1,200+ at 2,500 VU (ext-authz only)</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-auth-perf">
                            <span class="achievement-icon">üîß</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Î≥ëÎ™© Ìï¥Í≤∞</strong> RPS 42 ‚Üí 1,200 (28Î∞∞ Í∞úÏÑ†)</span>
                                <span class="lang-en"><strong>Bottleneck fix</strong> RPS 42 ‚Üí 1,200 (28x improvement)</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-auth-cache">
                            <span class="achievement-icon">üì°</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Cache ÏùºÍ¥ÄÏÑ±</strong> Fanout Î∏åÎ°úÎìúÏ∫êÏä§Ìä∏ + TTL 10s + Î≤ÑÏ†Ñ Ïä§ÌÉ¨ÌîÑ</span>
                                <span class="lang-en"><strong>Cache consistency</strong> Fanout broadcast + TTL 10s + version stamp</span>
                            </div>
                            <span class="achievement-expand">üîç</span>
                        </div>
                        <div class="achievement clickable" data-modal="modal-auth-ops">
                            <span class="achievement-icon">üõ°Ô∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Ïö¥ÏòÅ Ï†ïÏ±Ö</strong> fail-close, Blacklist TTL 24h, Î©îÎ™®Î¶¨ cap</span>
                                <span class="lang-en"><strong>Ops policy</strong> fail-close, Blacklist TTL 24h, memory cap</span>
                            </div>
                            <span class="achievement-expand">üîç</span>
                        </div>
                    </div>
                </div>
                <div class="category-footer">
                    <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Auth%20Offloading%20%28ext-authz%29" target="_blank" class="blog-link">
                        <span class="lang-ko">Î∏îÎ°úÍ∑∏ÏóêÏÑú ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</span>
                        <span class="lang-en">Read more on blog</span>
                    </a>
                    <div class="ref-links">
                        <span class="ref-count">
                            <span class="lang-ko">PR 36Í∞ú</span>
                            <span class="lang-en">36 PRs</span>
                        </span>
                        <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.5" target="_blank" rel="noopener">
                            <span class="lang-ko">Release v1.0.5</span>
                            <span class="lang-en">Release v1.0.5</span>
                        </a>
                        <a class="ref-chip changelog" href="https://github.com/eco2-team/backend/blob/main/CHANGELOG.md#105---2025-12-11" target="_blank" rel="noopener">
                            <span class="lang-ko">Changelog v1.0.5</span>
                            <span class="lang-en">Changelog v1.0.5</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 4. Observability -->
            <div class="category-card" style="--category-color: var(--obs-primary); --category-glow: var(--obs-glow);">
                <div class="category-header">
                    <div class="category-info">
                        <div class="category-icon">üìä</div>
                        <h3 class="category-title">Observability</h3>
                        <div class="category-posts">7 posts</div>
                    </div>
                    <div class="category-badges">
                        <span class="tech-badge">ECK</span>
                        <span class="tech-badge">Elasticsearch</span>
                        <span class="tech-badge">Kibana</span>
                        <span class="tech-badge">Fluent Bit</span>
                        <span class="tech-badge">Jaeger</span>
                        <span class="tech-badge">Kiali</span>
                    </div>
                </div>
                <div class="category-content">
                    <p class="category-desc">
                        <span class="lang-ko">Agent-Driven DevelopmentÏùò <strong>Recursive Self-Improvement</strong>Î•º ÏúÑÌï¥ <strong>Î°úÍ∑∏-Ìä∏Î†àÏù¥Ïä§-Î©îÌä∏Î¶≠ ÌÜµÌï©</strong>Ïù¥ ÌïÑÏàòÏòÄÏäµÎãàÎã§. Helm Chart ÎåÄÏã† ECK OperatorÎ•º ÏÑ†ÌÉùÌï¥ ES ÌÅ¥Îü¨Ïä§ÌÑ∞ Í¥ÄÎ¶¨ Î≥µÏû°ÎèÑÎ•º ÎÇÆÏ∂îÍ≥†, ECS Ïä§ÌÇ§ÎßàÎ°ú 8Í∞ú ÎèÑÎ©îÏù∏Ïùò Î°úÍ∑∏ Ìè¨Îß∑ÏùÑ ÌëúÏ§ÄÌôîÌñàÏäµÎãàÎã§.</span>
                        <span class="lang-en"><strong>Log-trace-metric integration</strong> was essential for Agent-Driven Development's <strong>Recursive Self-Improvement</strong>. Chose ECK Operator over Helm Charts to reduce ES cluster management complexity, standardized log format across 8 domains with ECS schema.</span>
                    </p>
                    <div class="achievements">
                        <div class="achievement clickable" data-modal="modal-obs-efk">
                            <span class="achievement-icon">üìù</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>24-nodes Î°úÍ∑∏ Ï§ëÏïôÌôî</strong> Fluent Bit DaemonSet ‚Üí ES</span>
                                <span class="lang-en"><strong>24-node log centralization</strong> Fluent Bit DaemonSet ‚Üí ES</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-obs-trace">
                            <span class="achievement-icon">üîó</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>trace_id Ïó∞Í≤∞</strong> ECS Î°úÍ∑∏ ‚Üí Jaeger ÏõêÌÅ¥Î¶≠</span>
                                <span class="lang-en"><strong>trace_id correlation</strong> ECS logs ‚Üí Jaeger one-click</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-obs-alert">
                            <span class="achievement-icon">üö®</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Alertmanager + Slack</strong> Ïû•Ïï† Í∞êÏßÄ ÏûêÎèôÌôî</span>
                                <span class="lang-en"><strong>Alertmanager + Slack</strong> automated alerting</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-obs-mesh">
                            <span class="achievement-icon">üó∫Ô∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Kiali + Jaeger</strong> ÏÑúÎπÑÏä§ Î©îÏãú ÏãúÍ∞ÅÌôî</span>
                                <span class="lang-en"><strong>Kiali + Jaeger</strong> service mesh visualization</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="category-footer">
                    <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Observability" target="_blank" class="blog-link">
                        <span class="lang-ko">Î∏îÎ°úÍ∑∏ÏóêÏÑú ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</span>
                        <span class="lang-en">Read more on blog</span>
                    </a>
                    <div class="ref-links">
                        <span class="ref-count">
                            <span class="lang-ko">PR 35Í∞ú</span>
                            <span class="lang-en">35 PRs</span>
                        </span>
                        <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.6" target="_blank" rel="noopener">
                            <span class="lang-ko">Release v1.0.6</span>
                            <span class="lang-en">Release v1.0.6</span>
                        </a>
                        <a class="ref-chip changelog" href="https://github.com/eco2-team/backend/blob/main/CHANGELOG.md#106---2025-12-11" target="_blank" rel="noopener">
                            <span class="lang-ko">Changelog v1.0.6</span>
                            <span class="lang-en">Changelog v1.0.6</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 5. Message Queue -->
            <div class="category-card" style="--category-color: var(--mq-primary); --category-glow: var(--mq-glow);">
                <div class="category-header">
                    <div class="category-info">
                        <div class="category-icon">üì®</div>
                        <h3 class="category-title">Message Queue</h3>
                        <div class="category-posts">15 posts</div>
                    </div>
                    <div class="category-badges">
                        <span class="tech-badge">RabbitMQ</span>
                        <span class="tech-badge">Celery</span>
                        <span class="tech-badge">Taskiq</span>
                        <span class="tech-badge">Gevent</span>
                        <span class="tech-badge">Fanout</span>
                        <span class="tech-badge">DLQ</span>
                    </div>
                </div>
                <div class="category-content">
                    <p class="category-desc">
                        <span class="lang-ko">LLM API Ìò∏Ï∂ú(~12Ï¥à/req)Ïùò HTTP ÌÉÄÏûÑÏïÑÏõÉ ÌöåÌîºÏôÄ ÎèôÏãú Ï†ëÏÜç Î∂ÄÌïò Î∂ÑÏÇ∞ÏùÑ ÏúÑÌï¥ <strong>ÎπÑÎèôÍ∏∞ Job Queue</strong>Î•º ÎèÑÏûÖÌñàÏäµÎãàÎã§. Kafka ÎåÄÎπÑ Ïö¥ÏòÅ Î≥µÏû°ÎèÑÍ∞Ä ÎÇÆÏùÄ RabbitMQÎ•º ÏÑ†ÌÉùÌïòÍ≥†, I/O-bound ÏõåÌÅ¨Î°úÎìúÏóê Gevent, CPU-boundÏóê Thread PoolÎ°ú ÎèôÏãúÏÑ± Ï†ÑÎûµÏùÑ Î∂ÑÎ¶¨ÌñàÏäµÎãàÎã§.</span>
                        <span class="lang-en">Introduced <strong>async Job Queue</strong> to avoid HTTP timeouts from LLM API calls (~12s/req) and distribute concurrent load. Chose RabbitMQ over Kafka for lower operational complexity, separated concurrency strategies: Gevent for I/O-bound, Thread Pool for CPU-bound workloads.</span>
                    </p>
                    <div class="achievements">
                        <div class="achievement clickable" data-modal="modal-mq-chain">
                            <span class="achievement-icon">‚õìÔ∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>4Îã®Í≥Ñ Celery Chain</strong> Vision‚ÜíRule‚ÜíAnswer‚ÜíReward ÏàúÏ∞® ÏùòÏ°¥ÏÑ±</span>
                                <span class="lang-en"><strong>4-stage Celery Chain</strong> Vision‚ÜíRule‚ÜíAnswer‚ÜíReward sequential dependency</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-mq-concurrency">
                            <span class="achievement-icon">üîÄ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>ÎèôÏãúÏÑ± Ï†ÑÎûµ Î∂ÑÎ¶¨</strong> prefork(Îã®Ïàú ÌÉúÏä§ÌÅ¨) / Gevent(ÎèôÍ∏∞ I/O) / asyncio(LangGraph)</span>
                                <span class="lang-en"><strong>Concurrency split</strong> prefork(simple tasks) / Gevent(sync I/O) / asyncio(LangGraph)</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-mq-idempotency">
                            <span class="achievement-icon">üÜî</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>at-least-once + Î©±Îì±ÏÑ± ÌÇ§</strong> task_id Í∏∞Î∞ò Ï§ëÎ≥µ Ï≤òÎ¶¨ Î∞©ÏßÄ</span>
                                <span class="lang-en"><strong>at-least-once + idempotency</strong> task_id based deduplication</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-mq-topology">
                            <span class="achievement-icon">üì°</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Topology CR Í¥ÄÎ¶¨</strong> K8s OperatorÎ°ú Queue/Exchange ÏÑ†Ïñ∏Ï†Å Í¥ÄÎ¶¨</span>
                                <span class="lang-en"><strong>Topology CR management</strong> declarative Queue/Exchange via K8s Operator</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-mq-taskiq">
                            <span class="achievement-icon">‚ö°</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Taskiq Asyncio Worker</strong> LangGraph asyncio-native ÏöîÍµ¨ÏÇ¨Ìï≠ ‚Üí Taskiq ÎèÑÏûÖ (Chat)</span>
                                <span class="lang-en"><strong>Taskiq Asyncio Worker</strong> LangGraph asyncio-native requirement ‚Üí Taskiq adoption (Chat)</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="category-footer">
                    <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Message%20Queue" target="_blank" class="blog-link">
                        <span class="lang-ko">Î∏îÎ°úÍ∑∏ÏóêÏÑú ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</span>
                        <span class="lang-en">Read more on blog</span>
                    </a>
                    <div class="ref-links">
                        <span class="ref-count">
                            <span class="lang-ko">PR 72Í∞ú (MQ+Workers)</span>
                            <span class="lang-en">72 PRs (MQ+Workers)</span>
                        </span>
                        <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.7" target="_blank" rel="noopener">
                            <span class="lang-ko">Release v1.0.7</span>
                            <span class="lang-en">Release v1.0.7</span>
                        </a>
                        <a class="ref-chip changelog" href="https://github.com/eco2-team/backend/blob/main/CHANGELOG.md#107---2025-12-28" target="_blank" rel="noopener">
                            <span class="lang-ko">Changelog v1.0.7</span>
                            <span class="lang-en">Changelog v1.0.7</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 6. Event Streams & Scaling -->
            <div class="category-card" style="--category-color: var(--stream-primary); --category-glow: var(--stream-glow);">
                <div class="category-header">
                    <div class="category-info">
                        <div class="category-icon">üåä</div>
                        <h3 class="category-title">Event Streams & Scaling</h3>
                        <div class="category-posts">12 posts</div>
                    </div>
                    <div class="category-badges">
                        <span class="tech-badge">Redis Streams</span>
                        <span class="tech-badge">Pub/Sub</span>
                        <span class="tech-badge">State KV</span>
                        <span class="tech-badge">Reclaimer</span>
                        <span class="tech-badge">KEDA</span>
                        <span class="tech-badge">SSE Gateway</span>
                    </div>
                </div>
                <div class="category-content">
                    <p class="category-desc">
                        <span class="lang-ko">LLM ÌååÏù¥ÌîÑÎùºÏù∏ÏùÑ ÎèôÍ∏∞ ÏöîÏ≤≠ÏúºÎ°ú Î∞∞Ìè¨Ìïú Ï¥àÍ∏∞ÏóêÎäî, <strong>10+Ï¥à API ÏßÄÏó∞Ïù¥ scan-api Ïä§Î†àÎìúÎ•º Ï†êÏú†</strong>Ìï¥ ÎèôÏãú Ï≤òÎ¶¨Ïóê ÌïúÍ≥ÑÍ∞Ä ÏûàÏóàÏäµÎãàÎã§. SSE Ï†ÑÌôò ÌõÑÏóêÎèÑ Celery Events Íµ¨Ï°∞(SSEÎãπ RabbitMQ 21Ïó∞Í≤∞)Îäî 50 VUÏóêÏÑú Ïó∞Í≤∞ 341Í∞úÎ°ú Ìè≠Ï¶ù, 503 ÏóêÎü¨Í∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. Redis Streams Í∏∞Î∞ò Ïù¥Î≤§Ìä∏ Î¶¥Î†àÏù¥Î°ú Ïó∞Í≤∞ Î≥µÏû°ÎèÑÎ•º O(n√óm) ‚Üí O(n)ÏúºÎ°ú Í∞úÏÑ†ÌïòÍ≥†, Streams(ÏòÅÏÜç) + Pub/Sub(Ïã§ÏãúÍ∞Ñ) + State KV(Î≥µÍµ¨)Î°ú Ï±ÖÏûÑÏùÑ Î∂ÑÎ¶¨Ìï¥ <strong>300 VU SLA</strong>Î•º ÌôïÎ≥¥ÌñàÏäµÎãàÎã§.</span>
                        <span class="lang-en">When initially deploying the LLM pipeline as synchronous requests, <strong>10+s API latency occupied scan-api threads</strong>, limiting concurrent processing. After SSE transition, Celery Events structure (21 RabbitMQ connections per SSE) exploded to 341 connections at 50 VU, causing 503 errors. Switched to Redis Streams-based event relay, improved connection complexity from O(n√óm) ‚Üí O(n), separated responsibilities: Streams (persistence) + Pub/Sub (realtime) + State KV (recovery), achieving <strong>300 VU SLA</strong>.</span>
                    </p>
                    <div class="achievements">
                        <div class="achievement clickable" data-modal="modal-event-bus-layer">
                            <span class="achievement-icon">üöå</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Event Bus Layer</strong> O(n√óm) ‚Üí O(n) Ïó∞Í≤∞ Î≥µÏû°ÎèÑ, Streams + Pub/Sub + State KV Î∂ÑÎ¶¨</span>
                                <span class="lang-en"><strong>Event Bus Layer</strong> O(n√óm) ‚Üí O(n) connection complexity, Streams + Pub/Sub + State KV separation</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-stream-metrics">
                            <span class="achievement-icon">üéØ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Scan SSE ÏßÄÌëú</strong> 300 VU 99.9% ÏôÑÎ£åÏú®, 402 req/m, E2E p95 48.5Ï¥à</span>
                                <span class="lang-en"><strong>Scan SSE metrics</strong> 300 VU 99.9% completion, 402 req/m, E2E p95 48.5s</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-stream-llm">
                            <span class="achievement-icon">üìä</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>LLM ÌååÏù¥ÌîÑÎùºÏù∏ ÌäπÏÑ±</strong> Vision 3Ï¥à + Answer 8Ï¥à ‚Üí Ï¥ù ~12Ï¥à I/O-bound</span>
                                <span class="lang-en"><strong>LLM pipeline profile</strong> Vision 3s + Answer 8s ‚Üí total ~12s I/O-bound</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-stream-recovery">
                            <span class="achievement-icon">üîÑ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>SSE Ïû¨Ïó∞Í≤∞ Î≥µÍµ¨</strong> State KVÏóêÏÑú ÎßàÏßÄÎßâ ÏÉÅÌÉú Î°úÎìú</span>
                                <span class="lang-en"><strong>SSE reconnect recovery</strong> load last state from State KV</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-stream-keda">
                            <span class="achievement-icon">‚öñÔ∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>KEDA Ìä∏Î¶¨Í±∞</strong> RabbitMQ ÌÅê Í∏∏Ïù¥ (10-20msg) Worker 2‚Üí4, SSE Ïó∞Í≤∞ Ïàò (100/pod) 1‚Üí3</span>
                                <span class="lang-en"><strong>KEDA trigger</strong> RabbitMQ queue (10-20msg) Worker 2‚Üí4, SSE connections (100/pod) 1‚Üí3</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-stream-router-internals">
                            <span class="achievement-icon">üîß</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Event Router ÎÇ¥Î∂Ä</strong> Multi-domain (scan+chat) + Lua Î©±Îì±ÏÑ± + XAUTOCLAIM Reclaimer</span>
                                <span class="lang-en"><strong>Event Router internals</strong> Multi-domain (scan+chat) + Lua idempotency + XAUTOCLAIM Reclaimer</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="category-footer">
                    <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Event%20Streams%20%26%20Scaling" target="_blank" class="blog-link">
                        <span class="lang-ko">Î∏îÎ°úÍ∑∏ÏóêÏÑú ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</span>
                        <span class="lang-en">Read more on blog</span>
                    </a>
                    <div class="ref-links">
                        <span class="ref-count">
                            <span class="lang-ko">PR 18Í∞ú (Streams+Scaling)</span>
                            <span class="lang-en">18 PRs (Streams+Scaling)</span>
                        </span>
                        <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.7" target="_blank" rel="noopener">
                            <span class="lang-ko">Release v1.0.7</span>
                            <span class="lang-en">Release v1.0.7</span>
                        </a>
                        <a class="ref-chip changelog" href="https://github.com/eco2-team/backend/blob/main/CHANGELOG.md#107---2025-12-28" target="_blank" rel="noopener">
                            <span class="lang-ko">Changelog v1.0.7</span>
                            <span class="lang-en">Changelog v1.0.7</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 7. Eventual Consistency -->
            <div class="category-card" style="--category-color: var(--ec-primary); --category-glow: var(--ec-glow);">
                <div class="category-header">
                    <div class="category-info">
                        <div class="category-icon">üîÑ</div>
                        <h3 class="category-title">Eventual Consistency</h3>
                        <div class="category-posts">5 posts</div>
                    </div>
                    <div class="category-badges">
                        <span class="tech-badge">Persistence Offloading</span>
                        <span class="tech-badge">Worker Queue</span>
                        <span class="tech-badge">Batch Processing</span>
                        <span class="tech-badge">Idempotency</span>
                        <span class="tech-badge">Async Sync</span>
                    </div>
                </div>
                <div class="category-content">
                    <p class="category-desc">
                        <span class="lang-ko"><strong>Í∞ïÍ≤∞Ìï©Í≥º Ï¶âÏãú ÏùëÎãµÏù¥ ÌïÑÏöîÌïú Î°úÏßÅ(OAuth ÌîåÎ°úÏö∞ Îì±)ÏùÑ Ï†úÏô∏</strong>Ìïú Î™®Îì† ÏòÅÏó≠Ïóê Eventual ConsistencyÎ•º Ï†ÅÏö©ÌñàÏäµÎãàÎã§. Strong ConsistencyÎäî LatencyÎ•º ÎäòÎ¶¨Í≥†, Fire-and-forgetÏùÄ Îç∞Ïù¥ÌÑ∞ Ïú†Ïã§ ÏúÑÌóòÏù¥ ÏûàÏñ¥, at-least-once + Î©±Îì±ÏÑ± ÌÇ§Î°ú Exactly-once SemanticsÎ•º Íµ¨ÌòÑÌñàÏäµÎãàÎã§. Application LayerÍ∞Ä <strong>PersistenceÎ•º WorkerÏóê Offloading</strong>ÌïòÎ©¥ÏÑú DB Î≥ëÎ™© ÏóÜÏù¥ ÏàòÌèâ ÌôïÏû•Ïù¥ Í∞ÄÎä•Ìï¥Ï°åÍ≥†, API PodÎäî Îπ†Î•∏ ÏùëÎãµÎßå Îã¥ÎãπÌïòÏó¨ Ï≤òÎ¶¨Îüâ(Throughput)Ïù¥ ÌÅ¨Í≤å Ìñ•ÏÉÅÎêòÏóàÏäµÎãàÎã§.</span>
                        <span class="lang-en"><strong>Applied Eventual Consistency to all areas except tightly-coupled, immediate-response logic (e.g., OAuth flow)</strong>. Strong consistency increases latency, fire-and-forget risks data loss. Implemented Exactly-once Semantics via at-least-once + idempotency keys. Application Layer <strong>offloads persistence to Workers</strong>, enabling horizontal scaling without DB bottleneck. API Pods focus solely on fast responses, significantly improving throughput.</span>
                    </p>
                    <div class="achievements">
                        <div class="achievement clickable" data-modal="modal-ec-offloading">
                            <span class="achievement-icon">üì§</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Write Offloading</strong> APIÎäî Ïù¥Î≤§Ìä∏Îßå Î∞úÌñâ, DB Ïì∞Í∏∞Îäî WorkerÍ∞Ä Ï≤òÎ¶¨</span>
                                <span class="lang-en"><strong>Write Offloading</strong> API publishes events only, Worker handles DB writes</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-ec-atleastonce">
                            <span class="achievement-icon">üÜî</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Deterministic UUID</strong> (user_id + scan_id) Í∏∞Î∞ò Î©±Îì±ÏÑ± ÌÇ§</span>
                                <span class="lang-en"><strong>Deterministic UUID</strong> (user_id + scan_id) based idempotency key</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-ec-fanout">
                            <span class="achievement-icon">üì°</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Fanout 1:N ÎùºÏö∞ÌåÖ</strong> Îã®Ïùº Ïù¥Î≤§Ìä∏ ‚Üí character_worker + users_worker</span>
                                <span class="lang-en"><strong>Fanout 1:N routing</strong> single event ‚Üí character_worker + users_worker</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-ec-cache">
                            <span class="achievement-icon">üîÑ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Ï∫êÏãú Î¨¥Ìö®Ìôî</strong> Fanout broadcast + TTL 10s + Ïã†Í∑ú Worker Î∂ÄÌåÖ Ïãú ÏõåÎ∞ç</span>
                                <span class="lang-en"><strong>Cache invalidation</strong> Fanout broadcast + TTL 10s + warming on new Worker boot</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-ec-async-persistence">
                            <span class="achievement-icon">üîÅ</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Chat Async Persistence</strong> CheckpointSyncService (batch dedup) + Persistence Consumer (done‚ÜíPG)</span>
                                <span class="lang-en"><strong>Chat Async Persistence</strong> CheckpointSyncService (batch dedup) + Persistence Consumer (done‚ÜíPG)</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="category-footer">
                    <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Eventual%20Consistency" target="_blank" class="blog-link">
                        <span class="lang-ko">Î∏îÎ°úÍ∑∏ÏóêÏÑú ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</span>
                        <span class="lang-en">Read more on blog</span>
                    </a>
                    <div class="ref-links">
                        <span class="ref-count">
                            <span class="lang-ko">PR 72Í∞ú (MQ Í∏∞Î∞ò)</span>
                            <span class="lang-en">72 PRs (MQ-based)</span>
                        </span>
                        <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.7" target="_blank" rel="noopener">
                            <span class="lang-ko">Release v1.0.7</span>
                            <span class="lang-en">Release v1.0.7</span>
                        </a>
                        <a class="ref-chip changelog" href="https://github.com/eco2-team/backend/blob/main/CHANGELOG.md#107---2025-12-28" target="_blank" rel="noopener">
                            <span class="lang-ko">Changelog v1.0.7</span>
                            <span class="lang-en">Changelog v1.0.7</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 8. Clean Architecture Migration -->
            <div class="category-card" style="--category-color: var(--clean-primary); --category-glow: var(--clean-glow);">
                <div class="category-header">
                    <div class="category-info">
                        <div class="category-icon">üèõÔ∏è</div>
                        <h3 class="category-title">Clean Architecture Migration</h3>
                        <div class="category-posts">16 posts</div>
                    </div>
                    <div class="category-badges">
                        <span class="tech-badge">DOMA</span>
                        <span class="tech-badge">DIP</span>
                        <span class="tech-badge">Port & Adapter</span>
                        <span class="tech-badge">CQRS</span>
                        <span class="tech-badge">FastAPI</span>
                    </div>
                </div>
                <div class="category-content">
                    <p class="category-desc">
                        <span class="lang-ko">Fallback Outbox Ìå®ÌÑ¥ ÎèÑÏûÖ ÌõÑ Integration+Persistence Î†àÏù¥Ïñ¥Í∞Ä Ï§ëÏ≤©ÎêòÎ©∞ Î†àÏù¥Ïñ¥Îìú ÏïÑÌÇ§ÌÖçÏ≤òÏùò ÌïúÍ≥ÑÏóê ÏßÅÎ©¥ÌñàÏäµÎãàÎã§. Redis ÏßÅÏ†ë ÏùòÏ°¥ Îì± <strong>DI ÏúÑÎ∞òÏùÑ Ï†úÍ±∞</strong>ÌïòÍ≥†, Port/Adapter Í∏∞Î∞òÏúºÎ°ú <strong>Ïù∏ÌîÑÎùº ÍµêÏ≤¥ Ïö©Ïù¥ÏÑ±</strong>Í≥º <strong>Ïó≠Ìï† Î™ÖÌôïÌôî</strong>Î•º ÌôïÎ≥¥ÌñàÏäµÎãàÎã§. ÎèÑÎ©îÏù∏Î≥Ñ ÏùëÏßëÏúºÎ°ú ÎπÑÏ¶àÎãàÏä§ ÏöîÍµ¨ÏÇ¨Ìï≠ Î≥ÄÍ≤Ω Ïãú <strong>ÏàòÏ†ï Î≤îÏúÑÍ∞Ä Îã®Ïùº ÎèÑÎ©îÏù∏ÏúºÎ°ú Ï†úÌïú</strong>ÎêòÏñ¥, ÏÇ¨Ïù¥Îìú Ïù¥ÌéôÌä∏ Ï∂îÏ†ÅÍ≥º ÏΩîÎìú Î¶¨Î∑∞ Î∂ÄÎã¥Ïù¥ ÌÅ¨Í≤å Ï§ÑÏóàÏäµÎãàÎã§. Port Ïù∏ÌÑ∞ÌéòÏù¥Ïä§Îßå MockÌïòÎ©¥ Ïô∏Î∂Ä Ïù∏ÌîÑÎùº ÏóÜÏù¥ ÎèÑÎ©îÏù∏ Î°úÏßÅÏùÑ ÎèÖÎ¶Ω Í≤ÄÏ¶ùÌï† Ïàò ÏûàÏñ¥, <strong>ÌÖåÏä§Ìä∏ ÏûëÏÑ± ÎπÑÏö©Ïù¥ ÎÇÆÏïÑÏßÄÍ≥† Î≥ëÎ†¨ Í∞úÎ∞ú</strong>Ïù¥ ÏûêÏó∞Ïä§ÎüΩÍ≤å Í∞ÄÎä•Ìï¥Ï°åÏäµÎãàÎã§. Ïù∏ÌîÑÎùº ÏùòÏ°¥ÏÑ±Ïù¥ AdapterÎ°ú Ï∫°ÏäêÌôîÎêòÏñ¥ <strong>ÌäπÏ†ï Ïª¥Ìè¨ÎÑåÌä∏ Ïû•Ïï†Í∞Ä ÎèÑÎ©îÏù∏ Í≤ΩÍ≥ÑÎ•º ÎÑòÏñ¥ Ï†ÑÌååÎêòÏßÄ ÏïäÏäµÎãàÎã§</strong>.</span>
                        <span class="lang-en">After introducing Fallback Outbox pattern, Integration+Persistence layers overlapped, revealing layered architecture limits. <strong>Eliminated DI violations</strong> (e.g., direct Redis dependency), achieved <strong>infrastructure swappability</strong> and <strong>clear role separation</strong> via Port/Adapter. Domain-level cohesion <strong>limits change scope to single domain</strong>, reducing side-effect tracking and code review burden. Mocking only Port interfaces enables <strong>independent domain logic verification without external infra</strong>, lowering test costs and enabling parallel development. Infrastructure dependencies encapsulated in Adapters ensure <strong>component failures don't propagate beyond domain boundaries</strong>.</span>
                    </p>
                    <div class="achievements">
                        <div class="achievement clickable" data-modal="modal-clean-4layer">
                            <span class="achievement-icon">üìê</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>4-Layer DIP</strong> DomainÏù¥ Port Ï†ïÏùò, InfraÍ∞Ä AdapterÎ°ú Íµ¨ÌòÑ ‚Äî Í≤∞Ìï©ÎèÑ Ï†úÍ±∞</span>
                                <span class="lang-en"><strong>4-Layer DIP</strong> Domain defines Port, Infra implements as Adapter ‚Äî decoupled</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-clean-cqrs">
                            <span class="achievement-icon">üéº</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Application Usecase</strong> CQRS Í∏∞Î∞ò Command/Query Î∂ÑÎ¶¨, Port¬∑Service Ïò§ÏºÄÏä§Ìä∏Î†àÏù¥ÏÖò</span>
                                <span class="lang-en"><strong>Application Usecase</strong> CQRS-based Command/Query separation, Port¬∑Service orchestration</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-clean-adapter">
                            <span class="achievement-icon">üîå</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Adapter ÍµêÏ≤¥ Ïö©Ïù¥</strong> LLM/Persistence/MQ Adapter ÎèÖÎ¶Ω ÍµêÏ≤¥ Í∞ÄÎä•</span>
                                <span class="lang-en"><strong>Adapter swappability</strong> LLM/Persistence/MQ Adapters independently replaceable</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-clean-resilience">
                            <span class="achievement-icon">üõ°Ô∏è</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>LLM Î≥µÏõêÎ†•</strong> ~12s I/O-bound (Vision 3s + Answer 8s), Fallback + CheckpointÎ°ú Í≥†ÏßÄÏó∞¬∑Î∂àÏïàÏ†ïÏÑ± Ìó∑Ïßï</span>
                                <span class="lang-en"><strong>LLM Resilience</strong> ~12s I/O-bound (Vision 3s + Answer 8s), Fallback + Checkpoint hedges latency & instability</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-clean-cohesion">
                            <span class="achievement-icon">üì¶</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Í∏∞Ïà† ÏùëÏßëÎèÑ</strong> ÎèÑÎ©îÏù∏Î≥Ñ ÏÑ§Ï†ï Î∂ÑÎ¶¨Î°ú ConfigMap/Secret Í¥ÄÎ¶¨ Îã®ÏàúÌôî</span>
                                <span class="lang-en"><strong>Tech cohesion</strong> Domain-specific configs simplify ConfigMap/Secret management</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-clean-radon">
                            <span class="achievement-icon">üìä</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>Radon Î≥µÏû°ÎèÑ</strong> 2,120 Î∏îÎ°ù ÌèâÍ∑† A (2.28) ‚Äî ÎÇÆÏùÄ Î≥µÏû°ÎèÑ Ïú†ÏßÄ</span>
                                <span class="lang-en"><strong>Radon complexity</strong> 2,120 blocks avg A (2.28) ‚Äî low complexity maintained</span>
                            </div>
                        </div>
                        <div class="achievement clickable" data-modal="modal-test-coverage">
                            <span class="achievement-icon">üß™</span>
                            <div class="achievement-text">
                                <span class="lang-ko"><strong>ÌÖåÏä§Ìä∏ Ïª§Î≤ÑÎ¶¨ÏßÄ</strong> Unit 88%+, Integration ÌïµÏã¨ ÌîåÎ°úÏö∞ Ï§ëÏã¨</span>
                                <span class="lang-en"><strong>Test Coverage</strong> Unit 88%+, Integration core flow focused</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="category-footer">
                    <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Clean%20Architecture%20Migration" target="_blank" class="blog-link">
                        <span class="lang-ko">Î∏îÎ°úÍ∑∏ÏóêÏÑú ÏûêÏÑ∏Ìûà Î≥¥Í∏∞</span>
                        <span class="lang-en">Read more on blog</span>
                    </a>
                    <div class="ref-links">
                        <span class="ref-count">
                            <span class="lang-ko">PR 43Í∞ú</span>
                            <span class="lang-en">43 PRs</span>
                        </span>
                        <a class="ref-chip" href="https://github.com/eco2-team/backend/pulls?q=is%3Apr+is%3Amerged" target="_blank" rel="noopener">
                            <span class="lang-ko">Merged PRs</span>
                            <span class="lang-en">Merged PRs</span>
                        </a>
                    </div>
                </div>
            </div>

        </div>

    </section>

    <!-- Architecture Section -->
    <section class="section" id="architecture">
        <div class="section-header">
            <div class="section-number">03</div>
            <h2 class="section-title">
                <span class="lang-ko">ÏãúÏä§ÌÖú ÏïÑÌÇ§ÌÖçÏ≤ò</span>
                <span class="lang-en">System Architecture</span>
            </h2>
            <p class="section-desc">
                <span class="lang-ko">PWA Í∏∞Î∞ò ÌîÑÎ°†Ìä∏ÏóîÎìúÏôÄ Ïó∞ÎèôÎêòÎäî 24-Node Î∂ÑÏÇ∞ ÌÅ¥Îü¨Ïä§ÌÑ∞ ÏïÑÌÇ§ÌÖçÏ≤òÏûÖÎãàÎã§.</span>
                <span class="lang-en">24-Node distributed cluster architecture integrated with PWA-based frontend.</span>
            </p>
        </div>

        <!-- Architecture Diagram (moved to top) -->
        <div class="architecture-diagram">
            <h3 class="diagram-title">
                <span class="lang-ko">üèóÔ∏è Ï†ÑÏ≤¥ ÏãúÏä§ÌÖú ÏïÑÌÇ§ÌÖçÏ≤ò</span>
                <span class="lang-en">üèóÔ∏è System Architecture Overview</span>
            </h3>

            <!-- System Architecture Image (on top) -->
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <img src="https://github.com/user-attachments/assets/af4b4276-08aa-4859-bfc5-9c9135d944ca"
                     alt="Eco¬≤ System Architecture"
                     style="max-width: 100%; height: auto; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.3);">
            </div>

            <!-- Data Flow Summary (below image) -->
            <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">üìä Îç∞Ïù¥ÌÑ∞ ÌùêÎ¶Ñ ÏöîÏïΩ</span>
                    <span class="lang-en">üìä Data Flow Summary</span>
                </h4>
                <table class="modal-table" style="font-size: 0.85rem;">
                    <tr>
                        <th style="width: 18%;"><span class="lang-ko">ÌùêÎ¶Ñ</span><span class="lang-en">Flow</span></th>
                        <th style="width: 57%;"><span class="lang-ko">Í≤ΩÎ°ú</span><span class="lang-en">Path</span></th>
                        <th style="width: 25%;"><span class="lang-ko">ÌîÑÎ°úÌÜ†ÏΩú</span><span class="lang-en">Protocol</span></th>
                    </tr>
                    <tr>
                        <td>üåê <strong>N-S Traffic</strong></td>
                        <td>User ‚Üí Route53 ‚Üí ALB ‚Üí Istio GW ‚Üí ext-authz ‚Üí APIs</td>
                        <td>HTTPS, gRPC</td>
                    </tr>
                    <tr>
                        <td>üîÑ <strong>E-W Sync</strong></td>
                        <td>auth ‚Üî users, character ‚Üí users (mTLS Envoy Sidecar)</td>
                        <td>gRPC</td>
                    </tr>
                    <tr>
                        <td>ü§ñ <strong>Scan AI</strong></td>
                        <td>Scan API ‚Üí RabbitMQ ‚Üí <strong>scan-worker</strong> (Vision‚ÜíRule‚ÜíAnswer‚ÜíReward) ‚Üí OpenAI API</td>
                        <td>AMQP, Celery Chain</td>
                    </tr>
                    <tr>
                        <td>üí¨ <strong>Chat Agent</strong></td>
                        <td>Chat API ‚Üí <strong>chat-worker</strong> (Intent‚ÜíTagRetriever‚ÜíEvalAgent‚ÜíFallback) ‚Üí <code>YAML inject</code> + OpenAI API</td>
                        <td>Taskiq, LangGraph</td>
                    </tr>
                    <tr>
                        <td>üé≠ <strong>Character Batch</strong></td>
                        <td>scan-worker ‚Üí <strong>character-match</strong> ‚Üí <strong>character-worker</strong> (batch) ‚Üí <strong>users-worker</strong> (UPSERT) ‚Üí PostgreSQL</td>
                        <td>AMQP, Batch Insert</td>
                    </tr>
                    <tr>
                        <td>üì° <strong>SSE Event</strong></td>
                        <td>Workers ‚Üí Redis Streams ‚Üí Event Router ‚Üí Pub/Sub ‚Üí SSE GW ‚Üí Client</td>
                        <td>XADD, PUBLISH, SSE</td>
                    </tr>
                    <tr>
                        <td>üîî <strong>Auth Relay</strong></td>
                        <td>Auth API ‚Üí Redis Fallback Outbox ‚Üí <strong>auth-relay</strong> ‚Üí RabbitMQ Fanout ‚Üí <strong>auth-worker</strong> ‚Üí Redis Blacklist</td>
                        <td>Fallback Outbox</td>
                    </tr>
                    <tr>
                        <td>üîÑ <strong>Cache Broadcast</strong></td>
                        <td>RabbitMQ Fanout ‚Üí ext-authz Blacklist + character-match Catalog (all replicas) Local Cache Sync</td>
                        <td>AMQP Fanout</td>
                    </tr>
                    <tr>
                        <td>üìä <strong>Metrics</strong></td>
                        <td>Envoy Sidecars ‚Üí Prometheus ‚Üí Grafana / KEDA Autoscaling</td>
                        <td>Prometheus scrape</td>
                    </tr>
                    <tr>
                        <td>üìù <strong>Logs</strong></td>
                        <td>All Pods (stdout) ‚Üí Fluent Bit DaemonSet ‚Üí Elasticsearch ‚Üí Kibana</td>
                        <td>HTTP (ECS format)</td>
                    </tr>
                    <tr>
                        <td>üîç <strong>Traces</strong></td>
                        <td>Envoy ‚Üí OTel Collector ‚Üí Jaeger (trace_id correlation, Kiali viz)</td>
                        <td>OTLP, Zipkin</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Option 3 Style: Development Flow with Observability -->
        <div class="dev-flow-diagram">
            <div class="flow-title">
                <span class="lang-ko">üì± ÏÑúÎπÑÏä§ ÌùêÎ¶Ñ (PWA ‚Üí Backend ‚Üí LLM)</span>
                <span class="lang-en">üì± Service Flow (PWA ‚Üí Backend ‚Üí LLM)</span>
            </div>
            <div class="flow-stages">
                <div class="flow-stage client">
                    <div class="stage-icon">üì±</div>
                    <div class="stage-content">
                        <div class="stage-title">PWA Client</div>
                        <div class="stage-desc">
                            <span class="lang-ko">React + Vite</span>
                            <span class="lang-en">React + Vite</span>
                        </div>
                    </div>
                </div>
                <div class="flow-connector">‚Üí</div>
                <div class="flow-stage edge">
                    <div class="stage-icon">üåê</div>
                    <div class="stage-content">
                        <div class="stage-title">Edge Layer</div>
                        <div class="stage-desc">ALB + Istio</div>
                    </div>
                </div>
                <div class="flow-connector">‚Üí</div>
                <div class="flow-stage auth">
                    <div class="stage-icon">üîê</div>
                    <div class="stage-content">
                        <div class="stage-title">Auth</div>
                        <div class="stage-desc">ext-authz</div>
                    </div>
                </div>
                <div class="flow-connector">‚Üí</div>
                <div class="flow-stage service">
                    <div class="stage-icon">‚öôÔ∏è</div>
                    <div class="stage-content">
                        <div class="stage-title">7 Services</div>
                        <div class="stage-desc">FastAPI</div>
                    </div>
                </div>
                <div class="flow-connector">‚Üí</div>
                <div class="flow-stage integration">
                    <div class="stage-icon">üì®</div>
                    <div class="stage-content">
                        <div class="stage-title">Integration</div>
                        <div class="stage-desc">MQ + Workers</div>
                    </div>
                </div>
                <div class="flow-connector">‚Üí</div>
                <div class="flow-stage llm">
                    <div class="stage-icon">ü§ñ</div>
                    <div class="stage-content">
                        <div class="stage-title">LLM Agent</div>
                        <div class="stage-desc">GPT/Gemini</div>
                    </div>
                </div>
            </div>
            <div class="flow-observability">
                <div class="obs-label">
                    <span class="lang-ko">üëÅÔ∏è Observability Layer ‚Äî Î™®Îì† Í≥ÑÏ∏µ Ïã§ÏãúÍ∞Ñ Î™®ÎãàÌÑ∞ÎßÅ</span>
                    <span class="lang-en">üëÅÔ∏è Observability Layer ‚Äî Real-time monitoring across all layers</span>
                </div>
                <div class="obs-tools">
                    <span class="obs-tool">Prometheus</span>
                    <span class="obs-tool">Grafana</span>
                    <span class="obs-tool">Jaeger</span>
                    <span class="obs-tool">Kibana</span>
                    <span class="obs-tool">AlertManager</span>
                </div>
            </div>
        </div>

        <!-- LLM Pipeline Diagram -->
        <div class="llm-pipeline-section">
            <div class="llm-pipeline-header">
                <h3 class="llm-pipeline-title">
                    <span class="lang-ko">ü§ñ LLM Pipeline + Async SSE</span>
                    <span class="lang-en">ü§ñ LLM Pipeline + Async SSE</span>
                </h3>
            </div>
            
            <!-- AI Pipeline Design -->
            <div class="pipeline-subsection">
                <div class="subsection-header">
                    <div class="subsection-title">
                        <span class="lang-ko">üß† Scan AI Pipeline (Modular RAG)</span>
                        <span class="lang-en">üß† Scan AI Pipeline (Modular RAG)</span>
                    </div>
                    <div class="llm-pipeline-credit">
                        <span class="lang-ko">AI Researcher</span>
                        <span class="lang-en">AI Researcher</span>
                        <a href="https://github.com/taemin-steve" target="_blank" class="credit-link">@taemin-steve</a>
                    </div>
                </div>
                <!-- Enhanced Pipeline Visualization -->
                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 1.5rem; margin: 1rem 0;">
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        <!-- Main Pipeline Row - Clickable -->
                        <div class="llm-pipeline-flow" style="justify-content: center;">
                            <div class="pipeline-stage vision clickable" data-modal="modal-scan-vision" style="cursor: pointer;">
                        <div class="pipeline-icon">üëÅÔ∏è</div>
                        <div class="pipeline-name">Vision LLM</div>
                        <div class="pipeline-model">Pre-Retrieval</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                            <div class="pipeline-stage rule clickable" data-modal="modal-scan-rule" style="cursor: pointer;">
                        <div class="pipeline-icon">üìã</div>
                        <div class="pipeline-name">Rule Engine</div>
                        <div class="pipeline-model">Ïò®ÎàÑÎ¶¨ Í∑úÏ†ï KB</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                            <div class="pipeline-stage answer clickable" data-modal="modal-scan-answer" style="cursor: pointer;">
                        <div class="pipeline-icon">üí¨</div>
                        <div class="pipeline-name">Answer LLM</div>
                        <div class="pipeline-model">Post-Retrieval</div>
                    </div>
                </div>
                        <!-- Data Injection Row -->
                        <div style="display: flex; justify-content: space-around; align-items: flex-start; gap: 1rem; padding: 0 2rem;">
                            <div style="text-align: center; flex: 1;">
                                <div style="color: var(--text-muted); font-size: 0.7rem; margin-bottom: 0.3rem;">‚Üë inject</div>
                                <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(139, 92, 246, 0.05)); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 8px; padding: 0.5rem 0.8rem; font-size: 0.75rem;">
                                    <div style="color: rgba(139, 92, 246, 0.9); font-weight: 600;">System Prompt</div>
                                    <div style="color: var(--text-muted); font-size: 0.65rem; margin-top: 0.2rem;">Î∂ÑÎ•ò Í∏∞Ï§Ä</div>
                                </div>
                            </div>
                            <div style="text-align: center; flex: 1;">
                                <div style="color: var(--text-muted); font-size: 0.7rem; margin-bottom: 0.3rem;">‚Üë inject</div>
                                <div style="background: linear-gradient(135deg, rgba(244, 197, 106, 0.15), rgba(244, 197, 106, 0.05)); border: 1px solid rgba(244, 197, 106, 0.3); border-radius: 8px; padding: 0.5rem 0.8rem; font-size: 0.75rem;">
                                    <div style="color: rgba(244, 197, 106, 0.9); font-weight: 600;">YAML KB</div>
                                    <div style="color: var(--text-muted); font-size: 0.65rem; margin-top: 0.2rem;">200+ ÌíàÎ™©</div>
                                </div>
                            </div>
                            <div style="text-align: center; flex: 1;">
                                <div style="color: var(--text-muted); font-size: 0.7rem; margin-bottom: 0.3rem;">‚Üì output</div>
                                <div style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 255, 136, 0.05)); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 8px; padding: 0.5rem 0.8rem; font-size: 0.75rem;">
                                    <div style="color: rgba(0, 255, 136, 0.9); font-weight: 600;">JSON Output</div>
                                    <div style="color: var(--text-muted); font-size: 0.65rem; margin-top: 0.2rem;">Structured</div>
                                </div>
                            </div>
                        </div>
                        <!-- Click hint -->
                        <div style="text-align: center; color: var(--text-muted); font-size: 0.7rem; margin-top: 0.5rem;">
                            <span class="lang-ko">üí° Í∞Å Î™®Îìà ÌÅ¥Î¶≠ Ïãú ÏÉÅÏÑ∏ Î≥¥Í∏∞</span>
                            <span class="lang-en">üí° Click each module for details</span>
                        </div>
                        <!-- AI Pipeline Diagram Button -->
                        <div style="margin-top: 1.5rem; text-align: center;">
                            <button onclick="openModal('modal-scan-pipeline')" style="background: linear-gradient(135deg, rgba(139,92,246,0.2), rgba(236,72,153,0.2)); border: 1px solid rgba(139,92,246,0.4); color: var(--text-secondary); padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-size: 0.85rem; transition: all 0.2s;">
                                <span class="lang-ko">üó∫Ô∏è LLM Image Classification ÌååÏù¥ÌîÑÎùºÏù∏ ÏÉÅÏÑ∏ Î≥¥Í∏∞ ‚Üí</span>
                                <span class="lang-en">üó∫Ô∏è View LLM Image Classification Pipeline ‚Üí</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Agentic Workflow -->
            <div class="pipeline-subsection">
                <div class="subsection-header">
                    <div class="subsection-title">
                        <span class="lang-ko">ü§ñ Chat Agent <span class="status-badge" style="font-size: 0.7rem; padding: 2px 6px; margin-left: 8px; background: rgba(16,185,129,0.2); color: #10b981;">ÏôÑÎ£å</span></span>
                        <span class="lang-en">ü§ñ Chat Agent <span class="status-badge" style="font-size: 0.7rem; padding: 2px 6px; margin-left: 8px; background: rgba(16,185,129,0.2); color: #10b981;">Complete</span></span>
                    </div>
                    <div class="llm-pipeline-credit">
                        <span class="lang-ko">Backend / Infra</span>
                        <span class="lang-en">Backend / Infra</span>
                        <a href="https://github.com/mangowhoiscloud" target="_blank" class="credit-link">@mangowhoiscloud</a>
                    </div>
                </div>
                <!-- Enhanced Pipeline Visualization -->
                <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 1.5rem; margin: 1rem 0;">
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        <!-- Main Pipeline Row -->
                        <div class="async-sse-flow" style="justify-content: center; flex-wrap: wrap;">
                            <div class="async-item clickable" onclick="openModal('modal-intent-classification')" style="cursor: pointer;">
                                <div class="async-icon">üéØ</div>
                                <div class="async-name">Intent</div>
                                <div class="async-desc">9Î∂ÑÎ•ò</div>
                            </div>
                            <div class="pipeline-arrow">‚Üí</div>
                            <div class="async-item clickable" onclick="openModal('modal-send-api')" style="cursor: pointer;">
                                <div class="async-icon">‚ö°</div>
                                <div class="async-name">Router</div>
                                <div class="async-desc">Send API</div>
                            </div>
                            <div class="pipeline-arrow">‚Üí</div>
                            <div class="async-item clickable" onclick="openModal('modal-chat-toolcalling')" style="cursor: pointer;">
                                <div class="async-icon">üîß</div>
                                <div class="async-name">Subagents</div>
                                <div class="async-desc">11Ï¢Ö ‚à•</div>
                            </div>
                            <div class="pipeline-arrow">‚Üí</div>
                            <div class="async-item clickable" onclick="openModal('modal-chat-aggregator')" style="cursor: pointer;">
                                <div class="async-icon">üì¶</div>
                                <div class="async-name">Aggregator</div>
                                <div class="async-desc">Collect</div>
                            </div>
                            <div class="pipeline-arrow">‚Üí</div>
                            <div class="async-item clickable" onclick="openModal('modal-token-streaming')" style="cursor: pointer;">
                                <div class="async-icon">üí¨</div>
                                <div class="async-name">Answer</div>
                                <div class="async-desc">Token v2</div>
                            </div>
                        </div>
                        <!-- Data Injection Row -->
                        <div style="display: flex; justify-content: space-around; align-items: flex-start; gap: 0.8rem; padding: 0 1rem; flex-wrap: wrap;">
                            <div style="text-align: center; min-width: 90px;">
                                <div style="color: var(--text-muted); font-size: 0.65rem; margin-bottom: 0.2rem;">‚Üë</div>
                                <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(139, 92, 246, 0.05)); border: 1px solid rgba(139, 92, 246, 0.3); border-radius: 6px; padding: 0.3rem 0.5rem; font-size: 0.65rem;">
                                    <div style="color: rgba(139, 92, 246, 0.9); font-weight: 600;">intent.txt</div>
                                </div>
                            </div>
                            <div style="text-align: center; min-width: 90px;">
                                <div style="color: var(--text-muted); font-size: 0.65rem; margin-bottom: 0.2rem;">‚Üë</div>
                                <div style="background: linear-gradient(135deg, rgba(244, 197, 106, 0.15), rgba(244, 197, 106, 0.05)); border: 1px solid rgba(244, 197, 106, 0.3); border-radius: 6px; padding: 0.3rem 0.5rem; font-size: 0.65rem;">
                                    <div style="color: rgba(244, 197, 106, 0.9); font-weight: 600;">Enrichment</div>
                                </div>
                            </div>
                            <div style="text-align: center; min-width: 90px;">
                                <div style="color: var(--text-muted); font-size: 0.65rem; margin-bottom: 0.2rem;">‚Üë</div>
                                <div style="background: linear-gradient(135deg, rgba(77, 170, 141, 0.15), rgba(77, 170, 141, 0.05)); border: 1px solid rgba(77, 170, 141, 0.3); border-radius: 6px; padding: 0.3rem 0.5rem; font-size: 0.65rem;">
                                    <div style="color: rgba(77, 170, 141, 0.9); font-weight: 600;">Function Def</div>
                                </div>
                            </div>
                            <div style="text-align: center; min-width: 90px;">
                                <div style="color: var(--text-muted); font-size: 0.65rem; margin-bottom: 0.2rem;">‚Üë</div>
                                <div style="background: linear-gradient(135deg, rgba(255, 165, 0, 0.15), rgba(255, 165, 0, 0.05)); border: 1px solid rgba(255, 165, 0, 0.3); border-radius: 6px; padding: 0.3rem 0.5rem; font-size: 0.65rem;">
                                    <div style="color: rgba(255, 165, 0, 0.9); font-weight: 600;">Lamport Clock</div>
                                </div>
                            </div>
                            <div style="text-align: center; min-width: 90px;">
                                <div style="color: var(--text-muted); font-size: 0.65rem; margin-bottom: 0.2rem;">‚Üì</div>
                                <div style="background: linear-gradient(135deg, rgba(0, 255, 136, 0.15), rgba(0, 255, 136, 0.05)); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 6px; padding: 0.3rem 0.5rem; font-size: 0.65rem;">
                                    <div style="color: rgba(0, 255, 136, 0.9); font-weight: 600;">notify_token_v2</div>
                                </div>
                            </div>
                        </div>
                        <!-- Tags -->
                        <div style="display: flex; justify-content: center; gap: 0.75rem; margin-top: 0.3rem; flex-wrap: wrap;">
                            <div style="display: flex; align-items: center; gap: 0.4rem; padding: 0.3rem 0.6rem; background: rgba(99, 102, 241, 0.1); border-radius: 15px; font-size: 0.65rem;">
                                <span style="color: rgba(99, 102, 241, 0.9);">üß†</span>
                                <span style="color: var(--text-secondary);">Multi-Model (GPT-5.2 / Gemini 3)</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.4rem; padding: 0.3rem 0.6rem; background: rgba(139, 92, 246, 0.1); border-radius: 15px; font-size: 0.65rem;">
                                <span style="color: rgba(139, 92, 246, 0.9);">‚öôÔ∏è</span>
                                <span style="color: var(--text-secondary);">LangGraph StateGraph</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.4rem; padding: 0.3rem 0.6rem; background: rgba(0, 255, 136, 0.1); border-radius: 15px; font-size: 0.65rem;">
                                <span style="color: var(--text-muted);">üí°</span>
                                <span style="color: var(--text-muted);">
                                    <span class="lang-ko">Î™®Îìà ÌÅ¥Î¶≠ Ïãú ÏÉÅÏÑ∏</span>
                                    <span class="lang-en">Click for details</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Production-Ready: Scan -->
            <div class="pipeline-subsection clickable" data-modal="modal-scan-infra" style="cursor: pointer;">
                <div class="subsection-header">
                    <div class="subsection-title">
                        <span class="lang-ko">üì¶ Scan: Celery + Gevent <span style="font-size: 0.7rem; color: var(--text-muted); margin-left: 8px;">üîç ÌÅ¥Î¶≠ÌïòÏó¨ ÏÉÅÏÑ∏</span></span>
                        <span class="lang-en">üì¶ Scan: Celery + Gevent <span style="font-size: 0.7rem; color: var(--text-muted); margin-left: 8px;">üîç Click for details</span></span>
                    </div>
                    <div class="llm-pipeline-credit">
                        <span class="lang-ko">Backend / Infra</span>
                        <span class="lang-en">Backend / Infra</span>
                        <a href="https://github.com/mangowhoiscloud" target="_blank" class="credit-link">@mangowhoiscloud</a>
                    </div>
                </div>
                <div class="async-sse-flow">
                    <div class="async-item">
                        <div class="async-icon">‚õìÔ∏è</div>
                        <div class="async-name">Celery Chain</div>
                        <div class="async-desc">4-Stage</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="async-item">
                        <div class="async-icon">üê∞</div>
                        <div class="async-name">RabbitMQ</div>
                        <div class="async-desc">Job Queue</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="async-item">
                        <div class="async-icon">üåä</div>
                        <div class="async-name">Event Bus</div>
                        <div class="async-desc">3-Tier Redis</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="async-item">
                        <div class="async-icon">üì∫</div>
                        <div class="async-name">SSE</div>
                        <div class="async-desc">Client</div>
                    </div>
                </div>
                <div class="llm-pipeline-specs" style="margin-top: 1rem;">
                    <div class="spec-item">
                        <span class="spec-label">Pool</span>
                        <span class="spec-value">gevent 100</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">üéØ SLA (VU 300)</span>
                        <span class="spec-value">99.9%</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">E2E p95</span>
                        <span class="spec-value">48.5s</span>
                    </div>
                    <div class="spec-item">
                        <span class="spec-label">Throughput</span>
                        <span class="spec-value">402 req/m</span>
                    </div>
                </div>
            </div>

            <!-- Production-Ready: Chat -->
            <div class="pipeline-subsection">
                <div class="subsection-header">
                    <div class="subsection-title">
                        <span class="lang-ko">ü§ñ Chat: Taskiq + asyncio <span class="status-badge" style="font-size: 0.7rem; padding: 2px 6px; margin-left: 8px; background: rgba(16,185,129,0.2); color: #10b981;">ÏôÑÎ£å</span> <span style="font-size: 0.7rem; color: var(--text-muted); margin-left: 8px;">üîç Í∞Å Îã®Í≥Ñ ÌÅ¥Î¶≠</span></span>
                        <span class="lang-en">ü§ñ Chat: Taskiq + asyncio <span class="status-badge" style="font-size: 0.7rem; padding: 2px 6px; margin-left: 8px; background: rgba(16,185,129,0.2); color: #10b981;">Complete</span> <span style="font-size: 0.7rem; color: var(--text-muted); margin-left: 8px;">üîç Click each stage</span></span>
                    </div>
                    <div class="llm-pipeline-credit">
                        <span class="lang-ko">Backend / Infra</span>
                        <span class="lang-en">Backend / Infra</span>
                        <a href="https://github.com/mangowhoiscloud" target="_blank" class="credit-link">@mangowhoiscloud</a>
                    </div>
                </div>
                <div class="async-sse-flow">
                    <div class="async-item clickable" onclick="openModal('modal-chat-taskiq')" style="cursor: pointer;">
                        <div class="async-icon">üîÑ</div>
                        <div class="async-name">Taskiq</div>
                        <div class="async-desc">asyncio</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="async-item clickable" onclick="openModal('modal-chat-rabbitmq')" style="cursor: pointer;">
                        <div class="async-icon">üê∞</div>
                        <div class="async-name">RabbitMQ</div>
                        <div class="async-desc">Quorum</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="async-item clickable" onclick="openModal('modal-chat-langgraph')" style="cursor: pointer;">
                        <div class="async-icon">‚öôÔ∏è</div>
                        <div class="async-name">LangGraph</div>
                        <div class="async-desc">StateGraph</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="async-item clickable" onclick="openModal('modal-chat-eventbus')" style="cursor: pointer;">
                        <div class="async-icon">üåä</div>
                        <div class="async-name">Event Bus</div>
                        <div class="async-desc">Token v2</div>
                    </div>
                    <div class="pipeline-arrow">‚Üí</div>
                    <div class="async-item clickable" onclick="openModal('modal-chat-sse')" style="cursor: pointer;">
                        <div class="async-icon">üì∫</div>
                        <div class="async-name">SSE</div>
                        <div class="async-desc">Client</div>
                    </div>
                </div>
                <div class="llm-pipeline-specs" style="margin-top: 1rem;">
                    <div class="spec-item clickable" onclick="openModal('modal-3tier-memory')" style="cursor: pointer;">
                        <span class="spec-label">Checkpointer</span>
                        <span class="spec-value">ReadThroughCheckpointer</span>
                    </div>
                    <div class="spec-item clickable" onclick="openModal('modal-chat-eventbus')" style="cursor: pointer;">
                        <span class="spec-label">Token</span>
                        <span class="spec-value">XRANGE Recovery</span>
                    </div>
                    <div class="spec-item clickable" onclick="openModal('modal-3tier-memory')" style="cursor: pointer;">
                        <span class="spec-label">Memory</span>
                        <span class="spec-value">3-Tier (Redis + PG)</span>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- Tech Stack Section -->
    <section class="section" id="tech">
        <div class="section-header">
            <div class="section-number">04</div>
            <h2 class="section-title">
                <span class="lang-ko">Í∏∞Ïà† Ïä§ÌÉù</span>
                <span class="lang-en">Tech Stack</span>
            </h2>
            <p class="section-desc">
                <span class="lang-ko">ÌîÑÎ°úÏ†ùÌä∏ÏóêÏÑú ÌôúÏö©Ìïú Ï£ºÏöî Í∏∞Ïà†Îì§ÏûÖÎãàÎã§.</span>
                <span class="lang-en">Key technologies used in the project.</span>
            </p>
        </div>

        <div class="tech-stack">
            <div class="tech-category">
                <h4 class="tech-category-title">Infrastructure</h4>
                <div class="tech-items">
                    <span class="tech-item">AWS EC2</span>
                    <span class="tech-item">Terraform</span>
                    <span class="tech-item">Ansible</span>
                    <span class="tech-item">Kubernetes</span>
                    <span class="tech-item">Istio</span>
                    <span class="tech-item">ArgoCD</span>
                </div>
            </div>
            <div class="tech-category">
                <h4 class="tech-category-title">Backend</h4>
                <div class="tech-items">
                    <span class="tech-item">Python 3.11</span>
                    <span class="tech-item">FastAPI</span>
                    <span class="tech-item">SQLAlchemy 2.0</span>
                    <span class="tech-item">Celery</span>
                    <span class="tech-item">Gevent</span>
                    <span class="tech-item">Taskiq</span>
                    <span class="tech-item">Go</span>
                </div>
            </div>
            <div class="tech-category">
                <h4 class="tech-category-title">Data & Messaging</h4>
                <div class="tech-items">
                    <span class="tech-item">PostgreSQL</span>
                    <span class="tech-item">Redis</span>
                    <span class="tech-item">Redis Streams</span>
                    <span class="tech-item">RabbitMQ</span>
                    <span class="tech-item">Elasticsearch</span>
                </div>
            </div>
            <div class="tech-category">
                <h4 class="tech-category-title">Observability</h4>
                <div class="tech-items">
                    <span class="tech-item">Prometheus</span>
                    <span class="tech-item">Grafana</span>
                    <span class="tech-item">AlertManager</span>
                    <span class="tech-item">Slack</span>
                    <span class="tech-item">Fluent Bit</span>
                    <span class="tech-item">Kibana</span>
                    <span class="tech-item">Jaeger</span>
                    <span class="tech-item">Kiali</span>
                </div>
            </div>
            <div class="tech-category">
                <h4 class="tech-category-title">LLM</h4>
                <div class="tech-items">
                    <span class="tech-item">GPT-5.2</span>
                    <span class="tech-item">Gemini-3.0-flash</span>
                    <span class="tech-item">OpenAI Agents SDK</span>
                    <span class="tech-item">Gemini SDK</span>
                    <span class="tech-item">LangGraph</span>
                </div>
            </div>
            <div class="tech-category">
                <h4 class="tech-category-title">Scaling</h4>
                <div class="tech-items">
                    <span class="tech-item">KEDA</span>
                    <span class="tech-item">HPA</span>
                    <span class="tech-item">Prometheus Adapter</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Timeline Section -->
    <section class="section" id="timeline">
        <div class="section-header">
            <div class="section-number">05</div>
            <h2 class="section-title">
                <span class="lang-ko">ÌîÑÎ°úÏ†ùÌä∏ ÌÉÄÏûÑÎùºÏù∏</span>
                <span class="lang-en">Project Timeline</span>
            </h2>
        </div>

        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-date">2025.10.30 - 11.20</div>
                <div class="timeline-title">
                    <span class="lang-ko">üèóÔ∏è 14-nodes ÌÅ¥Îü¨Ïä§ÌÑ∞ Íµ¨Ï∂ï & GitOps</span>
                    <span class="lang-en">üèóÔ∏è 14-node Cluster Setup & GitOps</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">AWS 14-nodes Kubernetes ÌÅ¥Îü¨Ïä§ÌÑ∞ Íµ¨Ï∂ï, ArgoCD App-of-Apps + Sync Wave Ìå®ÌÑ¥ Ï†ÅÏö©</span>
                    <span class="lang-en">Built AWS 14-node Kubernetes cluster, applied ArgoCD App-of-Apps + Sync Wave patterns</span>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2025.11.20 - 11.30</div>
                <div class="timeline-title">
                    <span class="lang-ko">üñ•Ô∏è 7Í∞ú ÎèÑÎ©îÏù∏ ÏÑúÎ≤Ñ Í∞úÎ∞ú</span>
                    <span class="lang-en">üñ•Ô∏è 7 Domain Server Development</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">Auth, Character, Chat, Scan, Location, Users, Image 7Í∞ú ÎßàÏù¥ÌÅ¨Î°úÏÑúÎπÑÏä§ Í∞úÎ∞ú</span>
                    <span class="lang-en">Developed 7 microservices: Auth, Character, Chat, Scan, Location, Users, Image</span>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2025.12.01 - 12.02</div>
                <div class="timeline-title">
                    <span class="lang-ko">üèÜ FE-BE Ïó∞Îèô & ÏÉàÏãπÌÜ§ Î≥∏ÏÑ† Ïö∞ÏàòÏÉÅ</span>
                    <span class="lang-en">üèÜ FE-BE Integration & SeSACTHON Excellence Award</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">ÌîÑÎ°†Ìä∏ÏóîÎìú-Î∞±ÏóîÎìú Ïó∞Îèô, 2025 AI ÏÉàÏãπÌÜ§ Î≥∏ÏÑ† Ïö∞ÏàòÏÉÅ ÏàòÏÉÅ (Top 4)</span>
                    <span class="lang-en">Frontend-Backend integration, 2025 AI SeSACTHON Finals Excellence Award (Top 4)</span>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2025.12.08 - 12.17</div>
                <div class="timeline-title">
                    <span class="lang-ko">üï∏Ô∏è Istio Service Mesh & Auth Offloading</span>
                    <span class="lang-en">üï∏Ô∏è Istio Service Mesh & Auth Offloading</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">Istio Sidecar Injection, ext-authz ÏÑúÎ≤Ñ Í∞úÎ∞ú, gRPC ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò, RPS 1,200+ Îã¨ÏÑ±</span>
                    <span class="lang-en">Istio Sidecar Injection, ext-authz server, gRPC migration, achieved RPS 1,200+</span>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2025.12.18 - 12.25</div>
                <div class="timeline-title">
                    <span class="lang-ko">üì® RabbitMQ + Celery ÎπÑÎèôÍ∏∞ ÏïÑÌÇ§ÌÖçÏ≤ò</span>
                    <span class="lang-en">üì® RabbitMQ + Celery Async Architecture</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">AI ÌååÏù¥ÌîÑÎùºÏù∏ ÎπÑÎèôÍ∏∞Ìôî, 4Îã®Í≥Ñ Celery Chain Íµ¨ÌòÑ, Gevent Pool Ï†ÑÌôò</span>
                    <span class="lang-en">Async AI pipeline, 4-stage Celery Chain, Gevent Pool migration</span>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2025.12.20 - 12.22</div>
                <div class="timeline-title">
                    <span class="lang-ko">üìä Observability Ïä§ÌÉù Íµ¨Ï∂ï</span>
                    <span class="lang-en">üìä Observability Stack Setup</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">ECK Í∏∞Î∞ò EFK Ïä§ÌÉù, OpenTelemetry Î∂ÑÏÇ∞ Ìä∏Î†àÏù¥Ïã±, Kiali ÏãúÍ∞ÅÌôî</span>
                    <span class="lang-en">ECK-based EFK stack, OpenTelemetry distributed tracing, Kiali visualization</span>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2025.12.26 - 01.01</div>
                <div class="timeline-title">
                    <span class="lang-ko">üåä Event Relay Layer & Î∂ÄÌïò ÌÖåÏä§Ìä∏</span>
                    <span class="lang-en">üåä Event Relay Layer & Load Testing</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">Streams + Pub/Sub + State KV 3-Tier ÏïÑÌÇ§ÌÖçÏ≤ò, 500 VU SLA, 600 VU Ìè¨ÌôîÏßÄÏ†ê ÎèÑÏ∂ú</span>
                    <span class="lang-en">Streams + Pub/Sub + State KV 3-tier architecture, 500 VU SLA, 600 VU saturation point</span>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-date">2025.12.31 - 2026.01.09</div>
                <div class="timeline-title">
                    <span class="lang-ko">üèõÔ∏è Clean Architecture ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò</span>
                    <span class="lang-en">üèõÔ∏è Clean Architecture Migration</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">7Í∞ú ÎèÑÎ©îÏù∏ Ï†êÏßÑÏ†Å ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò, DIP/Port & Adapter/CQRS Ï†ÅÏö©, Info ÏÑúÎπÑÏä§ Ï∂îÍ∞Ä Í∞úÎ∞ú (Îâ¥Ïä§ ÌîºÎìú)</span>
                    <span class="lang-en">Incremental migration of 7 domains, DIP/Port & Adapter/CQRS, Info service addition (News Feed)</span>
                </div>
            </div>
            <div class="timeline-item" style="--category-color: var(--ec-primary);">
                <div class="timeline-date" style="color: var(--ec-primary);">üîÑ In Progress</div>
                <div class="timeline-title">
                    <span class="lang-ko">ü§ñ Chat ÎèÑÎ©îÏù∏ Agentic Workflow Ï†ÑÌôò</span>
                    <span class="lang-en">ü§ñ Chat Domain Agentic Workflow Transition</span>
                </div>
                <div class="timeline-desc">
                    <span class="lang-ko">LangGraph Í∏∞Î∞ò Multi-Agent ÏïÑÌÇ§ÌÖçÏ≤òÎ°ú Chat ÎèÑÎ©îÏù∏ Í≥†ÎèÑÌôî, ÎèÑÍµ¨ Ìò∏Ï∂ú + ÏÉÅÌÉú Í¥ÄÎ¶¨ + Ïä§Ìä∏Î¶¨Î∞ç ÌÜµÌï©</span>
                    <span class="lang-en">Upgrading Chat domain to LangGraph-based Multi-Agent architecture, Tool calling + State management + Streaming integration</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <!-- Team Section -->
        <div class="footer-team">
            <div class="footer-team-title">
                <span class="lang-ko">üë• Team Eco¬≤</span>
                <span class="lang-en">üë• Team Eco¬≤</span>
            </div>
            <div class="team-members">
                <div class="team-member">
                    <span class="team-role">Backend / Infra</span>
                    <a href="https://github.com/mangowhoiscloud" target="_blank" class="team-link">@mangowhoiscloud</a>
                </div>
                <div class="team-member">
                    <span class="team-role">AI Research</span>
                    <a href="https://github.com/taemin-steve" target="_blank" class="team-link">@taemin-steve</a>
                </div>
                <div class="team-member">
                    <span class="team-role">Frontend</span>
                    <a href="https://github.com/ChaeHyun-Kim" target="_blank" class="team-link">@ChaeHyun-Kim</a>
                </div>
                <div class="team-member">
                    <span class="team-role">Frontend</span>
                    <a href="https://github.com/suji8073" target="_blank" class="team-link">@suji8073</a>
                </div>
                <div class="team-member">
                    <span class="team-role">UI/UX Design</span>
                    <a href="mailto:tlstnqls0106@gmail.com" class="team-link">Ïã†ÏàòÎπà ‚úâÔ∏è</a>
                </div>
            </div>
        </div>

        <div class="footer-links">
            <a href="https://frontend.dev.growbin.app/" target="_blank" class="footer-link" style="background: rgba(229,168,59,0.12); border-color: rgba(229,168,59,0.3);">
                <span>üåø Service (PWA)</span>
            </a>
            <a href="https://github.com/eco2-team/backend" target="_blank" class="footer-link">
                <span>GitHub (Backend)</span>
            </a>
            <a href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29" target="_blank" class="footer-link">
                <span>Blog (100+ ¬∑ 76+)</span>
            </a>
            <a href="https://mangowhoiscloud.github.io/resume/" target="_blank" class="footer-link">
                <span>Resume</span>
            </a>
            <a href="https://www.linkedin.com/in/jihwan-ryu-b6b04a202/" target="_blank" class="footer-link">
                <span>LinkedIn</span>
            </a>
        </div>
        <p class="footer-copyright">
            <span class="lang-ko">ü•≠ ¬© 2025 Î•òÏßÄÌôò (Jihwan Ryu). All rights reserved.</span>
            <span class="lang-en">ü•≠ ¬© 2025 Jihwan Ryu. All rights reserved.</span>
        </p>
    </footer>

    <!-- Modals -->

    <!-- Modal: Domain - Auth -->
    <div class="modal-overlay" id="modal-domain-auth">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-domain-auth')">√ó</button>
            <h3 class="modal-title">üîê Auth Domain - OAuth 2.0 + PKCE</h3>
            <div class="domain-demo-section">
                <div class="domain-demo-title">
                    <span class="lang-ko">üìπ API ÎèôÏûë</span>
                    <span class="lang-en">üìπ API Action</span>
                </div>
                <a href="https://frontend.dev.growbin.app" target="_blank" rel="noopener" class="domain-gif-link">
                    <div class="domain-gif-container">
                        <img src="assets/gifs/auth-api.gif" alt="Auth API Demo">
                    </div>
                </a>
            </div>

            <!-- Auth Relay Fallback Outbox -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Auth Relay Fallback Outbox</h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Auth Domain Architecture                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Client  ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  Auth API   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ   OAuth     ‚îÇ   ‚îÇ  Users gRPC   ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ Google/Kakao‚îÇ   ‚îÇGetOrCreateUser‚îÇ   ‚îÇ
‚îÇ                         ‚îÇ          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                         ‚îÇ                                                 ‚îÇ
‚îÇ                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                         ‚îÇ
‚îÇ                  ‚îÇ JWT Î∞úÍ∏â    ‚îÇ  Access 3h / Refresh 30d                ‚îÇ
‚îÇ                  ‚îÇ (HS256)     ‚îÇ  JTI Í∏∞Î∞ò Î¨¥Ìö®Ìôî, Token Rotation        ‚îÇ
‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                         ‚îÇ
‚îÇ                         ‚îÇ                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ                     ‚ñº                     Async Layer              ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ Auth Relay  ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  RabbitMQ   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ ext-authz (All Pods)    ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ (Redis Out- ‚îÇ   ‚îÇ  Fanout     ‚îÇ   ‚îÇ Local Cache Update      ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  box Pattern)‚îÇ   ‚îÇ (blacklist) ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- OAuth Providers -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(234,67,53,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(234,67,53,0.3);">
                    <h5 style="color: #ea4335; margin-bottom: 0.5rem; font-size: 0.85rem;">Google OAuth</h5>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">
                        <div>‚Ä¢ PKCE (S256)</div>
                        <div>‚Ä¢ openid, email, profile</div>
                        <div>‚Ä¢ access_type=offline</div>
                    </div>
                </div>
                <div style="background: rgba(254,229,0,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(254,229,0,0.3);">
                    <h5 style="color: #fee500; margin-bottom: 0.5rem; font-size: 0.85rem;">Kakao OAuth</h5>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">
                        <div>‚Ä¢ PKCE (S256)</div>
                        <div>‚Ä¢ Developer Console Í∏∞Î∞ò</div>
                        <div>‚Ä¢ kakao_account.profile</div>
                    </div>
                </div>
                <div style="background: rgba(30,200,0,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(30,200,0,0.3);">
                    <h5 style="color: #1ec800; margin-bottom: 0.5rem; font-size: 0.85rem;">Naver OAuth</h5>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">
                        <div>‚Ä¢ PKCE ÎØ∏ÏßÄÏõê</div>
                        <div>‚Ä¢ profile, email</div>
                        <div>‚Ä¢ response ÌïÑÎìú Îß§Ìïë</div>
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="domain-details">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">PKCE Flow</div>
                        <div class="domain-detail-value">code_verifier (64byte urlsafe) ‚Üí SHA256 ‚Üí base64url = code_challenge (S256)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Cookie</div>
                        <div class="domain-detail-value">s_access / s_refresh, HttpOnly + Secure + SameSite=Lax, domain: .dev.growbin.app</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Token Rotation</div>
                        <div class="domain-detail-value">Refresh Ïãú old JTI ‚Üí Blacklist Î∞úÌñâ, new pair Î∞úÍ∏â + ÏÑ∏ÏÖò Îì±Î°ù</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Session Store</div>
                        <div class="domain-detail-value">Redis: user:tokens:{uid} (Set), token:meta:{jti} (JSON), TTL = token exp</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Auth Relay</div>
                        <div class="domain-detail-value">Redis Fallback Outbox ‚Üí RabbitMQ Fanout ‚Üí ext-authz Local Cache ÎèôÍ∏∞Ìôî</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">gRPC</div>
                        <div class="domain-detail-value">Users.GetOrCreateUser() ‚Üí Ïã†Í∑ú Ïãú Í∏∞Î≥∏ Ï∫êÎ¶≠ÌÑ∞(Ïù¥ÏΩî) ÏûêÎèô Î∂ÄÏó¨</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Domain - Character -->
    <div class="modal-overlay" id="modal-domain-character">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-domain-character')">√ó</button>
            <h3 class="modal-title">üåç Character Domain - Dual Interface + Local Cache</h3>
            <div class="domain-demo-section">
                <div class="domain-demo-title">
                    <span class="lang-ko">üìπ API ÎèôÏûë</span>
                    <span class="lang-en">üìπ API Action</span>
                </div>
                <a href="https://frontend.dev.growbin.app" target="_blank" rel="noopener" class="domain-gif-link">
                    <div class="domain-gif-container">
                        <img src="assets/gifs/character-api.gif" alt="Character API Demo">
                    </div>
                </a>
            </div>

            <!-- Interface Comparison -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                    <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">HTTP REST</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">
                        <div>‚Ä¢ <code>GET /catalog</code> ‚Äî Ï∫êÎ¶≠ÌÑ∞ Ïπ¥ÌÉàÎ°úÍ∑∏</div>
                        <div>‚Ä¢ <code>POST /internal/rewards</code> ‚Äî Î≥¥ÏÉÅ ÌèâÍ∞Ä</div>
                        <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted);">Internal: Istio AuthorizationPolicy</div>
                    </div>
                </div>
                <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                    <h5 style="color: #10b981; margin-bottom: 0.75rem;">gRPC (CharacterService)</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">
                        <div>‚Ä¢ <code>GetCharacterReward()</code> ‚Äî Î≥¥ÏÉÅ ÌåêÏ†ï</div>
                        <div>‚Ä¢ <code>GetDefaultCharacter()</code> ‚Äî Í∏∞Î≥∏ Ï∫êÎ¶≠ÌÑ∞</div>
                        <div>‚Ä¢ <code>GetCharacterByMatch()</code> ‚Äî Î∂ÑÎ•ò Îß§Ïπ≠</div>
                        <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted);">Chat Worker, Scan WorkerÏóêÏÑú Ìò∏Ï∂ú</div>
                    </div>
                </div>
            </div>

            <!-- 2-Tier Cache Architecture -->
            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 1rem; font-size: 1.1rem;">
                <span class="lang-ko">üóÑÔ∏è 2-Tier Cache Architecture</span>
                <span class="lang-en">üóÑÔ∏è 2-Tier Cache Architecture</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    2-Tier Local Cache Strategy                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ  Tier 1: Local In-Memory Cache (Primary)                          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                        ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Thread-safe Singleton (Double-Checked Locking)                 ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ~50KB (13 character records)                                   ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Zero-latency access (~0.01ms)                                  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ No Fixed TTL ‚Üí Event-driven refresh                            ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                              ‚îÇ miss                                       ‚îÇ
‚îÇ                              ‚ñº                                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ  Tier 2: Database Fallback (Secondary)                            ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                        ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ PostgreSQL via SQLAlchemy                                      ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Graceful degradation                                           ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îÇ   Initialization & Sync                                                   ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                              ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     Eager Loading      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  FastAPI    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  CharacterLocalCache    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  Lifespan   ‚îÇ     (ÏÑúÎ≤Ñ ÏãúÏûë Ï†Ñ)      ‚îÇ  (Singleton)            ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                    ‚ñ≤                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     Event-Based Sync   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  RabbitMQ   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  MQ Consumer (goroutine)‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  Fanout     ‚îÇ     (Eventual Consist) ‚îÇ  ‚Üí All Pods Broadcast   ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <!-- Performance -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin: 1.5rem 0;">
                <div style="background: linear-gradient(135deg, rgba(16,185,129,0.2), rgba(16,185,129,0.05)); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(16,185,129,0.3);">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #10b981;">~0.01ms</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">Local Cache Lookup</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(59,130,246,0.05)); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(59,130,246,0.3);">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #3b82f6;">~50KB</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">13 Records Cached</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(168,85,247,0.2), rgba(168,85,247,0.05)); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(168,85,247,0.3);">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #a855f7;">No TTL</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">Event-driven Refresh</div>
                </div>
            </div>

            <!-- Implementation Patterns -->
            <h4 style="color: var(--accent-purple); margin: 1.5rem 0 1rem; font-size: 1.1rem;">
                <span class="lang-ko">üèóÔ∏è Implementation Patterns</span>
                <span class="lang-en">üèóÔ∏è Implementation Patterns</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ìå®ÌÑ¥</span><span class="lang-en">Pattern</span></th>
                    <th><span class="lang-ko">Íµ¨ÌòÑ</span><span class="lang-en">Implementation</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td>Decorator</td>
                    <td><code>LocalCachedCatalogReader</code></td>
                    <td><span class="lang-ko">Cache ÎûòÌïë ‚Üí SqlaCharacterReader delegate</span><span class="lang-en">Cache wrapper ‚Üí SqlaCharacterReader delegate</span></td>
                </tr>
                <tr>
                    <td>Singleton</td>
                    <td><code>CharacterLocalCache</code></td>
                    <td><span class="lang-ko">Double-Checked LockingÏúºÎ°ú thread-safe</span><span class="lang-en">Thread-safe via Double-Checked Locking</span></td>
                </tr>
                <tr>
                    <td>Eager Loading</td>
                    <td>FastAPI Lifespan</td>
                    <td><span class="lang-ko">ÏÑúÎ≤Ñ ÏãúÏûë Ï†Ñ DBÏóêÏÑú Ï∫êÏãú ÏõåÎ∞çÏóÖ</span><span class="lang-en">Cache warmup from DB before server start</span></td>
                </tr>
                <tr>
                    <td>Eventual Consistency</td>
                    <td>RabbitMQ Fanout</td>
                    <td><span class="lang-ko">Ïàò Ï¥à ÏßÄÏó∞ ÌóàÏö©, Redis ÏùòÏ°¥ÏÑ± Ï†úÍ±∞</span><span class="lang-en">Accept seconds latency, Redis-independent</span></td>
                </tr>
            </table>

            <!-- Technical Details -->
            <div class="domain-details" style="margin-top: 1.5rem;">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Reward Policy</div>
                        <div class="domain-detail-value">disposal_rules=True + insufficiencies=False ‚Üí middle_category Í∏∞Î∞ò Ï∫êÎ¶≠ÌÑ∞ Îß§Ïπ≠</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Ownership</div>
                        <div class="domain-detail-value">UNIQUE(user_id, character_code) Î©±Îì±ÏÑ±, source: scan-reward / default-onboard</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Chat Integration</div>
                        <div class="domain-detail-value">GetCharacterByMatch(match_label) ‚Üí CDN Ïù¥ÎØ∏ÏßÄ Reference ‚Üí Gemini Image Gen</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Character Worker</div>
                        <div class="domain-detail-value">Celery: match_character_task, reward_event_task, grant_default_task</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Name Detector</div>
                        <div class="domain-detail-value">Longest-match-first ÏïåÍ≥†Î¶¨Ï¶ò, aliases Í∏∞Î∞ò ÏÇ¨Ïö©Ïûê Î©îÏãúÏßÄ Ï∫êÎ¶≠ÌÑ∞ Í∞êÏßÄ</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">CDN Asset</div>
                        <div class="domain-detail-value">images.dev.growbin.app/character/{cdn_code}.png, CharacterAssetPort Ï∂îÏÉÅÌôî</div>
                    </div>
                </div>
            </div>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid var(--accent-purple);">
                <strong style="color: var(--accent-purple);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem;">
                    <a href="https://rooftopsnow.tistory.com/135" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Character Local Cache ÏïÑÌÇ§ÌÖçÏ≤ò ‚Üí</span>
                        <span class="lang-en">Character Local Cache Architecture ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Domain - Chat -->
    <div class="modal-overlay" id="modal-domain-chat">
        <div class="modal-content domain-modal-content">
            <button class="modal-close" onclick="closeModal('modal-domain-chat')">√ó</button>
            <h3 class="modal-title">üí¨ Chat Agent</h3>
            <div class="domain-demo-section">
                <div class="domain-demo-title">
                    <span class="lang-ko">üìπ API ÎèôÏûë</span>
                    <span class="lang-en">üìπ API Action</span>
                </div>
                <div class="domain-gif-container" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 8px;">
                    <iframe src="https://www.youtube.com/embed/kCfmNLcm85o" title="Chat Agent Demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 8px;"></iframe>
                </div>
            </div>
            <!-- Intent Classification Grid - First -->
            <div style="margin-bottom: 1.5rem;">
                <div style="font-size: 0.9rem; font-weight: 600; color: var(--primary); margin-bottom: 0.75rem;">üéØ 9-Class Intent Classification</div>
                <!-- Intent Node Card -->
                <div style="background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(139,92,246,0.15)); border: 1px solid rgba(59,130,246,0.4); border-radius: 8px; padding: 0.75rem; margin-bottom: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-node')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <div style="font-weight: 600; color: #3b82f6; font-size: 0.85rem;">üß† Intent Node</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">LLM Î∂ÑÎ•ò + Chain-of-Intent + Multi-Intent Detection + Keyword Boost</div>
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                    <div style="background: rgba(139,92,246,0.15); border: 1px solid rgba(139,92,246,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-waste')">
                        <div style="font-weight: 600; color: #8b5cf6; font-size: 0.85rem;">üóëÔ∏è waste</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">ÌèêÍ∏∞Î¨º Î∂ÑÎ¶¨Î∞∞Ï∂ú (RAG)</div>
                    </div>
                    <div style="background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-character')">
                        <div style="font-weight: 600; color: #f59e0b; font-size: 0.85rem;">üåç character</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">Ï∫êÎ¶≠ÌÑ∞ ÏßàÎ¨∏ (gRPC)</div>
                    </div>
                    <div style="background: rgba(239,68,68,0.15); border: 1px solid rgba(239,68,68,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-location')">
                        <div style="font-weight: 600; color: #ef4444; font-size: 0.85rem;">üìç location</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">ÏúÑÏπò Í∏∞Î∞ò Í≤ÄÏÉâ (KakaoAPI)</div>
                    </div>
                    <div style="background: rgba(236,72,153,0.15); border: 1px solid rgba(236,72,153,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-bulk-waste')">
                        <div style="font-weight: 600; color: #ec4899; font-size: 0.85rem;">üõãÔ∏è bulk_waste</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">ÎåÄÌòïÌèêÍ∏∞Î¨º (MOIS API)</div>
                    </div>
                    <div style="background: rgba(34,197,94,0.15); border: 1px solid rgba(34,197,94,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-recyclable-price')">
                        <div style="font-weight: 600; color: #22c55e; font-size: 0.85rem;">üí∞ recyclable_price</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">Ïû¨ÌôúÏö© ÏãúÏÑ∏ (KECO API)</div>
                    </div>
                    <div style="background: rgba(14,165,233,0.15); border: 1px solid rgba(14,165,233,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-collection-point')">
                        <div style="font-weight: 600; color: #0ea5e9; font-size: 0.85rem;">üì¶ collection_point</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">ÏàòÍ±∞Ìï® ÏúÑÏπò (KECO API)</div>
                    </div>
                    <div style="background: rgba(168,85,247,0.15); border: 1px solid rgba(168,85,247,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-web-search')">
                        <div style="font-weight: 600; color: #a855f7; font-size: 0.85rem;">üîç web_search</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">Ïõπ Í≤ÄÏÉâ (GPT 5.2, Gemini-3-flash ÎÑ§Ïù¥Ìã∞Î∏å Ìà¥ÏΩúÎßÅ)</div>
                    </div>
                    <div style="background: rgba(251,146,60,0.15); border: 1px solid rgba(251,146,60,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-image-generation')">
                        <div style="font-weight: 600; color: #fb923c; font-size: 0.85rem;">üé® image_generation</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± (gemini-3-pro-image + gRPC ‚Üí CDN)</div>
                    </div>
                    <div style="background: rgba(107,114,128,0.15); border: 1px solid rgba(107,114,128,0.4); border-radius: 6px; padding: 0.5rem; cursor: pointer;" onclick="openModal('modal-intent-general')">
                        <div style="font-weight: 600; color: #6b7280; font-size: 0.85rem;">üí¨ general</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">ÏùºÎ∞ò ÎåÄÌôî (Fallback)</div>
                    </div>
                </div>
            </div>

            <!-- LangGraph Visualization -->
            <div style="margin-bottom: 1.5rem;">
                <div style="font-size: 0.9rem; font-weight: 600; color: var(--primary); margin-bottom: 0.75rem;">
                    <span class="lang-ko">üîÄ LangGraph Workflow (StateGraph)</span>
                    <span class="lang-en">üîÄ LangGraph Workflow (StateGraph)</span>
                </div>
                <div style="background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border-subtle); padding: 1rem; text-align: center;">
                    <img src="assets/images/langgraph_chat_worker.png" alt="LangGraph Chat Worker" style="max-width: 100%; border-radius: 6px;">
                    <div style="margin-top: 0.75rem; font-size: 0.75rem; color: var(--text-muted);">
                        <span class="lang-ko">__start__ ‚Üí intent ‚Üí vision ‚Üí router ‚Üí [11 subagents] ‚Üí aggregator ‚Üí summarize ‚Üí answer ‚Üí __end__</span>
                        <span class="lang-en">__start__ ‚Üí intent ‚Üí vision ‚Üí router ‚Üí [11 subagents] ‚Üí aggregator ‚Üí summarize ‚Üí answer ‚Üí __end__</span>
                    </div>
                </div>
            </div>

            <!-- LangGraph Node Details -->
            <div style="margin-bottom: 1.5rem;">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                    <!-- Intent Node -->
                    <div style="background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 8px; padding: 0.75rem;">
                        <div style="font-weight: 600; color: #8b5cf6; font-size: 0.85rem; margin-bottom: 0.5rem;">üéØ Intent Classification</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                            <div><strong>Multi-Intent ICL</strong> (arxiv:2304.11384)</div>
                            <div><strong>Chain-of-Intent</strong> (CIKM '25) - Ï†ÑÏù¥ Î∂ÄÏä§Ìä∏ ÏµúÎåÄ 0.15</div>
                            <div>IntentSignals: llm_confidence + keyword_boost + transition_boost</div>
                            <div>Ïã†Î¢∞ÎèÑ < 0.6 ‚Üí general fallback</div>
                            <div style="color: var(--text-muted); margin-top: 0.25rem;">Cache TTL: 1h (SHA256 Ìï¥Ïã±)</div>
                        </div>
                    </div>
                    <!-- Dynamic Router -->
                    <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 8px; padding: 0.75rem;">
                        <div style="font-weight: 600; color: #3b82f6; font-size: 0.85rem; margin-bottom: 0.5rem;">üîÄ Dynamic Router (Send API)</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                            <div><strong>Multi-intent fanout</strong>: additional_intents ‚Üí Î≥ëÎ†¨ Send</div>
                            <div><strong>Intent enrichment</strong>: waste/bulk_waste ‚Üí weather ÏûêÎèô Ï∂îÍ∞Ä</div>
                            <div><strong>Conditional</strong>: user_location ‚Üí weather Ï°∞Í±¥Î∂Ä Ï∂îÍ∞Ä</div>
                            <div style="color: var(--text-muted); margin-top: 0.25rem;">Ïòà: "Ï¢ÖÏù¥ Ïñ¥ÎñªÍ≤å Î≤ÑÎ†§? ÏàòÍ±∞Ìï®ÎèÑ" ‚Üí 3ÎÖ∏Îìú Î≥ëÎ†¨</div>
                        </div>
                    </div>
                    <!-- Aggregator -->
                    <div style="background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 8px; padding: 0.75rem;">
                        <div style="font-weight: 600; color: #10b981; font-size: 0.85rem; margin-bottom: 0.5rem;">üì¶ Aggregator</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                            <div><strong>Î≥ëÎ†¨ Í≤∞Í≥º ÏàòÏßë</strong>: 9Í∞ú context ÌïÑÎìú Î≥ëÌï©</div>
                            <div><strong>Required/Optional Í≤ÄÏ¶ù</strong>: contracts.py SSOT</div>
                            <div><strong>ÌïÑÏàò ÎàÑÎùΩ Ïãú</strong>: needs_fallback=True Ìä∏Î¶¨Í±∞</div>
                            <div style="color: var(--text-muted); margin-top: 0.25rem;">Progress: 60% ‚Üí 65% (Ï†ïÎ≥¥ Ï∑®Ìï© Ï§ë)</div>
                        </div>
                    </div>
                    <!-- Summarize -->
                    <div style="background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); border-radius: 8px; padding: 0.75rem;">
                        <div style="font-weight: 600; color: #f59e0b; font-size: 0.85rem; margin-bottom: 0.5rem;">üìù Summarize (Context Compression)</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                            <div><strong>OpenCode Ïä§ÌÉÄÏùº</strong>: context_window - max_output Ï¥àÍ≥º Ïãú</div>
                            <div><strong>GPT-5.2</strong>: 400K context, Ìä∏Î¶¨Í±∞ 272K, ÏöîÏïΩ 60K</div>
                            <div><strong>Íµ¨Ï°∞ÌôîÎêú 5ÏÑπÏÖò</strong>: ÏöîÏ≤≠/Î™©Ìëú/ÏôÑÎ£å/ÏßÑÌñâ/Ïª®ÌÖçÏä§Ìä∏</div>
                            <div style="color: var(--text-muted); margin-top: 0.25rem;">PRUNE_PROTECT: 40K ÌÜ†ÌÅ∞ (ÏµúÍ∑º Î≥¥Ìò∏)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Event Bus Architecture - After Intent Grid -->
            <div class="domain-architecture">
                <div class="domain-demo-title">
                    <span class="lang-ko">üèóÔ∏è Event Bus ÏïÑÌÇ§ÌÖçÏ≤ò</span>
                    <span class="lang-en">üèóÔ∏è Event Bus Architecture</span>
                </div>
                <div style="margin-bottom: 1rem;">
                    <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">Job Dispatch: RabbitMQ (DIRECT)</div>
                    <div class="domain-flow">
                        <span class="domain-flow-item">Chat API</span>
                        <span class="domain-flow-arrow">‚Üí</span>
                        <span class="domain-flow-item">TaskIQ</span>
                        <span class="domain-flow-arrow">‚Üí</span>
                        <span class="domain-flow-item">chat.process ÌÅê</span>
                        <span class="domain-flow-arrow">‚Üí</span>
                        <span class="domain-flow-item">Chat Worker</span>
                        <span class="domain-flow-arrow">‚Üí</span>
                        <span class="domain-flow-item">LangGraph</span>
                    </div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">Event Bus: Redis Streams + Pub/Sub</div>
                    <div class="domain-flow">
                        <span class="domain-flow-item">Worker XADD</span>
                        <span class="domain-flow-arrow">‚Üí</span>
                        <span class="domain-flow-item">chat:events:{shard}</span>
                        <span class="domain-flow-arrow">‚Üí</span>
                        <span class="domain-flow-item">Event Router</span>
                        <span class="domain-flow-arrow">‚Üí</span>
                        <span class="domain-flow-item">Pub/Sub</span>
                        <span class="domain-flow-arrow">‚Üí</span>
                        <span class="domain-flow-item">SSE Gateway</span>
                    </div>
                </div>
            </div>

            <!-- Deep Dive Section -->
            <div style="margin-top: 1.5rem;">
                <div style="font-size: 0.9rem; font-weight: 600; color: var(--primary); margin-bottom: 0.75rem;">
                    <span class="lang-ko">üìö ÏÉÅÏÑ∏ Î¨∏ÏÑú</span>
                    <span class="lang-en">üìö Deep Dive</span>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 0.75rem;">
                <div style="padding: 0.75rem; background: rgba(236,72,153,0.1); border-radius: 8px; border: 1px solid rgba(236,72,153,0.3); cursor: pointer;" onclick="openModal('modal-chat-langgraph')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üîÄ</span>
                        <div>
                            <div style="color: #ec4899; font-weight: 600; font-size: 0.85rem;">LangGraph Workflow</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Multi-Agent StateGraph</div>
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem; background: rgba(139,92,246,0.1); border-radius: 8px; border: 1px solid rgba(139,92,246,0.3); cursor: pointer;" onclick="openModal('modal-intent-classification')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üéØ</span>
                        <div>
                            <div style="color: #8b5cf6; font-weight: 600; font-size: 0.85rem;">Intent Details</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Confidence, Chain-of-Intent</div>
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem; background: rgba(16,185,129,0.1); border-radius: 8px; border: 1px solid rgba(16,185,129,0.3); cursor: pointer;" onclick="openModal('modal-send-api')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">‚ö°</span>
                        <div>
                            <div style="color: #10b981; font-weight: 600; font-size: 0.85rem;">Send API Router</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Multi-Intent Fanout</div>
                        </div>
                    </div>
                </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 0.75rem;">
                <div style="padding: 0.75rem; background: rgba(34,197,94,0.1); border-radius: 8px; border: 1px solid rgba(34,197,94,0.3); cursor: pointer;" onclick="openModal('modal-chat-aggregator')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üì¶</span>
                        <div>
                            <div style="color: #22c55e; font-weight: 600; font-size: 0.85rem;">Aggregator</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Result Collection, Fallback</div>
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem; background: rgba(245,158,11,0.1); border-radius: 8px; border: 1px solid rgba(245,158,11,0.3); cursor: pointer;" onclick="openModal('modal-chat-summarize')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üìù</span>
                        <div>
                            <div style="color: #f59e0b; font-weight: 600; font-size: 0.85rem;">Summarize</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Context Compression</div>
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem; background: rgba(59,130,246,0.1); border-radius: 8px; border: 1px solid rgba(59,130,246,0.3); cursor: pointer;" onclick="openModal('modal-chat-eventbus')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üöå</span>
                        <div>
                            <div style="color: #3b82f6; font-weight: 600; font-size: 0.85rem;">Event Bus</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Streams, Token v2</div>
                        </div>
                    </div>
                </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                <div style="padding: 0.75rem; background: linear-gradient(135deg, rgba(239,68,68,0.1), rgba(251,146,60,0.1)); border-radius: 8px; border: 1px solid rgba(251,146,60,0.4); cursor: pointer;" onclick="openModal('modal-chat-toolcalling')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üîß</span>
                        <div>
                            <div style="color: #fb923c; font-weight: 600; font-size: 0.85rem;">Tool Calling</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Native Function Calling</div>
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem; background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(59,130,246,0.1)); border-radius: 8px; border: 1px solid rgba(16,185,129,0.4); cursor: pointer;" onclick="openModal('modal-chat-consistency')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üîÑ</span>
                        <div>
                            <div style="color: #10b981; font-weight: 600; font-size: 0.85rem;">Data Consistency</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Optimistic + Eventual</div>
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem; background: linear-gradient(135deg, rgba(99,102,241,0.1), rgba(139,92,246,0.1)); border-radius: 8px; border: 1px solid rgba(99,102,241,0.4); cursor: pointer;" onclick="openModal('modal-chat-multimodel')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üß†</span>
                        <div>
                            <div style="color: #6366f1; font-weight: 600; font-size: 0.85rem;">Multi-Model</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">LLM Native API Switching</div>
                        </div>
                    </div>
                </div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-top: 0.75rem;">
                <div style="padding: 0.75rem; background: linear-gradient(135deg, rgba(239,68,68,0.1), rgba(245,158,11,0.1)); border-radius: 8px; border: 1px solid rgba(239,68,68,0.4); cursor: pointer;" onclick="openModal('modal-3tier-memory')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üíæ</span>
                        <div>
                            <div style="color: #ef4444; font-weight: 600; font-size: 0.85rem;">3-Tier Memory</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">ReadThrough + Async Sync</div>
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem; background: linear-gradient(135deg, rgba(14,165,233,0.1), rgba(59,130,246,0.1)); border-radius: 8px; border: 1px solid rgba(14,165,233,0.4); cursor: pointer;" onclick="openModal('modal-infra-sse')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üì°</span>
                        <div>
                            <div style="color: #0ea5e9; font-weight: 600; font-size: 0.85rem;">SSE Gateway</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Token v2 Recoverable</div>
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem; background: linear-gradient(135deg, rgba(168,85,247,0.1), rgba(236,72,153,0.1)); border-radius: 8px; border: 1px solid rgba(168,85,247,0.4); cursor: pointer;" onclick="openModal('modal-infra-eventrouter')">
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 1rem;">üîÄ</span>
                        <div>
                            <div style="color: #a855f7; font-weight: 600; font-size: 0.85rem;">Event Router</div>
                            <div style="color: var(--text-secondary); font-size: 0.7rem;">Consumer Group + Lua</div>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <!-- Domain Details - At the End -->
            <div class="domain-details" style="margin-top: 1.5rem;">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">
                            <span class="lang-ko">KEDA Ïò§ÌÜ†Ïä§ÏºÄÏùºÎßÅ</span>
                            <span class="lang-en">KEDA Autoscaling</span>
                        </div>
                        <div class="domain-detail-value">Worker: RabbitMQ ÌÅê Í∏∏Ïù¥ (5msg, 1-4 pods) | SSE: Ïó∞Í≤∞ Ïàò (100/pod, 1-3) | Router: Pending (100, 1-2)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">
                            <span class="lang-ko">ÎÑ§Ïù¥Ìã∞Î∏å Ïä§Ìä∏Î¶¨Î∞ç</span>
                            <span class="lang-en">Native Streaming</span>
                        </div>
                        <div class="domain-detail-value">astream_events v2 + DynamicProgressTracker (Phase Í∏∞Î∞ò Î≥ëÎ†¨ ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏ ÏßÑÌñâÎ•†)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">
                            <span class="lang-ko">Event-First</span>
                            <span class="lang-en">Event-First</span>
                        </div>
                        <div class="domain-detail-value">Single Write Path ‚Üí Consumer GroupÏúºÎ°ú SSE + PostgreSQL Î∂ÑÍ∏∞</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">
                            <span class="lang-ko">ÌÜ†ÌÅ∞ Ïä§Ìä∏Î¶¨Î∞ç</span>
                            <span class="lang-en">Token Streaming</span>
                        </div>
                        <div class="domain-detail-value">Token v2: chat:tokens:{job_id} + 10ÌÜ†ÌÅ∞ÎßàÎã§ State Ïä§ÎÉÖÏÉ∑ ‚Üí Ïû¨Ïó∞Í≤∞ Ïãú catch-up</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">
                            <span class="lang-ko">Resilience</span>
                            <span class="lang-en">Resilience</span>
                        </div>
                        <div class="domain-detail-value">NodePolicy (FAIL_OPEN/CLOSE/FALLBACK) + Circuit Breaker + NodeExecutor</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent Classification -->
    <div class="modal-overlay" id="modal-intent-classification">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-intent-classification')">√ó</button>
            <h3 class="modal-title">üéØ 9-Class Intent Classification</h3>

            <!-- Intent Classification Grid -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Intent Î∂ÑÎ•ò Ï≤¥Í≥Ñ</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                    <div class="intent-card" style="background: rgba(139,92,246,0.15); border: 1px solid rgba(139,92,246,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-waste')">
                        <div style="font-weight: 600; color: #8b5cf6;">üóëÔ∏è waste</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">ÌèêÍ∏∞Î¨º Î∂ÑÎ¶¨Î∞∞Ï∂ú (RAG)</div>
                    </div>
                    <div class="intent-card" style="background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-character')">
                        <div style="font-weight: 600; color: #f59e0b;">üåç character</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">Ï∫êÎ¶≠ÌÑ∞ ÏßàÎ¨∏ (gRPC)</div>
                    </div>
                    <div class="intent-card" style="background: rgba(239,68,68,0.15); border: 1px solid rgba(239,68,68,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-location')">
                        <div style="font-weight: 600; color: #ef4444;">üìç location</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">ÏúÑÏπò Í∏∞Î∞ò Í≤ÄÏÉâ (KakaoAPI)</div>
                    </div>
                    <div class="intent-card" style="background: rgba(236,72,153,0.15); border: 1px solid rgba(236,72,153,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-bulk-waste')">
                        <div style="font-weight: 600; color: #ec4899;">üõãÔ∏è bulk_waste</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">ÎåÄÌòïÌèêÍ∏∞Î¨º (MOIS API)</div>
                    </div>
                    <div class="intent-card" style="background: rgba(34,197,94,0.15); border: 1px solid rgba(34,197,94,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-recyclable-price')">
                        <div style="font-weight: 600; color: #22c55e;">üí∞ recyclable_price</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">Ïû¨ÌôúÏö© ÏãúÏÑ∏ (KECO API)</div>
                    </div>
                    <div class="intent-card" style="background: rgba(14,165,233,0.15); border: 1px solid rgba(14,165,233,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-collection-point')">
                        <div style="font-weight: 600; color: #0ea5e9;">üì¶ collection_point</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">ÏàòÍ±∞Ìï® ÏúÑÏπò (KECO API)</div>
                    </div>
                    <div class="intent-card" style="background: rgba(168,85,247,0.15); border: 1px solid rgba(168,85,247,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-web-search')">
                        <div style="font-weight: 600; color: #a855f7;">üîç web_search</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">Ïõπ Í≤ÄÏÉâ (Native Tool Calling)</div>
                    </div>
                    <div class="intent-card" style="background: rgba(251,146,60,0.15); border: 1px solid rgba(251,146,60,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-image-generation')">
                        <div style="font-weight: 600; color: #fb923c;">üé® image_generation</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± (Gemini Native API)</div>
                    </div>
                    <div class="intent-card" style="background: rgba(107,114,128,0.15); border: 1px solid rgba(107,114,128,0.4); border-radius: 8px; padding: 0.75rem; cursor: pointer;" onclick="openModal('modal-intent-general')">
                        <div style="font-weight: 600; color: #6b7280;">üí¨ general</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">ÏùºÎ∞ò ÎåÄÌôî (Fallback)</div>
                    </div>
                </div>
            </div>

            <!-- Confidence Scoring -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Confidence Scoring Formula</h4>
                <div class="modal-diagram" style="font-size: 0.8rem; line-height: 1.5;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Confidence Scoring System                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                               ‚îÇ
‚îÇ   final_confidence = llm_confidence + keyword_boost + transition_boost       ‚îÇ
‚îÇ                      + length_penalty                                         ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ   ‚îÇ  Component           ‚îÇ  Range       ‚îÇ  Description                      ‚îÇ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ
‚îÇ   ‚îÇ  llm_confidence      ‚îÇ  0.0 ~ 1.0   ‚îÇ  LLM Î∂ÑÎ•ò Í≤∞Í≥º Ïã†Î¢∞ÎèÑ              ‚îÇ‚îÇ
‚îÇ   ‚îÇ  keyword_boost       ‚îÇ  0.0 ~ 0.2   ‚îÇ  ÌÇ§ÏõåÎìú Îßµ Îß§Ïπ≠ Î≥¥Ï†ï                ‚îÇ‚îÇ
‚îÇ   ‚îÇ  transition_boost    ‚îÇ  0.0 ~ 0.15  ‚îÇ  Chain-of-Intent Ï†ÑÏù¥ Î≥¥ÎÑàÏä§       ‚îÇ‚îÇ
‚îÇ   ‚îÇ  length_penalty      ‚îÇ -0.1 ~ 0.0   ‚îÇ  ÏßßÏùÄ ÏßàÎ¨∏ ÌéòÎÑêÌã∞                   ‚îÇ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ                                                                               ‚îÇ
‚îÇ   CONFIDENCE_THRESHOLD = 0.6  (ÎØ∏Îßå Ïãú ‚Üí general IntentÎ°ú Î∂ÑÎ•ò)              ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Chain-of-Intent -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üîó Chain-of-Intent Transitions</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;"><span>waste ‚Üí location</span><span style="color: #22c55e;">+0.15</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;"><span>waste ‚Üí collection_point</span><span style="color: #22c55e;">+0.10</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;"><span>location ‚Üí waste</span><span style="color: #22c55e;">+0.10</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;"><span>bulk_waste ‚Üí location</span><span style="color: #22c55e;">+0.10</span></div>
                        <div style="margin-top: 0.75rem; padding-top: 0.5rem; border-top: 1px solid var(--border-subtle); font-size: 0.8rem; color: var(--text-muted);">‚Äª last_confidence ‚â• 0.7Ïùº ÎïåÎßå Ï†ÅÏö©</div>
                    </div>
                </div>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üß† Multi-Intent Detection</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div style="margin-bottom: 0.5rem;"><strong>Candidate Keywords:</strong></div>
                        <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">
                            "Í∑∏Î¶¨Í≥†", "Îòê", "Í∞ôÏù¥", "Ìï®Íªò", "ÎèÑ", "Ï∂îÍ∞ÄÎ°ú"
                        </div>
                        <div style="margin-top: 0.75rem;"><strong>Query Decomposition:</strong></div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">
                            LLMÏù¥ Î≥µÌï© ÏßàÎ¨∏ÏùÑ Í∞úÎ≥Ñ IntentÎ°ú Î∂ÑÌï¥
                        </div>
                    </div>
                </div>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">‚ö° Intent Cache</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div>Key: <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">intent:{query_hash}</code></div>
                        <div>TTL: 3600s (1ÏãúÍ∞Ñ)</div>
                        <div style="margin-top: 0.5rem;">ÎèôÏùº ÏßàÎ¨∏ Ïû¨Î∂ÑÎ•ò Î∞©ÏßÄ</div>
                    </div>
                </div>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üìä Classification Example</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem;">
                            "ÌîåÎùºÏä§Ìã± Ïñ¥ÎñªÍ≤å Î≤ÑÎ†§?"
                        </div>
                        <div style="font-size: 0.8rem;">
                            ‚Üí llm: 0.75, keyword: +0.15<br>
                            ‚Üí final: <span style="color: #22c55e;">0.90</span> ‚Üí waste
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Send API Dynamic Router -->
    <div class="modal-overlay" id="modal-send-api">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-send-api')">√ó</button>
            <h3 class="modal-title">‚ö° Send API Dynamic Router</h3>

            <!-- LangGraph Pipeline ASCII -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">LangGraph Send API Pipeline</h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 LangGraph Pipeline - Send API Multi-Intent Fanout            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ  START ‚Üí intent_node ‚Üí [vision_node?] ‚Üí dynamic_router                      ‚îÇ
‚îÇ                                              ‚îÇ                               ‚îÇ
‚îÇ           ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó‚îÇ
‚îÇ           ‚ïë           Send API (Parallel Execution)                         ‚ïë‚îÇ
‚îÇ           ‚ïë                                                                 ‚ïë‚îÇ
‚îÇ           ‚ïë  Primary Intent        Additional Intents       Enrichments     ‚ïë‚îÇ
‚îÇ           ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚ïë‚îÇ
‚îÇ           ‚ïë  ‚îÇ  waste_rag  ‚îÇ       ‚îÇ collection  ‚îÇ         ‚îÇ weather ‚îÇ     ‚ïë‚îÇ
‚îÇ           ‚ïë  ‚îÇ   (RAG)     ‚îÇ       ‚îÇ   _point    ‚îÇ         ‚îÇ  (KMA)  ‚îÇ     ‚ïë‚îÇ
‚îÇ           ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚ïë‚îÇ
‚îÇ           ‚ïë         ‚îÇ                     ‚îÇ                     ‚îÇ          ‚ïë‚îÇ
‚îÇ           ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚îÇ
‚îÇ                                   ‚îÇ                                          ‚îÇ
‚îÇ                          merge_node (Í≤∞Í≥º Î≥ëÌï©)                              ‚îÇ
‚îÇ                                   ‚îÇ                                          ‚îÇ
‚îÇ                          response_node (In-Context Learning ÏùëÎãµ ÏÉùÏÑ±)       ‚îÇ
‚îÇ                                   ‚îÇ                                          ‚îÇ
‚îÇ                                  END                                         ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Dynamic Router Implementation -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Dynamic Router Íµ¨ÌòÑ</h4>
                <div class="modal-diagram" style="font-size: 0.75rem; line-height: 1.4;">
def dynamic_router(state: ChatState) -> list[Send]:
    sends = []
    activated_nodes = set()

    # 1. Primary Intent ‚Üí Ìï¥Îãπ ÎÖ∏Îìú
    primary_node = INTENT_TO_NODE[state["intent"]]
    sends.append(Send(primary_node, state))
    activated_nodes.add(primary_node)

    # 2. Multi-Intent Fanout
    for intent in state.get("additional_intents", []):
        node = INTENT_TO_NODE.get(intent)
        if node not in activated_nodes:
            sends.append(Send(node, state))
            activated_nodes.add(node)

    # 3. Enrichment Rules Ï†ÅÏö©
    if state["intent"] in ENRICHMENT_RULES:
        for enrichment_node in ENRICHMENT_RULES[state["intent"]].enrichments:
            if enrichment_node not in activated_nodes:
                sends.append(Send(enrichment_node, state))

    return sends  # Î≥ëÎ†¨ Ïã§Ìñâ!</div>
            </div>

            <!-- Enrichment Rules & Examples -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üå§Ô∏è ENRICHMENT_RULES</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div style="margin-bottom: 0.5rem;"><strong>Intent-based:</strong></div>
                        <div>‚Ä¢ waste ‚Üí <span style="color: #0ea5e9;">+weather</span> (Î∂ÑÎ¶¨Î∞∞Ï∂ú ÌåÅ)</div>
                        <div>‚Ä¢ bulk_waste ‚Üí <span style="color: #0ea5e9;">+weather</span> (Î∞∞Ï∂úÏùº ÎÇ†Ïî®)</div>
                        <div style="margin-top: 0.75rem;"><strong>Conditional:</strong></div>
                        <div>‚Ä¢ user_location Ï°¥Ïû¨ Ïãú ‚Üí <span style="color: #0ea5e9;">+weather</span></div>
                        <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">‚Äª exclude_intents: weather, image_generation</div>
                    </div>
                </div>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üó∫Ô∏è INTENT_TO_NODE</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); display: grid; grid-template-columns: 1fr 1fr; gap: 0.25rem;">
                        <span>waste ‚Üí waste_rag</span>
                        <span>character ‚Üí character</span>
                        <span>location ‚Üí location</span>
                        <span>bulk_waste ‚Üí bulk_waste</span>
                        <span>recyclable_price ‚Üí recyclable_price</span>
                        <span>collection_point ‚Üí collection_point</span>
                        <span>web_search ‚Üí web_search</span>
                        <span>image_generation ‚Üí image_generation</span>
                        <span>general ‚Üí general</span>
                        <span>weather ‚Üí weather</span>
                    </div>
                </div>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle); grid-column: span 2;">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üìä Multi-Intent Example</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 4px; margin-bottom: 0.75rem;">
                            User: "Ï¢ÖÏù¥ Ïñ¥ÎñªÍ≤å Î≤ÑÎ†§? ÏàòÍ±∞Ìï®ÎèÑ ÏïåÎ†§Ï§ò"
                        </div>
                        <div style="display: flex; gap: 2rem;">
                            <div>
                                <strong>Intent Detection:</strong><br>
                                primary: waste<br>
                                additional: [collection_point]
                            </div>
                            <div>
                                <strong>Send API Calls:</strong><br>
                                ‚Üí Send(<span style="color: #8b5cf6;">waste_rag</span>, state)<br>
                                ‚Üí Send(<span style="color: #0ea5e9;">collection_point</span>, state)<br>
                                ‚Üí Send(<span style="color: #22c55e;">weather</span>, state) <span style="color: var(--text-muted);">(enrichment)</span>
                            </div>
                            <div>
                                <strong>Parallel Execution:</strong><br>
                                3Í∞ú ÎÖ∏Îìú ÎèôÏãú Ïã§Ìñâ<br>
                                merge_nodeÏóêÏÑú ÏàòÏßë
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Chat Event Bus -->
    <div class="modal-overlay" id="modal-chat-eventbus">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-chat-eventbus')">√ó</button>
            <h3 class="modal-title">üöå Chat Event Bus Architecture</h3>

            <!-- Event Bus Flow Diagram -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Event Bus: Redis Streams + Pub/Sub</h4>
                <div class="modal-diagram" style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          Chat Event Bus Architecture                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                               ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ   ‚îÇ Chat Worker ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Redis Streams    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Event Router      ‚îÇ     ‚îÇ
‚îÇ   ‚îÇ (LangGraph) ‚îÇ XADD ‚îÇ chat:events:{id} ‚îÇ XREAD‚îÇ   (Consumer Group)  ‚îÇ     ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ         ‚îÇ                                                   ‚îÇ                 ‚îÇ
‚îÇ         ‚îÇ                                                   ‚îÇ PUBLISH         ‚îÇ
‚îÇ         ‚îÇ                                                   ‚ñº                 ‚îÇ
‚îÇ         ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Token Stream v2  ‚îÇ      ‚îÇ    Pub/Sub          ‚îÇ     ‚îÇ
‚îÇ           Progress     ‚îÇ chat:tokens:{id} ‚îÇ      ‚îÇ chat:pubsub:{job_id}‚îÇ     ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                             ‚îÇ                 ‚îÇ
‚îÇ                                                             ‚îÇ SUBSCRIBE       ‚îÇ
‚îÇ                                                             ‚ñº                 ‚îÇ
‚îÇ                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ                        ‚îÇ  PostgreSQL      ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   SSE Gateway       ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ
‚îÇ                        ‚îÇ  (Persistence)   ‚îÇ CDC  ‚îÇ   (Streaming)       ‚îÇ SSE ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Token Streaming v2 -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Token Streaming v2: Recoverable Stream</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">üìù Stream Key Structure</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">chat:tokens:{job_id}</code>
                            <div style="margin-top: 0.5rem;">
                                <div>‚Ä¢ TTL: 3600s (1ÏãúÍ∞Ñ)</div>
                                <div>‚Ä¢ Max Length: 10,000 entries</div>
                                <div>‚Ä¢ Seq-based ID: ÏûêÎèô Ï¶ùÍ∞Ä</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: #22c55e; margin-bottom: 0.75rem;">üì∏ State Snapshot</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div>‚Ä¢ 10ÌÜ†ÌÅ∞ÎßàÎã§ State Ïä§ÎÉÖÏÉ∑ Ï†ÄÏû•</div>
                            <div>‚Ä¢ Key: <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">chat:state:{job_id}</code></div>
                            <div style="margin-top: 0.5rem;">
                                <div>‚Ä¢ Ïû¨Ïó∞Í≤∞ Ïãú catch-up ÏßÄÏõê</div>
                                <div>‚Ä¢ Last-Event-ID Ìó§Îçî ÌôúÏö©</div>
                            </div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: #f59e0b; margin-bottom: 0.75rem;">üîÑ Catch-up Mechanism</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div>1. ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ïû¨Ïó∞Í≤∞</div>
                            <div>2. Last-Event-ID Ï†ÑÏÜ°</div>
                            <div>3. XREAD STREAMS ... {last_id}</div>
                            <div>4. ÎàÑÎùΩ Ïù¥Î≤§Ìä∏ ÏàúÏ∞® Ï†ÑÏÜ°</div>
                            <div>5. Ïã§ÏãúÍ∞Ñ Ïä§Ìä∏Î¶º Ïû¨Í∞ú</div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: #ec4899; margin-bottom: 0.75rem;">üìä Event Types</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div>‚Ä¢ <span style="color: #3b82f6;">progress</span>: ÏßÑÌñâ Îã®Í≥Ñ</div>
                            <div>‚Ä¢ <span style="color: #22c55e;">token</span>: LLM ÌÜ†ÌÅ∞</div>
                            <div>‚Ä¢ <span style="color: #f59e0b;">agent_state</span>: ÏóêÏù¥Ï†ÑÌä∏ ÏÉÅÌÉú</div>
                            <div>‚Ä¢ <span style="color: #ec4899;">metadata</span>: Î©îÌÉÄÎç∞Ïù¥ÌÑ∞</div>
                            <div>‚Ä¢ <span style="color: #8b5cf6;">complete</span>: ÏôÑÎ£å</div>
                            <div>‚Ä¢ <span style="color: #ef4444;">error</span>: Ïò§Î•ò</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- KEDA Autoscaling -->
            <div style="margin-bottom: 1rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">KEDA Autoscaling Configuration</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                    <div style="background: rgba(139,92,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(139,92,246,0.3);">
                        <h5 style="color: #8b5cf6; margin-bottom: 0.5rem;">Chat Worker</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>Trigger: RabbitMQ Queue Length</div>
                            <div>Queue: chat.process</div>
                            <div>Threshold: 5 messages</div>
                            <div>Replicas: 1 ‚Üí 4</div>
                        </div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <h5 style="color: #10b981; margin-bottom: 0.5rem;">SSE Gateway</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>Trigger: Prometheus</div>
                            <div>Metric: sse_active_connections</div>
                            <div>Threshold: 100/pod</div>
                            <div>Replicas: 1 ‚Üí 3</div>
                        </div>
                    </div>
                    <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                        <h5 style="color: #3b82f6; margin-bottom: 0.5rem;">Event Router</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>Trigger: Prometheus</div>
                            <div>Metric: pending_events</div>
                            <div>Threshold: 100</div>
                            <div>Replicas: 1 ‚Üí 2</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Chat Taskiq -->
    <div class="modal-overlay" id="modal-chat-taskiq">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-chat-taskiq')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîÑ Taskiq: asyncio-native Worker</span>
                <span class="lang-en">üîÑ Taskiq: asyncio-native Worker</span>
            </h3>

            <div class="modal-diagram">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Taskiq Worker Architecture                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ   Command:                                                                   ‚îÇ
‚îÇ   taskiq worker chat_worker.main:broker --workers 4 --max-async-tasks 10    ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ  Worker Pool (4 processes √ó 10 async = 40 concurrent tasks)          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                                       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   Worker 1        Worker 2        Worker 3        Worker 4           ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇasyncio  ‚îÇ    ‚îÇasyncio  ‚îÇ    ‚îÇasyncio  ‚îÇ    ‚îÇasyncio  ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇloop     ‚îÇ    ‚îÇloop     ‚îÇ    ‚îÇloop     ‚îÇ    ‚îÇloop     ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ         ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ         ‚îÇ    ‚îÇ         ‚îÇ          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ 10 tasks‚îÇ    ‚îÇ 10 tasks‚îÇ    ‚îÇ 10 tasks‚îÇ    ‚îÇ 10 tasks‚îÇ          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                                       ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îÇ   Task Definition:                                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ  @broker.task(task_name="chat.process", timeout=120, max_retries=2)  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  async def process_chat(job_id, session_id, message, image_url=None):‚îÇ  ‚îÇ
‚îÇ   ‚îÇ      async with LangGraphApp(...) as app:                            ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ          await app.ainvoke(...)                                      ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ          await event_bus.publish(...)                                ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚ö° Celery vs Taskiq ÎπÑÍµê</span>
                <span class="lang-en">‚ö° Celery vs Taskiq Comparison</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ìï≠Î™©</span><span class="lang-en">Aspect</span></th>
                    <th>Celery (Scan Worker)</th>
                    <th>Taskiq (Chat Worker)</th>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÎèôÏãúÏÑ± Î™®Îç∏</span><span class="lang-en">Concurrency Model</span></td>
                    <td>gevent (greenlet)</td>
                    <td><strong>asyncio (native)</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">LangGraph Ìò∏Ìôò</span><span class="lang-en">LangGraph Compat</span></td>
                    <td>‚ñ≥ (<span class="lang-ko">ÎûòÌïë ÌïÑÏöî</span><span class="lang-en">Wrapping needed</span>)</td>
                    <td><strong>‚úÖ Native async</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Broker</span><span class="lang-en">Broker</span></td>
                    <td>RabbitMQ</td>
                    <td><strong>RabbitMQ (AioPikaBroker)</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Í≤∞Í≥º Î∞òÌôò</span><span class="lang-en">Result Return</span></td>
                    <td>AsyncResult</td>
                    <td><strong>TaskiqResult</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÏÇ¨Ïö©Ï≤ò</span><span class="lang-en">Use Case</span></td>
                    <td>Scan Worker (Vision)</td>
                    <td><strong>Chat Worker (LangGraph)</strong></td>
                </tr>
            </table>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üìä ÏÑ±Îä• ÏßÄÌëú</span>
                <span class="lang-en">üìä Performance Metrics</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3); text-align: center;">
                    <div style="color: #10b981; font-size: 1.5rem; font-weight: 700;">40</div>
                    <div style="color: var(--text-secondary); font-size: 0.85rem;"><span class="lang-ko">ÎèôÏãú Ï≤òÎ¶¨ ÌÉúÏä§ÌÅ¨</span><span class="lang-en">Concurrent Tasks</span></div>
                    <div style="color: var(--text-muted); font-size: 0.75rem;">4 workers √ó 10 async</div>
                </div>
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3); text-align: center;">
                    <div style="color: #3b82f6; font-size: 1.5rem; font-weight: 700;">120s</div>
                    <div style="color: var(--text-secondary); font-size: 0.85rem;"><span class="lang-ko">ÌÉúÏä§ÌÅ¨ ÌÉÄÏûÑÏïÑÏõÉ</span><span class="lang-en">Task Timeout</span></div>
                    <div style="color: var(--text-muted); font-size: 0.75rem;">timeout=120</div>
                </div>
                <div style="background: rgba(245,158,11,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(245,158,11,0.3); text-align: center;">
                    <div style="color: #f59e0b; font-size: 1.5rem; font-weight: 700;">2</div>
                    <div style="color: var(--text-secondary); font-size: 0.85rem;"><span class="lang-ko">ÏµúÎåÄ Ïû¨ÏãúÎèÑ</span><span class="lang-en">Max Retries</span></div>
                    <div style="color: var(--text-muted); font-size: 0.75rem;">max_retries=2</div>
                </div>
            </div>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid var(--accent-purple);">
                <strong style="color: var(--accent-purple);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem; font-size: 0.85rem;">
                    <a href="https://rooftopsnow.tistory.com/243" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Taskiq asyncio ÏõåÏª§ ÏÑ§Ï†ï ‚Üí</span>
                        <span class="lang-en">Taskiq asyncio Worker Configuration ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Chat RabbitMQ -->
    <div class="modal-overlay" id="modal-chat-rabbitmq">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-chat-rabbitmq')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üêá RabbitMQ: Job Execution Path</span>
                <span class="lang-en">üêá RabbitMQ: Job Execution Path</span>
            </h3>

            <div class="modal-diagram">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     RabbitMQ Job Submission Flow                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ   Dual-Path Messaging Architecture                                           ‚îÇ
‚îÇ   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê       ‚îÇ
‚îÇ   Path 1: RabbitMQ (Job Execution)    ‚îÇ   Path 2: Redis (Event Streaming)   ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ
‚îÇ   DIRECT exchange: chat_tasks          ‚îÇ   Streams + Pub/Sub (3-Tier)        ‚îÇ
‚îÇ   Queue: chat.process                  ‚îÇ   Durable ‚Üí Router ‚Üí Volatile       ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  chat-api                              chat-worker                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ AioPikaBroker       ‚îÇ   AMQP       ‚îÇ @broker.task        ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ .kiq(job_id,        ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ async def process() ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      session_id,    ‚îÇ   JSON       ‚îÇ   ‚Üí LangGraph       ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      message,       ‚îÇ              ‚îÇ   ‚Üí Event Publish   ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      image_url?)    ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                             ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚öôÔ∏è RabbitMQ Topology Íµ¨ÏÑ±</span>
                <span class="lang-en">‚öôÔ∏è RabbitMQ Topology Configuration</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Íµ¨ÏÑ± ÏöîÏÜå</span><span class="lang-en">Component</span></th>
                    <th><span class="lang-ko">ÏÑ§Ï†ï</span><span class="lang-en">Config</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td>Broker</td>
                    <td><code>AioPikaBroker</code></td>
                    <td><span class="lang-ko">RabbitMQ asyncio ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏</span><span class="lang-en">RabbitMQ asyncio client</span></td>
                </tr>
                <tr>
                    <td>Exchange</td>
                    <td><code>chat_tasks (direct)</code></td>
                    <td><span class="lang-ko">Topology CRÎ°ú ÎØ∏Î¶¨ ÏÉùÏÑ±</span><span class="lang-en">Pre-created by Topology CR</span></td>
                </tr>
                <tr>
                    <td>Queue</td>
                    <td><code>chat.process</code></td>
                    <td><span class="lang-ko">DLX, TTL ÏÑ§Ï†ï Ìè¨Ìï®</span><span class="lang-en">With DLX, TTL settings</span></td>
                </tr>
                <tr>
                    <td>Routing Key</td>
                    <td><code>chat.process</code></td>
                    <td><span class="lang-ko">Direct ÎùºÏö∞ÌåÖ</span><span class="lang-en">Direct routing</span></td>
                </tr>
            </table>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÑ Message Flow</span>
                <span class="lang-en">üîÑ Message Flow</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                    <div style="text-align: center; color: #3b82f6; font-size: 1.2rem; margin-bottom: 0.5rem;">1Ô∏è‚É£</div>
                    <h5 style="color: #3b82f6; margin-bottom: 0.5rem; text-align: center;">Submit</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">
                        <code>broker.kiq(job_id, session_id, message)</code>
                    </div>
                </div>
                <div style="background: rgba(245,158,11,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(245,158,11,0.3);">
                    <div style="text-align: center; color: #f59e0b; font-size: 1.2rem; margin-bottom: 0.5rem;">2Ô∏è‚É£</div>
                    <h5 style="color: #f59e0b; margin-bottom: 0.5rem; text-align: center;">Route</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">
                        <span class="lang-ko">DIRECT exchange ‚Üí Queue</span>
                        <span class="lang-en">DIRECT exchange ‚Üí Queue</span>
                    </div>
                </div>
                <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                    <div style="text-align: center; color: #10b981; font-size: 1.2rem; margin-bottom: 0.5rem;">3Ô∏è‚É£</div>
                    <h5 style="color: #10b981; margin-bottom: 0.5rem; text-align: center;">Consume</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">
                        <span class="lang-ko">Taskiq Worker ÏàòÏã†</span>
                        <span class="lang-en">Taskiq Worker consumes</span>
                    </div>
                </div>
                <div style="background: rgba(139,92,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(139,92,246,0.3);">
                    <div style="text-align: center; color: #8b5cf6; font-size: 1.2rem; margin-bottom: 0.5rem;">4Ô∏è‚É£</div>
                    <h5 style="color: #8b5cf6; margin-bottom: 0.5rem; text-align: center;">Execute</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary);">
                        <span class="lang-ko">LangGraph Ïã§Ìñâ</span>
                        <span class="lang-en">LangGraph execution</span>
                    </div>
                </div>
            </div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚ö° KEDA Autoscaling</span>
                <span class="lang-en">‚ö° KEDA Autoscaling</span>
            </h4>
            <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                <table class="modal-table" style="margin: 0;">
                    <tr>
                        <th><span class="lang-ko">Ìä∏Î¶¨Í±∞</span><span class="lang-en">Trigger</span></th>
                        <th><span class="lang-ko">Î©îÌä∏Î¶≠</span><span class="lang-en">Metric</span></th>
                        <th><span class="lang-ko">ÏûÑÍ≥ÑÍ∞í</span><span class="lang-en">Threshold</span></th>
                        <th><span class="lang-ko">Ïä§ÏºÄÏùº</span><span class="lang-en">Scale</span></th>
                    </tr>
                    <tr>
                        <td>RabbitMQ</td>
                        <td>Queue Length</td>
                        <td>5 messages</td>
                        <td>1 ‚Üí 4 replicas</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal: Chat SSE Gateway -->
    <div class="modal-overlay" id="modal-chat-sse">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-chat-sse')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üì∫ SSE Gateway: Token v2 Streaming</span>
                <span class="lang-en">üì∫ SSE Gateway: Token v2 Streaming</span>
            </h3>

            <div class="modal-diagram">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        SSE Gateway Architecture                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ   Event Router    ‚îÇ    PUBLISH           ‚îÇ     SSE Gateway          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  (Consumer Group) ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ                                               ‚îÇ   ‚îÇ In-memory fan-out‚îÇ   ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ SSE
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Redis Streams   ‚îÇ    XRANGE            ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ chat:events:{id}  ‚îÇ ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ State recovery   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   (catch-up)         ‚îÇ   ‚îÇ (Redis KV)       ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ                                               ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Redis Pub/Sub   ‚îÇ    SUBSCRIBE         ‚îÇ   ‚îÇ Last-Event-ID    ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ chat:{job_id}     ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   ‚îÇ header           ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ                                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÑ Token v2 Recovery Protocol</span>
                <span class="lang-en">üîÑ Token v2 Recovery Protocol</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Í∏∞Îä•</span><span class="lang-en">Feature</span></th>
                    <th><span class="lang-ko">Íµ¨ÌòÑ</span><span class="lang-en">Implementation</span></th>
                    <th><span class="lang-ko">ÏÑ§Ï†ïÍ∞í</span><span class="lang-en">Config</span></th>
                </tr>
                <tr>
                    <td>Stale Detection</td>
                    <td><span class="lang-ko">3Ï¥à ÌÉÄÏûÑÏïÑÏõÉ Ïãú ÏûêÎèô Ïû¨Ïó∞Í≤∞</span><span class="lang-en">Auto-reconnect on 3s timeout</span></td>
                    <td><code>3s threshold</code></td>
                </tr>
                <tr>
                    <td>Max Reconnections</td>
                    <td><span class="lang-ko">ÏßÄÏàò Í∞ÑÍ≤©ÏúºÎ°ú ÏµúÎåÄ 3Ìöå ÏãúÎèÑ</span><span class="lang-en">3 attempts with exponential spacing</span></td>
                    <td><code>3 attempts</code></td>
                </tr>
                <tr>
                    <td>Fallback Polling</td>
                    <td><span class="lang-ko">SSE Ïã§Ìå® Ïãú Ìè¥ÎßÅ Ï†ÑÌôò</span><span class="lang-en">Polling fallback if SSE fails</span></td>
                    <td><code>3s interval, 120s max</code></td>
                </tr>
                <tr>
                    <td>Seq Encoding</td>
                    <td><span class="lang-ko">Stage: STAGE_ORDER√ó10, Token: 1000+</span><span class="lang-en">Stage: STAGE_ORDER√ó10, Token: 1000+</span></td>
                    <td><code>Last-Event-ID</code></td>
                </tr>
                <tr>
                    <td>Catch-up</td>
                    <td><span class="lang-ko">XREVRANGEÎ°ú ÎàÑÎùΩ Ïù¥Î≤§Ìä∏ Î≥µÍµ¨</span><span class="lang-en">XREVRANGE for missed events</span></td>
                    <td><code>State KV + Streams</code></td>
                </tr>
            </table>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üìä Consumer Groups (Two-Path)</span>
                <span class="lang-en">üìä Consumer Groups (Two-Path)</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                    <h5 style="color: #10b981; margin-bottom: 0.75rem;">üöÄ eventrouter</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div><strong><span class="lang-ko">Î™©Ï†Å</span><span class="lang-en">Purpose</span>:</strong> <span class="lang-ko">Ïã§ÏãúÍ∞Ñ SSE Î∏åÎ°úÎìúÏ∫êÏä§Ìä∏</span><span class="lang-en">Real-time SSE broadcast</span></div>
                        <div><strong><span class="lang-ko">ÏßÄÏó∞</span><span class="lang-en">Latency</span>:</strong> ~10ms</div>
                        <div><strong><span class="lang-ko">ÎèôÏûë</span><span class="lang-en">Action</span>:</strong> PUBLISH ‚Üí Pub/Sub</div>
                    </div>
                </div>
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                    <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">üíæ chat-persistence</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div><strong><span class="lang-ko">Î™©Ï†Å</span><span class="lang-en">Purpose</span>:</strong> <span class="lang-ko">PostgreSQL ÏòÅÍµ¨ Ï†ÄÏû•</span><span class="lang-en">PostgreSQL persistence</span></div>
                        <div><strong><span class="lang-ko">ÏßÄÏó∞</span><span class="lang-en">Latency</span>:</strong> ~200ms</div>
                        <div><strong><span class="lang-ko">ÎèôÏûë</span><span class="lang-en">Action</span>:</strong> XACK ‚Üí INSERT</div>
                    </div>
                </div>
            </div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚ö° KEDA Autoscaling</span>
                <span class="lang-en">‚ö° KEDA Autoscaling</span>
            </h4>
            <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                <table class="modal-table" style="margin: 0;">
                    <tr>
                        <th><span class="lang-ko">Ìä∏Î¶¨Í±∞</span><span class="lang-en">Trigger</span></th>
                        <th><span class="lang-ko">Î©îÌä∏Î¶≠</span><span class="lang-en">Metric</span></th>
                        <th><span class="lang-ko">ÏûÑÍ≥ÑÍ∞í</span><span class="lang-en">Threshold</span></th>
                        <th><span class="lang-ko">Ïä§ÏºÄÏùº</span><span class="lang-en">Scale</span></th>
                    </tr>
                    <tr>
                        <td>Prometheus</td>
                        <td>sse_active_connections</td>
                        <td>100/pod</td>
                        <td>1 ‚Üí 3 replicas</td>
                    </tr>
                </table>
            </div>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid var(--accent-purple);">
                <strong style="color: var(--accent-purple);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem; display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.85rem;">
                    <a href="https://rooftopsnow.tistory.com/240" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">SSE Token v2 ÌîÑÎ°úÌÜ†ÏΩú ‚Üí</span>
                        <span class="lang-en">SSE Token v2 Protocol ‚Üí</span>
                    </a>
                    <a href="https://rooftopsnow.tistory.com/235" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Token v2 XRANGE Recovery ‚Üí</span>
                        <span class="lang-en">Token v2 XRANGE Recovery ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Chat LangGraph Workflow -->
    <div class="modal-overlay" id="modal-chat-langgraph">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-chat-langgraph')">√ó</button>
            <h3 class="modal-title">üîÄ Multi-Agent Chat LangGraph Workflow</h3>

            <!-- LangGraph Visualization -->
            <div style="margin-bottom: 1.5rem; text-align: center;">
                <img src="assets/images/langgraph_chat_worker.png" alt="LangGraph Chat Worker Workflow" style="max-width: 100%; border-radius: 8px; border: 1px solid var(--border-subtle);">
            </div>

            <!-- Node Details Grid -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <!-- Intent Node -->
                <div style="background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #8b5cf6; margin-bottom: 0.75rem;">üéØ Intent Node</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><strong>Multi-Intent ICL</strong> (arxiv:2304.11384)</div>
                        <div><strong>Chain-of-Intent</strong> (CIKM '25 ÎÖºÎ¨∏)</div>
                        <div>IntentSignals = llm_confidence + keyword_boost + transition_boost</div>
                        <div>Ï†ÑÏù¥ Î∂ÄÏä§Ìä∏ ÏÉÅÌïú: MAX_TRANSITION_BOOST = 0.15</div>
                        <div>Ïã†Î¢∞ÎèÑ &lt; 0.6 ‚Üí general fallback</div>
                        <div style="color: var(--text-muted); margin-top: 0.5rem;">Cache: SHA256 Ìï¥Ïã±, TTL 1h</div>
                    </div>
                </div>

                <!-- Dynamic Router -->
                <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">üîÄ Dynamic Router (Send API)</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><strong>Multi-intent fanout</strong>: additional_intents ‚Üí Î≥ëÎ†¨ Send</div>
                        <div><strong>Intent enrichment</strong>: waste/bulk_waste ‚Üí weather ÏûêÎèô</div>
                        <div><strong>Conditional</strong>: user_location ‚Üí weather Ï°∞Í±¥Î∂Ä</div>
                        <div style="margin-top: 0.5rem; padding: 0.5rem; background: rgba(0,0,0,0.2); border-radius: 4px; font-family: monospace; font-size: 0.7rem;">
                            "Ï¢ÖÏù¥ Ïñ¥ÎñªÍ≤å Î≤ÑÎ†§? ÏàòÍ±∞Ìï®ÎèÑ"<br>
                            ‚Üí Send(waste_rag) + Send(collection_point) + Send(weather)
                        </div>
                    </div>
                </div>

                <!-- Aggregator -->
                <div style="background: rgba(34,197,94,0.1); border: 1px solid rgba(34,197,94,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #22c55e; margin-bottom: 0.75rem;">üì¶ Aggregator</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><strong>Î≥ëÎ†¨ Í≤∞Í≥º ÏàòÏßë</strong>: 9Í∞ú context ÌïÑÎìú Î≥ëÌï©</div>
                        <div><strong>Required/Optional</strong>: contracts.py SSOT</div>
                        <div><strong>ÌïÑÏàò ÎàÑÎùΩ</strong>: needs_fallback=True Ìä∏Î¶¨Í±∞</div>
                        <div style="color: var(--text-muted); margin-top: 0.5rem;">
                            Context Fields: disposal_rules, character_context, location_context,
                            web_search_results, bulk_waste_context, recyclable_price_context,
                            weather_context, collection_point_context, image_generation_context
                        </div>
                    </div>
                </div>

                <!-- Summarize -->
                <div style="background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #f59e0b; margin-bottom: 0.75rem;">üìù Summarize (Context Compression)</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><strong>OpenCode Ïä§ÌÉÄÏùº</strong>: context_window - max_output Ï¥àÍ≥º Ïãú</div>
                        <div><strong>GPT-5.2</strong>: 400K context, Ìä∏Î¶¨Í±∞ 272K, ÏöîÏïΩ 60K</div>
                        <div><strong>Íµ¨Ï°∞ÌôîÎêú 5ÏÑπÏÖò</strong>:</div>
                        <div style="padding-left: 1rem; font-size: 0.75rem;">
                            1. ÏÇ¨Ïö©Ïûê ÏöîÏ≤≠ (ÏõêÎ¨∏)<br>
                            2. Î™©Ìëú Î∞è Í∏∞ÎåÄ Í≤∞Í≥º<br>
                            3. ÏôÑÎ£åÎêú ÏûëÏóÖ<br>
                            4. ÏßÑÌñâ Ï§ë/ÎÇ®ÏùÄ ÏûëÏóÖ<br>
                            5. Ï§ëÏöî Ïª®ÌÖçÏä§Ìä∏
                        </div>
                        <div style="color: var(--text-muted); margin-top: 0.25rem;">PRUNE_PROTECT: 40K ÌÜ†ÌÅ∞ Î≥¥Ìò∏</div>
                    </div>
                </div>
            </div>

            <!-- Subagents Table -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">11 Subagent Nodes</h4>
                <table class="modal-table" style="font-size: 0.8rem;">
                    <tr>
                        <th>Node</th>
                        <th>Intent</th>
                        <th>Data Source</th>
                        <th>Protocol</th>
                    </tr>
                    <tr><td>waste_rag</td><td>waste</td><td>JSON Í∑úÏ†ï + Feedback Loop</td><td>In-Memory</td></tr>
                    <tr><td>character</td><td>character</td><td>Character Service</td><td>gRPC</td></tr>
                    <tr><td>location</td><td>location</td><td>Kakao Local API</td><td>HTTP</td></tr>
                    <tr><td>bulk_waste</td><td>bulk_waste</td><td>ÌñâÏ†ïÏïàÏ†ÑÎ∂Ä MOIS API</td><td>HTTP</td></tr>
                    <tr><td>recyclable_price</td><td>recyclable_price</td><td>ÌïúÍµ≠ÌôòÍ≤ΩÍ≥µÎã® KECO</td><td>HTTP</td></tr>
                    <tr><td>collection_point</td><td>collection_point</td><td>ÌïúÍµ≠ÌôòÍ≤ΩÍ≥µÎã® KECO</td><td>HTTP</td></tr>
                    <tr><td>weather</td><td>weather / enrichment</td><td>Í∏∞ÏÉÅÏ≤≠ KMA API</td><td>HTTP</td></tr>
                    <tr><td>web_search</td><td>web_search</td><td>DuckDuckGo/Tavily</td><td>HTTP</td></tr>
                    <tr><td>image_generation</td><td>image_generation</td><td>gemini-3-pro-image + Images gRPC</td><td>gRPC</td></tr>
                    <tr><td>feedback</td><td>(after waste_rag)</td><td>LLM Evaluator + Fallback</td><td>Internal</td></tr>
                    <tr><td>general</td><td>general</td><td>Passthrough (LLM Only)</td><td>-</td></tr>
                </table>
            </div>

            <!-- LangGraph Îã®Ïùº Task ÏÑ§Í≥Ñ -->
            <div style="padding: 1rem; background: rgba(139, 92, 246, 0.1); border-radius: 8px; border-left: 3px solid var(--primary); margin-bottom: 1.5rem;">
                <strong style="color: var(--primary);">Ïôú LangGraphÎ•º Îã®Ïùº TaskÎ°ú ÌÅêÏûâÌïòÎäîÍ∞Ä?</strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.7;">
                    <code style="background: rgba(139,92,246,0.2); padding: 0.1rem 0.4rem; border-radius: 4px;">@broker.task("chat.process")</code>Îäî
                    LangGraph StateGraph Ï†ÑÏ≤¥Î•º <strong>ÌïòÎÇòÏùò Task Îã®ÏúÑ</strong>Î°ú ÌÅêÏûâÌï©ÎãàÎã§.
                    Í∞úÎ≥Ñ TaskÎ°ú Î∂ÑÎ¶¨Ìï¥ ÌÅêÏûâÌïòÏßÄ ÏïäÏùÄ Ïù¥Ïú†Îäî ÏïÑÎûòÏôÄ Í∞ôÏäµÎãàÎã§.<br><br>
                    <strong style="color: #f59e0b;">1. Îü∞ÌÉÄÏûÑ ÎèôÏ†Å ÎùºÏö∞ÌåÖ</strong> ‚Äî Send APIÎäî Ïã§Ìñâ ÏãúÏ†êÏóê <code style="background: rgba(245,158,11,0.2); padding: 0.1rem 0.3rem; border-radius: 3px;">additional_intents</code>ÏôÄ Enrichment RulesÎ•º ÌèâÍ∞ÄÌï¥ Î≥ëÎ†¨ ÎÖ∏ÎìúÎ•º Í≤∞Ï†ï.
                    ÌÅêÏûâ ÏãúÏ†êÏóê Ïñ¥Îñ§ ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏Í∞Ä Ïã§ÌñâÎê†ÏßÄ ÏòàÏ∏° Î∂àÍ∞Ä.<br>
                    <strong style="color: #f59e0b;">2. Conditional Edges</strong> ‚Äî <code style="background: rgba(245,158,11,0.2); padding: 0.1rem 0.3rem; border-radius: 3px;">route_after_feedback</code>Ï≤òÎüº
                    ÎÖ∏Îìú Í≤∞Í≥ºÏóê Îî∞Îùº Îã§Ïùå Í≤ΩÎ°úÍ∞Ä Í≤∞Ï†ïÎêòÎäî Ï°∞Í±¥Î∂Ä Ïó£ÏßÄÎäî DAGÎ•º Ï†ïÏ†ÅÏúºÎ°ú Î∂ÑÌï†Ìï† Ïàò ÏóÜÏùå.<br>
                    <strong style="color: #f59e0b;">3. State ÏùºÍ¥ÄÏÑ±</strong> ‚Äî LangGraphÏùò <code style="background: rgba(245,158,11,0.2); padding: 0.1rem 0.3rem; border-radius: 3px;">ChatState</code>Îäî
                    Î™®Îì† ÎÖ∏ÎìúÍ∞Ä Í≥µÏú†ÌïòÎäî Îã®Ïùº ÏÉÅÌÉú Í∞ùÏ≤¥. Î∂ÑÏÇ∞ Task Í∞Ñ ÏÉÅÌÉú ÎèôÍ∏∞ÌôîÎäî Î≥µÏû°ÎèÑÏôÄ Ïò§Î≤ÑÌó§ÎìúÎ•º Ï¶ùÍ∞ÄÏãúÌÇ¥.<br><br>
                    <span style="color: var(--text-muted); font-size: 0.8rem;">
                        ‚Üí gRPC(<code>grpc.aio</code>)Îäî asyncio ÎÑ§Ïù¥Ìã∞Î∏åÎ°ú Graph ÎÇ¥Î∂ÄÏóêÏÑú ~1-100ms ÏùëÎãµ.
                        CeleryÎäî Fire & ForgetÏóê Ï†ÅÌï©ÌïòÎÇò, await Í∏∞Î∞ò Í≤∞Í≥º ÎåÄÍ∏∞ÏóêÎäî Î∂ÄÏ†ÅÌï©.
                    </span>
                </div>
            </div>

            <!-- 3-Tier Memory: ReadThroughCheckpointer -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">üíæ 3-Tier Memory (ReadThroughCheckpointer)</h4>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle); font-size: 0.75rem; font-family: 'JetBrains Mono', monospace; color: var(--text-secondary); line-height: 1.6;">
                    <div style="color: #f59e0b;">// ÎÖ∏Îìú Ïã§ÌñâÎßàÎã§ Checkpoint Ï†ÄÏû• ‚Üí 8Í∞ú ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏ Î≥ëÎ†¨ Ïãú ÎèôÏãú write</div>
                    <div style="margin-top: 0.4rem;">
                        <span style="color: #10b981;">Worker</span> ‚Üí <span style="color: #ef4444;">Redis Primary</span> (~1ms, pool Î∂àÌïÑÏöî)
                    </div>
                    <div style="padding-left: 2rem;">
                        ‚îî‚îÄ <span style="color: #8b5cf6;">SyncableRedisSaver</span>: chat:checkpoint:cache:{thread_id} (TTL 24h)
                    </div>
                    <div style="padding-left: 2rem;">
                        ‚îî‚îÄ Sync Queue Ï†ÅÏû¨ (RPUSH checkpoint:sync:queue)
                    </div>
                    <div style="margin-top: 0.4rem;">
                        <span style="color: #3b82f6;">CheckpointSyncService</span> (Î≥ÑÎèÑ Deployment, replicas=1)
                    </div>
                    <div style="padding-left: 2rem;">
                        ‚îî‚îÄ BRPOP ‚Üí Bulk Upsert PostgreSQL (5Ï¥à Ï£ºÍ∏∞ Î∞∞Ïπò)
                    </div>
                    <div style="padding-left: 2rem;">
                        ‚îî‚îÄ pool_max_size=5 (Îã®Ïùº Ïù∏Ïä§ÌÑ¥Ïä§)
                    </div>
                    <div style="margin-top: 0.4rem;">
                        <span style="color: #f59e0b;">Read Miss (Cold Start)</span> ‚Üí PostgreSQL ‚Üí Redis promote (LRU)
                    </div>
                    <div style="padding-left: 2rem;">
                        ‚îî‚îÄ Temporal Locality: Ïó∞ÏÜç ÏöîÏ≤≠ hit rate ‚âà 99%+
                    </div>
                    <div style="margin-top: 0.6rem; color: var(--text-muted); font-size: 0.7rem;">// Connection Pool: 212 ‚Üí 33 (84% Í∞êÏÜå), psycopg_pool.PoolTimeout Ìï¥Í≤∞</div>
                </div>
                <div style="margin-top: 0.5rem; text-align: right;">
                    <span style="font-size: 0.75rem; color: #6366f1; cursor: pointer; text-decoration: underline;" onclick="closeModal('modal-chat-langgraph'); setTimeout(() => openModal('modal-3tier-memory'), 300);">‚Üí 3-Tier Memory ÏÉÅÏÑ∏ Î≥¥Í∏∞</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Chat Aggregator -->
    <div class="modal-overlay" id="modal-chat-aggregator">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-chat-aggregator')">√ó</button>
            <h3 class="modal-title">üì¶ Aggregator Node - Result Collection & Validation</h3>

            <!-- Aggregator Flow -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Aggregator Architecture</h4>
                <div class="modal-diagram" style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          Aggregator Node                                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ   ‚îÇwaste_rag‚îÇ ‚îÇcharacter‚îÇ ‚îÇlocation ‚îÇ ‚îÇbulk_... ‚îÇ ‚îÇ weather ‚îÇ  ...      ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ        ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ                 ‚îÇ
‚îÇ        ‚ñº           ‚ñº           ‚ñº           ‚ñº           ‚ñº                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ              LangGraph State Auto-Merge                       ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ   disposal_rules | character_ctx | location_ctx | ...        ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚ñº                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ                   Aggregator Node                             ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ   1. ÏàòÏßëÎêú context ÌïÑÎìú ÌôïÏù∏ (9Í∞ú)                            ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ   2. Required vs Optional Í≤ÄÏ¶ù (contracts.py SSOT)            ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ   3. ÌïÑÏàò ÎàÑÎùΩ Ïãú needs_fallback=True                          ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ   4. Progress: 60% ‚Üí 65%                                      ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚ñº                                     ‚îÇ
‚îÇ                           [summarize?] ‚Üí answer                          ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Context Fields -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">9 Context Fields</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                    <div style="background: rgba(139,92,246,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>disposal_rules</strong><br><span style="color: var(--text-muted);">RAG Í≤ÄÏÉâ Í≤∞Í≥º</span>
                    </div>
                    <div style="background: rgba(245,158,11,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>character_context</strong><br><span style="color: var(--text-muted);">Ï∫êÎ¶≠ÌÑ∞ Ï†ïÎ≥¥</span>
                    </div>
                    <div style="background: rgba(239,68,68,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>location_context</strong><br><span style="color: var(--text-muted);">Ïû•ÏÜå Ï†ïÎ≥¥</span>
                    </div>
                    <div style="background: rgba(168,85,247,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>web_search_results</strong><br><span style="color: var(--text-muted);">Ïõπ Í≤ÄÏÉâ Í≤∞Í≥º</span>
                    </div>
                    <div style="background: rgba(236,72,153,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>bulk_waste_context</strong><br><span style="color: var(--text-muted);">ÎåÄÌòïÌèêÍ∏∞Î¨º Ï†ïÎ≥¥</span>
                    </div>
                    <div style="background: rgba(34,197,94,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>recyclable_price_context</strong><br><span style="color: var(--text-muted);">Ïû¨ÌôúÏö© ÏãúÏÑ∏</span>
                    </div>
                    <div style="background: rgba(14,165,233,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>weather_context</strong><br><span style="color: var(--text-muted);">ÎÇ†Ïî® Ï†ïÎ≥¥</span>
                    </div>
                    <div style="background: rgba(251,146,60,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>collection_point_context</strong><br><span style="color: var(--text-muted);">ÏàòÍ±∞Ìï® ÏúÑÏπò</span>
                    </div>
                    <div style="background: rgba(107,114,128,0.15); padding: 0.5rem; border-radius: 6px; font-size: 0.8rem;">
                        <strong>image_generation_context</strong><br><span style="color: var(--text-muted);">Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±</span>
                    </div>
                </div>
            </div>

            <!-- Validation Logic -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Required/Optional Validation</h4>
                <div style="background: var(--bg-code); padding: 1rem; border-radius: 8px; font-family: monospace; font-size: 0.75rem;">
<pre style="margin: 0; color: var(--text-secondary);">
<span style="color: #7c3aed;"># contracts.py - Single Source of Truth</span>
INTENT_REQUIRED_FIELDS = {
    "waste": {"disposal_rules"},
    "character": {"character_context"},
    "location": {"location_context"},
    "bulk_waste": {"bulk_waste_context"},
    ...
}

<span style="color: #7c3aed;"># Aggregator Í≤ÄÏ¶ù Î°úÏßÅ</span>
missing_required, missing_optional = validate_missing_fields(
    intent=intent,
    collected_fields=collected_fields,
)
needs_fallback = len(missing_required) > 0
</pre>
                </div>
            </div>

            <!-- Fallback Trigger -->
            <div style="padding: 1rem; background: rgba(239, 68, 68, 0.1); border-radius: 8px; border-left: 3px solid #ef4444;">
                <strong style="color: #ef4444;">Fallback Trigger</strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    ÌïÑÏàò Ïª®ÌÖçÏä§Ìä∏(Required)Í∞Ä ÎàÑÎùΩÎêòÎ©¥ <code>needs_fallback=True</code>Î•º ÏÑ§Ï†ïÌïòÏó¨
                    Answer NodeÏóêÏÑú Fallback Chain(Web Search ‚Üí General LLM)ÏùÑ Ïã§ÌñâÌï©ÎãàÎã§.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Chat Summarize -->
    <div class="modal-overlay" id="modal-chat-summarize">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-chat-summarize')">√ó</button>
            <h3 class="modal-title">üìù Summarize Node - Context Compression</h3>

            <!-- OpenCode Style -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">OpenCode Style Compaction</h4>
                <div class="modal-diagram" style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Context Compression Strategy                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ   Current Tokens                                                         ‚îÇ
‚îÇ   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê 400K       ‚îÇ
‚îÇ   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë            ‚îÇ
‚îÇ                    ‚Üë                       ‚Üë                             ‚îÇ
‚îÇ              272K (trigger)           128K (max_output)                  ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îÇ   if tokens > (context_window - max_output):   # OpenCode isOverflow    ‚îÇ
‚îÇ       trigger_summarization()                                            ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ  After Compression                                           ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  [Summary 60K] + [PRUNE_PROTECT 40K Recent] + [New Context]  ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Model Context Registry -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Model Context Window Registry</h4>
                <table class="modal-table" style="font-size: 0.8rem;">
                    <tr>
                        <th>Model</th>
                        <th>Context Window</th>
                        <th>Max Output</th>
                        <th>Trigger Threshold</th>
                        <th>Summary Tokens</th>
                    </tr>
                    <tr>
                        <td><strong>gpt-5.2</strong></td>
                        <td>400,000</td>
                        <td>128,000</td>
                        <td>272,000</td>
                        <td>60,000 (15%)</td>
                    </tr>
                    <tr>
                        <td><strong>gemini-3-flash-preview</strong></td>
                        <td>1,000,000</td>
                        <td>64,000</td>
                        <td>936,000</td>
                        <td>65,536 (cap)</td>
                    </tr>
                </table>
            </div>

            <!-- 5-Section Summary -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Íµ¨Ï°∞ÌôîÎêú 5ÏÑπÏÖò ÏöîÏïΩ</h4>
                <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem;">
                    <div style="background: rgba(139,92,246,0.15); padding: 0.75rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 1.25rem; margin-bottom: 0.25rem;">üìù</div>
                        <div style="font-size: 0.75rem; font-weight: 600;">1. ÏÇ¨Ïö©Ïûê ÏöîÏ≤≠</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">ÏõêÎ¨∏ Í∑∏ÎåÄÎ°ú</div>
                    </div>
                    <div style="background: rgba(59,130,246,0.15); padding: 0.75rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 1.25rem; margin-bottom: 0.25rem;">üéØ</div>
                        <div style="font-size: 0.75rem; font-weight: 600;">2. Î™©Ìëú</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">Í∏∞ÎåÄ Í≤∞Í≥º</div>
                    </div>
                    <div style="background: rgba(34,197,94,0.15); padding: 0.75rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 1.25rem; margin-bottom: 0.25rem;">‚úÖ</div>
                        <div style="font-size: 0.75rem; font-weight: 600;">3. ÏôÑÎ£å</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">ÏàòÌñâ ÏôÑÎ£å</div>
                    </div>
                    <div style="background: rgba(245,158,11,0.15); padding: 0.75rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 1.25rem; margin-bottom: 0.25rem;">üîÑ</div>
                        <div style="font-size: 0.75rem; font-weight: 600;">4. ÏßÑÌñâ Ï§ë</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">ÎÇ®ÏùÄ ÏûëÏóÖ</div>
                    </div>
                    <div style="background: rgba(239,68,68,0.15); padding: 0.75rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 1.25rem; margin-bottom: 0.25rem;">‚ö†Ô∏è</div>
                        <div style="font-size: 0.75rem; font-weight: 600;">5. Ïª®ÌÖçÏä§Ìä∏</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">Ï†úÏïΩ/Ïã§Ìå®</div>
                    </div>
                </div>
            </div>

            <!-- PRUNE_PROTECT -->
            <div style="padding: 1rem; background: rgba(245, 158, 11, 0.1); border-radius: 8px; border-left: 3px solid #f59e0b;">
                <strong style="color: #f59e0b;">PRUNE_PROTECT: 40K ÌÜ†ÌÅ∞</strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    OpenCode Í∏∞Ï§Ä ÏÉÅÏàò. ÏµúÍ∑º ÎèÑÍµ¨ Ï∂úÎ†•Í≥º Î©îÏãúÏßÄÎ•º Î≥¥Ìò∏ÌïòÏó¨ ÏûëÏóÖ Ïó∞ÏÜçÏÑ±ÏùÑ Ïú†ÏßÄÌï©ÎãàÎã§.
                    ÏöîÏïΩ Ïãú ÏµúÍ∑º ~80Í∞ú Î©îÏãúÏßÄÎäî ÏõêÎ¨∏ Ïú†ÏßÄÎê©ÎãàÎã§.
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: AI Agent (Cursor + Claude Code) -->
    <div class="modal-overlay" id="modal-ai-agent">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-ai-agent')">√ó</button>
            <h3 class="modal-title">ü§ñ AI Agent - Development Workflow</h3>

            <!-- Agent Tools -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Development Tools</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1.5rem;">
                    <!-- Cursor -->
                    <div style="background: rgba(59, 130, 246, 0.1); padding: 1.25rem; border-radius: 12px; border: 1px solid rgba(59, 130, 246, 0.3);">
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                            <div style="font-size: 2rem;">‚å®Ô∏è</div>
                            <div>
                                <div style="font-weight: 700; font-size: 1.1rem;">Cursor IDE</div>
                                <div style="color: var(--text-muted); font-size: 0.8rem;">AI-First Code Editor</div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; font-size: 0.85rem;">
                            <div style="background: rgba(0,0,0,0.3); padding: 0.6rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #3b82f6;">76Ïùº</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">ÏÇ¨Ïö© Í∏∞Í∞Ñ</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.3); padding: 0.6rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #3b82f6;">10.66B</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">ÌÜ†ÌÅ∞ ÏÇ¨Ïö©Îüâ</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.3); padding: 0.6rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #3b82f6;">$7,473</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">Ï¥ù ÎπÑÏö©</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.3); padding: 0.6rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #3b82f6;">Ultra Plan</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">$200/Ïõî</div>
                            </div>
                        </div>
                        <div style="margin-top: 0.75rem; background: rgba(0,0,0,0.3); padding: 0.6rem 0.8rem; border-radius: 8px; font-size: 0.75rem;">
                            <div style="color: var(--text-muted); margin-bottom: 0.4rem;">ü§ñ Î™®Îç∏Î≥Ñ ÏÇ¨Ïö©Îüâ</div>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.3rem;">
                                <span style="background: rgba(229,168,59,0.2); color: #e5a83b; padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.65rem;">Max Plan Ï£ºÏöî Î™®Îç∏ 37.5%</span>
                                <span style="background: rgba(16,185,129,0.2); color: #10b981; padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.65rem;">GPT-5.1 21.6%</span>
                                <span style="background: rgba(59,130,246,0.2); color: #3b82f6; padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.65rem;">Agent 16.1%</span>
                                <span style="background: rgba(139,92,246,0.2); color: #8b5cf6; padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.65rem;">Sonnet 4.5 13.9%</span>
                                <span style="background: rgba(234,88,12,0.2); color: #ea580c; padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.65rem;">Gemini-3 4.9%</span>
                                <span style="background: rgba(100,116,139,0.2); color: #94a3b8; padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.65rem;">Others 6.1%</span>
                            </div>
                        </div>
                    </div>
                    <!-- Claude Code -->
                    <div style="background: rgba(139, 92, 246, 0.1); padding: 1.25rem; border-radius: 12px; border: 1px solid rgba(139, 92, 246, 0.3);">
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                            <div style="font-size: 2rem;">üß†</div>
                            <div>
                                <div style="font-weight: 700; font-size: 1.1rem;">Claude Code</div>
                                <div style="color: var(--text-muted); font-size: 0.8rem;">Anthropic CLI Agent</div>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem; font-size: 0.85rem; margin-bottom: 0.75rem;">
                            <div style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #8b5cf6;">10Ïùº</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">ÏÇ¨Ïö© Í∏∞Í∞Ñ</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #8b5cf6;">258</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">ÏÑ∏ÏÖò Ïàò</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #8b5cf6;">27</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">Skills</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #8b5cf6;">Max x20</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">Plan</div>
                            </div>
                            <div style="background: rgba(0,0,0,0.3); padding: 0.5rem; border-radius: 8px; text-align: center;">
                                <div style="font-weight: 600; color: #8b5cf6;">Opus 4.5</div>
                                <div style="color: var(--text-muted); font-size: 0.7rem;">Ï£ºÏöî Î™®Îç∏</div>
                            </div>
                        </div>
                        <!-- Token Breakdown -->
                        <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; line-height: 1.6; color: var(--text-secondary);">
                            <div style="color: #f59e0b; margin-bottom: 0.3rem;">// Token Usage Breakdown (10Ïùº, 258 sessions)</div>
                            <div>input_tokens      <span style="color: #8b5cf6;">2.53M</span>   ‚Üí Ï∫êÏãú ÎØ∏Ï†ÅÏ§ë ÏÉà ÏûÖÎ†•</div>
                            <div>cache_creation   <span style="color: #8b5cf6;">277.24M</span>   ‚Üí ÏÉàÎ°ú Ï∫êÏãúÏóê Ïì¥ ÏûÖÎ†•</div>
                            <div>cache_read     <span style="color: #8b5cf6;">4,763.09M</span>   ‚Üí Ï∫êÏãúÏóêÏÑú ÏùΩÏùÄ ÏûÖÎ†• (Î™®Îç∏Ïù¥ Ïã§Ï†úÎ°ú Ï≤òÎ¶¨)</div>
                            <div>output_tokens     <span style="color: #8b5cf6;">3.27M</span>   ‚Üí Î™®Îç∏ ÏÉùÏÑ± Ï∂úÎ†•</div>
                            <div style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 0.4rem; padding-top: 0.4rem;">
                                <strong style="color: #8b5cf6;">Total: 5.05B tokens</strong>
                            </div>
                            <div style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 0.5rem; padding-top: 0.5rem;">
                                <div style="color: #f59e0b;">// Opus 4.5 API ÌôòÏÇ∞ ÎπÑÏö©</div>
                                <div>input        2.53M  √ó $15/MTok    = <span style="color: #10b981;">$38</span></div>
                                <div>cache_write  277M   √ó $18.75/MTok = <span style="color: #10b981;">$5,198</span></div>
                                <div>cache_read   4,763M √ó $1.875/MTok = <span style="color: #10b981;">$8,931</span></div>
                                <div>output       3.27M  √ó $75/MTok    = <span style="color: #10b981;">$245</span></div>
                                <div style="margin-top: 0.3rem;"><strong style="color: #10b981;">Total API equivalent: ~$14,412</strong> <span style="color: var(--text-muted);">(Max $200/ÏõîÎ°ú Ï≤òÎ¶¨)</span></div>
                            </div>
                            <div style="border-top: 1px solid rgba(255,255,255,0.1); margin-top: 0.5rem; padding-top: 0.5rem;">
                                <div style="color: #f59e0b; margin-bottom: 0.3rem;">cache_read 94%</div>
                                <div style="display: flex; flex-direction: column; gap: 0.2rem;">
                                    <div>‚Ä¢ Îß§ ÌÑ¥ ÏãúÏä§ÌÖú ÌîÑÎ°¨ÌîÑÌä∏ + Skills + ÎåÄÌôî Ïù¥Î†•ÏùÑ Ï†ÑÎüâ Ïû¨Ï†ÑÏÜ°</div>
                                    <div>‚Ä¢ foundations / reports / skills Ï∂ïÏ†ÅÎüâ = ÏÑ∏ÏÖòÎãπ Ï∫êÏãú ÌûàÌä∏Ïú®</div>
                                    <div>‚Ä¢ Î£®ÌîÑ Î∞òÎ≥µ Ïãú ÎèôÏùº ÎπÑÏö©ÏúºÎ°ú Îçî Ï†ïÎ∞ÄÌïú ÌåêÎã® ‚Üí Context-First Í∞úÎ∞úÎ°†</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Workflow Visualization -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Agent Workflow</h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          ü§ñ AI Agent Workflow                                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                  ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ  üßë‚Äçüíª Developer      ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ           üìã Task Input               ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  (Direction)      ‚îÇ         ‚îÇ  "chat-worker Î¶¨Ìå©ÌÜ†ÎßÅ" / "K8s ÎîîÎ≤ÑÍπÖ" ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                    ‚Üì                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                      üõ†Ô∏è Skills (27Í∞ú Î™®Îìà)                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇlanggraph-  ‚îÇclean-      ‚îÇk8s-        ‚îÇprompt-      ‚îÇevent-      ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇpipeline    ‚îÇarchitecture‚îÇdebugging   ‚îÇengineering  ‚îÇdriven      ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇredis-      ‚îÇgrpc-       ‚îÇgit-        ‚îÇcode-        ‚îÇcelery-     ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇpatterns    ‚îÇservice     ‚îÇworkflow    ‚îÇreview       ‚îÇrabbitmq    ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                          ‚Üì                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                        üìÅ Context Sources                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  üìö docs/        ‚îÇ  ‚îÇ  üíª Codebase     ‚îÇ  ‚îÇ  üìä Cluster      ‚îÇ         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  - foundations/  ‚îÇ  ‚îÇ  - Backend      ‚îÇ  ‚îÇ  - kubectl       ‚îÇ         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  - reports/      ‚îÇ  ‚îÇ  - Frontend     ‚îÇ  ‚îÇ  - stern logs    ‚îÇ         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  - blogs/        ‚îÇ  ‚îÇ  - Infra YAML   ‚îÇ  ‚îÇ  - ArgoCD        ‚îÇ         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                          ‚Üì                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                        üì§ Outputs                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Code Generation      ‚úÖ Refactoring       ‚úÖ Documentation          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Bug Fix              ‚úÖ Portfolio Update  ‚úÖ K8s Troubleshooting    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Test Writing         ‚úÖ PR Creation       ‚úÖ Architecture Docs      ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Skills Grid -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">üì¶ 27Í∞ú Custom Skills</h4>
                <div style="display: flex; flex-wrap: wrap; gap: 0.4rem;">
                    <span style="background: rgba(139,92,246,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">langgraph-pipeline</span>
                    <span style="background: rgba(59,130,246,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">clean-architecture</span>
                    <span style="background: rgba(245,158,11,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">k8s-debugging</span>
                    <span style="background: rgba(34,197,94,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">prompt-engineering</span>
                    <span style="background: rgba(239,68,68,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">event-driven</span>
                    <span style="background: rgba(236,72,153,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">redis-patterns</span>
                    <span style="background: rgba(99,102,241,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">grpc-service</span>
                    <span style="background: rgba(20,184,166,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">git-workflow</span>
                    <span style="background: rgba(251,146,60,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">code-review</span>
                    <span style="background: rgba(168,85,247,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">celery-rabbitmq</span>
                    <span style="background: rgba(74,222,128,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">chat-agent-flow</span>
                    <span style="background: rgba(56,189,248,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">rag-pipeline</span>
                    <span style="background: rgba(244,114,182,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">postgres-schema</span>
                    <span style="background: rgba(129,140,248,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">mcp-builder</span>
                    <span style="background: rgba(253,224,71,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem; color: #333;">skill-creator</span>
                    <span style="background: rgba(248,113,113,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">doc-coauthoring</span>
                    <span style="background: rgba(52,211,153,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">chat-agent-persistence</span>
                    <span style="background: rgba(14,165,233,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">location-service</span>
                    <span style="background: rgba(220,38,38,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">agent-feature</span>
                    <span style="background: rgba(37,99,235,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">map-feature</span>
                    <span style="background: rgba(5,150,105,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">data-integrity</span>
                    <span style="background: rgba(217,70,239,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">code-quality</span>
                    <span style="background: rgba(234,88,12,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">troubleshooting</span>
                    <span style="background: rgba(100,116,139,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">webapp-testing</span>
                    <span style="background: rgba(79,70,229,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">vercel-react-best-practices</span>
                    <span style="background: rgba(225,29,72,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">resume-writer</span>
                    <span style="background: rgba(161,161,170,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem;">pdf</span>
                </div>
            </div>

            <!-- Cycle Mode Workflow -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Claude Code Cycle Mode</h4>
                <div style="margin-bottom: 1rem; color: var(--text-secondary); font-size: 0.85rem;">
                    Ïó≠Ìï†Î≥Ñ ÏÑ∏ÏÖòÏùÑ Î∂ÑÎ¶¨ÌïòÍ≥†, <strong>shift+tab</strong>ÏúºÎ°ú Permission ModeÎ•º ÏàúÌôò(<code style="font-size: 0.75rem; background: rgba(255,255,255,0.1); padding: 0.1rem 0.3rem; border-radius: 3px;">Plan ‚Üí Auto-Accept ‚Üí Normal</code>)ÌïòÎ©∞ Ïö¥Ïö©Ìï©ÎãàÎã§. <strong>Plan Mode</strong>ÏóêÏÑú ÏΩîÎìúÎ≤†Ïù¥Ïä§Î•º read-only Î∂ÑÏÑùÌïú Îí§ Î∞©Ìñ•ÏùÑ ÌôïÏ†ïÌïòÍ≥†, <strong>Auto-Accept</strong>Î°ú Ï†ÑÌôòÌï¥ Î¨¥Ï§ëÎã® Ïã§ÌñâÌï©ÎãàÎã§.
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 1rem;">
                    <div style="background: rgba(59,130,246,0.15); padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                        <div style="font-size: 0.8rem; color: #3b82f6; font-weight: 700; margin-bottom: 0.4rem;">FE Session</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.4;">
                            UI Ïª¥Ìè¨ÎÑåÌä∏, SSE Ïä§Ìä∏Î¶¨Î∞ç, IndexedDB Ïä§ÌÇ§Îßà, iOS Ìò∏ÌôòÏÑ±
                        </div>
                    </div>
                    <div style="background: rgba(16,185,129,0.15); padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <div style="font-size: 0.8rem; color: #10b981; font-weight: 700; margin-bottom: 0.4rem;">BE Session</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.4;">
                            ÎèÑÎ©îÏù∏ Î°úÏßÅ, gRPC ÏÑúÎπÑÏä§, LangGraph ÏóêÏù¥Ï†ÑÌä∏, Worker ÌååÏù¥ÌîÑÎùºÏù∏
                        </div>
                    </div>
                    <div style="background: rgba(168,85,247,0.15); padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(168,85,247,0.3);">
                        <div style="font-size: 0.8rem; color: #a855f7; font-weight: 700; margin-bottom: 0.4rem;">Observability</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.4;">
                            OTEL Ìä∏Î†àÏù¥Ïã±, K8s Îß§ÎãàÌéòÏä§Ìä∏, Î∞∞Ìè¨ ÌååÏù¥ÌîÑÎùºÏù∏, Î™®ÎãàÌÑ∞ÎßÅ
                        </div>
                    </div>
                </div>
                <div style="padding: 0.75rem 1rem; background: rgba(0,255,136,0.08); border-radius: 8px; border: 1px solid rgba(0,255,136,0.2); font-size: 0.8rem; color: var(--text-secondary); line-height: 1.8;">
                    <strong style="color: #00ff88;">Ïö¥Ïö© ÌùêÎ¶Ñ:</strong><br>
                    <span style="color: var(--text-muted);">1.</span> Skills + Context Ï£ºÏûÖ<br>
                    <span style="color: var(--text-muted);">2.</span> <span style="color: #f59e0b;">‚è∏ Plan Mode</span> ÏΩîÎìúÎ≤†Ïù¥Ïä§ Î∂ÑÏÑù¬∑Î∞©Ìñ• ÌôïÏ†ï<br>
                    <span style="color: var(--text-muted);">3.</span> <span style="color: #10b981;">‚èµ‚èµ Auto-Accept</span> Íµ¨ÌòÑ<br>
                    <span style="color: var(--text-muted);">4.</span> Unit Test ÏûëÏÑ±<br>
                    <span style="color: var(--text-muted);">5.</span> Î¶∞ÌåÖ/Ìè¨Îß§ÌåÖ Í≤ÄÏ¶ù<br>
                    <span style="color: var(--text-muted);">6.</span> Skills ÏΩîÎìúÎ¶¨Î∑∞<br>
                    <span style="color: var(--text-muted);">7.</span> ÌÅ¥Îü¨Ïä§ÌÑ∞ ÌôòÍ≤Ω E2E ÌÖåÏä§Ìä∏<br>
                    <span style="color: var(--text-muted);">8.</span> PR ÏÉùÏÑ± ‚Üí Í∞úÎ∞úÏûê Î¶¨Î∑∞ ÌõÑ Î®∏ÏßÄ
                </div>
            </div>

            <!-- Progressive Disclosure -->
            <div style="padding: 1rem; background: rgba(139, 92, 246, 0.1); border-radius: 8px; border-left: 3px solid #8b5cf6;">
                <strong style="color: #8b5cf6;">Progressive Disclosure Pattern</strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <strong>L1</strong>: name + description (~100 words) ‚Üí Ìï≠ÏÉÅ Î°úÎìú<br>
                    <strong>L2</strong>: SKILL.md body (&lt;5K words) ‚Üí Ïä§ÌÇ¨ Ìä∏Î¶¨Í±∞ Ïãú Î°úÎìú<br>
                    <strong>L3</strong>: references/, scripts/ ‚Üí ÌïÑÏöî Ïãú ÏÑ†ÌÉùÏ†Å Î°úÎìú
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Developer Profile -->
    <div class="modal-overlay" id="modal-developer-profile">
        <div class="modal-content" style="max-width: 1150px;">
            <button class="modal-close" onclick="closeModal('modal-developer-profile')">√ó</button>
            <h3 class="modal-title">Developer Profile</h3>

            <!-- Profile Header -->
            <div style="display: flex; gap: 1.5rem; align-items: center; margin-bottom: 1.5rem;">
                <img src="assets/images/profile_jihwan.png" alt="Jihwan Ryu" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary);">
                <div>
                    <h4 style="color: var(--text-primary); font-size: 1.5rem; margin-bottom: 0.25rem;">Î•òÏßÄÌôò (Jihwan Ryu)</h4>
                    <div style="color: var(--primary); font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Backend Engineer</div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <a href="https://mangowhoiscloud.github.io/resume/" target="_blank" style="display: inline-flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; background: rgba(0,255,136,0.1); border: 1px solid var(--primary); border-radius: 15px; font-size: 0.75rem; color: var(--primary); text-decoration: none;">
                            Resume
                        </a>
                        <a href="https://github.com/mng990" target="_blank" style="display: inline-flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 15px; font-size: 0.75rem; color: var(--text-secondary); text-decoration: none;">
                            GitHub
                        </a>
                        <a href="https://www.linkedin.com/in/jihwan-ryu-b6b04a202/" target="_blank" style="display: inline-flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; background: rgba(10,102,194,0.15); border: 1px solid rgba(10,102,194,0.4); border-radius: 15px; font-size: 0.75rem; color: #0a66c2; text-decoration: none;">
                            LinkedIn
                        </a>
                        <a href="https://rooftopsnow.tistory.com" target="_blank" style="display: inline-flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 15px; font-size: 0.75rem; color: var(--text-secondary); text-decoration: none;">
                            Blog
                        </a>
                    </div>
                </div>
            </div>

            <!-- Skills -->
            <div style="margin-bottom: 1.5rem;">
                <h5 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Tech Stack</h5>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; font-size: 0.85rem;">
                    <div>
                        <div style="color: var(--text-muted); font-size: 0.75rem; margin-bottom: 0.25rem;">Languages</div>
                        <div style="color: var(--text-secondary);">Python, Go, C/C++, Solidity</div>
                    </div>
                    <div>
                        <div style="color: var(--text-muted); font-size: 0.75rem; margin-bottom: 0.25rem;">Backend</div>
                        <div style="color: var(--text-secondary);">FastAPI, LangGraph, Celery, RabbitMQ, Redis, PostgreSQL, gRPC, SSE</div>
                    </div>
                    <div>
                        <div style="color: var(--text-muted); font-size: 0.75rem; margin-bottom: 0.25rem;">Infrastructure</div>
                        <div style="color: var(--text-secondary);">Kubernetes, Istio, Calico VXLAN, Terraform, Ansible</div>
                    </div>
                    <div>
                        <div style="color: var(--text-muted); font-size: 0.75rem; margin-bottom: 0.25rem;">DevOps / Observability</div>
                        <div style="color: var(--text-secondary);">ArgoCD, Helm, GitHub Actions, Prometheus, Grafana, Jaeger, EFK, OTEL</div>
                    </div>
                    <div>
                        <div style="color: var(--text-muted); font-size: 0.75rem; margin-bottom: 0.25rem;">Agent</div>
                        <div style="color: var(--text-secondary);">Claude Code, Cursor</div>
                    </div>
                    <div>
                        <div style="color: var(--text-muted); font-size: 0.75rem; margin-bottom: 0.25rem;">LLM API</div>
                        <div style="color: var(--text-secondary);">OpenAI Agents SDK / Responses API, Gemini API</div>
                    </div>
                </div>
            </div>

            <!-- Education -->
            <div style="margin-bottom: 1.5rem;">
                <h5 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Education</h5>
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Î∂ÄÏÇ∞ÎåÄÌïôÍµê</strong> Ïª¥Ìì®ÌÑ∞Í≥µÌïôÍ≥º ÌïôÏÇ¨ (2017‚Äì2023)
                    </div>
                    <div style="margin-bottom: 0.5rem;">
                        <strong>Ïπ¥Ïπ¥Ïò§ÌÖåÌÅ¨ Î∂ÄÌä∏Ï∫†ÌîÑ</strong> Backend Í≥ºÏ†ï (2024)
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 0.5rem;">
                        <span style="background: rgba(139,92,246,0.2); padding: 0.2rem 0.5rem; border-radius: 10px; font-size: 0.75rem;">Ï†ïÎ≥¥Ï≤òÎ¶¨Í∏∞ÏÇ¨ (2024)</span>
                        <span style="background: rgba(59,130,246,0.2); padding: 0.2rem 0.5rem; border-radius: 10px; font-size: 0.75rem;">OPIc IH (2024)</span>
                    </div>
                </div>
            </div>

            <!-- Awards -->
            <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(245,158,11,0.1); border-radius: 8px; border-left: 3px solid #f59e0b;">
                <strong style="color: #f59e0b;">üèÜ Awards</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong>2025 AI ÏÉàÏãπÌÜ§ Ïö∞ÏàòÏÉÅ</strong>
                            <div style="color: var(--text-muted); font-size: 0.75rem; margin-top: 0.25rem;">
                                ÏÑúÏö∏ÌäπÎ≥ÑÏãú Ï£ºÏµú ¬∑ DACON Ïö¥ÏòÅ | Î≥∏ÏÑ† 4ÏúÑ/32ÌåÄ (ÏòàÏÑ† 181ÌåÄ)
                            </div>
                        </div>
                        <span style="background: rgba(245,158,11,0.2); padding: 0.3rem 0.6rem; border-radius: 15px; font-size: 0.75rem; color: #f59e0b;">2025.12</span>
                    </div>
                </div>
            </div>

            <!-- Professional Experience -->
            <div style="margin-bottom: 1.5rem;">
                <h5 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Professional Experience</h5>
                <table class="modal-table" style="font-size: 0.8rem;">
                    <tr>
                        <th style="width: 25%;">Company</th>
                        <th style="width: 20%;">Period</th>
                        <th style="width: 20%;">Title / Role</th>
                        <th style="width: 35%;">Description</th>
                    </tr>
                    <tr>
                        <td><strong>Rakuten Symphony Korea</strong><br><span style="color: var(--text-muted); font-size: 0.7rem;">Ï†ïÍ∑úÏßÅ ¬∑ Cloud BU</span></td>
                        <td>2024.12 ‚Äì 2025.08</td>
                        <td><strong>Cloud Engineer</strong><br><span style="color: var(--text-muted); font-size: 0.7rem;">Jr. Storage Developer (Server) / Full-time</span></td>
                        <td>
                            <div style="margin-bottom: 0.4rem;"><strong>Rakuten CNP v5.5.0</strong> ‚Äî CNP Î∂ÑÏÇ∞ Ïä§ÌÜ†Î¶¨ÏßÄ ÏÑúÎ≤Ñ Í∞úÎ∞ú, Rakuten Mobile(JP) + 1&1(DE) 20M Í∏ÄÎ°úÎ≤å ÏÇ¨Ïö©Ïûê</div>
                            <div><strong>Rakuten OStore v1.0.0</strong> ‚Äî Object Storage Î∂ÑÏÇ∞ Í≤åÏù¥Ìä∏Ïõ®Ïù¥ Í∞úÎ∞ú, MinIO/S3 ÎåÄÏ≤¥ ÏóîÌÑ∞ÌîÑÎùºÏù¥Ï¶à ÌîÑÎ°úÎçïÏÖò</div>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Eco¬≤ Project</strong><br><span style="color: var(--text-muted); font-size: 0.7rem;">SeSACTHON 2025</span></td>
                        <td>2025.10.31 ‚Äì Present</td>
                        <td><strong>Backend/Infra Lead</strong><br><span style="color: var(--text-muted); font-size: 0.7rem;">Agent-Driven Workflow ÏÑ§Í≥Ñ ¬∑ Î∞±ÏóîÎìú/Ïù∏ÌîÑÎùº Í∞úÎ∞ú</span></td>
                        <td>
                            <div style="margin-bottom: 0.5rem; font-size: 0.8rem; color: var(--text-primary); font-weight: 600;">24ÎÖ∏Îìú K8s Î∂ÑÏÇ∞ ÎπÑÎèôÍ∏∞ ÌÅ¥Îü¨Ïä§ÌÑ∞ (8 APIs, 6 Workers, 3 Infra) ¬∑ ÏÑ§Í≥Ñ ‚Üí Í∞úÎ∞ú ‚Üí Î∞∞Ìè¨ ‚Üí Ïö¥ÏòÅ</div>
                            <div style="margin-bottom: 0.4rem;"><strong style="color: #8b5cf6;">üìê Performance Improvement</strong></div>
                            <div style="font-size: 0.75rem; margin-bottom: 0.5rem; padding-left: 0.5rem; border-left: 2px solid rgba(139,92,246,0.4);">
                                <div>‚Ä¢ <strong>Auth Offloading</strong> ‚Äî Istio EnvoyFilter + ext-authz(Go) JWT Í≤ÄÏ¶ù Î∂ÑÎ¶¨, <strong style="color: var(--primary);">48 ‚Üí 1,500 RPS (31√ó)</strong></div>
                                <div>‚Ä¢ <strong>Event Bus Layer</strong> ‚Äî Redis Streams + Pub/Sub Í∏∞Î∞ò Ïã§ÏãúÍ∞Ñ Ï†ÑÎã¨, <strong style="color: var(--primary);">ÎèôÏãú Î∂ÄÌïò 600% Í∞úÏÑ†</strong></div>
                            </div>
                            <div style="margin-bottom: 0.4rem;"><strong style="color: #3b82f6;">‚öôÔ∏è Implementation</strong></div>
                            <div style="font-size: 0.75rem; padding-left: 0.5rem; border-left: 2px solid rgba(59,130,246,0.4);">
                                <div>‚Ä¢ <strong>LangGraph StateGraph</strong> ‚Äî Send API Í∏∞Î∞ò ÎèôÏ†Å Î≥ëÎ†¨ ÎùºÏö∞ÌåÖ, Multi-Agent Ïò§ÏºÄÏä§Ìä∏Î†àÏù¥ÏÖò</div>
                                <div>‚Ä¢ <strong>4-Stage Celery Pipeline</strong> ‚Äî Vision/Rule/Answer/Reward, KEDA Ïù¥Î≤§Ìä∏ Í∏∞Î∞ò Ïò§ÌÜ†Ïä§ÏºÄÏùºÎßÅ</div>
                                <div>‚Ä¢ <strong>3-Tier Memory Architecture</strong> ‚Äî Redis Hot + PostgreSQL Persistent + Summary Compression</div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal: 3-Tier Memory Architecture -->
    <div class="modal-overlay" id="modal-3tier-memory">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-3tier-memory')">√ó</button>
            <h3 class="modal-title">üíæ 3-Tier Memory Architecture</h3>

            <!-- Memory Architecture -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Redis Primary + PostgreSQL Async Sync</h4>
                <div class="modal-diagram" style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              ReadThroughCheckpointer + CheckpointSyncService              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  L1: Redis Primary (~1ms, pool Î∂àÌïÑÏöî)                          ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ Checkpoint: chat:checkpoint:cache:{thread_id} (TTL 24h)    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ Intent Cache: intent:{hash} (TTL 3600s)                     ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ Token Stream: Redis Streams (TTL 1h, seq-based)             ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ Sync Queue: checkpoint:sync:queue (BRPOP)                   ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ          ‚Üë Write (Hot Path)         ‚Üì Read Miss (Cold Start Only)        ‚îÇ
‚îÇ          ‚îÇ                          ‚îÇ                                    ‚îÇ
‚îÇ   Worker (4 pods √ó 4 workers)       ‚îÇ pool_max_size=2                    ‚îÇ
‚îÇ                                     ‚Üì                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  L2: PostgreSQL Persistent (Async Batch Sync)                   ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ CheckpointSyncService (Î≥ÑÎèÑ Deployment, replicas=1)         ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ 5Ï¥à Ï£ºÍ∏∞ Î∞∞Ïπò ÎèôÍ∏∞Ìôî (BRPOP ‚Üí Bulk Upsert)                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ pool_max_size=5 (Îã®Ïùº Ïù∏Ïä§ÌÑ¥Ïä§)                              ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ Conversation History (permanent retention)                  ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                              ‚Üì On Read                                   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  L3: LangGraph ChatState (Application Memory)                   ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ messages: Annotated[list, add_messages] (accumulator)       ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ summary: str (compressed context)                           ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îú‚îÄ intent_history: list[str] (Chain-of-Intent tracking)        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ context: dict[str, Any] (subagent results)                  ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- ReadThroughCheckpointer Pattern -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">ReadThroughCheckpointer + SyncableRedisSaver</h4>
                <div class="modal-diagram" style="font-size: 0.8rem; line-height: 1.4;">
# Worker: Redis Primary Write (pool Î∂àÌïÑÏöî, ~1ms)
checkpointer = ReadThroughCheckpointer(
    redis_saver=SyncableRedisSaver(redis_client),   # L1: Write Ï†ÑÎã¥
    postgres_saver=AsyncPostgresSaver(pool_size=2),  # Cold start fallback only
    cache_ttl=86400,                                 # 24h TTL
)

# Read Flow:  Redis hit ‚Üí ChatState (99%+ hit rate, Temporal Locality)
#             Redis miss ‚Üí PostgreSQL ‚Üí Redis promote (LRU) ‚Üí ChatState
# Write Flow: ChatState ‚Üí Redis ‚Üí Sync Queue Ï†ÅÏû¨ (ÎπÑÎèôÍ∏∞)

# Syncer: Î≥ÑÎèÑ Deployment (chat-checkpoint-syncer, replicas=1)
# BRPOP checkpoint:sync:queue ‚Üí Bulk Upsert PostgreSQL (5Ï¥à Ï£ºÍ∏∞)</div>
            </div>

            <!-- Connection Pool Reduction -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Connection Pool Ï†àÍ∞ê (psycopg_pool.PoolTimeout Ìï¥Í≤∞)</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <div style="background: rgba(239,68,68,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(239,68,68,0.3);">
                        <h5 style="color: #ef4444; margin-bottom: 0.5rem;">Before (CachedPostgresSaver)</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div>Worker pool: <strong>192</strong> (4 pods √ó 4 workers √ó 12)</div>
                            <div>Syncer: ÏóÜÏùå</div>
                            <div>Ï†ÑÏ≤¥: <strong>212 connections</strong></div>
                            <div style="margin-top: 0.5rem; font-size: 0.78rem; color: var(--text-muted);">8Í∞ú ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏ Î≥ëÎ†¨ checkpoint ‚Üí PoolTimeout</div>
                        </div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <h5 style="color: #10b981; margin-bottom: 0.5rem;">After (ReadThroughCheckpointer)</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div>Worker pool: <strong>8</strong> (Cold start only, size=2)</div>
                            <div>Syncer pool: <strong>5</strong> (Îã®Ïùº Ïù∏Ïä§ÌÑ¥Ïä§)</div>
                            <div>Ï†ÑÏ≤¥: <strong>33 connections (84% Í∞êÏÜå)</strong></div>
                            <div style="margin-top: 0.5rem; font-size: 0.78rem; color: var(--text-muted);">Redis 99%+ hit rate (Temporal Locality)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Layer Details -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                <div style="background: rgba(239,68,68,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(239,68,68,0.3);">
                    <h5 style="color: #ef4444; margin-bottom: 0.75rem;">üî• L1: Redis Primary</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div><strong>Latency:</strong> ~1ms</div>
                        <div><strong>Pattern:</strong> Read-Through</div>
                        <div><strong>TTL:</strong> 86400s (Checkpoint), 3600s (Intent)</div>
                        <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">Worker Hot Path, pool Î∂àÌïÑÏöî</div>
                    </div>
                </div>
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                    <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">üóÑÔ∏è L2: PostgreSQL (Async)</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div><strong>Sync:</strong> 5Ï¥à Î∞∞Ïπò</div>
                        <div><strong>Driver:</strong> psycopg_pool</div>
                        <div><strong>Pool:</strong> max=5 (Syncer only)</div>
                        <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">ÏòÅÏÜç Î≥¥Ïû•, Îã®Ïùº Syncer ÌîÑÎ°úÏÑ∏Ïä§</div>
                    </div>
                </div>
                <div style="background: rgba(34,197,94,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34,197,94,0.3);">
                    <h5 style="color: #22c55e; margin-bottom: 0.75rem;">‚ö° L3: ChatState</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div><strong>Latency:</strong> ~100Œºs</div>
                        <div><strong>Scope:</strong> Request</div>
                        <div><strong>Type:</strong> TypedDict</div>
                        <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">ÌòÑÏû¨ ÌÑ¥ Ïª®ÌÖçÏä§Ìä∏</div>
                    </div>
                </div>
            </div>

            <!-- Blog Reference -->
            <div style="margin-top: 1.5rem; padding: 0.75rem 1rem; background: rgba(99,102,241,0.1); border-radius: 8px; border-left: 3px solid #6366f1;">
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    üìä Íµ¨ÌòÑ ÏÉÅÏÑ∏: <a href="https://rooftopsnow.tistory.com/242" target="_blank" rel="noopener" style="color: #6366f1;">ADR: PostgreSQL Checkpointer ‚Üí Redis + Async Sync Ï†ÑÌôò</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Token v2 Streaming + Context Compression -->
    <div class="modal-overlay" id="modal-token-streaming">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-token-streaming')">√ó</button>
            <h3 class="modal-title">üîÑ Token v2 + Context Compression</h3>

            <!-- Token Streaming v2 -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Token v2 Recoverable Streaming</h4>
                <div class="modal-diagram" style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Token v2 Recoverable Streaming Flow                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                               ‚îÇ
‚îÇ   Client              SSE Gateway           Redis Streams      Worker         ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ  1. SSE Connect      ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ  2. Subscribe        ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ                      ‚îÇ  3. XADD token‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ                      ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§           ‚îÇ
‚îÇ     ‚îÇ  4. SSE: id:1001     ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ   [Connection Lost]  ‚îÇ                      ‚îÇ  5. XADD more ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ         X            ‚îÇ                      ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§           ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ  6. Reconnect        ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ     (last_id=1001)   ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ  7. XRANGE 1001 +    ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ  8. Missed tokens    ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ                      ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ  9. Continue stream  ‚îÇ                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                      ‚îÇ               ‚îÇ           ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Write/Read Path -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 2rem;">
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: #22c55e; margin-bottom: 0.75rem;">üì§ Write Path (Worker)</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div>1. LLM ‚Üí astream chunks</div>
                        <div>2. Redis Streams <code>XADD</code> (seq-based)</div>
                        <div>3. Redis Pub/Sub <code>PUBLISH</code> (Ïã§ÏãúÍ∞Ñ)</div>
                        <div>4. State snapshot (10ÌÜ†ÌÅ∞ÎßàÎã§)</div>
                        <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">maxlen: 1000, TTL: 1ÏãúÍ∞Ñ</div>
                    </div>
                </div>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: #f59e0b; margin-bottom: 0.75rem;">üì• Reconnect Path (Client)</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div>1. <code>Last-Event-ID</code> Ìó§Îçî Ï†ÑÏÜ°</div>
                        <div>2. SSE Gateway <code>XRANGE</code> catch-up</div>
                        <div>3. Missing tokens replay</div>
                        <div>4. <code>XREAD BLOCK</code> Ïû¨Í∞ú</div>
                        <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">Zero data loss guarantee</div>
                    </div>
                </div>
            </div>

            <!-- Context Compression -->
            <div>
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Dynamic Context Compression</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: var(--primary); margin-bottom: 0.75rem;">‚öôÔ∏è Trigger Conditions</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary); font-family: monospace;">
                            threshold = context_window - max_output<br><br>
                            GPT-5.2: 400K - 128K = <span style="color: #22c55e;">272K</span><br>
                            Gemini-3: 1M - 64K = <span style="color: #22c55e;">936K</span><br><br>
                            Summary size: 15% (min 20K, max 65K)
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üìã 5-Tier Summary Structure</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div>1. User request (original)</div>
                            <div>2. Goal & expected result</div>
                            <div>3. Completed tasks</div>
                            <div>4. In-progress/remaining</div>
                            <div>5. Critical context (failures, constraints)</div>
                            <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">PRUNE_PROTECT: 40K tokens (recent)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Node Resilience (NodePolicy + Circuit Breaker) -->
    <div class="modal-overlay" id="modal-node-resilience">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-node-resilience')">√ó</button>
            <h3 class="modal-title">üõ°Ô∏è NodePolicy + Circuit Breaker</h3>

            <!-- Node Executor Pattern -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">NodeExecutor Policy System</h4>
                <div class="modal-diagram" style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     NodeExecutor Policy Application                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ   execute(node_name, node_func, state)                                   ‚îÇ
‚îÇ     ‚îÇ                                                                    ‚îÇ
‚îÇ     ‚îú‚Üí 1. Get NodePolicy (timeout, retry, cb_threshold, fail_mode)       ‚îÇ
‚îÇ     ‚îú‚Üí 2. Check CircuitBreaker state                                     ‚îÇ
‚îÇ     ‚îÇ      ‚îî‚Üí OPEN? ‚Üí fail immediately (retry_after seconds)             ‚îÇ
‚îÇ     ‚îú‚Üí 3. asyncio.wait_for(timeout_seconds) wrapper                      ‚îÇ
‚îÇ     ‚îú‚Üí 4. Retry loop (max_retries attempts)                              ‚îÇ
‚îÇ     ‚îú‚Üí 5. Record success ‚Üí cb.record_success() / failure ‚Üí cb.record_failure()
‚îÇ     ‚îî‚Üí 6. Handle failure per FailMode:                                   ‚îÇ
‚îÇ            ‚îú‚Üí FAIL_OPEN: Continue with error (ÏÑ†ÌÉùÏ†Å ÎÖ∏Îìú)                ‚îÇ
‚îÇ            ‚îú‚Üí FAIL_CLOSE: Stop pipeline (ÌïÑÏàò ÎÖ∏Îìú)                      ‚îÇ
‚îÇ            ‚îî‚Üí FAIL_FALLBACK: Execute fallback function (ÎåÄÏ≤¥ Í∞ÄÎä•)       ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- NODE_POLICIES Table (from codebase) -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">NODE_POLICIES Configuration (ÏΩîÎìúÎ≤†Ïù¥Ïä§ Í∏∞Î∞ò)</h4>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; font-size: 0.8rem; border-collapse: collapse;">
                        <thead>
                            <tr style="background: rgba(91,163,163,0.2);">
                                <th style="padding: 0.5rem; text-align: left; border-bottom: 1px solid var(--border-subtle);">Node</th>
                                <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">Timeout</th>
                                <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">Retry</th>
                                <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">CB Threshold</th>
                                <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">FailMode</th>
                                <th style="padding: 0.5rem; text-align: left; border-bottom: 1px solid var(--border-subtle);">Rationale</th>
                            </tr>
                        </thead>
                        <tbody style="color: var(--text-secondary);">
                            <tr><td style="padding: 0.4rem;">waste_rag</td><td style="text-align: center;">1000ms</td><td style="text-align: center;">1</td><td style="text-align: center;">5</td><td style="text-align: center; color: #f59e0b;">FALLBACK</td><td style="font-size: 0.75rem;">Î°úÏª¨ ÌååÏùº Í≤ÄÏÉâ 1Ï¥à Ïù¥ÎÇ¥</td></tr>
                            <tr><td style="padding: 0.4rem;">bulk_waste</td><td style="text-align: center;">10000ms</td><td style="text-align: center;">2</td><td style="text-align: center;">5</td><td style="text-align: center; color: #f59e0b;">FALLBACK</td><td style="font-size: 0.75rem;">MOIS API DEFAULT_TIMEOUT=15s</td></tr>
                            <tr><td style="padding: 0.4rem;">location</td><td style="text-align: center;">3000ms</td><td style="text-align: center;">2</td><td style="text-align: center;">5</td><td style="text-align: center; color: #f59e0b;">FALLBACK</td><td style="font-size: 0.75rem;">gRPC PostGIS ~100ms</td></tr>
                            <tr><td style="padding: 0.4rem;">general</td><td style="text-align: center;">30000ms</td><td style="text-align: center;">2</td><td style="text-align: center;">3</td><td style="text-align: center; color: #ef4444;">CLOSE</td><td style="font-size: 0.75rem;">LLM HTTP_TIMEOUT.read=60s</td></tr>
                            <tr><td style="padding: 0.4rem;">character</td><td style="text-align: center;">3000ms</td><td style="text-align: center;">1</td><td style="text-align: center;">3</td><td style="text-align: center; color: #22c55e;">OPEN</td><td style="font-size: 0.75rem;">gRPC LocalCache ~1-3ms</td></tr>
                            <tr><td style="padding: 0.4rem;">collection_point</td><td style="text-align: center;">10000ms</td><td style="text-align: center;">2</td><td style="text-align: center;">5</td><td style="text-align: center; color: #f59e0b;">FALLBACK</td><td style="font-size: 0.75rem;">KECO API DEFAULT_TIMEOUT=15s</td></tr>
                            <tr><td style="padding: 0.4rem;">weather</td><td style="text-align: center;">5000ms</td><td style="text-align: center;">1</td><td style="text-align: center;">3</td><td style="text-align: center; color: #22c55e;">OPEN</td><td style="font-size: 0.75rem;">KMA API, Î≥¥Ï°∞ Ï†ïÎ≥¥</td></tr>
                            <tr><td style="padding: 0.4rem;">web_search</td><td style="text-align: center;">10000ms</td><td style="text-align: center;">2</td><td style="text-align: center;">5</td><td style="text-align: center; color: #f59e0b;">FALLBACK</td><td style="font-size: 0.75rem;">DuckDuckGo timeout=10s</td></tr>
                            <tr><td style="padding: 0.4rem;">recyclable_price</td><td style="text-align: center;">10000ms</td><td style="text-align: center;">2</td><td style="text-align: center;">5</td><td style="text-align: center; color: #f59e0b;">FALLBACK</td><td style="font-size: 0.75rem;">KECO API, ÏãúÏÑ∏ Ï†ïÎ≥¥</td></tr>
                            <tr><td style="padding: 0.4rem;">image_generation</td><td style="text-align: center;">30000ms</td><td style="text-align: center;">1</td><td style="text-align: center;">3</td><td style="text-align: center; color: #22c55e;">OPEN</td><td style="font-size: 0.75rem;">DALL-E 10-30Ï¥à ÏÜåÏöî</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- FailMode & Circuit Breaker Details -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üéöÔ∏è FailMode Enum</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div style="margin-bottom: 0.5rem;"><span style="color: #22c55e;">FAIL_OPEN</span>: Ïã§Ìå®Ìï¥ÎèÑ ÏßÑÌñâ (ÏÑ†ÌÉùÏ†Å ÎÖ∏Îìú)</div>
                        <div style="margin-bottom: 0.5rem;"><span style="color: #ef4444;">FAIL_CLOSE</span>: Ïã§Ìå®ÌïòÎ©¥ Ï†ÑÏ≤¥ Ïã§Ìå® (ÌïÑÏàò ÎÖ∏Îìú)</div>
                        <div><span style="color: #f59e0b;">FAIL_FALLBACK</span>: Ïã§Ìå®ÌïòÎ©¥ ÎåÄÏ≤¥ Î°úÏßÅ Ïã§Ìñâ</div>
                    </div>
                </div>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">‚ö° Circuit Breaker</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div><strong>States:</strong> CLOSED ‚Üí OPEN ‚Üí HALF_OPEN</div>
                        <div><strong>Threshold:</strong> cb_threshold Ïó∞ÏÜç Ïã§Ìå®</div>
                        <div><strong>Recovery:</strong> 60Ï¥à ÌõÑ HALF_OPEN</div>
                        <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">allow_request(), record_success(), record_failure()</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Fallback Chain + Feedback Evaluation -->
    <div class="modal-overlay" id="modal-fallback-chain">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-fallback-chain')">√ó</button>
            <h3 class="modal-title">üìä Feedback + Fallback Chain</h3>

            <!-- Fallback Chain Diagram -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">FALLBACK_CHAIN Configuration</h4>
                <div class="modal-diagram" style="font-size: 0.8rem; line-height: 1.4;">
# fallback_orchestrator.py
FALLBACK_CHAIN: dict[str, list[str]] = {
    "rag": ["web_search", "general_llm"],
    "web_search": ["general_llm"],
    "character": ["retry", "skip"],
    "location": ["retry", "skip"],
    "intent": ["clarify", "general"],
}

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    RAG     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Web Search  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ General LLM ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Clarify ‚îÇ
‚îÇ   (Fail)   ‚îÇ     ‚îÇ   (Fail)    ‚îÇ     ‚îÇ   (Fail)    ‚îÇ     ‚îÇ  (End)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- 4-Dimension Scoring -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Rule-based Quality Evaluation (4-Dimension)</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üìä Scoring Weights</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;"><span>1. Í≤∞Í≥º Ï°¥Ïû¨ Ïó¨Î∂Ä</span><span style="color: #22c55e;">0.3</span></div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;"><span>2. Ïπ¥ÌÖåÍ≥†Î¶¨ Îß§Ïπ≠</span><span style="color: #22c55e;">0.2</span></div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;"><span>3. Ï†ïÎ≥¥ ÌíçÎ∂ÄÎèÑ (disposal_info)</span><span style="color: #22c55e;">0.2</span></div>
                            <div style="display: flex; justify-content: space-between;"><span>4. ÌÇ§ÏõåÎìú Îß§Ïπ≠Î•†</span><span style="color: #22c55e;">0.3</span></div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üè∑Ô∏è FeedbackQuality Enum</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div style="margin-bottom: 0.3rem;"><span style="color: #22c55e;">EXCELLENT</span>: score ‚â• 0.9</div>
                            <div style="margin-bottom: 0.3rem;"><span style="color: #22c55e;">GOOD</span>: 0.7 ‚â§ score < 0.9</div>
                            <div style="margin-bottom: 0.3rem;"><span style="color: #f59e0b;">FAIR</span>: 0.4 ‚â§ score < 0.7</div>
                            <div><span style="color: #ef4444;">POOR</span>: score < 0.4 ‚Üí Fallback Ìä∏Î¶¨Í±∞</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clarification Messages -->
            <div>
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Clarification Messages</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üí¨ IntentÎ≥Ñ Î©îÏãúÏßÄ</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div style="margin-bottom: 0.5rem;"><strong>waste:</strong> "Ïñ¥Îñ§ Î¨ºÍ±¥Ïùò Î∂ÑÎ¶¨ÏàòÍ±∞ Î∞©Î≤ïÏù¥ Í∂ÅÍ∏àÌïòÏã†Í∞ÄÏöî? ü§î"</div>
                            <div style="margin-bottom: 0.5rem;"><strong>location:</strong> "Ïñ¥Îñ§ ÏúÑÏπò Ï†ïÎ≥¥Í∞Ä ÌïÑÏöîÌïòÏã†Í∞ÄÏöî? üìç"</div>
                            <div style="margin-bottom: 0.5rem;"><strong>character:</strong> "Ïù¥ÏΩîÏóê ÎåÄÌï¥ Îçî ÏïåÍ≥† Ïã∂ÏúºÏã† Ï†êÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî? üå±"</div>
                            <div><strong>general:</strong> "ÏßàÎ¨∏ÏùÑ Ï†ïÌôïÌûà Ïù¥Ìï¥ÌïòÏßÄ Î™ªÌñàÏñ¥Ïöî. üôè"</div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üîÑ FallbackReason Enum</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div style="margin-bottom: 0.3rem;">RAG_NO_RESULT ‚Üí web_search</div>
                            <div style="margin-bottom: 0.3rem;">RAG_LOW_QUALITY ‚Üí web_search</div>
                            <div style="margin-bottom: 0.3rem;">INTENT_LOW_CONFIDENCE ‚Üí clarify</div>
                            <div>SUBAGENT_FAILURE ‚Üí retry/skip</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Domain - Scan -->
    <div class="modal-overlay" id="modal-domain-scan">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-domain-scan')">√ó</button>
            <h3 class="modal-title">üì∑ Scan Domain - 4-Stage Vision Pipeline</h3>
            <div class="domain-demo-section">
                <div class="domain-demo-title">
                    <span class="lang-ko">üìπ API ÎèôÏûë</span>
                    <span class="lang-en">üìπ API Action</span>
                </div>
                <a href="https://frontend.dev.growbin.app" target="_blank" rel="noopener" class="domain-gif-link">
                    <div class="domain-gif-container">
                        <img src="assets/gifs/scan-api.gif" alt="Scan API Demo">
                    </div>
                </a>
            </div>

            <!-- 4-Stage Pipeline with Latency (Moved to top) -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">4-Stage Celery Pipeline</h4>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem;">
                    <div style="background: rgba(139,92,246,0.15); padding: 1rem; border-radius: 8px; border: 1px solid rgba(139,92,246,0.4); text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üëÅÔ∏è</div>
                        <div style="font-weight: 600; color: #8b5cf6;">Vision</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">OpenAI Vision API</div>
                        <div style="font-size: 0.7rem; color: #8b5cf6; margin-top: 0.25rem; font-weight: 600;">~4.5s (40%)</div>
                    </div>
                    <div style="background: rgba(245,158,11,0.15); padding: 1rem; border-radius: 8px; border: 1px solid rgba(245,158,11,0.4); text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üìã</div>
                        <div style="font-weight: 600; color: #f59e0b;">Rule</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">JSON Í∑úÏ†ï Í≤ÄÏÉâ</div>
                        <div style="font-size: 0.7rem; color: #f59e0b; margin-top: 0.25rem; font-weight: 600;">~0.3s (5%)</div>
                    </div>
                    <div style="background: rgba(16,185,129,0.15); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.4); text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üí¨</div>
                        <div style="font-weight: 600; color: #10b981;">Answer</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">LLM ÏùëÎãµ ÏÉùÏÑ±</div>
                        <div style="font-size: 0.7rem; color: #10b981; margin-top: 0.25rem; font-weight: 600;">~4.8s (45%)</div>
                    </div>
                    <div style="background: rgba(59,130,246,0.15); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.4); text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 0.5rem;">üéÅ</div>
                        <div style="font-weight: 600; color: #3b82f6;">Reward</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">Ï∫êÎ¶≠ÌÑ∞ Îß§Ïπ≠</div>
                        <div style="font-size: 0.7rem; color: #3b82f6; margin-top: 0.25rem; font-weight: 600;">~1.7s (10%)</div>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted);">
                    Total: ~11.3s (LLM I/O-bound 85%)
                </div>
            </div>

            <!-- Architecture Evolution -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">üìà ÏïÑÌÇ§ÌÖçÏ≤ò ÏßÑÌôî Í≥ºÏ†ï</span>
                    <span class="lang-en">üìà Architecture Evolution</span>
                </h4>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
                    <div style="background: rgba(107,114,128,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(107,114,128,0.3);">
                        <div style="font-weight: 600; color: #6b7280; margin-bottom: 0.5rem; font-size: 0.85rem;">üíÄ Phase 0: Sync</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">
                            <div>Thread Pool: 6 concurrent</div>
                            <div>100 VU: <strong>0%</strong> (150s+ timeout)</div>
                            <div style="color: #6b7280; margin-top: 0.25rem;">GIL Î≥ëÎ™©, Ïä§Î†àÎìú Ï†êÏú†</div>
                        </div>
                    </div>
                    <div style="background: rgba(239,68,68,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(239,68,68,0.3);">
                        <div style="font-weight: 600; color: #ef4444; margin-bottom: 0.5rem; font-size: 0.85rem;">‚ùå Phase 1: Celery Events</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">
                            <div>SSE : RabbitMQ = <strong>1:21</strong></div>
                            <div>50 VU ‚Üí 341 connections</div>
                            <div style="color: #ef4444; margin-top: 0.25rem;">503 Error, Î©îÎ™®Î¶¨ Ï¥àÍ≥º</div>
                        </div>
                    </div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(245,158,11,0.3);">
                        <div style="font-weight: 600; color: #f59e0b; margin-bottom: 0.5rem; font-size: 0.85rem;">‚ö†Ô∏è Phase 2: KEDA</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">
                            <div>50 VU: 35% ‚Üí <strong>86.3%</strong></div>
                            <div>CPU 85%, Context Switch</div>
                            <div style="color: #f59e0b; margin-top: 0.25rem;">Í≥†Î∂ÄÌïò Ïãú 30%Î°ú ÌïòÎùΩ</div>
                        </div>
                    </div>
                    <div style="background: rgba(34,197,94,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(34,197,94,0.3);">
                        <div style="font-weight: 600; color: #22c55e; margin-bottom: 0.5rem; font-size: 0.85rem;">‚úÖ Phase 3: Event Bus</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">
                            <div>500 VU: <strong>94%</strong> (Îã®Ïùº ÎÖ∏Îìú ÌïúÍ≥Ñ)</div>
                            <div>SLA: 300 VU <strong>99.9%</strong></div>
                            <div style="color: #22c55e; margin-top: 0.25rem;">O(n√óm) ‚Üí O(n) Ïó∞Í≤∞</div>
                        </div>
                    </div>
                </div>

                <!-- Event Bus Architecture (moved up) -->
                <div class="domain-architecture" style="margin: 1rem 0;">
                    <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">üèóÔ∏è Event Bus ÏïÑÌÇ§ÌÖçÏ≤ò</h4>
                    <div style="margin-bottom: 1rem;">
                        <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">4-Stage Celery Pipeline (scan.direct Exchange)</div>
                        <div class="domain-flow">
                            <span class="domain-flow-item">Scan API</span>
                            <span class="domain-flow-arrow">‚Üí</span>
                            <span class="domain-flow-item">scan.vision</span>
                            <span class="domain-flow-arrow">‚Üí</span>
                            <span class="domain-flow-item">scan.rule</span>
                            <span class="domain-flow-arrow">‚Üí</span>
                            <span class="domain-flow-item">scan.answer</span>
                            <span class="domain-flow-arrow">‚Üí</span>
                            <span class="domain-flow-item">scan.reward</span>
                        </div>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <div style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">Event Bus: Redis Streams + Pub/Sub</div>
                        <div class="domain-flow">
                            <span class="domain-flow-item">Worker XADD</span>
                            <span class="domain-flow-arrow">‚Üí</span>
                            <span class="domain-flow-item">scan:events:{shard}</span>
                            <span class="domain-flow-arrow">‚Üí</span>
                            <span class="domain-flow-item">Event Router</span>
                            <span class="domain-flow-arrow">‚Üí</span>
                            <span class="domain-flow-item">Pub/Sub</span>
                            <span class="domain-flow-arrow">‚Üí</span>
                            <span class="domain-flow-item">SSE Gateway</span>
                        </div>
                    </div>
                </div>

                <!-- Performance Metrics Table -->
                <div style="background: var(--bg-card); border-radius: 8px; border: 1px solid var(--border-subtle); overflow: hidden;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 0.8rem;">
                        <tr style="background: rgba(139,92,246,0.1);">
                            <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">VU</th>
                            <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">ÏôÑÎ£åÏú®</th>
                            <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">Ï≤òÎ¶¨Îüâ</th>
                            <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">E2E p99</th>
                            <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">API p95</th>
                            <th style="padding: 0.5rem; text-align: center; border-bottom: 1px solid var(--border-subtle);">Snapshot</th>
                        </tr>
                        <tr>
                            <td style="padding: 0.4rem; text-align: center;">50</td>
                            <td style="padding: 0.4rem; text-align: center; color: #22c55e;"><strong>99.7%</strong></td>
                            <td style="padding: 0.4rem; text-align: center;">198 req/m</td>
                            <td style="padding: 0.4rem; text-align: center;">17.7s</td>
                            <td style="padding: 0.4rem; text-align: center;">93ms</td>
                            <td style="padding: 0.4rem; text-align: center;"><a href="https://snapshots.raintank.io/dashboard/snapshot/ZdMIItsw6ZRFhXKLO1M1BJDW14QkHC4o" target="_blank" style="color: var(--primary);">Grafana</a></td>
                        </tr>
                        <tr style="background: rgba(0,0,0,0.1);">
                            <td style="padding: 0.4rem; text-align: center;">200</td>
                            <td style="padding: 0.4rem; text-align: center; color: #22c55e;"><strong>99.8%</strong></td>
                            <td style="padding: 0.4rem; text-align: center;">370 req/m</td>
                            <td style="padding: 0.4rem; text-align: center;">33.2s</td>
                            <td style="padding: 0.4rem; text-align: center;">83ms</td>
                            <td style="padding: 0.4rem; text-align: center;"><a href="https://snapshots.raintank.io/dashboard/snapshot/Xbr36P3VSZhqvE8RHv2vlpgNm8lHcwSs" target="_blank" style="color: var(--primary);">Grafana</a></td>
                        </tr>
                        <tr>
                            <td style="padding: 0.4rem; text-align: center;">250</td>
                            <td style="padding: 0.4rem; text-align: center; color: #22c55e;"><strong>99.9%</strong></td>
                            <td style="padding: 0.4rem; text-align: center;">418 req/m</td>
                            <td style="padding: 0.4rem; text-align: center;">40.5s</td>
                            <td style="padding: 0.4rem; text-align: center;">78ms</td>
                            <td style="padding: 0.4rem; text-align: center;"><a href="https://snapshots.raintank.io/dashboard/snapshot/g3Qa0xMImwNmNuzQTXGW6C6I5VBopY5J" target="_blank" style="color: var(--primary);">Grafana</a></td>
                        </tr>
                        <tr style="background: rgba(34,197,94,0.15);">
                            <td style="padding: 0.4rem; text-align: center; font-weight: 600;">300</td>
                            <td style="padding: 0.4rem; text-align: center; color: #22c55e;"><strong>99.9%</strong></td>
                            <td style="padding: 0.4rem; text-align: center;">402 req/m</td>
                            <td style="padding: 0.4rem; text-align: center;">48.5s</td>
                            <td style="padding: 0.4rem; text-align: center;">83ms</td>
                            <td style="padding: 0.4rem; text-align: center;"><a href="https://snapshots.raintank.io/dashboard/snapshot/9LbgErvCS0N94vDc9NwO15kVAk7eLzLM" target="_blank" style="color: #22c55e; font-weight: 600;">‚≠ê SLA</a></td>
                        </tr>
                        <tr>
                            <td style="padding: 0.4rem; text-align: center;">400</td>
                            <td style="padding: 0.4rem; text-align: center; color: #f59e0b;"><strong>98.9%</strong></td>
                            <td style="padding: 0.4rem; text-align: center;">422 req/m</td>
                            <td style="padding: 0.4rem; text-align: center;">62.2s</td>
                            <td style="padding: 0.4rem; text-align: center;">207ms</td>
                            <td style="padding: 0.4rem; text-align: center; color: #f59e0b;">‚ö†Ô∏è ÌïúÍ≥Ñ Í∑ºÏ†ë</td>
                        </tr>
                        <tr style="background: rgba(239,68,68,0.1);">
                            <td style="padding: 0.4rem; text-align: center; font-weight: 600;">500</td>
                            <td style="padding: 0.4rem; text-align: center; color: #ef4444;"><strong>94.0%</strong></td>
                            <td style="padding: 0.4rem; text-align: center;">438 req/m</td>
                            <td style="padding: 0.4rem; text-align: center;">76.4s</td>
                            <td style="padding: 0.4rem; text-align: center;">154ms</td>
                            <td style="padding: 0.4rem; text-align: center; color: #ef4444;">‚ùå Îã®Ïùº ÎÖ∏Îìú ÌïúÍ≥Ñ</td>
                        </tr>
                    </table>
                </div>
            </div>

            <!-- Deep Dive Section -->
            <div style="margin-bottom: 1.5rem;">
                <div style="font-size: 0.9rem; font-weight: 600; color: var(--primary); margin-bottom: 0.75rem;">
                    <span class="lang-ko">üìö ÏÉÅÏÑ∏ Î¨∏ÏÑú</span>
                    <span class="lang-en">üìö Deep Dive</span>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 0.75rem;">
                    <div style="padding: 0.75rem; background: rgba(139,92,246,0.1); border-radius: 8px; border: 1px solid rgba(139,92,246,0.3); cursor: pointer;" onclick="openModal('modal-scan-pipeline')">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="font-size: 1rem;">‚öôÔ∏è</span>
                            <div>
                                <div style="color: #8b5cf6; font-weight: 600; font-size: 0.85rem;">Pipeline Details</div>
                                <div style="color: var(--text-secondary); font-size: 0.7rem;">Celery Chain, Retry</div>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 0.75rem; background: rgba(59,130,246,0.1); border-radius: 8px; border: 1px solid rgba(59,130,246,0.3); cursor: pointer;" onclick="openModal('modal-event-bus-layer')">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="font-size: 1rem;">üöå</span>
                            <div>
                                <div style="color: #3b82f6; font-weight: 600; font-size: 0.85rem;">Event Bus</div>
                                <div style="color: var(--text-secondary); font-size: 0.7rem;">Streams, Pub/Sub</div>
                            </div>
                        </div>
                    </div>
                    <div style="padding: 0.75rem; background: rgba(16,185,129,0.1); border-radius: 8px; border: 1px solid rgba(16,185,129,0.3); cursor: pointer;" onclick="openModal('modal-stream-metrics')">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="font-size: 1rem;">üìä</span>
                            <div>
                                <div style="color: #10b981; font-weight: 600; font-size: 0.85rem;">SSE Metrics</div>
                                <div style="color: var(--text-secondary); font-size: 0.7rem;">Load Test Results</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="domain-details">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">KEDA Ïò§ÌÜ†Ïä§ÏºÄÏùºÎßÅ</div>
                        <div class="domain-detail-value">Worker: RabbitMQ ÌÅê Í∏∏Ïù¥ (10-20msg, 2-4 pods) | SSE: Ïó∞Í≤∞ Ïàò (100/pod) | Router: Pending (100)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Vision API</div>
                        <div class="domain-detail-value">GPT-5.2, detail: high, Structured Output</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Cross-Domain Fanout</div>
                        <div class="domain-detail-value">reward.events Exchange (Fanout) ‚Üí character-worker + users-worker ÎèôÏãú Î∞úÌñâ</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Image Storage</div>
                        <div class="domain-detail-value">S3 Presigned URL ‚Üí CloudFront CDN, TTL 30Ïùº</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Domain - Location -->
    <div class="modal-overlay" id="modal-domain-location">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-domain-location')">√ó</button>
            <h3 class="modal-title">üìç Location Domain - Kakao Local API + PostGIS DB-First Merge</h3>
            <div class="domain-demo-section">
                <div class="domain-demo-title">
                    <span class="lang-ko">üìπ API ÎèôÏûë</span>
                    <span class="lang-en">üìπ API Action</span>
                </div>
                <div style="display: flex; justify-content: center;">
                    <iframe width="270" height="480" src="https://www.youtube.com/embed/r6d8NHB_I8Q" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen style="border-radius: 12px;"></iframe>
                </div>
            </div>

            <!-- Dual Interface -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                    <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">üåê HTTP REST (External)</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div>‚Ä¢ GET /locations/centers</div>
                        <div style="color: var(--text-muted); font-size: 0.75rem;">lat, lng, zoom ‚Üí radius/limit ÏûêÎèô Í≤∞Ï†ï</div>
                        <div style="margin-top: 0.3rem;">‚Ä¢ GET /locations/search</div>
                        <div style="color: var(--text-muted); font-size: 0.75rem;">Kakao ÌÇ§ÏõåÎìú + PostGIS Î∞òÍ≤Ω Î≥ëÌï©, 50m Ï§ëÎ≥µ Ï†úÍ±∞</div>
                        <div style="margin-top: 0.3rem;">‚Ä¢ GET /locations/suggest</div>
                        <div style="color: var(--text-muted); font-size: 0.75rem;">ÏûêÎèôÏôÑÏÑ± (Kakao accuracy Ï†ïÎ†¨, max 5)</div>
                        <div style="margin-top: 0.3rem;">‚Ä¢ GET /locations/centers/{id}</div>
                        <div style="color: var(--text-muted); font-size: 0.75rem;">ÏÉÅÏÑ∏ Ï°∞Ìöå + Kakao place_url Î≥¥Í∞ï</div>
                    </div>
                </div>
                <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                    <h5 style="color: #10b981; margin-bottom: 0.75rem;">‚ö° gRPC (Internal)</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div>‚Ä¢ SearchNearby(lat, lng, zoom)</div>
                        <div style="color: var(--text-muted); font-size: 0.75rem;">Chat Worker ‚Üí Location ÎÇ¥Î∂Ä Ìò∏Ï∂ú</div>
                    </div>
                    <h5 style="color: #10b981; margin-top: 1rem; margin-bottom: 0.75rem;">üó∫Ô∏è Kakao Local API</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div>‚Ä¢ KakaoLocalClientPort (Port/Adapter)</div>
                        <div style="color: var(--text-muted); font-size: 0.75rem;">httpx.AsyncClient + Lazy Init + asyncio.Lock</div>
                        <div style="color: var(--text-muted); font-size: 0.75rem;">ÏùºÏùº 30Îßå Í±¥, place_url Ï†úÍ≥µ</div>
                    </div>
                </div>
            </div>

            <!-- Zoom Policy -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Zoom Policy Service (Continuous 1-20)</h4>
                <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem;">
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #8b5cf6;">Zoom 1</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">50,000m</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">limit: 10</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #f59e0b;">Zoom 7</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">20,000m</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">limit: 30</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #10b981;">Zoom 12</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">3,000m</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">limit: 80</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #3b82f6;">Zoom 16</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">500m</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">limit: 150</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #ef4444;">Zoom 20</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">200m</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">limit: 200</div>
                    </div>
                </div>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-muted); text-align: center;">
                    ZOOM_RADIUS_TABLE + ZOOM_LIMIT_TABLE: Ï§å Î†àÎ≤®Î≥Ñ Î∞òÍ≤Ω/Í∞úÏàò Ïó∞ÏÜç Îß§Ìïë
                </div>
            </div>

            <!-- DB-First Merge Search Flow -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">DB-First Merge Search</h4>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle); font-size: 0.8rem; font-family: 'JetBrains Mono', monospace; color: var(--text-secondary); line-height: 1.7;">
                    <div style="color: #f59e0b;">// SearchByKeywordQuery (DB-First Merge)</div>
                    <div>1. Kakao ÌÇ§ÏõåÎìú Í≤ÄÏÉâ (accuracy Ï†ïÎ†¨) ‚Üí Ï§ëÏã¨ Ï¢åÌëú ÌöçÎìù</div>
                    <div>2. ÌöçÎìù Ï¢åÌëú Í∏∞Î∞ò Kakao Ïû¨Í≤ÄÏÉâ (<span style="color: #3b82f6;">distance</span> Ï†ïÎ†¨)</div>
                    <div>3. PostGIS earth_distance() Î∞òÍ≤Ω ÏøºÎ¶¨ ‚Üí DB Í≤∞Í≥º (Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ ÌíçÎ∂Ä)</div>
                    <div>4. <span style="color: #10b981;">50m Haversine</span> Ï¢åÌëú ÎπÑÍµêÎ°ú DB‚ÜîKakao Ï§ëÎ≥µ Ï†úÍ±∞</div>
                    <div>5. DB Ïö∞ÏÑ† Î≥ëÌï© + Kakao Î≥¥Ï∂© (<span style="color: #ef4444;">ÏùåÏàò ID</span> = Kakao only, source Íµ¨Î∂Ñ)</div>
                    <div>6. distance_km Í∏∞Ï§Ä ÏµúÏ¢Ö Ï†ïÎ†¨ ‚Üí ÏùëÎãµ</div>
                    <div style="color: var(--text-muted); margin-top: 0.5rem; font-size: 0.75rem;">// DB: ÏàòÍ±∞ÌíàÎ™©¬∑Ïö¥ÏòÅÏãúÍ∞Ñ¬∑ÏÜåÍ∞ú Îì± ÌíçÎ∂ÄÌïú Î©îÌÉÄÎç∞Ïù¥ÌÑ∞ Î≥¥Ïú† ‚Üí Ïö∞ÏÑ† ÎÖ∏Ï∂ú</div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-top: 0.75rem;">
                    <div style="background: rgba(139,92,246,0.1); padding: 0.6rem; border-radius: 6px; border: 1px solid rgba(139,92,246,0.3);">
                        <div style="font-size: 0.75rem; color: #8b5cf6; font-weight: 600;">Suggest (ÏûêÎèôÏôÑÏÑ±)</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">300ms debounce ‚Üí Kakao accuracy Ï†ïÎ†¨</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">max 5Í±¥, ÏÑúÎ≤ÑÏÇ¨Ïù¥Îìú (API Key Î≥¥Ìò∏)</div>
                    </div>
                    <div style="background: rgba(59,130,246,0.1); padding: 0.6rem; border-radius: 6px; border: 1px solid rgba(59,130,246,0.3);">
                        <div style="font-size: 0.75rem; color: #3b82f6; font-weight: 600;">Detail Î≥¥Í∞ï</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">DB Ï°∞Ìöå ÌõÑ Kakao place_url¬∑Ï†ÑÌôîÎ≤àÌò∏ Î≥ëÌï©</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">Kakao Ïã§Ìå® Ïãú DB Îã®ÎèÖ ÏùëÎãµ (Graceful Degradation)</div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 0.6rem; border-radius: 6px; border: 1px solid rgba(16,185,129,0.3);">
                        <div style="font-size: 0.75rem; color: #10b981; font-weight: 600;">Í∏∏Ï∞æÍ∏∞</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">Geolocation(maxAge:60s, timeout:3s)</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">from/ÌòÑÏúÑÏπò/to/Î™©Ï†ÅÏßÄ ‚Üí Í∂åÌïú Í±∞Î∂Ä Ïãú Î™©Ï†ÅÏßÄÎßå</div>
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="domain-details">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">PostGIS Query</div>
                        <div class="domain-detail-value">earth_distance() + ll_to_earth(), cube/earthdistance extension, Haversine fallback</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Kakao Ï§ëÎ≥µ Ï†úÍ±∞</div>
                        <div class="domain-detail-value">50m Haversine Í∏∞Î∞ò Ï¢åÌëú ÎπÑÍµê, DB Ïö∞ÏÑ† Î≥ëÌï©, ÏùåÏàò IDÎ°ú source Íµ¨Î∂Ñ</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">HTTP Client</div>
                        <div class="domain-detail-value">httpx.AsyncClient, Lazy Init + asyncio.Lock, Graceful Degradation</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">MapSearchBar</div>
                        <div class="domain-detail-value">300ms debounce ‚Üí suggest ÎìúÎ°≠Îã§Ïö¥, Enter/Î≤ÑÌäº ‚Üí full search Î∂ÑÍ∏∞</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">MapCard + DetailSheet</div>
                        <div class="domain-detail-value">sourceÎ≥Ñ ÏïÑÏù¥ÏΩò(keco/zerowaste/kakao), Ï≤´ ÌÅ¥Î¶≠: ÏÑ†ÌÉù ¬∑ Ïû¨ÌÅ¥Î¶≠: Î∞îÌÖÄÏãúÌä∏, ÏàòÍ±∞ÌíàÎ™©¬∑ÏïàÎÇ¥¬∑place_url</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">StoreCategoryFilter</div>
                        <div class="domain-detail-value">9Í∞ú store_category, ÏûÑÏãú ÏÉÅÌÉú ‚Üí "Í≤∞Í≥ºÎ≥¥Í∏∞" ÌÅ¥Î¶≠ Ïãú API Ïû¨Ìò∏Ï∂ú</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">PWA Viewport</div>
                        <div class="domain-detail-value">JS standalone Í∞êÏßÄ (CSS media query iOS Î∂àÏïàÏ†ï), 100dvh + env(safe-area-inset-*)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Chat Integration</div>
                        <div class="domain-detail-value">location_node HTTP Ìò∏Ï∂ú, Î∞òÍ≤Ω 5km (radius=5000), limit=5</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Domain - Users -->
    <div class="modal-overlay" id="modal-domain-users">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-domain-users')">√ó</button>
            <h3 class="modal-title">üë§ Users Domain - Profile + Character Ownership</h3>
            <div class="domain-demo-section">
                <div class="domain-demo-title">
                    <span class="lang-ko">üìπ API ÎèôÏûë</span>
                    <span class="lang-en">üìπ API Action</span>
                </div>
                <a href="https://frontend.dev.growbin.app" target="_blank" rel="noopener" class="domain-gif-link">
                    <div class="domain-gif-container">
                        <img src="assets/gifs/users-api.gif" alt="Users API Demo">
                    </div>
                </a>
            </div>

            <!-- Dual Interface -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                    <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">üåê HTTP REST (External)</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div>‚Ä¢ GET /me - ÌîÑÎ°úÌïÑ Ï°∞Ìöå</div>
                        <div>‚Ä¢ PATCH /me - ÌîÑÎ°úÌïÑ ÏàòÏ†ï</div>
                        <div>‚Ä¢ DELETE /me - Í≥ÑÏ†ï ÏÇ≠Ï†ú</div>
                        <div>‚Ä¢ GET /me/characters - ÏÜåÏú† Ï∫êÎ¶≠ÌÑ∞</div>
                        <div>‚Ä¢ GET /me/characters/{name}/ownership</div>
                    </div>
                </div>
                <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                    <h5 style="color: #10b981; margin-bottom: 0.75rem;">‚ö° gRPC (for Auth)</h5>
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <div>‚Ä¢ GetOrCreateFromOAuth() - OAuth Î°úÍ∑∏Ïù∏</div>
                        <div>‚Ä¢ GetUser() - ÏÇ¨Ïö©Ïûê Ï°∞Ìöå</div>
                        <div>‚Ä¢ UpdateLoginTime() - Î°úÍ∑∏Ïù∏ ÏãúÍ∞Å Í∞±Ïã†</div>
                    </div>
                </div>
            </div>

            <!-- Character Reward Flow (Scan-based) -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Character Reward Flow (Ïä§Ï∫î Í∏∞Î∞ò ÏûêÎèô Îß§Ïπ≠)</h4>
                <div class="domain-flow">
                    <span class="domain-flow-item">Ïä§Ï∫î ÏôÑÎ£å</span>
                    <span class="domain-flow-arrow">‚Üí</span>
                    <span class="domain-flow-item">Î∂ÑÎ•ò Í≤∞Í≥º (middle_category)</span>
                    <span class="domain-flow-arrow">‚Üí</span>
                    <span class="domain-flow-item">Ï∫êÎ¶≠ÌÑ∞ Îß§Ïπ≠</span>
                    <span class="domain-flow-arrow">‚Üí</span>
                    <span class="domain-flow-item">ÏÜåÏú†Í∂å ÌôïÏù∏</span>
                    <span class="domain-flow-arrow">‚Üí</span>
                    <span class="domain-flow-item">UserCharacter Ï†ÄÏû•</span>
                </div>
                <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(168,85,247,0.1); border-radius: 8px; border: 1px solid rgba(168,85,247,0.3);">
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <strong style="color: #a855f7;">Îß§Ïπ≠ Î°úÏßÅ:</strong> Î∂ÑÎ•ò Í≤∞Í≥ºÏùò Ï§ëÎ∂ÑÎ•ò(middle_category)Î°ú Ï∫êÎ¶≠ÌÑ∞ ÏûêÎèô Îß§Ïπ≠<br>
                        Ïòà: "ÌîåÎùºÏä§Ìã±" ‚Üí ÌîåÎùºÏä§Ìã± Ï∫êÎ¶≠ÌÑ∞, "Ï¢ÖÏù¥Î•ò" ‚Üí Ï¢ÖÏù¥ Ï∫êÎ¶≠ÌÑ∞
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="domain-details">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">gRPC Auth Integration</div>
                        <div class="domain-detail-value">OAuth Î°úÍ∑∏Ïù∏ Ïãú GetOrCreateFromOAuth() Ìò∏Ï∂ú, UpdateLoginTime() Í∞±Ïã†</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Character Ownership</div>
                        <div class="domain-detail-value">user_characters Îã§ÎåÄÎã§ ÌÖåÏù¥Î∏î, acquired_at + status (owned/burned/traded)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Reward Trigger</div>
                        <div class="domain-detail-value">Scan ÏôÑÎ£å ‚Üí Character ÎèÑÎ©îÏù∏ EvaluateRewardCommand Ìò∏Ï∂ú</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Default Character</div>
                        <div class="domain-detail-value">Ï≤´ Î°úÍ∑∏Ïù∏ Ïãú Í∏∞Î≥∏ Ï∫êÎ¶≠ÌÑ∞ ÏûêÎèô Î∂ÄÏó¨</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Domain - Image -->
    <div class="modal-overlay" id="modal-domain-image">
        <div class="modal-content" style="max-width: 900px;">
            <button class="modal-close" onclick="closeModal('modal-domain-image')">√ó</button>
            <h3 class="modal-title">üñºÔ∏è Images Domain - S3 Presigned URL + CDN</h3>
            <div class="domain-demo-section">
                <div class="domain-demo-title">
                    <span class="lang-ko">üìπ API ÎèôÏûë</span>
                    <span class="lang-en">üìπ API Action</span>
                </div>
                <a href="https://frontend.dev.growbin.app" target="_blank" rel="noopener" class="domain-gif-link">
                    <div class="domain-gif-container">
                        <img src="assets/gifs/images-api.gif" alt="Image API Demo">
                    </div>
                </a>
            </div>

            <!-- Upload Flow Diagram -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Presigned URL Upload Flow</h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    S3 Presigned URL Upload Flow                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                           ‚îÇ
‚îÇ  Client              Images API            S3              CloudFront     ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ 1. Request URL       ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ 2. Presigned URL     ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ    + CDN URL         ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ 3. Direct Upload (PUT)                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ    (15Î∂Ñ ÎßåÎ£å)        ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ 4. Upload OK         ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ 5. Access via CDN    ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ         ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ 6. Cached Image      ‚îÇ                ‚îÇ                    ‚îÇ         ‚îÇ
‚îÇ    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îÇ
‚îÇ                                                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Image Channels -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Image Channels (ImageChannel enum)</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                    <div style="background: rgba(245,158,11,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(245,158,11,0.3);">
                        <div style="font-weight: 600; color: #f59e0b; margin-bottom: 0.5rem;">üì∑ scan</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>scan/{uuid}.{ext}</div>
                            <div style="color: var(--text-muted);">Î∂ÑÎ•ò Ïä§Ï∫î Ïù¥ÎØ∏ÏßÄ</div>
                        </div>
                    </div>
                    <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                        <div style="font-weight: 600; color: #3b82f6; margin-bottom: 0.5rem;">üí¨ chat</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>chat/{uuid}.{ext}</div>
                            <div style="color: var(--text-muted);">Ï±ÑÌåÖ Ï≤®Î∂Ä Ïù¥ÎØ∏ÏßÄ</div>
                        </div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <div style="font-weight: 600; color: #10b981; margin-bottom: 0.5rem;">üë§ my</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>my/{uuid}.{ext}</div>
                            <div style="color: var(--text-muted);">ÌîÑÎ°úÌïÑ/Í∞úÏù∏ Ïù¥ÎØ∏ÏßÄ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="domain-details">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Presigned URL</div>
                        <div class="domain-detail-value">PUT only, 15Î∂Ñ ÎßåÎ£å (presign_expires_seconds=900)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">CloudFront CDN</div>
                        <div class="domain-detail-value">images.dev.growbin.app, OAI (Origin Access Identity)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">S3 Path</div>
                        <div class="domain-detail-value">{channel}/{uuid}.{ext}, channel: scan | chat | my</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Security</div>
                        <div class="domain-detail-value">IRSA + Bucket Policy (CloudFront OAI only), S3 Direct PUT</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Domain - Info -->
    <div class="modal-overlay" id="modal-domain-info">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-domain-info')">√ó</button>
            <h3 class="modal-title">üì∞ Info Domain - CQRS + Cache Aside Pattern</h3>
            <div class="domain-demo-section">
                <div class="domain-demo-title">
                    <span class="lang-ko">üìπ API ÎèôÏûë</span>
                    <span class="lang-en">üìπ API Action</span>
                </div>
                <a href="https://frontend.dev.growbin.app" target="_blank" rel="noopener" class="domain-gif-link">
                    <div class="domain-gif-container">
                        <img src="assets/gifs/info-api.gif" alt="Info API Demo">
                    </div>
                </a>
            </div>

            <!-- Full Architecture Diagram -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">CQRS + Cache Aside Architecture</h4>
                <div class="modal-diagram" style="font-size: 0.65rem; line-height: 1.3;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           Info Domain - CQRS + Cache Aside                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                       ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó   ‚îÇ
‚îÇ  ‚ïë                        WRITE PATH (info_worker Pod)                            ‚ïë   ‚îÇ
‚îÇ  ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£   ‚îÇ
‚îÇ  ‚ïë                                                                                ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇBeat Sidecar ‚îÇ    ‚îÇ              Celery Worker (gevent -c 100)          ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇ             ‚îÇ    ‚îÇ                                                     ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇ ‚Ä¢ 5min Naver‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  CollectNewsCommand                                 ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇ ‚Ä¢ 30min News‚îÇ    ‚îÇ    ‚îÇ                                                ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇ   Data.io   ‚îÇ    ‚îÇ    ‚ñº                                                ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇ             ‚îÇ    ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇ             ‚îÇ    ‚îÇ  ‚îÇ Naver API   ‚îÇ   ‚îÇNewsData.io  ‚îÇ  API Calls       ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ  ‚îÇ (3x, 1.10s) ‚îÇ   ‚îÇ(3x, 0.69s)  ‚îÇ  (1.79s)         ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  emptyDir:          ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë  /tmp/celerybeat    ‚îÇ                  ‚ñº                                  ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ         ‚îÇ  OG Extraction  ‚îÇ  httpx.Client           ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ         ‚îÇ  95/110 = 86.4% ‚îÇ  (14.53s) ‚ö†Ô∏è bottleneck ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ                  ‚ñº                                  ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îÇ  PostgreSQL UPSERT (0.20s)                  ‚îÇ    ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îÇ  psycopg2 + ThreadedConnectionPool(min=2,max=10)‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ                       ‚ñº                             ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îÇ  Redis Write-Through (0.04s)                ‚îÇ    ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îÇ  TTL: 3600s (news_cache_ttl, Î™®Îì† Ï∫êÏãú ÎèôÏùº) ‚îÇ    ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                                                                                ‚ïë   ‚îÇ
‚îÇ  ‚ïë  Total: 110 articles fetched ‚Üí 110 cached ‚Üí 16.95s/task                       ‚ïë   ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚îÇ
‚îÇ                                                                                       ‚îÇ
‚îÇ  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó   ‚îÇ
‚îÇ  ‚ïë                        READ PATH (info API - Cache Aside)                      ‚ïë   ‚îÇ
‚îÇ  ‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£   ‚îÇ
‚îÇ  ‚ïë                                                                                ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇ  Client  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Info API   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ    Redis    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ HIT ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ Response  ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îÇ (React)  ‚îÇ     ‚îÇ  (FastAPI)  ‚îÇ     ‚îÇ  (Primary)  ‚îÇ     source: "redis"     ‚ïë   ‚îÇ
‚îÇ  ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ             ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚ïë   ‚îÇ
‚îÇ  ‚ïë                   ‚îÇ  redis.aio  ‚îÇ            ‚îÇ MISS                           ‚ïë   ‚îÇ
‚îÇ  ‚ïë                   ‚îÇ  psycopg2   ‚îÇ            ‚ñº                                ‚ïë   ‚îÇ
‚îÇ  ‚ïë                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚ïë   ‚îÇ
‚îÇ  ‚ïë                                       ‚îÇ PostgreSQL  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ Fallback ‚îÄ‚îÄ‚ñ∂ Resp   ‚ïë   ‚îÇ
‚îÇ  ‚ïë                                       ‚îÇ (Emergency) ‚îÇ     source: "postgres"  ‚ïë   ‚îÇ
‚îÇ  ‚ïë                                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚ïë   ‚îÇ
‚îÇ  ‚ïë                                                                                ‚ïë   ‚îÇ
‚îÇ  ‚ïë  Zero-downtime: Redis Ïû•Ïï† ÏãúÏóêÎèÑ PostgreSQL FallbackÏúºÎ°ú ÏÑúÎπÑÏä§ Ïú†ÏßÄ           ‚ïë   ‚îÇ
‚îÇ  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù   ‚îÇ
‚îÇ                                                                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Performance Metrics -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.75rem; margin-bottom: 1.5rem;">
                <div style="background: linear-gradient(135deg, rgba(16,185,129,0.2), rgba(16,185,129,0.05)); padding: 0.75rem; border-radius: 8px; text-align: center; border: 1px solid rgba(16,185,129,0.3);">
                    <div style="font-size: 1.2rem; font-weight: 700; color: #10b981;">110</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary);">Articles/Task</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(59,130,246,0.05)); padding: 0.75rem; border-radius: 8px; text-align: center; border: 1px solid rgba(59,130,246,0.3);">
                    <div style="font-size: 1.2rem; font-weight: 700; color: #3b82f6;">86.4%</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary);">OG Success</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(168,85,247,0.2), rgba(168,85,247,0.05)); padding: 0.75rem; border-radius: 8px; text-align: center; border: 1px solid rgba(168,85,247,0.3);">
                    <div style="font-size: 1.2rem; font-weight: 700; color: #a855f7;">16.95s</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary);">Task Duration</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(239,68,68,0.2), rgba(239,68,68,0.05)); padding: 0.75rem; border-radius: 8px; text-align: center; border: 1px solid rgba(239,68,68,0.3);">
                    <div style="font-size: 1.2rem; font-weight: 700; color: #ef4444;">14.53s</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary);">OG Bottleneck</div>
                </div>
            </div>

            <!-- Tech Stack -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Tech Stack Decisions</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div style="background: rgba(239,68,68,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(239,68,68,0.3);">
                        <h5 style="color: #ef4444; margin-bottom: 0.75rem;">‚úèÔ∏è Worker (Sync)</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>‚Ä¢ <strong>psycopg2</strong> - ThreadedConnectionPool</div>
                            <div>‚Ä¢ <strong>redis-py</strong> - Îã®Ïàú Ïó∞ÏÇ∞, ÎπÑÎèôÍ∏∞ Î∂àÌïÑÏöî</div>
                            <div>‚Ä¢ <strong>httpx.Client</strong> - OG Ï∂îÏ∂ú connection pool</div>
                            <div>‚Ä¢ <strong>Beat Sidecar</strong> - Ïä§ÏºÄÏ§ÑÎßÅ Î∂ÑÎ¶¨</div>
                        </div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <h5 style="color: #10b981; margin-bottom: 0.75rem;">üìñ API (Async)</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>‚Ä¢ <strong>redis.asyncio</strong> - ÎπÑÎèôÍ∏∞ Ï∫êÏãú Ï°∞Ìöå</div>
                            <div>‚Ä¢ <strong>Cache-Aside</strong> - Redis miss ‚Üí PostgreSQL fallback</div>
                            <div>‚Ä¢ <strong>source Î©îÌÉÄÎç∞Ïù¥ÌÑ∞</strong> - "redis"/"postgres"</div>
                            <div>‚Ä¢ <strong>useInfiniteQuery</strong> - Î¨¥ÌïúÏä§ÌÅ¨Î°§</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RabbitMQ + Categories -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üê∞ RabbitMQ Queue (Topology CR)</h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); font-family: monospace;">
                        <div>Queue: info.collect_news</div>
                        <div>Type: classic</div>
                        <div>TTL: 10min</div>
                        <div>DLX: dlx ‚Üí dlq.info.collect_news</div>
                    </div>
                </div>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                    <h5 style="color: var(--primary); margin-bottom: 0.75rem;">üìÇ News Categories</h5>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; font-size: 0.75rem;">
                        <div style="text-align: center;">üåç environment</div>
                        <div style="text-align: center;">‚ö° energy</div>
                        <div style="text-align: center;">ü§ñ ai</div>
                    </div>
                </div>
            </div>

            <!-- Blog Reference -->
            <div style="padding: 0.75rem 1rem; background: rgba(99,102,241,0.1); border-radius: 8px; border-left: 3px solid #6366f1;">
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    üìä ÏÉÅÏÑ∏ Íµ¨ÌòÑ: <a href="https://rooftopsnow.tistory.com/208" target="_blank" rel="noopener" style="color: #6366f1;">Info ÏÑúÎπÑÏä§ CQRS + Cache Aside Ìå®ÌÑ¥</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Infrastructure - ext-authz -->
    <div class="modal-overlay" id="modal-infra-extauthz">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-infra-extauthz')">√ó</button>
            <h3 class="modal-title">üõ°Ô∏è ext-authz (External Authorization)</h3>

            <!-- Performance Highlight -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: linear-gradient(135deg, rgba(16,185,129,0.2), rgba(16,185,129,0.05)); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(16,185,129,0.3);">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #10b981;">87%</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">P50 ÏßÄÏó∞ÏãúÍ∞Ñ Í∞êÏÜå</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(59,130,246,0.2), rgba(59,130,246,0.05)); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(59,130,246,0.3);">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #3b82f6;">72%</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">P99 ÏßÄÏó∞ÏãúÍ∞Ñ Í∞êÏÜå</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(168,85,247,0.2), rgba(168,85,247,0.05)); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(168,85,247,0.3);">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #a855f7;">28x</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">RPS Ï≤òÎ¶¨Îüâ Ìñ•ÏÉÅ</div>
                </div>
                <div style="background: linear-gradient(135deg, rgba(245,158,11,0.2), rgba(245,158,11,0.05)); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid rgba(245,158,11,0.3);">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #f59e0b;">>99%</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary);">Cache Hit Rate</div>
                </div>
            </div>

            <!-- Why Global Choke Point -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--accent-teal); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">üîÄ Global Choke Point ‚Äî Ïôú ext-authzÍ∞Ä Î≥ëÎ™©Ïù∏Í∞Ä?</span>
                    <span class="lang-en">üîÄ Global Choke Point ‚Äî Why ext-authz is the bottleneck?</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     ext-authz Global Choke Point                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                               ‚îÇ
‚îÇ   [Client]                                                                    ‚îÇ
‚îÇ      ‚îÇ                                                                        ‚îÇ
‚îÇ      ‚îÇ 1. HTTPS Request (Cookie: s_access=JWT)                               ‚îÇ
‚îÇ      ‚ñº                                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ                     Istio Ingress Gateway                            ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  EnvoyFilter: Cookie ‚Üí Header Î≥ÄÌôò                             ‚îÇ  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  Authorization: Bearer {JWT}                                   ‚îÇ  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                ‚îÇ                                              ‚îÇ
‚îÇ                                ‚îÇ 2. gRPC Check (every request)               ‚îÇ
‚îÇ                                ‚ñº                                              ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ                    ext-authz (Go gRPC Server)                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ JWT Parse   ‚îÇ‚Üí ‚îÇ JTI Extract ‚îÇ‚Üí ‚îÇ Blacklist Check (Local/Redis)‚îÇ  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ (HS256)     ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇ IsBlacklisted(jti) ‚Üí O(1)   ‚îÇ  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                ‚îÇ                                              ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                            ‚îÇ
‚îÇ              ‚îÇ                                   ‚îÇ                            ‚îÇ
‚îÇ              ‚ñº                                   ‚ñº                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ   ‚îÇ  3a. OK (200)    ‚îÇ                ‚îÇ  3b. DENY (401)  ‚îÇ                   ‚îÇ
‚îÇ   ‚îÇ  + x-user-id     ‚îÇ                ‚îÇ  Unauthorized    ‚îÇ                   ‚îÇ
‚îÇ   ‚îÇ  + x-auth-provider‚îÇ               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                        ‚îÇ
‚îÇ            ‚îÇ                                                                  ‚îÇ
‚îÇ            ‚îÇ 4. Forward to Backend (with injected headers)                   ‚îÇ
‚îÇ            ‚ñº                                                                  ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  Backend Services (scan-api, chat-api, character-api, ...)          ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ JWT ÌååÏã± Î∂àÌïÑÏöî ‚Äî Ìó§ÎçîÏóêÏÑú user_id Ï∂îÏ∂úÎßå                         ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ÎèÑÎ©îÏù∏ ÎèÖÎ¶ΩÏÑ± ÌôïÎ≥¥ ‚Äî Ïù∏Ï¶ù Î°úÏßÅ Î∂ÑÎ¶¨                               ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îÇ   ‚ö†Ô∏è Î™®Îì† Ïù∏Ï¶ù ÏöîÏ≤≠Ïù¥ ext-authz ÌÜµÍ≥º ÌïÑÏàò ‚Üí ÏãúÏä§ÌÖú Ï≤òÎ¶¨Îüâ = ext-authz Ïö©Îüâ   ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
                <div style="margin-top: 0.75rem; padding: 0.75rem; background: rgba(245,158,11,0.1); border-radius: 8px; border-left: 3px solid #f59e0b;">
                    <div style="font-size: 0.85rem; color: var(--text-secondary);">
                        <strong style="color: #f59e0b;">‚ö†Ô∏è Global Choke Point:</strong>
                        Î™®Îì† Ïù∏Ï¶ù Ìä∏ÎûòÌîΩÏù¥ ext-authzÎ•º Í≤ΩÏú†ÌïòÎØÄÎ°ú, ÏãúÏä§ÌÖú Ï†ÑÏ≤¥ Ï≤òÎ¶¨ÎüâÏù¥ ext-authz ÏÑ±Îä•Ïóê Ï¢ÖÏÜçÎê©ÎãàÎã§.
                        Ïù¥Î•º Ìï¥Í≤∞ÌïòÍ∏∞ ÏúÑÌï¥ <strong>Local Cache + Fanout Broadcast</strong> Ìå®ÌÑ¥ÏúºÎ°ú Redis ÏùòÏ°¥ÏÑ±ÏùÑ Ï†úÍ±∞ÌñàÏäµÎãàÎã§.
                    </div>
                </div>
            </div>

            <!-- Architecture Evolution -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">üìà ÏïÑÌÇ§ÌÖçÏ≤ò ÏßÑÌôî Í≥ºÏ†ï</span>
                    <span class="lang-en">üìà Architecture Evolution</span>
                </h4>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; margin-bottom: 1rem;">
                    <div style="background: rgba(107,114,128,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(107,114,128,0.3);">
                        <div style="font-weight: 600; color: #6b7280; margin-bottom: 0.5rem; font-size: 0.85rem;">üíÄ Phase 0: Shared Module</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">
                            <div>Í∞Å ÎèÑÎ©îÏù∏ JWT ÌååÏã±</div>
                            <div>ÎèÖÎ¶Ω Î∞∞Ìè¨ <strong>Î∂àÍ∞Ä</strong></div>
                            <div style="color: #6b7280; margin-top: 0.25rem;">Î∂ÑÏÇ∞ Î™®ÎÜÄÎ¶¨Ïä§</div>
                        </div>
                    </div>
                    <div style="background: rgba(239,68,68,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(239,68,68,0.3);">
                        <div style="font-weight: 600; color: #ef4444; margin-bottom: 0.5rem; font-size: 0.85rem;">‚ùå Phase 1: Redis Every Req</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">
                            <div>P50: 57ms, P99: 80ms</div>
                            <div>RPS: <strong>~42</strong></div>
                            <div style="color: #ef4444; margin-top: 0.25rem;">Redis Î≥ëÎ™©</div>
                        </div>
                    </div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(245,158,11,0.3);">
                        <div style="font-weight: 600; color: #f59e0b; margin-bottom: 0.5rem; font-size: 0.85rem;">‚ö†Ô∏è Phase 2: Pool + HPA</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">
                            <div>Pool 20‚Üí100, HPA 2-5</div>
                            <div>RPS: <strong>~1,200</strong> (28√ó)</div>
                            <div style="color: #f59e0b; margin-top: 0.25rem;">P99 Redis 250-350ms</div>
                        </div>
                    </div>
                    <div style="background: rgba(34,197,94,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(34,197,94,0.3);">
                        <div style="font-weight: 600; color: #22c55e; margin-bottom: 0.5rem; font-size: 0.85rem;">‚úÖ Phase 3: Local Cache</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">
                            <div>sync.Map + MQ Fanout</div>
                            <div>RPS: <strong>~1,500</strong>, Lookup <strong>2.3¬µs</strong></div>
                            <div style="color: #22c55e; margin-top: 0.25rem;">Redis Ìò∏Ï∂ú 0 (870√ó)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Local Cache Broadcast Architecture -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Local Cache Broadcast Pattern</h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     ext-authz Local Cache Broadcast                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ   ‚îÇ   Pod A     ‚îÇ     ‚îÇ   Pod B     ‚îÇ     ‚îÇ   Pod C     ‚îÇ                   ‚îÇ
‚îÇ   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ     ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ     ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ                   ‚îÇ
‚îÇ   ‚îÇ ‚îÇsync.Map ‚îÇ ‚îÇ     ‚îÇ ‚îÇsync.Map ‚îÇ ‚îÇ     ‚îÇ ‚îÇsync.Map ‚îÇ ‚îÇ  ~100ns lookup    ‚îÇ
‚îÇ   ‚îÇ ‚îÇ(Local)  ‚îÇ ‚îÇ     ‚îÇ ‚îÇ(Local)  ‚îÇ ‚îÇ     ‚îÇ ‚îÇ(Local)  ‚îÇ ‚îÇ                   ‚îÇ
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ     ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ     ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ          ‚îÇ                   ‚îÇ                   ‚îÇ                          ‚îÇ
‚îÇ          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îÇ
‚îÇ                              ‚îÇ                                              ‚îÇ
‚îÇ                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                       ‚îÇ
‚îÇ                       ‚îÇ  RabbitMQ   ‚îÇ  Fanout Exchange                      ‚îÇ
‚îÇ                       ‚îÇ (blacklist  ‚îÇ  (blacklist.events)                   ‚îÇ
‚îÇ                       ‚îÇ  .events)   ‚îÇ                                       ‚îÇ
‚îÇ                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                       ‚îÇ
‚îÇ                              ‚îÇ                                              ‚îÇ
‚îÇ                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                       ‚îÇ
‚îÇ                       ‚îÇ Auth Relay  ‚îÇ  Redis Fallback Outbox ‚Üí Fanout Broadcast      ‚îÇ
‚îÇ                       ‚îÇ  (Fallback Outbox)   ‚îÇ                                       ‚îÇ
‚îÇ                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                       ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îÇ  Flow: User Logout ‚Üí Auth Relay (Fallback Outbox) ‚Üí RabbitMQ Fanout ‚Üí All Pods      ‚îÇ
‚îÇ        ‚Üí sync.Map Update ‚Üí Next Request: ~100ns (No Redis!)                 ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Performance Comparison -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Performance Evolution</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div style="background: rgba(239,68,68,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(239,68,68,0.3);">
                        <h5 style="color: #ef4444; margin-bottom: 0.75rem;">Before (v1) - Every Request ‚Üí Redis</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div>‚Ä¢ P50 Latency: <strong>57ms</strong></div>
                            <div>‚Ä¢ P99 Latency: <strong>80ms</strong></div>
                            <div>‚Ä¢ Max RPS: <strong>~1,200</strong></div>
                            <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">Î™®Îì† ÏöîÏ≤≠Ïù¥ Redis Ï°∞Ìöå ÌïÑÏöî</div>
                        </div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <h5 style="color: #10b981; margin-bottom: 0.75rem;">After (v2) - Local Cache First</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div>‚Ä¢ P50 Latency: <strong>7.5ms</strong></div>
                            <div>‚Ä¢ P99 Latency: <strong>30ms</strong></div>
                            <div>‚Ä¢ Max RPS: <strong>~1,500</strong></div>
                            <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-muted);">Cache Hit Ïãú Redis Ï°∞Ìöå Î∂àÌïÑÏöî</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="domain-details">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Go Implementation</div>
                        <div class="domain-detail-value">Envoy ext_authz gRPC, sync.Map (lock-free), goroutine consumer</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">JWT Validation</div>
                        <div class="domain-detail-value">HS256 ÏÑúÎ™Ö Í≤ÄÏ¶ù ‚Üí JTI Blacklist Ï≤¥ÌÅ¨ (Local ‚Üí Redis fallback)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Istio Integration</div>
                        <div class="domain-detail-value">AuthorizationPolicy CUSTOM provider, EnvoyFilter ext-authz-grpc</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Fanout Broadcast</div>
                        <div class="domain-detail-value">RabbitMQ Fanout Exchange, Í∞Å Pod Í≥†Ïú† ÌÅê ÏûêÎèô ÏÉùÏÑ±</div>
                    </div>
                </div>
            </div>

            <!-- Blog Reference -->
            <div style="margin-top: 1.5rem; padding: 0.75rem 1rem; background: rgba(99,102,241,0.1); border-radius: 8px; border-left: 3px solid #6366f1;">
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    üìö <a href="https://rooftopsnow.tistory.com/22" target="_blank" rel="noopener" style="color: #6366f1;">Auth Offloading ÏÑ§Í≥Ñ</a> |
                    <a href="https://rooftopsnow.tistory.com/24" target="_blank" rel="noopener" style="color: #6366f1;">ÏÑ±Îä• ÏµúÏ†ÅÌôî</a> |
                    <a href="https://rooftopsnow.tistory.com/113" target="_blank" rel="noopener" style="color: #6366f1;">Local Cache Broadcast</a> |
                    <a href="https://rooftopsnow.tistory.com/114" target="_blank" rel="noopener" style="color: #6366f1;">Î∂ÄÌïò ÌÖåÏä§Ìä∏ Í≤∞Í≥º</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Infrastructure - SSE Gateway -->
    <div class="modal-overlay" id="modal-infra-sse">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-infra-sse')">√ó</button>
            <h3 class="modal-title">üì° SSE Gateway - Token v2 Recoverable Streaming</h3>

            <!-- Token v2 Recovery Diagram -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Token v2 Recoverable Streaming (XRANGE catch-up)</h4>
                <div class="modal-diagram" style="font-size: 0.68rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Token v2 Recoverable Streaming                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                               ‚îÇ
‚îÇ  Client              SSE Gateway           Redis Streams     Chat Worker      ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ  1. SSE Connect      ‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ  2. XREAD BLOCK      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                      ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ XADD      ‚îÇ
‚îÇ    ‚îÇ  id:1001 "Hello"     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                      ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ XADD      ‚îÇ
‚îÇ    ‚îÇ  id:1002 "World"     ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ  [Connection Lost]   ‚îÇ                      ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ XADD      ‚îÇ
‚îÇ    ‚îÇ         X            ‚îÇ                      ‚îÇ  id:1003 "!"   ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                      ‚îÇ  (stored)      ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ  3. Reconnect        ‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ  Last-Event-ID:1002  ‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ  4. XRANGE 1002 +    ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ  5. Missed: id:1003  ‚îÇ  (catch-up)          ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ                      ‚îÇ                      ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ  Continue streaming  ‚îÇ  XREAD BLOCK         ‚îÇ                ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                ‚îÇ           ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Event Types -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">SSE Event Types</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-size: 0.9rem;">üìù token</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">LLM ÌÜ†ÌÅ∞ Ïä§Ìä∏Î¶¨Î∞ç</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-size: 0.9rem;">üîÑ token_recovery</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">Ïû¨Ïó∞Í≤∞ Ïãú ÌÜ†ÌÅ∞ Î≥µÍµ¨</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-size: 0.9rem;">üéØ stage</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">19Í∞ú ÌååÏù¥ÌîÑÎùºÏù∏ Ïä§ÌÖåÏù¥ÏßÄ</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-size: 0.9rem;">üíì keepalive</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">15Ï¥à Ïó∞Í≤∞ Ïú†ÏßÄ</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-size: 0.9rem;">üñêÔ∏è needs_input</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">HITL ÏÇ¨Ïö©Ïûê ÏûÖÎ†• ÎåÄÍ∏∞</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 6px; text-align: center; border: 1px solid var(--border-subtle);">
                        <div style="font-size: 0.9rem;">‚ùå error</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">ÏóêÎü¨ Î∞úÏÉù</div>
                    </div>
                </div>
                <div style="margin-top: 0.75rem; font-size: 0.75rem; color: var(--text-muted);">
                    <strong>Stages:</strong> queued ‚Üí intent ‚Üí vision ‚Üí waste_rag ‚Üí character ‚Üí location ‚Üí kakao_place ‚Üí bulk_waste ‚Üí weather ‚Üí recyclable_price ‚Üí collection_point ‚Üí web_search ‚Üí image_generation ‚Üí general ‚Üí aggregator ‚Üí feedback ‚Üí answer ‚Üí done ‚Üí needs_input
                </div>
            </div>

            <!-- Multi-Agent SSE Stage Timeline -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Multi-Agent SSE Timeline (seq ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§ Î∂ÑÎ¶¨)</h4>
                <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle); font-size: 0.72rem; font-family: 'JetBrains Mono', monospace; color: var(--text-secondary); line-height: 1.65;">
                    <div style="color: #f59e0b;">// Stage seq: 0~180 (18 stages √ó 10) | Token seq: 1000+ (Î≥ÑÎèÑ ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§)</div>
                    <div style="color: #f59e0b;">// server_id: POD_NAME ‚Üí Consumer Group ÎÇ¥ consumer ÏãùÎ≥Ñ (event-router-0, -1, ...)</div>
                    <div style="margin-top: 0.5rem;"><span style="color: var(--text-muted);">T1</span>  seq:<span style="color: #8b5cf6;">0</span>    stage: <span style="color: #10b981;">queued</span>          ‚Üí Ï†ëÏàò ÌôïÏù∏</div>
                    <div><span style="color: var(--text-muted);">T2</span>  seq:<span style="color: #8b5cf6;">10</span>   stage: <span style="color: #10b981;">intent</span>          ‚Üí 9Î∂ÑÎ•ò Intent Î∂ÑÏÑù</div>
                    <div><span style="color: var(--text-muted);">T3</span>  seq:<span style="color: #8b5cf6;">20</span>   stage: <span style="color: #10b981;">vision</span>          ‚Üí GPT Vision Î∂ÑÎ•ò (Ïù¥ÎØ∏ÏßÄ ÏûàÏùÑ Îïå)</div>
                    <div style="color: #f59e0b; margin-top: 0.4rem;">// ‚îÄ‚îÄ‚îÄ Send API Î≥ëÎ†¨ Fanout (intentÎ≥Ñ ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏ ÎèôÏãú Ïã§Ìñâ) ‚îÄ‚îÄ‚îÄ</div>
                    <div><span style="color: var(--text-muted);">T4a</span> seq:<span style="color: #8b5cf6;">30</span>   stage: <span style="color: #10b981;">waste_rag</span>       ‚Üí ÌèêÍ∏∞Î¨º RAG Í≤ÄÏÉâ</div>
                    <div><span style="color: var(--text-muted);">T4b</span> seq:<span style="color: #8b5cf6;">40</span>   stage: <span style="color: #10b981;">character</span>       ‚Üí Ï∫êÎ¶≠ÌÑ∞ ÎèÑÎ©îÏù∏ Ï£ºÏûÖ</div>
                    <div><span style="color: var(--text-muted);">T4c</span> seq:<span style="color: #8b5cf6;">50</span>   stage: <span style="color: #10b981;">location</span>        ‚Üí ÏúÑÏπò gRPC Ï°∞Ìöå</div>
                    <div><span style="color: var(--text-muted);">T4d</span> seq:<span style="color: #8b5cf6;">60</span>   stage: <span style="color: #10b981;">kakao_place</span>     ‚Üí Kakao Ïû•ÏÜå Í≤ÄÏÉâ</div>
                    <div><span style="color: var(--text-muted);">T4e</span> seq:<span style="color: #8b5cf6;">70</span>   stage: <span style="color: #10b981;">bulk_waste</span>      ‚Üí ÎåÄÌòïÌèêÍ∏∞Î¨º MOIS</div>
                    <div><span style="color: var(--text-muted);">T4f</span> seq:<span style="color: #8b5cf6;">80</span>   stage: <span style="color: #10b981;">weather</span>         ‚Üí ÎÇ†Ïî® Ï°∞Ìöå</div>
                    <div><span style="color: var(--text-muted);">T4g</span> seq:<span style="color: #8b5cf6;">90</span>   stage: <span style="color: #10b981;">recyclable_price</span> ‚Üí KECO ÏãúÏÑ∏</div>
                    <div><span style="color: var(--text-muted);">T4h</span> seq:<span style="color: #8b5cf6;">100</span>  stage: <span style="color: #10b981;">collection_point</span> ‚Üí ÏàòÍ±∞Ìï® Í≤ÄÏÉâ</div>
                    <div><span style="color: var(--text-muted);">T4i</span> seq:<span style="color: #8b5cf6;">110</span>  stage: <span style="color: #10b981;">web_search</span>      ‚Üí ÎÑ§Ïù¥Ìã∞Î∏å Ïõπ Í≤ÄÏÉâ</div>
                    <div><span style="color: var(--text-muted);">T4j</span> seq:<span style="color: #8b5cf6;">120</span>  stage: <span style="color: #10b981;">image_generation</span> ‚Üí Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±</div>
                    <div><span style="color: var(--text-muted);">T4k</span> seq:<span style="color: #8b5cf6;">130</span>  stage: <span style="color: #10b981;">general</span>         ‚Üí ÏùºÎ∞ò Fallback</div>
                    <div style="color: #f59e0b; margin-top: 0.4rem;">// ‚îÄ‚îÄ‚îÄ Aggregation ‚Üí Answer ‚îÄ‚îÄ‚îÄ</div>
                    <div><span style="color: var(--text-muted);">T5</span>  seq:<span style="color: #8b5cf6;">140</span>  stage: <span style="color: #10b981;">aggregator</span>      ‚Üí ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏ Í≤∞Í≥º Î≥ëÌï©</div>
                    <div><span style="color: var(--text-muted);">T6</span>  seq:<span style="color: #8b5cf6;">150</span>  stage: <span style="color: #10b981;">feedback</span>        ‚Üí RAG ÌíàÏßà ÌèâÍ∞Ä</div>
                    <div><span style="color: var(--text-muted);">T7</span>  seq:<span style="color: #3b82f6;">1000+</span> type:  <span style="color: #3b82f6;">token</span>          ‚Üí LLM ÌÜ†ÌÅ∞ Ïä§Ìä∏Î¶¨Î∞ç (NÍ∞ú, answer_node)</div>
                    <div><span style="color: var(--text-muted);">T8</span>  seq:<span style="color: #8b5cf6;">160</span>  stage: <span style="color: #10b981;">answer</span>         ‚Üí ÎãµÎ≥Ä ÏôÑÎ£å</div>
                    <div><span style="color: var(--text-muted);">T9</span>  seq:<span style="color: #8b5cf6;">170</span>  stage: <span style="color: #10b981;">done</span>           ‚Üí ÌååÏù¥ÌîÑÎùºÏù∏ Ï¢ÖÎ£å</div>
                    <div style="color: var(--text-muted); margin-top: 0.5rem; font-size: 0.68rem;">// stream_id = Redis Stream Entry ID ‚Üí SSE id: ÌïÑÎìú ‚Üí Last-Event-ID Î≥µÍµ¨ Í∏∞Ï§Ä</div>
                    <div style="color: var(--text-muted); font-size: 0.68rem;">// T4a~T4k: Send API ÎèôÏ†Å ÏÉùÏÑ±, intentÏóê Îî∞Îùº ÏÑ†ÌÉùÏ†Å Î≥ëÎ†¨ Ïã§Ìñâ</div>
                </div>
            </div>

            <!-- ID Relationships -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">ID Í¥ÄÍ≥Ñ Ï†ïÏùò</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                    <div style="background: rgba(139,92,246,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(139,92,246,0.3);">
                        <div style="font-weight: 600; color: #8b5cf6; font-size: 0.85rem;">chat_id</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.3rem;">Ï±ÑÌåÖ ÏÑ∏ÏÖò UUID</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">ÏÑ∏ÏÖò Ïú†ÏßÄ ÎèôÏïà Î∂àÎ≥Ä</div>
                    </div>
                    <div style="background: rgba(59,130,246,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                        <div style="font-weight: 600; color: #3b82f6; font-size: 0.85rem;">job_id</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.3rem;">Î©îÏãúÏßÄÎ≥Ñ ÏûëÏóÖ UUID</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">Shard key + Pub/Sub Ï±ÑÎÑê + State key</div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <div style="font-weight: 600; color: #10b981; font-size: 0.85rem;">stream_id</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.3rem;">Redis Stream Entry ID</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">SSE id: ÌïÑÎìú ‚Üí Last-Event-ID Î≥µÍµ¨ Í∏∞Ï§Ä</div>
                    </div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.75rem; border-radius: 8px; border: 1px solid rgba(245,158,11,0.3);">
                        <div style="font-weight: 600; color: #f59e0b; font-size: 0.85rem;">server_id (POD_NAME)</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.3rem;">Consumer Group consumer Ïù¥Î¶Ñ</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">event-router-0, -1, ... PodÎ≥Ñ Ìï†Îãπ</div>
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="domain-details">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Dual Publishing</div>
                        <div class="domain-detail-value">Worker: XADD (Streams) + PUBLISH (Pub/Sub) ÎèôÏãú Î∞úÌñâ</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Recovery Flow</div>
                        <div class="domain-detail-value">Last-Event-ID Ìó§Îçî ‚Üí XRANGE catch-up ‚Üí XREAD BLOCK Ïû¨Í∞ú</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Nginx Config</div>
                        <div class="domain-detail-value">X-Accel-Buffering: no, proxy_buffering off, chunked transfer</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Scaling</div>
                        <div class="domain-detail-value">Stateless HPA, Pub/Sub Í∏∞Î∞ò Î™®Îì† Ïù∏Ïä§ÌÑ¥Ïä§ ÎèôÍ∏∞Ìôî</div>
                    </div>
                </div>
            </div>

            <!-- Blog Reference -->
            <div style="margin-top: 1.5rem; padding: 0.75rem 1rem; background: rgba(99,102,241,0.1); border-radius: 8px; border-left: 3px solid #6366f1;">
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    üìä Íµ¨ÌòÑ ÏÉÅÏÑ∏: <a href="https://rooftopsnow.tistory.com/23" target="_blank" rel="noopener" style="color: #6366f1;">SSE Gateway ÏïÑÌÇ§ÌÖçÏ≤ò</a> |
                    <a href="https://rooftopsnow.tistory.com/113" target="_blank" rel="noopener" style="color: #6366f1;">Token v2 Recoverable Streaming</a> |
                    <a href="https://rooftopsnow.tistory.com/237" target="_blank" rel="noopener" style="color: #6366f1;">Event Router/SSE-Gateway Î¨¥Í≤∞ÏÑ±</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Infrastructure - Event Router -->
    <div class="modal-overlay" id="modal-infra-eventrouter">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-infra-eventrouter')">√ó</button>
            <h3 class="modal-title">üîÄ Event Router - Redis Streams Consumer Group</h3>

            <!-- Architecture Diagram -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Event Flow Architecture</h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.35;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         Event Router Architecture                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                        Event Producers                                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Auth  ‚îÇ   ‚îÇ  Chat  ‚îÇ   ‚îÇ  Scan  ‚îÇ   ‚îÇ  Info  ‚îÇ   ‚îÇ Users  ‚îÇ        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ Events ‚îÇ   ‚îÇ Events ‚îÇ   ‚îÇ Events ‚îÇ   ‚îÇ Events ‚îÇ   ‚îÇ Events ‚îÇ        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ         ‚îÇ            ‚îÇ           ‚îÇ            ‚îÇ            ‚îÇ                 ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îÇ                                  ‚îÇ                                           ‚îÇ
‚îÇ                           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                    ‚îÇ
‚îÇ                           ‚îÇ   XADD      ‚îÇ  events:{domain}                   ‚îÇ
‚îÇ                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                    ‚îÇ
‚îÇ                                  ‚îÇ                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                      Redis Streams                                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  events:auth  ‚îÇ  events:chat  ‚îÇ  events:scan  ‚îÇ  events:info    ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                  ‚îÇ                                           ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                            ‚îÇ
‚îÇ                    ‚îÇ  Consumer Group            ‚îÇ                            ‚îÇ
‚îÇ                    ‚îÇ  (event-router-group)      ‚îÇ                            ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                            ‚îÇ
‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ           ‚ñº                      ‚ñº                      ‚ñº                   ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ    ‚îÇ consumer-1  ‚îÇ        ‚îÇ consumer-2  ‚îÇ        ‚îÇ consumer-3  ‚îÇ           ‚îÇ
‚îÇ    ‚îÇ   (Pod A)   ‚îÇ        ‚îÇ   (Pod B)   ‚îÇ        ‚îÇ   (Pod C)   ‚îÇ           ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ           ‚îÇ                      ‚îÇ                      ‚îÇ                   ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                  ‚îÇ                                           ‚îÇ
‚îÇ                           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                    ‚îÇ
‚îÇ                           ‚îÇ State KV    ‚îÇ  state:{entity}:{id}               ‚îÇ
‚îÇ                           ‚îÇ (Redis Hash)‚îÇ                                    ‚îÇ
‚îÇ                           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                    ‚îÇ
‚îÇ                                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- Event Types Grid -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Domain Event Types</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #8b5cf6; margin-bottom: 0.5rem;">üîê auth</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">blacklist:add, blacklist:remove</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #10b981; margin-bottom: 0.5rem;">üí¨ chat</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">status_changed, job_completed, job_failed</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #f59e0b; margin-bottom: 0.5rem;">üì∑ scan</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">queued, vision, rule, answer, reward, done</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #ec4899; margin-bottom: 0.5rem;">üë§ users</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">default_character_grant</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #14b8a6; margin-bottom: 0.5rem;">üêæ character</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">full_refresh, upsert, delete</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; color: #3b82f6; margin-bottom: 0.5rem;">üì∞ info</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">cache_set, cache_refresh</div>
                    </div>
                </div>
            </div>

            <!-- Consumer Group Features -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">Consumer Group ÌäπÏßï</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                    <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <div style="font-weight: 600; color: #10b981; margin-bottom: 0.5rem;">Success-Only XACK</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">ÏÑ±Í≥µ ÏãúÏóêÎßå XACK, Ïã§Ìå® Ïãú PEL Ïú†ÏßÄ ‚Üí Reclaimer Ïû¨Ï≤òÎ¶¨</div>
                    </div>
                    <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                        <div style="font-weight: 600; color: #3b82f6; margin-bottom: 0.5rem;">Lua Script ÏõêÏûêÏÑ±</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">State: ÏµúÏã† seqÎßå Ïú†ÏßÄ, router:published:{job_id}:{seq} Î©±Îì±ÏÑ± ÌÇ§</div>
                    </div>
                    <div style="background: rgba(168,85,247,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(168,85,247,0.3);">
                        <div style="font-weight: 600; color: #a855f7; margin-bottom: 0.5rem;">Reclaimer (XAUTOCLAIM)</div>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">Ïã§Ìå® Î©îÏãúÏßÄ Ï£ºÍ∏∞Ï†Å Ïû¨Ìï†Îãπ, Î©ÄÌã∞ ÎèÑÎ©îÏù∏ asyncio.gather Î≥ëÎ†¨ Ï≤òÎ¶¨</div>
                    </div>
                </div>
            </div>

            <!-- Technical Details -->
            <div class="domain-details">
                <div class="domain-detail-grid">
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">XREADGROUP</div>
                        <div class="domain-detail-value">BLOCK 5000ms, COUNT 10, Îã§Ï§ë Ïä§Ìä∏Î¶º ÎèôÏãú ÏÜåÎπÑ</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">State KV</div>
                        <div class="domain-detail-value">Redis Hash, state:{entity}:{id}, HINCRBY Ïπ¥Ïö¥ÌÑ∞, HSET ÏÉÅÌÉú</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">ACK Ï†ïÏ±Ö</div>
                        <div class="domain-detail-value">process_event ÏÑ±Í≥µ ÏãúÏóêÎßå XACK, Ïã§Ìå® Ïãú continue (PEL ÏûîÎ•ò ‚Üí Reclaimer ÎåÄÏÉÅ)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Reclaimer</div>
                        <div class="domain-detail-value">XAUTOCLAIM idle 60s, stream_id/stream_name Ï£ºÏûÖ, Î©ÄÌã∞ ÎèÑÎ©îÏù∏ Î≥ëÎ†¨ (asyncio.gather)</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Î©±Îì±ÏÑ±</div>
                        <div class="domain-detail-value">Lua Script: router:published:{job_id}:{seq} ÌÇ§ Ï°¥Ïû¨ Ïãú skip, Pub/Sub Ï§ëÎ≥µ Î∞úÌñâ Î∞©ÏßÄ</div>
                    </div>
                    <div class="domain-detail-item">
                        <div class="domain-detail-label">Monitoring</div>
                        <div class="domain-detail-value">XPENDING lag Ï∂îÏ†Å, domain+shard ÎùºÎ≤® Î∂ÑÎ¶¨, consumerÎ≥Ñ Î©îÌä∏Î¶≠</div>
                    </div>
                </div>
            </div>

            <!-- Blog Reference -->
            <div style="margin-top: 1.5rem; padding: 0.75rem 1rem; background: rgba(99,102,241,0.1); border-radius: 8px; border-left: 3px solid #6366f1;">
                <div style="font-size: 0.85rem; color: var(--text-secondary);">
                    üìä Íµ¨ÌòÑ ÏÉÅÏÑ∏: <a href="https://rooftopsnow.tistory.com/237" target="_blank" rel="noopener" style="color: #6366f1;">Event Router/SSE-Gateway Î¨¥Í≤∞ÏÑ± Í∞úÏÑ†</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Platform Architecture -->
    <div class="modal-overlay" id="modal-platform">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-platform')">√ó</button>
            <h3 class="modal-title">üèóÔ∏è 24-Nodes Platform Architecture</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Eco¬≤ Platform Architecture (24 Nodes + AWS)                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ AWS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ                               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                               ‚îÇ   Client    ‚îÇ                            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                               ‚îÇ  (PWA/Web)  ‚îÇ                            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ         ‚ñº                            ‚ñº                        ‚ñº          ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  CloudFront  ‚îÇ         ‚îÇ    Route 53      ‚îÇ       ‚îÇ     S3       ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  images.*.app‚îÇ         ‚îÇ  *.dev.growbin.app‚îÇ       ‚îÇ  (Images)    ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ                          ‚îÇ                                     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ                 ‚îÇ   AWS ALB        ‚îÇ  (ACM *.growbin.app)      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ                 ‚îÇ  SSL Termination ‚îÇ                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ            ‚îÇ                          ‚îÇ                                         ‚îÇ
‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê     ‚îÇ
‚îÇ                     KUBERNETES CLUSTER (25 NODES)                               ‚îÇ
‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê     ‚îÇ
‚îÇ            ‚îÇ                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                               ‚îÇ
‚îÇ            ‚îÇ                 ‚îÇ  Istio Ingress   ‚îÇ                               ‚îÇ
‚îÇ            ‚îÇ                 ‚îÇ   Gateway        ‚îÇ                               ‚îÇ
‚îÇ            ‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                               ‚îÇ
‚îÇ            ‚îÇ                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                               ‚îÇ
‚îÇ            ‚îÇ                 ‚îÇ   ext-authz (Go) ‚îÇ  JWT + Redis Blacklist        ‚îÇ
‚îÇ            ‚îÇ                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                               ‚îÇ
‚îÇ            ‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ            ‚îÇ    ‚ñº                    ‚ñº                     ‚ñº                   ‚îÇ
‚îÇ            ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ            ‚îÇ ‚îÇ auth ‚îÇ‚îÇ scan ‚îÇ‚îÇ chat ‚îÇ‚îÇ char ‚îÇ‚îÇ loc  ‚îÇ‚îÇusers ‚îÇ‚îÇimages‚îÇ         ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÇ API  ‚îÇ‚îÇ API  ‚îÇ‚îÇ API  ‚îÇ‚îÇ API  ‚îÇ‚îÇ API  ‚îÇ‚îÇ API  ‚îÇ‚îÇ API  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   ‚îÇ
‚îÇ                 ‚îÇ       ‚îÇ       ‚îÇ       ‚îÇ       ‚îÇ       ‚îÇ           (S3 URL)  ‚îÇ
‚îÇ                 ‚îÇ       ‚ñº       ‚ñº       ‚îÇ       ‚îÇ       ‚îÇ                     ‚îÇ
‚îÇ                 ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ
‚îÇ                 ‚îÇ  ‚îÇ  Workers (8Ï¢Ö)                      ‚îÇ                    ‚îÇ
‚îÇ                 ‚îÇ  ‚îÇ  scan_worker ‚îÇ chat_worker (AI)     ‚îÇ                    ‚îÇ
‚îÇ                 ‚îÇ  ‚îÇ  auth_worker ‚îÇ auth_relay (Fallback Outbox)  ‚îÇ‚óÑ‚îÄ‚îÄgRPC‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ                 ‚îÇ  ‚îÇ  character_worker ‚îÇ char_match_worker‚îÇ                   ‚îÇ
‚îÇ                 ‚îÇ  ‚îÇ  users_worker ‚îÇ celery_beat (DLQ)   ‚îÇ                    ‚îÇ
‚îÇ                 ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îÇ
‚îÇ                 ‚ñº           ‚ñº                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ SSE Gateway (Pub/Sub‚ÜíSSE) ‚îÇ Event Router (Streams‚ÜíPub/Sub) ‚îÇ KEDA    ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ RabbitMQ (Quorum) ‚îÇ Redis Streams ‚îÇ Redis Pub/Sub ‚îÇ gRPC (mTLS)      ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ  ‚îÇ PostgreSQL (Bitnami) ‚îÇ Redis Cache ‚îÇ Redis Auth ‚îÇ Redis State KV     ‚îÇ     ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Layer</th><th>Component</th><th>Nodes</th><th>Purpose</th></tr>
                <tr><td><strong>AWS External</strong></td><td>Route53, ALB, CloudFront, S3, ACM</td><td>-</td><td>DNS, L7 LB, CDN, Storage, SSL</td></tr>
                <tr><td><strong>Edge</strong></td><td>Istio Ingress, ext-authz</td><td>k8s-ingress</td><td>Ìä∏ÎûòÌîΩ ÎùºÏö∞ÌåÖ, JWT Ïù∏Ï¶ù</td></tr>
                <tr><td><strong>Service</strong></td><td>7 APIs + 2 Gateways</td><td>k8s-api-*</td><td>ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ</td></tr>
                <tr><td><strong>Integration</strong></td><td>RabbitMQ, Redis, gRPC</td><td>k8s-worker-*</td><td>ÎπÑÎèôÍ∏∞/Ïù¥Î≤§Ìä∏/ÎèôÍ∏∞ ÌÜµÏã†</td></tr>
                <tr><td><strong>Persistence</strong></td><td>PostgreSQL, Redis (4Ï¢Ö)</td><td>k8s-data</td><td>Îç∞Ïù¥ÌÑ∞ ÏòÅÏÜçÌôî</td></tr>
                <tr><td><strong>Platform</strong></td><td>ArgoCD, KEDA, Observability</td><td>k8s-platform</td><td>Ïò§ÏºÄÏä§Ìä∏Î†àÏù¥ÏÖò</td></tr>
            </table>
            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR / Release</span>
                    <span class="lang-en">Related PRs / Releases</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v0.7.4" target="_blank" rel="noopener">v0.7.4</a>
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.0" target="_blank" rel="noopener">v1.0.0</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/318" target="_blank" rel="noopener">#318 NetworkPolicy</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/252" target="_blank" rel="noopener">#252 Users Node</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/244" target="_blank" rel="noopener">#244 Canary Infra</a>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üñ•Ô∏è 24-Node Cluster Topology</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <strong>Master:</strong> 1 node (control-plane)<br>
                    <strong>API Nodes:</strong> 8 nodes (auth, users, scan, chat, character, location, image, info)<br>
                    <strong>Worker Nodes:</strong> 4 nodes (storage√ó2, ai√ó2) ‚Äî 8Ï¢Ö ÏõåÏª§ Î∞∞Ìè¨<br>
                    <strong>Data Nodes:</strong> 5 nodes (PostgreSQL, Redis√ó4)<br>
                    <strong>Platform Nodes:</strong> 6 nodes (RabbitMQ, Monitoring, Logging, Ingress, SSE, Event Router)
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Node Specifications -->
    <div class="modal-overlay" id="modal-node-specs">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-node-specs')">√ó</button>
            <h3 class="modal-title">üìä 24-Node Cluster Specifications</h3>
            <div style="overflow-x: auto;">
                <table class="modal-table" style="font-size: 0.8rem;">
                    <tr><th>Category</th><th>Node Name</th><th>Instance</th><th>vCPU</th><th>RAM</th><th>Storage</th><th>Purpose</th></tr>
                    <tr style="background: rgba(255,215,0,0.1);"><td rowspan="1"><strong>Control Plane</strong></td><td>k8s-master</td><td>t3.xlarge</td><td>4</td><td>16GB</td><td>80GB</td><td>API Server, etcd, Scheduler, Controller</td></tr>
                    <tr style="background: rgba(0,255,136,0.05);"><td rowspan="8"><strong>API Nodes</strong></td><td>k8s-api-auth</td><td>t3.small</td><td>2</td><td>2GB</td><td>20GB</td><td>JWT Ïù∏Ï¶ù/Ïù∏Í∞Ä, OAuth</td></tr>
                    <tr style="background: rgba(0,255,136,0.05);"><td>k8s-api-users</td><td>t3.small</td><td>2</td><td>2GB</td><td>20GB</td><td>ÏÇ¨Ïö©Ïûê/ÎßàÏù¥ÌéòÏù¥ÏßÄ</td></tr>
                    <tr style="background: rgba(0,255,136,0.05);"><td>k8s-api-scan</td><td>t3.medium</td><td>2</td><td>4GB</td><td>30GB</td><td>ÌèêÍ∏∞Î¨º Ïä§Ï∫î (AI)</td></tr>
                    <tr style="background: rgba(0,255,136,0.05);"><td>k8s-api-chat</td><td>t3.medium</td><td>2</td><td>4GB</td><td>30GB</td><td>Ï±óÎ¥á (LangGraph Agent üîÑ)</td></tr>
                    <tr style="background: rgba(0,255,136,0.05);"><td>k8s-api-character</td><td>t3.small</td><td>2</td><td>2GB</td><td>20GB</td><td>Ï∫êÎ¶≠ÌÑ∞ Ïπ¥ÌÉàÎ°úÍ∑∏</td></tr>
                    <tr style="background: rgba(0,255,136,0.05);"><td>k8s-api-location</td><td>t3.small</td><td>2</td><td>2GB</td><td>20GB</td><td>ÏúÑÏπò/ÏàòÍ±∞Ìï® (PostGIS)</td></tr>
                    <tr style="background: rgba(0,255,136,0.05);"><td>k8s-api-image</td><td>t3.small</td><td>2</td><td>2GB</td><td>20GB</td><td>Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú (S3)</td></tr>
                    <tr style="background: rgba(0,255,136,0.05);"><td>k8s-api-info</td><td>t3.small</td><td>2</td><td>2GB</td><td>20GB</td><td>Îâ¥Ïä§ ÌîºÎìú (CQRS + Cache Aside)</td></tr>
                    <tr style="background: rgba(255,165,0,0.1);"><td rowspan="4"><strong>Worker Nodes</strong></td><td>k8s-worker-storage</td><td>t3.medium</td><td>2</td><td>4GB</td><td>40GB</td><td>auth/users/character/info Worker</td></tr>
                    <tr style="background: rgba(255,165,0,0.1);"><td>k8s-worker-storage-2</td><td>t3.medium</td><td>2</td><td>4GB</td><td>40GB</td><td>Storage Worker HA</td></tr>
                    <tr style="background: rgba(255,165,0,0.1);"><td>k8s-worker-ai</td><td>t3.medium</td><td>2</td><td>4GB</td><td>40GB</td><td>scan/chat Worker (GPT)</td></tr>
                    <tr style="background: rgba(255,165,0,0.1);"><td>k8s-worker-ai-2</td><td>t3.medium</td><td>2</td><td>4GB</td><td>40GB</td><td>AI Worker HA</td></tr>
                    <tr style="background: rgba(138,43,226,0.1);"><td rowspan="5"><strong>Data Nodes</strong></td><td>k8s-postgresql</td><td>t3.large</td><td>2</td><td>8GB</td><td>80GB</td><td>PostgreSQL (7 DBs)</td></tr>
                    <tr style="background: rgba(138,43,226,0.1);"><td>k8s-redis-auth</td><td>t3.medium</td><td>2</td><td>4GB</td><td>20GB</td><td>Blacklist, OAuth State</td></tr>
                    <tr style="background: rgba(138,43,226,0.1);"><td>k8s-redis-streams</td><td>t3.small</td><td>2</td><td>2GB</td><td>10GB</td><td>SSE Events (4 shards)</td></tr>
                    <tr style="background: rgba(138,43,226,0.1);"><td>k8s-redis-cache</td><td>t3.small</td><td>2</td><td>2GB</td><td>10GB</td><td>Celery Result, LRU</td></tr>
                    <tr style="background: rgba(138,43,226,0.1);"><td>k8s-redis-pubsub</td><td>t3.small</td><td>2</td><td>2GB</td><td>10GB</td><td>Realtime Broadcast</td></tr>
                    <tr style="background: rgba(0,191,255,0.1);"><td rowspan="6"><strong>Platform Nodes</strong></td><td>k8s-rabbitmq</td><td>t3.medium</td><td>2</td><td>4GB</td><td>40GB</td><td>AMQP Message Broker</td></tr>
                    <tr style="background: rgba(0,191,255,0.1);"><td>k8s-monitoring</td><td>t3.large</td><td>2</td><td>8GB</td><td>60GB</td><td>Prometheus, Grafana</td></tr>
                    <tr style="background: rgba(0,191,255,0.1);"><td>k8s-logging</td><td>t3.xlarge</td><td>4</td><td>16GB</td><td>100GB</td><td>EFK Stack (ES 8GB Heap)</td></tr>
                    <tr style="background: rgba(0,191,255,0.1);"><td>k8s-ingress-gateway</td><td>t3.medium</td><td>2</td><td>4GB</td><td>20GB</td><td>Istio Ingress, ext-authz</td></tr>
                    <tr style="background: rgba(0,191,255,0.1);"><td>k8s-sse-gateway</td><td>t3.small</td><td>2</td><td>2GB</td><td>20GB</td><td>SSE Gateway (Long-lived)</td></tr>
                    <tr style="background: rgba(0,191,255,0.1);"><td>k8s-event-router</td><td>t3.small</td><td>2</td><td>2GB</td><td>20GB</td><td>Streams ‚Üí Pub/Sub Fan-out</td></tr>
                </table>
            </div>
            <div style="margin-top: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 200px; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px;">
                    <strong style="color: var(--primary);">üí∞ Total Resources</strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        vCPU: <strong>54 cores</strong><br>
                        RAM: <strong>114 GB</strong><br>
                        Storage: <strong>880 GB</strong>
                    </div>
                </div>
                <div style="flex: 1; min-width: 200px; padding: 1rem; background: rgba(255,165,0,0.1); border-radius: 8px;">
                    <strong style="color: #ffa500;">‚ö° Instance Types</strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        t3.xlarge √ó 2 (16GB)<br>
                        t3.large √ó 2 (8GB)<br>
                        t3.medium √ó 9 (4GB)<br>
                        t3.small √ó 12 (2GB)
                    </div>
                </div>
                <div style="flex: 1; min-width: 200px; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px;">
                    <strong style="color: #8a2be2;">üèóÔ∏è IaC Management</strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        <code>terraform/main.tf</code><br>
                        <code>terraform/modules/ec2/</code><br>
                        Ubuntu 22.04 (Jammy)
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: 5-Layer Architecture + Labels/Taints -->
    <div class="modal-overlay" id="modal-5layer">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-5layer')">√ó</button>
            <h3 class="modal-title">üè∑Ô∏è 5-Layer Architecture + Labels/Taints Policy</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           5-Layer Architecture                                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   Layer 1        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   EDGE           ‚îÇ  Istio Ingress (v1.24.1) ‚Ä¢ ext-authz ‚Ä¢ Cert-Manager  ‚îÇ       ‚îÇ
‚îÇ   tier=network   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                             ‚îÇ                                   ‚îÇ
‚îÇ   Layer 2        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   SERVICE        ‚îÇ  auth ‚îÇ scan ‚îÇ chat ‚îÇ character ‚îÇ location ‚îÇ users   ‚îÇ       ‚îÇ
‚îÇ   tier=business  ‚îÇ  images ‚îÇ sse_gateway ‚îÇ + Workers (8Ï¢Ö)               ‚îÇ       ‚îÇ
‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                             ‚îÇ                                   ‚îÇ
‚îÇ   Layer 3        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   INTEGRATION    ‚îÇ  RabbitMQ ‚Ä¢ gRPC ‚Ä¢ Redis Streams/Pub/Sub ‚Ä¢ Event Router‚îÇ     ‚îÇ
‚îÇ   tier=integration‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                             ‚îÇ                                   ‚îÇ
‚îÇ   Layer 4        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   PERSISTENCE    ‚îÇ  PostgreSQL (Bitnami) ‚Ä¢ Redis Cache/Auth (Spotahome) ‚îÇ       ‚îÇ
‚îÇ   tier=data      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                             ‚îÇ                                   ‚îÇ
‚îÇ   Layer 5        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   PLATFORM       ‚îÇ  K8s ‚Ä¢ ArgoCD ‚Ä¢ Prometheus ‚Ä¢ KEDA ‚Ä¢ Jaeger ‚Ä¢ Kiali   ‚îÇ       ‚îÇ
‚îÇ   tier=platform  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Layer</th><th>tier Label</th><th>Íµ¨ÏÑ± ÏöîÏÜå</th></tr>
                <tr><td>1</td><td>network</td><td>Istio Gateway, ext-authz, Envoy, Cert-Manager</td></tr>
                <tr><td>2</td><td>business-logic</td><td>auth, scan, chat, character, location, users, images, sse-gw + 8 Workers</td></tr>
                <tr><td>3</td><td>integration</td><td>RabbitMQ, gRPC, Redis Streams/Pub/Sub, Event Router</td></tr>
                <tr><td>4</td><td>data</td><td>PostgreSQL, Redis (Cache, Auth, Streams, PubSub)</td></tr>
                <tr><td>5</td><td>platform</td><td>K8s, ArgoCD, Prometheus, KEDA, Jaeger, Kiali, ECK</td></tr>
            </table>
            
            <h4 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem;">üîñ Label Hierarchy (5-Key System)</h4>
            <div class="modal-diagram" style="font-size: 0.8rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Label Key       ‚îÇ  Values                                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  role            ‚îÇ  api | worker | infrastructure | control-plane | ingress-gw ‚îÇ
‚îÇ  domain          ‚îÇ  auth | scan | chat | worker-storage | worker-ai | data...  ‚îÇ
‚îÇ  tier            ‚îÇ  business-logic | worker | data | platform | network        ‚îÇ
‚îÇ  workload        ‚îÇ  api | worker-storage | worker-ai | database | cache...     ‚îÇ
‚îÇ  phase           ‚îÇ  1 | 2 | 3 | 4 | 5 | 6 (Î∞∞Ìè¨ ÏàúÏÑú)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            
            <h4 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem;">üö´ Taint Policy (NoSchedule)</h4>
            <table class="modal-table" style="font-size: 0.85rem;">
                <tr><th>Taint</th><th>Effect</th><th>Ïä§ÏºÄÏ§ÑÎêòÎäî Pod</th></tr>
                <tr><td>domain=auth:NoSchedule</td><td>auth ÎÖ∏Îìú Í≤©Î¶¨</td><td>auth-api, ext-authzÎßå Î∞∞Ïπò</td></tr>
                <tr><td>domain=scan:NoSchedule</td><td>scan ÎÖ∏Îìú Í≤©Î¶¨</td><td>scan-apiÎßå Î∞∞Ïπò</td></tr>
                <tr><td>domain=worker-storage:NoSchedule</td><td>Storage Worker Í≤©Î¶¨</td><td>auth/users/character/info Worker</td></tr>
                <tr><td>domain=worker-ai:NoSchedule</td><td>AI Worker Í≤©Î¶¨</td><td>scan-worker, chat-worker (GPT)</td></tr>
                <tr><td>domain=data:NoSchedule</td><td>Data ÎÖ∏Îìú Í≤©Î¶¨</td><td>PostgreSQL, Redis StatefulSet</td></tr>
                <tr><td>domain=observability:NoSchedule</td><td>Monitoring Í≤©Î¶¨</td><td>Prometheus, Grafana, EFK</td></tr>
            </table>
            
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üîß Terraform ÏûêÎèô ÏÑ§Ï†ï</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <code>terraform/main.tf</code>Ïùò <code>kubelet_profiles</code>ÏóêÏÑú ÎÖ∏ÎìúÎ≥Ñ Labels & TaintsÎ•º user-dataÎ°ú Ï£ºÏûÖ:<br>
                    <code style="display: block; margin-top: 0.5rem; padding: 0.5rem; background: rgba(0,0,0,0.3); border-radius: 4px;">--node-labels=role=api,domain=auth,tier=business-logic --register-with-taints=domain=auth:NoSchedule</code>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Sync-Wave -->
    <div class="modal-overlay" id="modal-syncwave">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-syncwave')">√ó</button>
            <h3 class="modal-title">üîÑ GitOps (ArgoCD + Sync-Wave)</h3>

            <!-- GitOps Pipeline Image (Top) -->
            <h4 style="color: var(--accent-teal); margin: 1rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÄ GitOps + CI/CD ÌååÏù¥ÌîÑÎùºÏù∏</span>
                <span class="lang-en">üîÄ GitOps + CI/CD Pipeline</span>
            </h4>
            <div style="text-align: center; margin: 1rem 0;">
                <img src="assets/images/gitops_pipeline.jpeg" alt="GitOps Pipeline" style="max-width: 100%; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
            </div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-top: 1rem;">
                <div style="background: rgba(138,43,226,0.1); padding: 1rem; border-radius: 8px;">
                    <strong style="color: var(--accent-purple);">üì¶ <span class="lang-ko">CD (ArgoCD)</span><span class="lang-en">CD (ArgoCD)</span></strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        <span class="lang-ko">‚Ä¢ Terraform ‚Üí ArgoCD root-app Î∞∞Ìè¨<br>‚Ä¢ Develop Î∏åÎûúÏπò Watch ‚Üí Sync-Wave ÏàúÏÑú Î∞∞Ìè¨<br>‚Ä¢ ÌïòÏúÑ ‚Üí ÏÉÅÏúÑ ÏùòÏ°¥ÏÑ± ÏàúÏúºÎ°ú ÏûêÎèô Î∞∞Ìè¨</span>
                        <span class="lang-en">‚Ä¢ Terraform ‚Üí ArgoCD root-app deploy<br>‚Ä¢ Develop branch Watch ‚Üí Sync-Wave order deploy<br>‚Ä¢ Auto-deploy in dependency order (low ‚Üí high)</span>
                    </div>
                </div>
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px;">
                    <strong style="color: #3b82f6;">üîß <span class="lang-ko">CI (GitHub Actions)</span><span class="lang-en">CI (GitHub Actions)</span></strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        <span class="lang-ko">‚Ä¢ FastAPI Lint Test ‚Üí Docker Build/Push<br>‚Ä¢ Kustomize Render Test + K3s Test<br>‚Ä¢ Operator + CR Manifest Î†åÎçîÎßÅ Í≤ÄÏ¶ù</span>
                        <span class="lang-en">‚Ä¢ FastAPI Lint Test ‚Üí Docker Build/Push<br>‚Ä¢ Kustomize Render Test + K3s Test<br>‚Ä¢ Operator + CR Manifest render validation</span>
                    </div>
                </div>
            </div>

            <!-- Sync-Wave Timeline -->
            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üìã Sync-Wave Timeline</span>
                <span class="lang-en">üìã Sync-Wave Timeline</span>
            </h4>
            <table class="modal-table">
                <tr><th>Wave</th><th>Category</th><th>Resources</th></tr>
                <tr><td>0</td><td>Foundation</td><td>CRDs</td></tr>
                <tr><td>4-6</td><td>Service Mesh</td><td>Istio, ArgoCD Image Updater</td></tr>
                <tr><td>7-8</td><td>Network/Cert</td><td>NetworkPolicy, Cert-Manager</td></tr>
                <tr><td>10-11</td><td>Secrets</td><td>External Secrets Operator ‚Üí CRs</td></tr>
                <tr><td>20-23</td><td>Monitoring</td><td>Prometheus, Grafana, Alerting</td></tr>
                <tr><td>24-25</td><td>Database</td><td>PostgreSQL, Prometheus Adapter</td></tr>
                <tr><td>27-28</td><td>Cache</td><td>Redis Operator ‚Üí CRs</td></tr>
                <tr><td>29-32</td><td>Message Queue</td><td>RabbitMQ Operator ‚Üí Topology ‚Üí CRs</td></tr>
                <tr><td>35-36</td><td>Autoscaling</td><td>KEDA, ScaledObjects</td></tr>
                <tr><td>40-43</td><td>Application</td><td>APIs, Workers, SSE Gateway, Event Router</td></tr>
                <tr><td>50</td><td>Routing</td><td>Istio VirtualService</td></tr>
                <tr><td>60-63</td><td>Observability</td><td>Kiali, Jaeger, ECK</td></tr>
            </table>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üí° <span class="lang-ko">ÏÑ§Í≥Ñ ÏõêÏπô</span><span class="lang-en">Design Principle</span></strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <span class="lang-ko"><strong>CRD ‚Üí Operator ‚Üí Instance</strong> ÏàúÏÑúÎ°ú Î∂ÑÎ¶¨ÌïòÏó¨ ÏùòÏ°¥ÏÑ± Ï∂©Îèå Î∞©ÏßÄ. Operator ÏóÜÏù¥ <strong>Helm Chart + Kustomize Overlay</strong>Î°ú Í¥ÄÎ¶¨ÌïòÎäî Ïä§ÌÉù(PostgreSQL Îì±)ÏùÄ Ïö¥ÏòÅ Î≥µÏû°ÎèÑÎ•º ÎÇÆÏ∂îÍ∏∞ ÏúÑÌï¥ ÏÑ†ÌÉù.</span>
                    <span class="lang-en">Separated in <strong>CRD ‚Üí Operator ‚Üí Instance</strong> order to prevent dependency conflicts. Stacks managed with <strong>Helm Chart + Kustomize Overlay</strong> (e.g., PostgreSQL) chosen to reduce operational complexity.</span>
                </div>
            </div>
            <div style="margin-top: 1rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid var(--accent-purple);">
                <strong style="color: var(--accent-purple);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem;">
                    <a href="https://rooftopsnow.tistory.com/12" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">GitOps #04: ALB Controller, ExternalDNS, ESO Íµ¨ÏÑ± ‚Üí</span>
                        <span class="lang-en">GitOps #04: ALB Controller, ExternalDNS, ESO Setup ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: CI Quality Gate -->
    <div class="modal-overlay" id="modal-ci-quality">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-ci-quality')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">‚úÖ CI Quality Gate (Lint ¬∑ Formatting ¬∑ Test ¬∑ Coverage)</span>
                <span class="lang-en">‚úÖ CI Quality Gate (Lint ¬∑ Formatting ¬∑ Test ¬∑ Coverage)</span>
            </h3>

            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           GitHub Actions Quality Gate                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   Pull Request / Push                                                          ‚îÇ
‚îÇ        ‚îÇ                                                                        ‚îÇ
‚îÇ        ‚ñº                                                                        ‚îÇ
‚îÇ   Commit Filter  ‚îÄ‚îÄ‚ñ∫  Detect Changes  ‚îÄ‚îÄ‚ñ∫  Quality (black/ruff/pytest)          ‚îÇ
‚îÇ        ‚îÇ                 ‚îÇ                         ‚îÇ                            ‚îÇ
‚îÇ        ‚îÇ                 ‚îÇ                         ‚îú‚îÄ apps/*: black --check      ‚îÇ
‚îÇ        ‚îÇ                 ‚îÇ                         ‚îú‚îÄ apps/*: ruff check         ‚îÇ
‚îÇ        ‚îÇ                 ‚îÇ                         ‚îî‚îÄ pytest (ÏÑúÎπÑÏä§Îäî Ï†ÑÏ≤¥/ÏõåÏª§Îäî unit)‚îÇ
‚îÇ        ‚îÇ                 ‚îÇ                                                      ‚îÇ
‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ (skip Ï°∞Í±¥: docs Îì±, canary merge Îì±)                    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Push/workflow_dispatchÏùº ÎïåÎßå: Build & Push ‚Üí (ArgoCD Sync / ImageUpdater)     ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <table class="modal-table" style="font-size: 0.85rem;">
                <tr>
                    <th><span class="lang-ko">ÎåÄÏÉÅ</span><span class="lang-en">Target</span></th>
                    <th><span class="lang-ko">ÏõåÌÅ¨ÌîåÎ°úÏö∞</span><span class="lang-en">Workflow</span></th>
                    <th><span class="lang-ko">Í≤ÄÏ¶ù</span><span class="lang-en">Checks</span></th>
                    <th><span class="lang-ko">Ìä∏Î¶¨Í±∞/ÌäπÏßï</span><span class="lang-en">Trigger/Notes</span></th>
                </tr>
                <tr>
                    <td>apps/* API</td>
                    <td><a href="https://github.com/eco2-team/backend/blob/main/.github/workflows/ci-services.yml" target="_blank" rel="noopener">ci-services.yml</a></td>
                    <td>black==24.4.2, ruff==0.6.9, pytest==8.3.3</td>
                    <td>
                        <span class="lang-ko">PRÏóêÏÑ† ÌíàÏßà Í≤åÏù¥Ìä∏Îßå, push/ÏàòÎèô Ïã§ÌñâÏóêÏÑúÎßå Ïù¥ÎØ∏ÏßÄ ÎπåÎìú/Ìë∏Ïãú</span>
                        <span class="lang-en">PR runs quality only, build/push only on push or manual</span>
                    </td>
                </tr>
                <tr>
                    <td>apps/* Workers</td>
                    <td><a href="https://github.com/eco2-team/backend/blob/main/.github/workflows/ci-workers.yml" target="_blank" rel="noopener">ci-workers.yml</a></td>
                    <td>black/ruff + pytest(unit) (integrationÏùÄ Í∏∞Î≥∏ ignore)</td>
                    <td>
                        <span class="lang-ko">Redis ÌôòÍ≤ΩÎ≥ÄÏàò Ï£ºÏûÖÏúºÎ°ú Îã®ÏúÑ ÌÖåÏä§Ìä∏ Ï§ëÏã¨(Îπ†Î•∏ ÌîºÎìúÎ∞±)</span>
                        <span class="lang-en">Unit-test focused for fast feedback (Redis env injected)</span>
                    </td>
                </tr>
                <tr>
                    <td>SSE Components</td>
                    <td><a href="https://github.com/eco2-team/backend/blob/main/.github/workflows/ci-sse-components.yml" target="_blank" rel="noopener">ci-sse-components.yml</a></td>
                    <td>apps/sse_gateway, apps/event_router: black/ruff/pytest</td>
                    <td>
                        <span class="lang-ko">apps/Î•º PYTHONPATHÎ°ú Ïû°ÏïÑ Î™®Îìà import Ï†ïÌï©ÏÑ± Í∞ïÏ†ú</span>
                        <span class="lang-en">Sets PYTHONPATH=apps to enforce import correctness</span>
                    </td>
                </tr>
                <tr>
                    <td>Infra</td>
                    <td><a href="https://github.com/eco2-team/backend/blob/main/.github/workflows/ci-infra.yml" target="_blank" rel="noopener">ci-infra.yml</a></td>
                    <td>
                        <span class="lang-ko">Terraform validate/plan Îì± IaC Í≤ÄÏ¶ù</span>
                        <span class="lang-en">IaC checks (Terraform validate/plan, etc.)</span>
                    </td>
                    <td>
                        <span class="lang-ko">docs ÌÉÄÏûÖ Ïª§Î∞ãÏùÄ skip Í∞ÄÎä•(Ïù∏ÌîÑÎùº CI ÎπÑÏö© Ï†àÍ∞ê)</span>
                        <span class="lang-en">Can skip on docs-only commits to reduce CI cost</span>
                    </td>
                </tr>
                <tr>
                    <td>Coverage (Î¶¨Ìè¨Ìä∏)</td>
                    <td><a href="https://github.com/eco2-team/backend/blob/main/.github/workflows/ci-sonarcloud.yml" target="_blank" rel="noopener">ci-sonarcloud.yml</a></td>
                    <td>pytest-cov ‚Üí coverage.xml ÏÉùÏÑ±</td>
                    <td>
                        <span class="lang-ko">SonarCloud Ïó∞ÎèôÏö©(ÌòÑÏû¨Îäî ÏàòÎèô Ìä∏Î¶¨Í±∞)</span>
                        <span class="lang-en">For SonarCloud integration (manual trigger currently)</span>
                    </td>
                </tr>
            </table>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.08); border-radius: 10px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">
                    <span class="lang-ko">Ïôú Ï§ëÏöîÌïúÍ∞Ä</span>
                    <span class="lang-en">Why it matters</span>
                </strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <span class="lang-ko">
                        ‚Ä¢ PR Îã®Í≥ÑÏóêÏÑú Ìè¨Îß∑/Î¶∞Ìä∏/ÌÖåÏä§Ìä∏Î•º Í∞ïÏ†úÌï¥ ‚ÄúÎ¶¨Î∑∞Îäî Î°úÏßÅÏóê ÏßëÏ§ë‚ÄùÌïòÎèÑÎ°ù ÎßåÎì≠ÎãàÎã§.<br>
                        ‚Ä¢ ÎèÑÎ©îÏù∏/ÏõåÏª§Í∞Ä ÎäòÏñ¥ÎÇ†ÏàòÎ°ù ÌöåÍ∑Ä Î¶¨Ïä§ÌÅ¨Í∞Ä Ïª§ÏßÄÎØÄÎ°ú, Quality GateÎäî ÌôïÏû•ÏÑ±Ïùò Î≥¥ÌóòÏûÖÎãàÎã§.<br>
                        ‚Ä¢ Clean Architecture(Port/Adapter)ÏóêÏÑú ÌäπÌûà Mock Í∏∞Î∞ò Îã®ÏúÑ ÌÖåÏä§Ìä∏Í∞Ä Ïâ¨ÏõåÏ†∏ ÌíàÏßà Î£®ÌîÑÍ∞Ä Îπ®ÎùºÏßëÎãàÎã§.
                    </span>
                    <span class="lang-en">
                        ‚Ä¢ Enforces format/lint/tests on PRs so reviews focus on logic.<br>
                        ‚Ä¢ As domains/workers scale, regression risk grows‚Äîquality gates are scalability insurance.<br>
                        ‚Ä¢ Clean Architecture improves testability (ports mocked), accelerating recursive self-improvement.
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Operators & Helm -->
    <div class="modal-overlay" id="modal-operators">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-operators')">√ó</button>
            <h3 class="modal-title">üì¶ Operators & Helm Charts</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          Operators & Helm Charts                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   ‚îå‚îÄ Kubernetes Operators ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  RabbitMQ Cluster     ‚îÇ   ‚îÇ Messaging Topology    ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ     v2.11.0           ‚îÇ   ‚îÇ     v1.15.0           ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ   Redis Operator      ‚îÇ   ‚îÇ  External Secrets     ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ    (Spotahome)        ‚îÇ   ‚îÇ     v0.9.11           ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ     v3.3.0            ‚îÇ   ‚îÇ                       ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ    ECK Operator       ‚îÇ   ‚îÇ    Cert-Manager       ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ     v2.11.0           ‚îÇ   ‚îÇ     v1.16.2           ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ   ‚îå‚îÄ Helm Charts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ kube-prometheus ‚îÇ  ‚îÇ     KEDA        ‚îÇ  ‚îÇ   Istio Stack   ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ   v56.21.1      ‚îÇ  ‚îÇ    v2.16.0      ‚îÇ  ‚îÇ    v1.24.1      ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ    Grafana      ‚îÇ  ‚îÇ   Prometheus    ‚îÇ  ‚îÇ   PostgreSQL    ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ    v8.5.9       ‚îÇ  ‚îÇ    Adapter      ‚îÇ  ‚îÇ   v18.1.11      ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ                 ‚îÇ  ‚îÇ   v4.10.0       ‚îÇ  ‚îÇ                 ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Type</th><th>Name</th><th>Version</th><th>Ïö©ÎèÑ</th></tr>
                <tr><td>Operator</td><td>RabbitMQ Cluster</td><td>v2.11.0</td><td>MQ ÌÅ¥Îü¨Ïä§ÌÑ∞</td></tr>
                <tr><td>Operator</td><td>Messaging Topology</td><td>v1.15.0</td><td>Exchange/Queue CRD</td></tr>
                <tr><td>Operator</td><td>Redis (Spotahome)</td><td>v3.3.0</td><td>Sentinel HA</td></tr>
                <tr><td>Operator</td><td>External Secrets</td><td>v0.9.11</td><td>Secret ÎèôÍ∏∞Ìôî</td></tr>
                <tr><td>Operator</td><td>ECK</td><td>v2.11.0</td><td>Elasticsearch</td></tr>
                <tr><td>Operator</td><td>Cert-Manager</td><td>v1.16.2</td><td>TLS Ïù∏Ï¶ùÏÑú</td></tr>
                <tr><td>Helm</td><td>kube-prometheus-stack</td><td>v56.21.1</td><td>Î™®ÎãàÌÑ∞ÎßÅ</td></tr>
                <tr><td>Helm</td><td>KEDA</td><td>v2.16.0</td><td>Ïù¥Î≤§Ìä∏ Í∏∞Î∞ò Ïä§ÏºÄÏùºÎßÅ</td></tr>
                <tr><td>Helm</td><td>Istio</td><td>v1.24.1</td><td>Service Mesh</td></tr>
                <tr><td>Helm</td><td>Grafana</td><td>v8.5.9</td><td>ÎåÄÏãúÎ≥¥Îìú</td></tr>
                <tr><td>Helm</td><td>Prometheus Adapter</td><td>v4.10.0</td><td>Custom Metrics</td></tr>
                <tr><td>Helm</td><td>PostgreSQL</td><td>v18.1.11</td><td>Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§</td></tr>
            </table>
        </div>
    </div>

    <!-- Modal: Auth Offloading Performance -->
    <div class="modal-overlay" id="modal-auth-perf">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-auth-perf')">√ó</button>
            <h3 class="modal-title">üîê Auth Offloading Performance Tuning</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ext-authz Performance Tuning Timeline                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   AS-IS (Breaking Point)              TO-BE (Tuned + HPA)                       ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ               ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                     ‚îÇ
‚îÇ   Peak RPS: ~42                       Peak RPS: ~1,200                          ‚îÇ
‚îÇ   Avg Latency: ~125ms                 Avg Latency: 10-24ms                      ‚îÇ
‚îÇ   Success Rate: ~86%                  Success Rate: ~99.8%                      ‚îÇ
‚îÇ   Pod: 1 (CPU Î≥ëÎ™©)                   Pod: 3-5 (HPA ÏûêÎèô ÌôïÏû•)                  ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                        ÏÑ±Îä• Í∞úÏÑ† ÌùêÎ¶Ñ                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Step 1          Step 2              Step 3                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   PoolSize=20     PoolSize=100        PoolSize=500 + HPA                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   RPS: ~884       RPS: ~900           RPS: ~950‚Üí1,200                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   SR: 90-94%      SR: 98-99%          SR: 99.5-100%                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   [Redis Pool]‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫[CPU Limits]‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫[HPA 2-5 Pods]                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      Î≥ëÎ™© Ìï¥ÏÜå       Î≤ÑÏä§Ìä∏ ÌóàÏö©          Î∂ÄÌïò Î∂ÑÏÇ∞                      ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ÌÖåÏä§Ìä∏ ÌôòÍ≤Ω: 2,500 VU, 250 ramp-ups/s, 30Î∂Ñ ÏßÄÏÜç                             ‚îÇ
‚îÇ   ÌÖåÏä§Ìä∏ ÎÇ†Ïßú: 2025-12-14 ~ 2025-12-15                                         ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Î©îÌä∏Î¶≠</th><th>AS-IS (PoolSize=20)</th><th>1Ï∞® (PoolSize=100)</th><th>2Ï∞® (PoolSize=500+HPA)</th><th>Í∞úÏÑ†Ïú®</th></tr>
                <tr><td>Peak RPS</td><td>~884 (‚Üí42 Ìè¨Ìôî)</td><td>~900</td><td>~1,200</td><td><strong>28Î∞∞</strong></td></tr>
                <tr><td>Avg Latency</td><td>57-80ms (‚Üí125ms)</td><td>16-22ms</td><td>10-24ms</td><td>84% Í∞êÏÜå</td></tr>
                <tr><td>Success Rate</td><td>90-94% (‚Üí86%)</td><td>98.25-99.5%</td><td>99.55-100%</td><td>+13.8%p</td></tr>
                <tr><td>redis_error</td><td>11-54 req/s</td><td>3-8 req/s</td><td>0-3.5 req/s</td><td>93% Í∞êÏÜå</td></tr>
                <tr><td>Pod Count</td><td>1 (CPU Î≥ëÎ™©)</td><td>1</td><td>3-5 (HPA)</td><td>ÏàòÌèâ ÌôïÏû•</td></tr>
            </table>
            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR / Release</span>
                    <span class="lang-en">Related PRs / Releases</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.5" target="_blank" rel="noopener">v1.0.5</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/102" target="_blank" rel="noopener">#102 ext-authz Go</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/236" target="_blank" rel="noopener">#236 Local Cache</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/243" target="_blank" rel="noopener">#243 Fallback Outbox</a>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üìä Grafana Ïä§ÎÉÖÏÉ∑ (Ïã§Ï†ú ÌÖåÏä§Ìä∏ Îç∞Ïù¥ÌÑ∞)</strong>
                <div style="margin-top: 0.75rem; display: flex; flex-direction: column; gap: 0.5rem;">
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/P5uoWRrXqFYBvoc9AvXP4kYF1M6jpfeG" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> 2000 VU, 200 ramp-ups, 30m ÌÖåÏä§Ìä∏
                    </a>
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/1qhkHr5rWubb29VtWCAXYB66bHMmN5Ad" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> 2500 VU, 250 ramp-ups, 30m ÌÖåÏä§Ìä∏
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: AWS External Components -->
    <div class="modal-overlay" id="modal-aws-external">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-aws-external')">√ó</button>
            <h3 class="modal-title">‚òÅÔ∏è AWS External Components</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         AWS External Components Architecture                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                              External Traffic                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                   ‚îÇ                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ      Route 53 DNS       ‚îÇ                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ   *.dev.growbin.app     ‚îÇ                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ   (Hosted Zone)         ‚îÇ                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                   ‚îÇ                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ              ‚ñº                    ‚ñº                    ‚ñº                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ    CloudFront    ‚îÇ ‚îÇ    AWS ALB       ‚îÇ ‚îÇ      S3          ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  images.*.app    ‚îÇ ‚îÇ  api.*.app       ‚îÇ ‚îÇ  (Origin)        ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  CDN + OAI       ‚îÇ ‚îÇ  SSL Termination ‚îÇ ‚îÇ  Images Bucket   ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ            ‚îÇ                    ‚îÇ                    ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                    ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                 ‚ñº                    ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ  ACM Certificate ‚îÇ            ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ  *.growbin.app   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ  (DNS Validated) ‚îÇ   (us-east-1 for CDN)        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                               ‚îÇ                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                               ‚ñº                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ     Kubernetes Cluster (24 Nodes)  ‚îÇ                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ     Istio Ingress Gateway          ‚îÇ                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   S3 Bucket Configuration:                                                      ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Versioning: Enabled                                                       ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Lifecycle: 30d ‚Üí Standard-IA, 90d ‚Üí Delete                               ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Encryption: AES256 (SSE-S3)                                              ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Public Access: Blocked (OAI only)                                        ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ CORS: frontend.*.app, localhost:3000/5173                                ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   CloudFront Configuration:                                                     ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Price Class: PriceClass_200 (Asia + NA + EU)                             ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Cache TTL: 24h default, 7d max                                           ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Origin: S3 via OAI (secure)                                              ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ SSL: TLSv1.2_2021, SNI-only                                              ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Ïª¥Ìè¨ÎÑåÌä∏</th><th>Ïö©ÎèÑ</th><th>Ï£ºÏöî ÏÑ§Ï†ï</th></tr>
                <tr><td><strong>Route 53</strong></td><td>DNS Í¥ÄÎ¶¨</td><td>Hosted Zone: growbin.app, DNS Validation for ACM</td></tr>
                <tr><td><strong>AWS ALB</strong></td><td>L7 Î°úÎìúÎ∞∏Îü∞ÏÑú</td><td>SSL/TLS Termination, Target: Istio Ingress</td></tr>
                <tr><td><strong>CloudFront</strong></td><td>Ïù¥ÎØ∏ÏßÄ CDN</td><td>OAI, 24h/7d TTL, PriceClass_200</td></tr>
                <tr><td><strong>S3 Bucket</strong></td><td>Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•</td><td>Versioning, 30d‚ÜíIA, 90d ÏÇ≠Ï†ú, Pre-signed URL</td></tr>
                <tr><td><strong>ACM</strong></td><td>SSL Ïù∏Ï¶ùÏÑú</td><td>Wildcard *.growbin.app, DNS Validation</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üîß Terraform IaC Í¥ÄÎ¶¨</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    Î™®Îì† Ïô∏Î∂Ä AWS Î¶¨ÏÜåÏä§Îäî <code>terraform/</code> ÎîîÎ†âÌÜ†Î¶¨ÏóêÏÑú ÏÑ†Ïñ∏Ï†ÅÏúºÎ°ú Í¥ÄÎ¶¨Îê©ÎãàÎã§:<br>
                    <code>cloudfront.tf</code>, <code>s3.tf</code>, <code>route53.tf</code>, <code>acm.tf</code>, <code>alb-controller-iam.tf</code>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: IRSA Automation -->
    <div class="modal-overlay" id="modal-irsa-automation">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-irsa-automation')">√ó</button>
            <h3 class="modal-title">üîó IRSA-Based Automation</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       IRSA (IAM Roles for Service Accounts)                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ   ‚îÇ ExternalSecrets  ‚îÇ  ‚îÇ  ExternalDNS     ‚îÇ  ‚îÇ  ALB Controller  ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ Operator         ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                  ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ                  ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                  ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îÇIAM Role      ‚îÇ ‚îÇ  ‚îÇ ‚îÇIAM Role      ‚îÇ ‚îÇ  ‚îÇ ‚îÇIAM Role      ‚îÇ ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îÇexternal-     ‚îÇ ‚îÇ  ‚îÇ ‚îÇexternal-     ‚îÇ ‚îÇ  ‚îÇ ‚îÇalb-          ‚îÇ ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îÇsecrets-op    ‚îÇ ‚îÇ  ‚îÇ ‚îÇdns           ‚îÇ ‚îÇ  ‚îÇ ‚îÇcontroller    ‚îÇ ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ         ‚îÇ  ‚îÇ        ‚îÇ         ‚îÇ  ‚îÇ        ‚îÇ         ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ        ‚ñº         ‚îÇ  ‚îÇ        ‚ñº         ‚îÇ  ‚îÇ        ‚ñº         ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îÇSSM Parameter ‚îÇ ‚îÇ  ‚îÇ ‚îÇRoute 53      ‚îÇ ‚îÇ  ‚îÇ ‚îÇELB + EC2     ‚îÇ ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îÇStore Read    ‚îÇ ‚îÇ  ‚îÇ ‚îÇChange Records‚îÇ ‚îÇ  ‚îÇ ‚îÇCreate/Manage ‚îÇ ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îÇSecretsMgr    ‚îÇ ‚îÇ  ‚îÇ ‚îÇList Zones    ‚îÇ ‚îÇ  ‚îÇ ‚îÇTarget Groups ‚îÇ ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ             ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ            ‚îÇ                     ‚îÇ                     ‚îÇ                        ‚îÇ
‚îÇ            ‚ñº                     ‚ñº                     ‚ñº                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ   ‚îÇK8s ExternalSecret‚îÇ  ‚îÇK8s Ingress/Svc  ‚îÇ  ‚îÇK8s Ingress       ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ     ‚Üì            ‚îÇ  ‚îÇannotations       ‚îÇ  ‚îÇannotations       ‚îÇ             ‚îÇ
‚îÇ   ‚îÇK8s Secret        ‚îÇ  ‚îÇ     ‚Üì            ‚îÇ  ‚îÇ     ‚Üì            ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ(auto-created)    ‚îÇ  ‚îÇRoute53 A Record  ‚îÇ  ‚îÇAWS ALB (auto)    ‚îÇ             ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Workflow: ExternalSecrets                                                     ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ 1. ExternalSecret CR ÏÉùÏÑ± (spec.secretStoreRef: aws-ssm-store)           ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ 2. OperatorÍ∞Ä AWS SSM Parameter StoreÏóêÏÑú Í∞í Ï°∞Ìöå                        ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ 3. K8s Secret ÏûêÎèô ÏÉùÏÑ± (refreshInterval: 1h)                            ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ 4. PodÍ∞Ä Secret ÎßàÏö¥Ìä∏ÌïòÏó¨ ÌôòÍ≤ΩÎ≥ÄÏàòÎ°ú ÏÇ¨Ïö©                               ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ÏòàÏãú: /sesacthon/dev/api/auth/jwt-secret ‚Üí auth-secret (K8s Secret)          ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>ÏûêÎèôÌôî ÎèÑÍµ¨</th><th>ServiceAccount</th><th>IAM Í∂åÌïú</th><th>ÎèôÏûë</th></tr>
                <tr><td><strong>ExternalSecrets</strong></td><td>platform-system:external-secrets-sa</td><td>SSM GetParameter, SecretsManager GetSecretValue</td><td>AWS SSM ‚Üí K8s Secret ÏûêÎèô ÎèôÍ∏∞Ìôî</td></tr>
                <tr><td><strong>ExternalDNS</strong></td><td>platform-system:external-dns</td><td>Route53 ChangeResourceRecordSets, ListHostedZones</td><td>K8s Ingress/Service ‚Üí Route53 A Î†àÏΩîÎìú</td></tr>
                <tr><td><strong>ALB Controller</strong></td><td>kube-system:aws-load-balancer-controller</td><td>ELB Create/Modify, EC2 Describe, ACM List</td><td>K8s Ingress ‚Üí AWS ALB ÏûêÎèô ÌîÑÎ°úÎπÑÏ†ÄÎãù</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üîê IRSA Î≥¥Ïïà Ïù¥Ï†ê</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    EC2 Instance Profile ÎåÄÏã† IRSA ÏÇ¨Ïö© ‚Üí Pod ÏàòÏ§Ä ÏµúÏÜå Í∂åÌïú ÏõêÏπô Ï†ÅÏö©<br>
                    <code>terraform/irsa-roles.tf</code>ÏóêÏÑú IAM Role ÏÑ†Ïñ∏Ï†Å Í¥ÄÎ¶¨
                </div>
            </div>
            <div style="margin-top: 1rem; padding: 1rem; background: rgba(255,193,7,0.1); border-radius: 8px; border-left: 3px solid #ffc107;">
                <strong style="color: #ffc107;">üöÄ Ìñ•ÌõÑ Î∞úÏ†Ñ Î∞©Ìñ•</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    EKS OIDC Provider Ïó∞ÎèôÏúºÎ°ú ServiceAccount ‚Üî IAM Role ÏûêÎèô Îß§Ìïë ÎèÑÏûÖ Í≤ÄÌÜ†
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Istio Service Mesh -->
    <div class="modal-overlay" id="modal-istio-mesh">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-istio-mesh')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üï∏Ô∏è Istio Service Mesh Architecture</span>
                <span class="lang-en">üï∏Ô∏è Istio Service Mesh Architecture</span>
            </h3>

            <h4 style="color: var(--accent-purple); margin: 1rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üó∫Ô∏è ÎÑ§Ìä∏ÏõåÌÅ¨ ÌÜ†Ìè¥Î°úÏßÄ Îã§Ïù¥Ïñ¥Í∑∏Îû®</span>
                <span class="lang-en">üó∫Ô∏è Network Topology Diagram</span>
            </h4>
            <div style="text-align: center; margin: 1rem 0;">
                <img src="assets/images/istio_network_topology.png" alt="Istio Network Topology" style="max-width: 100%; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
            </div>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÄ Ìä∏ÎûòÌîΩ ÌîåÎ°úÏö∞</span>
                <span class="lang-en">üîÄ Traffic Flow</span>
            </h4>
            <div class="modal-diagram">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Istio Service Mesh Traffic Flow                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   [User/Client]                                                                 ‚îÇ
‚îÇ        ‚îÇ                                                                        ‚îÇ
‚îÇ        ‚îÇ HTTPS Request                                                          ‚îÇ
‚îÇ        ‚ñº                                                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     CNAME/A Record     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ   ‚îÇ  Route53 DNS    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ ExternalDNS     ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ  (Global)       ‚îÇ                         ‚îÇ Controller      ‚îÇ               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ            ‚îÇ                                                                    ‚îÇ
‚îÇ            ‚ñº                                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     Target Group       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ   ‚îÇ  AWS ALB        ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ ALB Controller  ‚îÇ               ‚îÇ
‚îÇ   ‚îÇ  (HTTPS :443)   ‚îÇ     Instance Mode       ‚îÇ (IRSA)          ‚îÇ               ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ            ‚îÇ                                                                    ‚îÇ
‚îÇ            ‚îÇ Forward to NodePort (30xxx)                                        ‚îÇ
‚îÇ            ‚ñº                                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ  Ingress Gateway Node (k8s-ingress-gateway)                          ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  Istio Ingress Gateway Pod (:80)                             ‚îÇ    ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ Gateway CR (hosts, port binding)                        ‚îÇ    ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ VirtualService (path-based routing)                     ‚îÇ    ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ            ‚îÇ                                                                    ‚îÇ
‚îÇ            ‚îÇ xDS Config (Istiod Control Plane)                                  ‚îÇ
‚îÇ            ‚ñº                                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ   ‚îÇ  Worker Node                                                         ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îÇ Envoy       ‚îÇ mTLS    ‚îÇ  Application Container          ‚îÇ  ‚îÇ  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îÇ Sidecar     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  (scan-api, chat-api, etc)      ‚îÇ  ‚îÇ  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îÇ (:15001)    ‚îÇ localhost‚îÇ                                 ‚îÇ  ‚îÇ  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ       ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Before: AWS ALB ‚Üí K8s Ingress ‚Üí NodePort ‚Üí Pod                               ‚îÇ
‚îÇ   After:  AWS ALB ‚Üí Istio Gateway ‚Üí VirtualService ‚Üí Envoy Sidecar ‚Üí App       ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üéØ Sidecar vs Ambient Mesh ÏÑ†ÌÉù</span>
                <span class="lang-en">üéØ Sidecar vs Ambient Mesh Decision</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Í≥†Î†§ ÏÇ¨Ìï≠</span><span class="lang-en">Consideration</span></th>
                    <th>Sidecar</th>
                    <th>Ambient</th>
                    <th><span class="lang-ko">ÏÑ†ÌÉù</span><span class="lang-en">Choice</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§ Í≤©Î¶¨</span><span class="lang-en">Namespace Isolation</span></td>
                    <td><span class="lang-ko">ÎèÑÎ©îÏù∏Î≥Ñ Pod Îã®ÏúÑ</span><span class="lang-en">Per-pod per domain</span></td>
                    <td>Waypoint per NS</td>
                    <td>‚úÖ Sidecar</td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÎÖ∏Îìú Î∞ÄÎèÑ</span><span class="lang-en">Node Density</span></td>
                    <td><span class="lang-ko">ÎÖ∏ÎìúÎãπ Ï†ÅÏùÄ Pod</span><span class="lang-en">Few pods/node</span></td>
                    <td>ztunnel <span class="lang-ko">Ìö®Ïú® ÎÇÆÏùå</span><span class="lang-en">inefficient</span></td>
                    <td>‚úÖ Sidecar</td>
                </tr>
                <tr>
                    <td>Calico CNI</td>
                    <td><span class="lang-ko">Ï∂©Îèå ÏóÜÏùå</span><span class="lang-en">No conflict</span></td>
                    <td><span class="lang-ko">CNI Î†àÎ≤® Ï∂©Îèå ÏúÑÌóò</span><span class="lang-en">CNI-level overlap risk</span></td>
                    <td>‚úÖ Sidecar</td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ïö¥ÏòÅ ÏÑ±ÏàôÎèÑ</span><span class="lang-en">Operational Maturity</span></td>
                    <td><span class="lang-ko">Í≤ÄÏ¶ùÎê®</span><span class="lang-en">Proven</span></td>
                    <td>Beta (v1.24)</td>
                    <td>‚úÖ Sidecar</td>
                </tr>
            </table>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚öôÔ∏è GitOps Î∞∞Ìè¨ ÏàúÏÑú (Sync Wave)</span>
                <span class="lang-en">‚öôÔ∏è GitOps Deployment Order (Sync Wave)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>Wave</th>
                    <th><span class="lang-ko">Ïª¥Ìè¨ÎÑåÌä∏</span><span class="lang-en">Component</span></th>
                    <th><span class="lang-ko">ÎÖ∏Îìú</span><span class="lang-en">Node</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td>04</td>
                    <td>istio-base, istiod</td>
                    <td>k8s-master</td>
                    <td><span class="lang-ko">CRD + Control Plane</span><span class="lang-en">CRDs + Control Plane</span></td>
                </tr>
                <tr>
                    <td>05</td>
                    <td>Istio Ingress Gateway</td>
                    <td>k8s-ingress-gateway</td>
                    <td><span class="lang-ko">Îã®Ïùº ÏßÑÏûÖÏ†ê (t3.medium)</span><span class="lang-en">Single entry point (t3.medium)</span></td>
                </tr>
                <tr>
                    <td>50</td>
                    <td>VirtualService, DestinationRule</td>
                    <td>-</td>
                    <td><span class="lang-ko">Ïï± Î∞∞Ìè¨ ÌõÑ ÎùºÏö∞ÌåÖ Í∑úÏπô</span><span class="lang-en">Routing rules after app deployment</span></td>
                </tr>
            </table>

            <div style="margin-top: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 250px; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px;">
                    <strong style="color: var(--primary);">‚úÖ <span class="lang-ko">Ïû•Ï†ê</span><span class="lang-en">Benefits</span></strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        <span class="lang-ko">‚Ä¢ Zero-trust mTLS Î≥¥Ïïà<br>‚Ä¢ Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò ÏΩîÎìúÏóêÏÑú Ïù∏Ï¶ù Ï†úÍ±∞<br>‚Ä¢ Ï†ïÎ∞ÄÌïú Ìä∏ÎûòÌîΩ Ï†úÏñ¥<br>‚Ä¢ Observability Î∂ÑÎ¶¨ (Kiali, Jaeger)</span>
                        <span class="lang-en">‚Ä¢ Zero-trust mTLS security<br>‚Ä¢ Auth removed from app code<br>‚Ä¢ Precise traffic control<br>‚Ä¢ Observability decoupling (Kiali, Jaeger)</span>
                    </div>
                </div>
                <div style="flex: 1; min-width: 250px; padding: 1rem; background: rgba(255,165,0,0.1); border-radius: 8px;">
                    <strong style="color: #ffa500;">‚ö†Ô∏è <span class="lang-ko">ÎπÑÏö©</span><span class="lang-en">Trade-offs</span></strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        <span class="lang-ko">‚Ä¢ SidecarÎãπ 100MB+ Î©îÎ™®Î¶¨<br>‚Ä¢ Ï∂îÍ∞Ä ÎÑ§Ìä∏ÏõåÌÅ¨ Ìôâ<br>‚Ä¢ VirtualService/DestinationRule Í¥ÄÎ¶¨<br>‚Ä¢ Ïö¥ÏòÅ Î≥µÏû°ÎèÑ Ï¶ùÍ∞Ä</span>
                        <span class="lang-en">‚Ä¢ 100MB+ memory per sidecar<br>‚Ä¢ Additional network hops<br>‚Ä¢ VirtualService/DestinationRule mgmt<br>‚Ä¢ Increased operational complexity</span>
                    </div>
                </div>
            </div>

            <h4 style="color: #ef4444; margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîß Ìä∏Îü¨Î∏îÏäàÌåÖ</span>
                <span class="lang-en">üîß Troubleshooting</span>
            </h4>
            <table class="modal-table" style="font-size: 0.85rem;">
                <tr>
                    <th><span class="lang-ko">Î¨∏Ï†ú</span><span class="lang-en">Issue</span></th>
                    <th><span class="lang-ko">ÏõêÏù∏</span><span class="lang-en">Cause</span></th>
                    <th><span class="lang-ko">Ìï¥Í≤∞</span><span class="lang-en">Solution</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">ExternalDNSÍ∞Ä Bridge Ingress Í∞êÏßÄ Î™ªÌï®</span><span class="lang-en">ExternalDNS not detecting Bridge Ingress</span></td>
                    <td><span class="lang-ko">Istio Gateway Í∏∞Î∞ò Ingress ÎØ∏Ïù∏Ïãù</span><span class="lang-en">Istio Gateway-based Ingress not recognized</span></td>
                    <td><code>external-dns.alpha.kubernetes.io/managed</code> <span class="lang-ko">ÎùºÎ≤® Ï∂îÍ∞Ä</span><span class="lang-en">label added</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ALB Health Check Ïã§Ìå®</span><span class="lang-en">ALB Health Check failing</span></td>
                    <td><span class="lang-ko">Gateway hostsÏóê ALB Ìó¨Ïä§Ï≤¥ÌÅ¨ Í≤ΩÎ°ú ÏóÜÏùå</span><span class="lang-en">Gateway hosts missing ALB healthcheck path</span></td>
                    <td><span class="lang-ko">GatewayÏóê ÏôÄÏùºÎìúÏπ¥Îìú Ìò∏Ïä§Ìä∏ Ï∂îÍ∞Ä</span><span class="lang-en">Added wildcard host to Gateway</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Envoy-istiod ÌÜµÏã† Ï∞®Îã®</span><span class="lang-en">Envoy-istiod communication blocked</span></td>
                    <td><span class="lang-ko">Calico NetworkPolicyÍ∞Ä xDS Ïó∞Í≤∞ Ï∞®Îã®</span><span class="lang-en">Calico NetworkPolicy blocking xDS</span></td>
                    <td><span class="lang-ko">istio-system egress Î™ÖÏãúÏ†Å ÌóàÏö©</span><span class="lang-en">Explicit egress allow to istio-system</span></td>
                </tr>
            </table>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid var(--accent-purple);">
                <strong style="color: var(--accent-purple);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem;">
                    <a href="https://rooftopsnow.tistory.com/19" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Istio Service Mesh ÏïÑÌÇ§ÌÖçÏ≤ò ÏÑ†ÌÉù ‚Üí</span>
                        <span class="lang-en">Istio Service Mesh Architecture Decision ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Auth Cache Consistency -->
    <div class="modal-overlay" id="modal-auth-cache">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-auth-cache')">√ó</button>
            <h3 class="modal-title">üì° Cache Consistency (Fanout + Local Cache)</h3>

            <!-- Architecture Diagram (Image) - Top -->
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <img src="assets/images/blacklist_fanout.png" alt="Blacklist Fanout Architecture" style="max-width: 100%; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
            </div>

            <!-- Blacklist Synchronization Flow -->
            <h4 style="color: var(--accent-teal); margin: 0 0 1rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÑ Blacklist ÎèôÍ∏∞Ìôî ÌîåÎ°úÏö∞</span>
                <span class="lang-en">üîÑ Blacklist Synchronization Flow</span>
            </h4>
            <p style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 1rem; line-height: 1.6;">
                <span class="lang-ko">
                    Î°úÍ∑∏ÏïÑÏõÉ Ïãú <strong>auth-api</strong>Í∞Ä Redis Fallback OutboxÏóê Ïù¥Î≤§Ìä∏Î•º Ï†ÅÏû¨ÌïòÍ≥†, <strong>auth_relay</strong>Í∞Ä Ïù¥Î•º Ìè¥ÎßÅÌïòÏó¨ RabbitMQ Fanout ExchangeÎ°ú Î∞úÌñâÌï©ÎãàÎã§.
                    Î™®Îì† <strong>ext-authz Pod</strong>Í∞Ä Î∏åÎ°úÎìúÏ∫êÏä§Ìä∏Î•º ÏàòÏã†Ìï¥ Local Cache(<code>sync.Map</code>)Î•º Ï¶âÏãú Í∞±Ïã†Ìï©ÎãàÎã§.
                    Î≥ëÎ†¨Î°ú <strong>auth_worker</strong>Í∞Ä RedisÏóê ÏòÅÏÜç Ï†ÄÏû•ÌïòÏó¨ Ïã†Í∑ú Pod Î∂ÄÌä∏Ïä§Ìä∏Îû© Ïãú ÏùºÍ¥ÄÏÑ±ÏùÑ Î≥¥Ïû•Ìï©ÎãàÎã§.
                </span>
                <span class="lang-en">
                    On logout, <strong>auth-api</strong> pushes event to Redis Fallback Outbox, <strong>auth_relay</strong> polls and publishes to RabbitMQ Fanout Exchange.
                    All <strong>ext-authz Pods</strong> receive broadcast and immediately update Local Cache (<code>sync.Map</code>).
                    In parallel, <strong>auth_worker</strong> persists to Redis for new Pod bootstrap consistency.
                </span>
            </p>
            <div class="modal-diagram" style="font-size: 0.68rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Blacklist Cache Synchronization Architecture                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ                         Event Flow (Logout)                              ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   [User Logout]                                                          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ                                                                 ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                                                 ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     Redis Fallback Outbox      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  auth-api   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ  auth_relay   ‚îÇ       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  (FastAPI)  ‚îÇ    LPUSH outbox:blacklist     ‚îÇ  (Outbox Ìè¥ÎßÅ) ‚îÇ       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                         ‚îÇ               ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                         ‚îÇ AMQP Publish  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                         ‚ñº               ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ      RabbitMQ (Fanout Exchange)        ‚îÇ         ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ      blacklist.events                  ‚îÇ         ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ      type: fanout (broadcast to all)   ‚îÇ         ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                     ‚îÇ                                   ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ            ‚ñº                        ‚ñº                        ‚ñº          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ext-authz   ‚îÇ         ‚îÇ  ext-authz   ‚îÇ         ‚îÇ  ext-authz   ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   Pod #1     ‚îÇ         ‚îÇ   Pod #2     ‚îÇ         ‚îÇ   Pod #3     ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ         ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ         ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ ‚îÇLocal Cache‚îÇ ‚îÇ         ‚îÇ ‚îÇLocal Cache‚îÇ ‚îÇ         ‚îÇ ‚îÇLocal Cache‚îÇ ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ ‚îÇsync.Map   ‚îÇ ‚îÇ         ‚îÇ ‚îÇsync.Map   ‚îÇ ‚îÇ         ‚îÇ ‚îÇsync.Map   ‚îÇ ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ ‚îÇO(1) lookup‚îÇ ‚îÇ         ‚îÇ ‚îÇO(1) lookup‚îÇ ‚îÇ         ‚îÇ ‚îÇO(1) lookup‚îÇ ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ         ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ         ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Parallel Path: auth_worker ‚Üí Redis (ÏòÅÏÜç Ï†ÄÏû•)                               ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  auth_worker (Python)                                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ blacklist:{jti} ‚Üí Redis (TTL = token exp - now, max 24h)          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ÏùºÍ¥ÄÏÑ± Î≥¥Ïû•:                                                                 ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Fanout: Î™®Îì† PodÏóê Ï¶âÏãú Î∏åÎ°úÎìúÏ∫êÏä§Ìä∏ (ms Îã®ÏúÑ)                          ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Local Cache: cleanupInterval 60s Ï£ºÍ∏∞Î°ú ÎßåÎ£å ÏóîÌä∏Î¶¨ ÏÇ≠Ï†ú                ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Ïã†Í∑ú Pod: Bootstrap Ïãú RedisÏóêÏÑú active blacklist Î°úÎìú                  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Lazy TTL: Ï°∞Ìöå Ïãú ÎßåÎ£å Ï≤¥ÌÅ¨, ÎßåÎ£å Ïãú ÏÇ≠Ï†ú ÌõÑ miss Î∞òÌôò                  ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <!-- Components Table -->
            <table class="modal-table" style="margin-top: 1.5rem;">
                <tr><th>Ïª¥Ìè¨ÎÑåÌä∏</th><th>Ïó≠Ìï†</th><th>Íµ¨ÌòÑ</th></tr>
                <tr><td><strong>auth_relay</strong></td><td>Fallback Outbox ‚Üí MQ Ïû¨Î∞úÌñâ</td><td>Redis List Ìè¥ÎßÅ ‚Üí RabbitMQ Publish</td></tr>
                <tr><td><strong>Fanout Exchange</strong></td><td>Î∏åÎ°úÎìúÏ∫êÏä§Ìä∏</td><td>blacklist.events, type=fanout</td></tr>
                <tr><td><strong>Local Cache</strong></td><td>O(1) Ï°∞Ìöå</td><td>Go sync.Map, cleanupInterval 60s</td></tr>
                <tr><td><strong>auth_worker</strong></td><td>Redis ÏòÅÏÜçÌôî</td><td>blacklist:{jti}, TTL = exp - now</td></tr>
            </table>

            <!-- Performance Improvement -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">‚ö° ÏÑ±Îä• Í∞úÏÑ†</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <strong>AS-IS:</strong> ext-authz ‚Üí Redis ÎÑ§Ìä∏ÏõåÌÅ¨ Ìò∏Ï∂ú (~2ms/req)<br>
                    <strong>TO-BE:</strong> ext-authz ‚Üí Local Cache (sync.Map, <0.01ms/req)<br>
                    ‚Üí <strong>Redis Î≥ëÎ™© Ï†úÍ±∞, RPS 42 ‚Üí 1,200+ Îã¨ÏÑ±</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Auth Ops Policy -->
    <div class="modal-overlay" id="modal-auth-ops">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-auth-ops')">√ó</button>
            <h3 class="modal-title">üõ°Ô∏è Auth Offloading Operational Policy</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         ext-authz Operational Policy                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   1. FAIL-CLOSED POLICY (Î≥¥Ïïà Ïö∞ÏÑ†)                                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   if err != nil {                                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       // Redis Ïò§Î•ò, ÎÇ¥Î∂Ä Ïò§Î•ò Îì± Î™®Îì† ÏòàÏô∏ ÏÉÅÌô©                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       return denyResponse(StatusCode_InternalServerError)               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       // ‚ùå Ï†àÎåÄ allowResponse Î∞òÌôò X                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   }                                                                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Ï†ïÏ±Ö: "ÌåêÎã® Î∂àÍ∞Ä ‚Üí Ï∞®Îã®" (fail-closed)                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ÎåÄÏïà: fail-openÏùÄ Î≥¥Ïïà ÏúÑÌóò (Î∏îÎûôÎ¶¨Ïä§Ìä∏ Ïö∞Ìöå Í∞ÄÎä•)                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   2. BLACKLIST TTL (24ÏãúÍ∞Ñ)                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Access Token ÎßåÎ£å: 30Î∂Ñ (JWT exp claim)                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Refresh Token ÎßåÎ£å: 24ÏãúÍ∞Ñ                                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Blacklist TTL = min(token_exp - now, 24h)                             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Redis Key: blacklist:{jti}                                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Redis Value: {"user_id", "reason", "blacklisted_at", "expires_at"}    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   RabbitMQ Queue TTL: 86400000ms (24ÏãúÍ∞Ñ)                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Üí x-message-ttl ÏÑ§Ï†ïÏúºÎ°ú Ï≤òÎ¶¨ Ïã§Ìå® Î©îÏãúÏßÄ ÏûêÎèô ÎßåÎ£å                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   3. MEMORY CAP (Local Cache)                                                  ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Íµ¨ÌòÑ: Go sync.Map (thread-safe, O(1))                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Î©îÎ™®Î¶¨ Í¥ÄÎ¶¨:                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cleanupInterval: 60Ï¥à (Ï£ºÍ∏∞Ï†Å ÎßåÎ£å ÏóîÌä∏Î¶¨ ÏÇ≠Ï†ú)                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Lazy deletion: Ï°∞Ìöå Ïãú ÎßåÎ£å Ï≤¥ÌÅ¨ ‚Üí Ï¶âÏãú ÏÇ≠Ï†ú                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Entry size: ~100 bytes/token (jti + expireAt)                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Î©îÌä∏Î¶≠ (Prometheus):                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ext_authz_blacklist_cache_size (ÌòÑÏû¨ Ï∫êÏãú ÌÅ¨Í∏∞)                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ext_authz_blacklist_cache_hits_total (Ï∫êÏãú ÌûàÌä∏)                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ext_authz_blacklist_cache_misses_total (Ï∫êÏãú ÎØ∏Ïä§)                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ext_authz_blacklist_cache_evictions_total (ÏÇ≠Ï†ú ÌöüÏàò)             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ÏïåÎ¶º: cache_size > 10,000 ‚Üí Slack Í≤ΩÍ≥†                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   4. CONNECTION POOL (Redis)                                                   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   PoolSize:       500   (ÎèôÏãú Ïó∞Í≤∞ ÏÉÅÌïú)                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   MinIdleConns:   200   (Ïõú Ïª§ÎÑ•ÏÖò Ïú†ÏßÄ)                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   PoolTimeout:    2s    (Îπ†Î•∏ Ïã§Ìå® ‚Üí backpressure)                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ReadTimeout:    1s                                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   WriteTimeout:   1s                                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Üí Pool exhaustion Î∞©ÏßÄ, Cold start ÏßÄÏó∞ ÏµúÏÜåÌôî                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Ï†ïÏ±Ö</th><th>Í∞í</th><th>Ïù¥Ïú†</th></tr>
                <tr><td><strong>Fail Mode</strong></td><td>fail-closed</td><td>Î∏îÎûôÎ¶¨Ïä§Ìä∏ Ïö∞Ìöå Î∞©ÏßÄ, Î≥¥Ïïà Ïö∞ÏÑ†</td></tr>
                <tr><td><strong>Blacklist TTL</strong></td><td>min(exp-now, 24h)</td><td>Refresh Token ÎßåÎ£å Ï£ºÍ∏∞ Ïª§Î≤Ñ</td></tr>
                <tr><td><strong>Cleanup Interval</strong></td><td>60s</td><td>Î©îÎ™®Î¶¨ ÌöåÏàò Ï£ºÍ∏∞</td></tr>
                <tr><td><strong>Pool Size</strong></td><td>500 (min idle 200)</td><td>Í≥†ÎèôÏãúÏÑ±, Cold start Î∞©ÏßÄ</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üîí ÏΩîÎìú ÏúÑÏπò</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <code>apps/ext_authz/internal/server/server.go</code> - fail-closed Ï†ïÏ±Ö<br>
                    <code>apps/ext_authz/internal/cache/blacklist.go</code> - Local Cache Íµ¨ÌòÑ<br>
                    <code>apps/ext_authz/internal/config/config.go</code> - Pool ÏÑ§Ï†ï<br>
                    <code>apps/auth_worker/infrastructure/persistence_redis/blacklist_store_redis.py</code> - TTL Í≥ÑÏÇ∞
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Observability Cycle Node (Agent-Driven Development) -->
    <div class="modal-overlay" id="modal-obs-cycle">
        <div class="modal-content" style="max-width: 1150px;">
            <button class="modal-close" onclick="closeModal('modal-obs-cycle')">√ó</button>
            <h3 class="modal-title">üìä Observability: Recursive Self-Improvement Feedback Loop</h3>

            <!-- Three Pillars Overview -->
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(138,43,226,0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #8b5cf6;">
                    <div style="font-size: 1.2rem; font-weight: 700; color: #8b5cf6; margin-bottom: 0.5rem;">üìù Logs</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.5;">
                        <strong>EFK Stack</strong> (ECK v2.11.0)<br>
                        ‚Ä¢ Fluent Bit ‚Üí ES v8.11.0<br>
                        ‚Ä¢ 500K-1.1M docs/day<br>
                        ‚Ä¢ ECS Schema + trace.id
                    </div>
                </div>
                <div style="background: rgba(0,255,136,0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid var(--primary);">
                    <div style="font-size: 1.2rem; font-weight: 700; color: var(--primary); margin-bottom: 0.5rem;">üîó Traces</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.5;">
                        <strong>Jaeger + OTEL</strong><br>
                        ‚Ä¢ Zipkin 9411 (Istio)<br>
                        ‚Ä¢ OTLP 4317 (App)<br>
                        ‚Ä¢ 7.16% coverage (125K/1.75M)
                    </div>
                </div>
                <div style="background: rgba(245,158,11,0.1); padding: 1rem; border-radius: 8px; border-left: 3px solid #f59e0b;">
                    <div style="font-size: 1.2rem; font-weight: 700; color: #f59e0b; margin-bottom: 0.5rem;">üìà Metrics</div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.5;">
                        <strong>Prometheus + Grafana</strong><br>
                        ‚Ä¢ ServiceMonitor CRDs<br>
                        ‚Ä¢ Golden Signals (p99, RPS)<br>
                        ‚Ä¢ Alertmanager ‚Üí Slack
                    </div>
                </div>
            </div>

            <!-- Feedback Loop Diagram -->
            <div class="modal-diagram" style="font-size: 0.8rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Observability ‚Üí Agent Feedback Loop (Recursive Self-Improvement)   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ   Cluster   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    Logs     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Kibana    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Developer  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ (24 Nodes)  ‚îÇ     ‚îÇ  (EFK)      ‚îÇ     ‚îÇ  Dashboard  ‚îÇ     ‚îÇ  Analysis   ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ         ‚îÇ                                                            ‚îÇ         ‚îÇ
‚îÇ         ‚îÇ             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ         ‚îÇ
‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Traces    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Jaeger    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îÇ
‚îÇ         ‚îÇ             ‚îÇ  (OTEL/B3)  ‚îÇ     ‚îÇ     UI      ‚îÇ            ‚îÇ         ‚îÇ
‚îÇ         ‚îÇ             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ         ‚îÇ
‚îÇ         ‚îÇ                                                            ‚ñº         ‚îÇ
‚îÇ         ‚îÇ             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Metrics   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Grafana    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  AI Agent   ‚îÇ  ‚îÇ
‚îÇ                       ‚îÇ (Prometheus)‚îÇ     ‚îÇ  Dashboard  ‚îÇ     ‚îÇ  Debugging  ‚îÇ  ‚îÇ
‚îÇ                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                      ‚îÇ         ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ                     Agent Feedback Integration                          ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ trace.id Í∏∞Î∞ò ÏóêÎü¨ Î°úÍ∑∏ Ï∂îÏ†Å ‚Üí Í∑ºÎ≥∏ ÏõêÏù∏ Î∂ÑÏÑù                        ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Grafana Exemplars ‚Üí Î©îÌä∏Î¶≠ Ïù¥ÏÉÅÏπòÏóêÏÑú ÏÉòÌîå Ìä∏Î†àÏù¥Ïä§ Ï∂îÏ∂ú             ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Alertmanager ‚Üí Slack ‚Üí Agent Ïª®ÌÖçÏä§Ìä∏ Ï£ºÏûÖ                           ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <!-- Key Integration Points -->
            <table class="modal-table">
                <tr><th>Integration</th><th>Source</th><th>Target</th><th>Agent Feedback ÌôúÏö©</th></tr>
                <tr><td>trace.id Correlation</td><td>Kibana logs</td><td>Jaeger spans</td><td>Î∂ÑÏÇ∞ Ìä∏ÎûúÏû≠ÏÖò ÏóêÎü¨ Ï∂îÏ†Å</td></tr>
                <tr><td>Grafana Exemplars</td><td>Prometheus metrics</td><td>Jaeger traces</td><td>p99 Ïù¥ÏÉÅÏπò ÏõêÏù∏ Î∂ÑÏÑù</td></tr>
                <tr><td>Alertmanager</td><td>PrometheusRule</td><td>Slack #eco_sre</td><td>Ïã§ÏãúÍ∞Ñ Ïû•Ïï† Ïª®ÌÖçÏä§Ìä∏</td></tr>
                <tr><td>Kiali Service Graph</td><td>Istio Telemetry</td><td>Traffic visualization</td><td>ÏÑúÎπÑÏä§ ÏùòÏ°¥ÏÑ± Î∂ÑÏÑù</td></tr>
            </table>

            <!-- Observability as Environment Awareness -->
            <div style="margin-top: 1rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid #8b5cf6;">
                <strong style="color: #8b5cf6;">Observability: AgentÏùò ÌôòÍ≤Ω Ïù∏Ïãù Î≥¥Ï°∞</strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.6;">
                    ‚Ä¢ <strong>Ïã§ÏãúÍ∞Ñ ÌôòÍ≤Ω Ïù∏Ïãù</strong> ‚Äî AgentÍ∞Ä ÌÅ¥Îü¨Ïä§ÌÑ∞ ÏÉÅÌÉúÎ•º Í¥ÄÏ∞∞ÌïòÍ≥† ÎîîÎ≤ÑÍπÖ Ïª®ÌÖçÏä§Ìä∏ ÌôïÎ≥¥<br>
                    ‚Ä¢ <strong>trace.id Í∏∞Î∞ò Ï∂îÏ†Å</strong> ‚Äî 1 ÏöîÏ≤≠ ‚Üí 10~30Í∞ú Î°úÍ∑∏Î•º Îã®Ïùº Ìä∏Î†àÏù¥Ïä§Î°ú Ïó∞Í≤∞<br>
                    ‚Ä¢ <strong>Î©îÌä∏Î¶≠ Ïª®ÌÖçÏä§Ìä∏</strong> ‚Äî p99 ÏßÄÏó∞, ÏóêÎü¨Ïú®, Î¶¨ÏÜåÏä§ ÏÇ¨Ïö©Îüâ Îì± ÌôòÍ≤Ω Ï†ïÎ≥¥ Ï†úÍ≥µ<br>
                    <em style="color: var(--text-muted); font-size: 0.8rem;">‚Äª ÌïµÏã¨ÏùÄ Î¨∏ÏÑú Í∏∞Î∞ò Self-RAG Ïª®ÌÖçÏä§Ìä∏, ObservabilityÎäî ÌôòÍ≤Ω Ïù∏Ïãù Î≥¥Ï°∞ Ïó≠Ìï†</em>
                </div>
            </div>

            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® Blog</span>
                    <span class="lang-en">Related Blog</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/32" target="_blank" rel="noopener">Observability ÏÑ§Í≥Ñ</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/33" target="_blank" rel="noopener">EFK Íµ¨Ï∂ï</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/37" target="_blank" rel="noopener">Jaeger Ìä∏Î†àÏù¥Ïã±</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/41" target="_blank" rel="noopener">trace.id Ïó∞Îèô</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/42" target="_blank" rel="noopener">Ï†ÑÏ≤¥ Ï†ïÎ¶¨</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Context-First Development with Self-RAG -->
    <div class="modal-overlay" id="modal-cluster-world">
        <div class="modal-content" style="max-width: 1200px;">
            <button class="modal-close" onclick="closeModal('modal-cluster-world')">√ó</button>
            <h3 class="modal-title">‚ò∏Ô∏è 24-Node Distributed Cluster: System Architecture</h3>

            <!-- 24-Node Cluster Architecture Overview -->
            <div style="background: rgba(0,0,0,0.3); padding: 1.2rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <div style="font-size: 1rem; font-weight: 700; color: var(--primary); margin-bottom: 0.75rem;">
                    <span class="lang-ko">üèóÔ∏è 24-Node Î∂ÑÏÇ∞ ÌÅ¥Îü¨Ïä§ÌÑ∞ ÏïÑÌÇ§ÌÖçÏ≤ò</span>
                    <span class="lang-en">üèóÔ∏è 24-Node Distributed Cluster Architecture</span>
                </div>
                <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.7; margin-bottom: 1rem;">
                    <span class="lang-ko">Self-managed Kubernetes ÌÅ¥Îü¨Ïä§ÌÑ∞Ïóê 7Í∞ú ÎèÑÎ©îÏù∏ ÏÑúÎπÑÏä§, 8Í∞ú ÏõåÏª§, 4Ï¢Ö Redis ÌÅ¥Îü¨Ïä§ÌÑ∞Î•º Î∞∞ÏπòÌïú ÎßàÏù¥ÌÅ¨Î°úÏÑúÎπÑÏä§ ÏïÑÌÇ§ÌÖçÏ≤òÏûÖÎãàÎã§.</span>
                    <span class="lang-en">Microservices architecture with 7 domain services, 8 workers, and 4 Redis clusters deployed on a self-managed Kubernetes cluster.</span>
                </div>
                <!-- Core Architecture Values -->
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.75rem;">
                    <div style="background: rgba(0,255,136,0.15); padding: 0.8rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 0.9rem; font-weight: 700; color: var(--primary);">DOMA</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">
                            <span class="lang-ko">ÎèÑÎ©îÏù∏Î≥Ñ ÎèÖÎ¶Ω ÏÑúÎπÑÏä§</span>
                            <span class="lang-en">Domain-Oriented MSA</span>
                        </div>
                    </div>
                    <div style="background: rgba(59,130,246,0.15); padding: 0.8rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 0.9rem; font-weight: 700; color: #3b82f6;">Clean Architecture</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">
                            <span class="lang-ko">Port/Adapter Ìå®ÌÑ¥</span>
                            <span class="lang-en">Port/Adapter Pattern</span>
                        </div>
                    </div>
                    <div style="background: rgba(138,43,226,0.15); padding: 0.8rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 0.9rem; font-weight: 700; color: #8b5cf6;">4-Tier Layer</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">
                            <span class="lang-ko">Presentation ‚Üí Infra</span>
                            <span class="lang-en">Presentation ‚Üí Infra</span>
                        </div>
                    </div>
                    <div style="background: rgba(245,158,11,0.15); padding: 0.8rem; border-radius: 6px; text-align: center;">
                        <div style="font-size: 0.9rem; font-weight: 700; color: #f59e0b;">EDA</div>
                        <div style="font-size: 0.7rem; color: var(--text-muted); margin-top: 0.25rem;">
                            <span class="lang-ko">MQ + Event Bus</span>
                            <span class="lang-en">MQ + Event Bus</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Physical Node Cluster Diagram -->
            <h4 style="color: var(--primary); margin: 1.5rem 0 0.75rem; font-size: 1rem;">
                <span class="lang-ko">üì¶ Î¨ºÎ¶¨ ÎÖ∏Îìú ÌÅ¥Îü¨Ïä§ÌÑ∞</span>
                <span class="lang-en">üì¶ Physical Node Cluster</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.7rem; margin-bottom: 1.5rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Physical Node Cluster (AWS EC2 ¬∑ Terraform)                                    ‚îÇ
‚îÇ  Master: 1 ‚îÇ API: 8 ‚îÇ Worker: 4 ‚îÇ Data: 5 ‚îÇ Platform: 6 = 24 Nodes + 1 Master   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  CONTROL PLANE (t3.xlarge ¬∑ 4vCPU ¬∑ 16GB)                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  k8s-master: API Server, etcd, Scheduler, Controller Manager    ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  API NODES (t3.small~medium ¬∑ 8 nodes)                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  auth  ‚îÇ ‚îÇ  scan  ‚îÇ ‚îÇ  chat  ‚îÇ ‚îÇ  char  ‚îÇ ‚îÇ  loc   ‚îÇ ‚îÇ users  ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  2GB   ‚îÇ ‚îÇ  4GB   ‚îÇ ‚îÇ  4GB   ‚îÇ ‚îÇ  2GB   ‚îÇ ‚îÇ  2GB   ‚îÇ ‚îÇ  2GB   ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ images ‚îÇ ‚îÇ  info  ‚îÇ  ‚Üí ÎèÑÎ©îÏù∏Î≥Ñ ÎèÖÎ¶Ω ÎÖ∏Îìú (DOMA)                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  2GB   ‚îÇ ‚îÇ  2GB   ‚îÇ                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  WORKER NODES (t3.medium ¬∑ 4 nodes)     DATA NODES (t3.small~large ¬∑ 5) ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ storage √ó 2  ‚îÇ ‚îÇ   ai √ó 2     ‚îÇ     ‚îÇPostgreSQL‚îÇ ‚îÇ  Redis √ó 4       ‚îÇ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ auth/users/  ‚îÇ ‚îÇ scan/chat    ‚îÇ     ‚îÇ  8GB     ‚îÇ ‚îÇ auth‚îÇstream‚îÇcache‚îÇ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ char/info    ‚îÇ ‚îÇ GPT/Gemini   ‚îÇ     ‚îÇ 7 schemas‚îÇ ‚îÇ pubsub (2GB each)‚îÇ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  PLATFORM NODES (t3.small~xlarge ¬∑ 6 nodes)                             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ rabbitmq ‚îÇ ‚îÇmonitoring‚îÇ ‚îÇ logging  ‚îÇ ‚îÇ ingress  ‚îÇ ‚îÇsse-gw‚îÇevt-rtr ‚îÇ ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ  4GB     ‚îÇ ‚îÇ  8GB     ‚îÇ ‚îÇ  16GB    ‚îÇ ‚îÇ  4GB     ‚îÇ ‚îÇ  2GB ‚îÇ  2GB   ‚îÇ ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ Quorum Q ‚îÇ ‚îÇProm/Graf ‚îÇ ‚îÇ EFK+ES   ‚îÇ ‚îÇIstio+authz‚îÇ ‚îÇ SSE  ‚îÇ Streams‚îÇ ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Total: 54 vCPU ¬∑ 114 GB RAM ¬∑ 880 GB Storage ¬∑ IaC: terraform/modules/ec2    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <!-- System Architecture Diagram -->
            <h4 style="color: #3b82f6; margin: 1.5rem 0 0.75rem; font-size: 1rem;">
                <span class="lang-ko">üîÄ ÏãúÏä§ÌÖú ÏïÑÌÇ§ÌÖçÏ≤ò</span>
                <span class="lang-en">üîÄ System Architecture</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.7rem; margin-bottom: 1.5rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  System Architecture (5-Layer + EDA)                                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ AWS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Route53 (*.dev.growbin.app) ‚Üí ALB (ACM SSL) ‚Üí CloudFront + S3 (images) ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                        ‚îÇ                                        ‚îÇ
‚îÇ   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ‚îÇ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê    ‚îÇ
‚îÇ   L1. EDGE                             ‚ñº                                        ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Istio Ingress Gateway ‚îÄ‚îÄ‚ñ∫ ext-authz (Go gRPC) ‚îÄ‚îÄ‚ñ∫ JWT/Blacklist Check  ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                       ‚îÇ                                         ‚îÇ
‚îÇ   L2. SERVICE                         ‚ñº                                         ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ auth ‚îÇ‚îÇ scan ‚îÇ‚îÇ chat ‚îÇ‚îÇ char ‚îÇ‚îÇ loc  ‚îÇ‚îÇusers ‚îÇ‚îÇimages‚îÇ + info       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ MQ    ‚îÇ MQ    ‚îÇ MQ    ‚îÇ MQ    ‚îÇ       ‚îÇ                           ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ         ‚îÇ       ‚îÇ       ‚îÇ       ‚îÇ       ‚îÇ       ‚îÇ                               ‚îÇ
‚îÇ   L3. INTEGRATION                 ‚ñº     ‚ñº       ‚ñº                               ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  RabbitMQ ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫ Workers (8Ï¢Ö) ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫ Redis Streams ‚óÑ‚îÄ‚îÄ‚îÄ‚ñ∫ Event Router    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  (Quorum)       scan/chat/auth      (4 shards)         (Consumer Group) ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                 char/users/info                                ‚ñº        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                         Redis Pub/Sub   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                               ‚ñº         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                          SSE Gateway    ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   L4. PERSISTENCE                                                               ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  PostgreSQL (7 schemas) ‚îÇ Redis Auth ‚îÇ Redis Cache ‚îÇ Redis State KV     ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   L5. PLATFORM (GitOps + Observability)                                         ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  ArgoCD (App-of-Apps) ‚îÇ KEDA ‚îÇ Prometheus/Grafana ‚îÇ Jaeger ‚îÇ EFK Stack  ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <!-- Layer Description Table -->
            <h4 style="color: #8b5cf6; margin: 1.5rem 0 0.75rem; font-size: 1rem;">
                <span class="lang-ko">üìã 5-Layer ÏÉÅÏÑ∏ ÏÑ§Î™Ö</span>
                <span class="lang-en">üìã 5-Layer Details</span>
            </h4>
            <table class="modal-table" style="font-size: 0.85rem;">
                <tr>
                    <th>Layer</th>
                    <th><span class="lang-ko">Íµ¨ÏÑ±ÏöîÏÜå</span><span class="lang-en">Components</span></th>
                    <th><span class="lang-ko">Ïó≠Ìï†</span><span class="lang-en">Role</span></th>
                    <th><span class="lang-ko">ÌïµÏã¨ Í∏∞Ïà†</span><span class="lang-en">Key Tech</span></th>
                </tr>
                <tr>
                    <td style="color: #dc2626;"><strong>L1. Edge</strong></td>
                    <td>Istio Ingress, ext-authz</td>
                    <td><span class="lang-ko">Ìä∏ÎûòÌîΩ ÎùºÏö∞ÌåÖ, JWT Ïù∏Ï¶ù/Ïù∏Í∞Ä</span><span class="lang-en">Traffic routing, JWT auth</span></td>
                    <td>Istio 1.24, Go gRPC, Redis Blacklist</td>
                </tr>
                <tr>
                    <td style="color: #3b82f6;"><strong>L2. Service</strong></td>
                    <td>8 Domain APIs + 2 Gateways</td>
                    <td><span class="lang-ko">ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ, SSE Ïã§ÏãúÍ∞Ñ ÌÜµÏã†</span><span class="lang-en">Business logic, SSE realtime</span></td>
                    <td>FastAPI, Clean Architecture, CQRS</td>
                </tr>
                <tr>
                    <td style="color: #f59e0b;"><strong>L3. Integration</strong></td>
                    <td>RabbitMQ, Workers (8), Event Router</td>
                    <td><span class="lang-ko">ÎπÑÎèôÍ∏∞ Ï≤òÎ¶¨, Ïù¥Î≤§Ìä∏ Ïä§Ìä∏Î¶¨Î∞ç</span><span class="lang-en">Async processing, event streaming</span></td>
                    <td>Celery/Taskiq, Redis Streams, Pub/Sub</td>
                </tr>
                <tr>
                    <td style="color: var(--primary);"><strong>L4. Persistence</strong></td>
                    <td>PostgreSQL, Redis √ó4</td>
                    <td><span class="lang-ko">Îç∞Ïù¥ÌÑ∞ ÏòÅÏÜçÌôî, Ï∫êÏã±, ÏÉÅÌÉú Í¥ÄÎ¶¨</span><span class="lang-en">Data persistence, caching, state</span></td>
                    <td>7 schemas, Auth/Cache/Streams/Pub/Sub</td>
                </tr>
                <tr>
                    <td style="color: #8b5cf6;"><strong>L5. Platform</strong></td>
                    <td>ArgoCD, KEDA, Observability Stack</td>
                    <td><span class="lang-ko">GitOps Î∞∞Ìè¨, Ïò§ÌÜ†Ïä§ÏºÄÏùºÎßÅ, Î™®ÎãàÌÑ∞ÎßÅ</span><span class="lang-en">GitOps deploy, autoscaling, monitoring</span></td>
                    <td>App-of-Apps, Prometheus/Jaeger/EFK</td>
                </tr>
            </table>

            <!-- EDA Flow Table -->
            <h4 style="color: #f59e0b; margin: 1.5rem 0 0.75rem; font-size: 1rem;">
                <span class="lang-ko">üîÄ EDA Ïù¥Î≤§Ìä∏ ÌùêÎ¶Ñ</span>
                <span class="lang-en">üîÄ EDA Event Flow</span>
            </h4>
            <table class="modal-table" style="font-size: 0.85rem;">
                <tr>
                    <th><span class="lang-ko">Îã®Í≥Ñ</span><span class="lang-en">Phase</span></th>
                    <th><span class="lang-ko">ÌùêÎ¶Ñ</span><span class="lang-en">Flow</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td><strong>1. Request</strong></td>
                    <td>Client ‚Üí API ‚Üí RabbitMQ</td>
                    <td><span class="lang-ko">APIÍ∞Ä ÏûëÏóÖÏùÑ MQÏóê Î∞úÌñâ (Quorum Queue)</span><span class="lang-en">API publishes task to MQ (Quorum Queue)</span></td>
                </tr>
                <tr>
                    <td><strong>2. Process</strong></td>
                    <td>Worker ‚Üí Business Logic</td>
                    <td><span class="lang-ko">Celery/Taskiq ÏõåÏª§Í∞Ä ÎπÑÎèôÍ∏∞ Ï≤òÎ¶¨</span><span class="lang-en">Celery/Taskiq worker async processing</span></td>
                </tr>
                <tr>
                    <td><strong>3. Event</strong></td>
                    <td>Worker ‚Üí Redis Streams</td>
                    <td><span class="lang-ko">Ï≤òÎ¶¨ ÏôÑÎ£å Ïù¥Î≤§Ìä∏Î•º Ïä§Ìä∏Î¶ºÏóê Í∏∞Î°ù</span><span class="lang-en">Record completion event to stream</span></td>
                </tr>
                <tr>
                    <td><strong>4. Fan-out</strong></td>
                    <td>Event Router ‚Üí Redis Pub/Sub</td>
                    <td><span class="lang-ko">Consumer GroupÏù¥ Ïù¥Î≤§Ìä∏Î•º Pub/SubÎ°ú Ï†ÑÌåå</span><span class="lang-en">Consumer Group propagates to Pub/Sub</span></td>
                </tr>
                <tr>
                    <td><strong>5. Realtime</strong></td>
                    <td>SSE Gateway ‚Üí Client</td>
                    <td><span class="lang-ko">Pub/Sub Íµ¨ÎèÖ ‚Üí SSEÎ°ú ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Ïóê Ìë∏Ïãú</span><span class="lang-en">Subscribe Pub/Sub ‚Üí Push to client via SSE</span></td>
                </tr>
            </table>

            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR / Release</span>
                    <span class="lang-en">Related PRs / Releases</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.0" target="_blank" rel="noopener">v1.0.0</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/318" target="_blank" rel="noopener">#318 NetworkPolicy</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Event%20Streams%20%26%20Scaling" target="_blank" rel="noopener"><span class="lang-ko">Event Streams (Blog)</span><span class="lang-en">Event Streams (Blog)</span></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Context-First Development (Recursive Self-Improvement) -->
    <div class="modal-overlay" id="modal-context-first">
        <div class="modal-content" style="max-width: 1050px;">
            <button class="modal-close" onclick="closeModal('modal-context-first')">√ó</button>
            <h3 class="modal-title">üîÅ Context-First Development</h3>

            <!-- Overview -->
            <p style="color: var(--text-secondary); font-size: 0.9rem; line-height: 1.7; margin-bottom: 1.5rem;">
                <span class="lang-ko">
                    AnthropicÏùÄ Claude CodeÎ°ú ClaudeÎ•º Í∞úÎ∞úÌïòÎ©∞ <strong style="color: var(--primary);">90% Ïù¥ÏÉÅÏùò ÏΩîÎìúÎ•º AIÍ∞Ä ÏûëÏÑ±</strong>Ìï©ÎãàÎã§.
                    ÌïµÏã¨ÏùÄ <strong>CLAUDE.md</strong> ÏûêÎèô Ï£ºÏûÖÍ≥º <strong>Skills</strong>Ïùò Progressive DisclosureÏûÖÎãàÎã§.
                    Eco¬≤Îäî Ïù¥ Î∞©ÏãùÏùÑ Ï†ÅÏö©ÌïòÏó¨ Î¨∏ÏÑú Í∏∞Î∞ò Self-RAG Ïª®ÌÖçÏä§Ìä∏Î•º Ï∂ïÏ†ÅÌïòÎ©∞,
                    <strong style="color: #8b5cf6;">GitOps(ArgoCD)</strong>Î°ú ÌÅ¥Îü¨Ïä§ÌÑ∞ÏôÄ ÏΩîÎìúÎ≤†Ïù¥Ïä§Í∞Ä ÎèôÍ∏∞ÌôîÎêòÏñ¥
                    ÏΩîÎìúÏóê ÎåÄÌïú Ïù¥Ìï¥Í∞Ä Í≥ß Î∞∞Ìè¨ ÌôòÍ≤ΩÏóê ÎåÄÌïú Ïù¥Ìï¥Î°ú Ïù¥Ïñ¥ÏßëÎãàÎã§.
                </span>
                <span class="lang-en">
                    Anthropic develops Claude using Claude Code, with <strong style="color: var(--primary);">over 90% of code written by AI</strong>.
                    The key is <strong>CLAUDE.md</strong> auto-injection and <strong>Skills</strong>' Progressive Disclosure.
                    Eco¬≤ applies this approach, accumulating document-based Self-RAG context.
                    With <strong style="color: #8b5cf6;">GitOps(ArgoCD)</strong> syncing the cluster with codebase,
                    understanding the code directly translates to understanding the deployment environment.
                </span>
            </p>

            <!-- Improvement Loop Diagram -->
            <div style="display: flex; justify-content: center; margin-bottom: 1.5rem;">
                <div style="display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; justify-content: center;">
                    <div style="background: rgba(245,158,11,0.15); padding: 0.6rem 1rem; border-radius: 6px; border: 1px solid #f59e0b;">
                        <span style="font-weight: 600; color: #f59e0b;">1. Research</span>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">foundations/</div>
                    </div>
                    <span style="color: var(--text-muted);">‚Üí</span>
                    <div style="background: rgba(59,130,246,0.15); padding: 0.6rem 1rem; border-radius: 6px; border: 1px solid #3b82f6;">
                        <span style="font-weight: 600; color: #3b82f6;">2. Design</span>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">plans/</div>
                    </div>
                    <span style="color: var(--text-muted);">‚Üí</span>
                    <div style="background: rgba(138,43,226,0.15); padding: 0.6rem 1rem; border-radius: 6px; border: 1px solid #8b5cf6;">
                        <span style="font-weight: 600; color: #8b5cf6;">3. Implement</span>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">Agent + Skills</div>
                    </div>
                    <span style="color: var(--text-muted);">‚Üí</span>
                    <div style="background: rgba(0,255,136,0.15); padding: 0.6rem 1rem; border-radius: 6px; border: 1px solid var(--primary);">
                        <span style="font-weight: 600; color: var(--primary);">4. Deploy</span>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">GitOps</div>
                    </div>
                    <span style="color: var(--text-muted);">‚Üí</span>
                    <div style="background: rgba(220,38,38,0.15); padding: 0.6rem 1rem; border-radius: 6px; border: 1px solid #dc2626;">
                        <span style="font-weight: 600; color: #dc2626;">5. Report</span>
                        <div style="font-size: 0.7rem; color: var(--text-muted);">reports/ ‚Üí üîÅ</div>
                    </div>
                </div>
            </div>

            <!-- Eco¬≤ Implementation Table -->
            <table class="modal-table" style="font-size: 0.85rem;">
                <tr>
                    <th style="width: 25%;"><span class="lang-ko">Í∞úÎÖê</span><span class="lang-en">Concept</span></th>
                    <th style="width: 30%;">Eco¬≤ <span class="lang-ko">Ï†ÅÏö©</span><span class="lang-en">Implementation</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td><strong>CLAUDE.md</strong></td>
                    <td><code>CLAUDE.md</code></td>
                    <td><span class="lang-ko">ÏÑ∏ÏÖò ÏãúÏûë Ïãú ÌîÑÎ°úÏ†ùÌä∏ Ïª®ÌÖçÏä§Ìä∏ ÏûêÎèô Ï£ºÏûÖ</span><span class="lang-en">Auto-inject project context at session start</span></td>
                </tr>
                <tr>
                    <td><strong>Skills</strong></td>
                    <td><code>/.claude/skills/</code> (27Í∞ú)</td>
                    <td><span class="lang-ko">k8s-debug, load-test, pr-review Îì± Î∞òÎ≥µ ÏûëÏóÖ ÏûêÎèôÌôî</span><span class="lang-en">Automate k8s-debug, load-test, pr-review, etc.</span></td>
                </tr>
                <tr>
                    <td><strong>Progressive Disclosure</strong></td>
                    <td>foundations ‚Üí plans ‚Üí reports</td>
                    <td><span class="lang-ko">ÌïÑÏöîÌïú Î¨∏ÏÑúÎßå Ï†êÏßÑÏ†Å Î°úÎìú (ÌÜ†ÌÅ∞ Ìö®Ïú®)</span><span class="lang-en">Load only needed docs progressively (token efficient)</span></td>
                </tr>
                <tr>
                    <td><strong>Bash ÏÑ†Ìò∏</strong></td>
                    <td>kubectl, terraform, helm</td>
                    <td><span class="lang-ko">MCP 50K-134K ÌÜ†ÌÅ∞ vs Bash ÏßÅÏ†ë Ï†ëÍ∑º</span><span class="lang-en">MCP 50K-134K tokens vs Bash direct access</span></td>
                </tr>
            </table>

            <!-- Recursive Self-Improvement Workflow -->
            <h4 style="color: #8b5cf6; margin: 1.5rem 0 0.75rem; font-size: 0.95rem;">
                <span class="lang-ko">üîÑ Ïû¨Í∑ÄÏ†Å ÏûêÍ∏∞Í∞úÏÑ† ÌÅ¥Îü¨Ïä§ÌÑ∞ ÏõåÌÅ¨ÌîåÎ°úÏö∞</span>
                <span class="lang-en">üîÑ Recursive Self-Improvement Cluster Workflow</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.7rem; margin-bottom: 1rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Context-First Development: Self-RAG + Runtime Environment          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                    Self-RAG Context (Progressive Disclosure)            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ CLAUDE.md    ‚îÇ ‚îÇ foundations/ ‚îÇ ‚îÇ   plans/     ‚îÇ ‚îÇ  reports/    ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ (Auto-load)  ‚îÇ ‚îÇ (Research)   ‚îÇ ‚îÇ (Design)     ‚îÇ ‚îÇ (Feedback)   ‚îÇ    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                   ‚îÇ                                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ   /.claude/skills/ (17) ‚îÇ  ‚Üê BashÎ°ú SKILL.md Î°úÎìú‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îÇ   Progressive Disclosure ‚îÇ    (MCP ÎåÄÎπÑ Í≤ΩÎüâ)     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                       ‚îÇ                                         ‚îÇ
‚îÇ                          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                            ‚îÇ
‚îÇ                          ‚îÇ     AI Agent (Claude)   ‚îÇ                            ‚îÇ
‚îÇ                          ‚îÇ  Context Window ÏµúÏ†ÅÌôî   ‚îÇ                            ‚îÇ
‚îÇ                          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                            ‚îÇ
‚îÇ                                       ‚îÇ                                         ‚îÇ
‚îÇ   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ñº‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê    ‚îÇ
‚îÇ             RUNTIME: develop branch = 24-Node K8s Cluster State                 ‚îÇ
‚îÇ   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ   ‚îÇ  GitOps (ArgoCD)  ‚îÇ  8 Domain APIs    ‚îÇ  Observability               ‚îÇ     ‚îÇ
‚îÇ   ‚îÇ  Zero-touch Deploy‚îÇ  8 Workers + EDA  ‚îÇ  (ÌôòÍ≤Ω Ïù∏Ïãù Î≥¥Ï°∞)             ‚îÇ     ‚îÇ
‚îÇ   ‚îÇ  App-of-Apps      ‚îÇ  RabbitMQ/Redis   ‚îÇ  Prometheus/Jaeger/EFK       ‚îÇ     ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                       ‚îÇ                                         ‚îÇ
‚îÇ                          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                            ‚îÇ
‚îÇ                          ‚îÇ   Deploy ‚Üí Observe ‚Üí    ‚îÇ                            ‚îÇ
‚îÇ                          ‚îÇ   Report ‚Üí Loop (RAG)   ‚îÇ                            ‚îÇ
‚îÇ                          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                            ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <p style="color: var(--text-muted); font-size: 0.8rem; text-align: center; margin-bottom: 1rem; line-height: 1.6;">
                <span class="lang-ko">
                    <strong>Self-RAG Context</strong>Í∞Ä AgentÏùò ÌåêÎã® Í∑ºÍ±∞Î•º ÌòïÏÑ±ÌïòÍ≥†, <strong>Skills</strong>Í∞Ä Î∞òÎ≥µ ÏûëÏóÖÏùÑ ÏûêÎèôÌôîÌïòÎ©∞<br>
                    <strong>Runtime Environment</strong>ÏóêÏÑú Deploy ‚Üí Observe ‚Üí Report ÏÇ¨Ïù¥ÌÅ¥Ïù¥ ÏàúÌôò
                </span>
                <span class="lang-en">
                    <strong>Self-RAG Context</strong> forms Agent's decision basis, <strong>Skills</strong> automate repetitive tasks<br>
                    Deploy ‚Üí Observe ‚Üí Report cycle loops in <strong>Runtime Environment</strong>
                </span>
            </p>

            <!-- Key Insights from Claude Code -->
            <h4 style="color: #f59e0b; margin: 1.5rem 0 0.75rem; font-size: 0.95rem;">
                <span class="lang-ko">üí° ÌïµÏã¨ ÏùòÏÇ¨Í≤∞Ï†ï</span>
                <span class="lang-en">üí° Key Design Decisions</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 1.25rem;">
                <div style="background: rgba(245,158,11,0.1); padding: 0.9rem; border-radius: 8px; border-top: 3px solid #f59e0b;">
                    <div style="font-size: 0.9rem; font-weight: 700; color: #f59e0b; margin-bottom: 0.4rem;">
                        <span class="lang-ko">‚ö° Bash ÏÑ†Ìò∏</span>
                        <span class="lang-en">‚ö° Bash Preferred</span>
                    </div>
                    <div style="font-size: 0.78rem; color: var(--text-secondary); line-height: 1.5;">
                        <span class="lang-ko">MCPÎäî 50K-134K ÌÜ†ÌÅ∞ ÏÜåÎ™®. BashÎäî ÌôòÍ≤Ω ÎèÑÍµ¨Ïóê ÏßÅÏ†ë Ï†ëÍ∑ºÌïòÏó¨ Ïª®ÌÖçÏä§Ìä∏ Ìö®Ïú®Ï†Å</span>
                        <span class="lang-en">MCP consumes 50K-134K tokens. Bash directly accesses env tools, context efficient</span>
                    </div>
                </div>
                <div style="background: rgba(138,43,226,0.1); padding: 0.9rem; border-radius: 8px; border-top: 3px solid #8b5cf6;">
                    <div style="font-size: 0.9rem; font-weight: 700; color: #8b5cf6; margin-bottom: 0.4rem;">
                        <span class="lang-ko">üìÑ Skills = ÌååÏùºÏãúÏä§ÌÖú</span>
                        <span class="lang-en">üìÑ Skills = Filesystem</span>
                    </div>
                    <div style="font-size: 0.78rem; color: var(--text-secondary); line-height: 1.5;">
                        <span class="lang-ko">YAML Î©îÌÉÄ ‚Üí SKILL.md ‚Üí ÎßÅÌÅ¨Îêú ÌååÏùº. Ï†êÏßÑÏ†Å Î°úÎìúÎ°ú Agent Ïò®Î≥¥Îî© Í∞ÄÏÜçÌôî</span>
                        <span class="lang-en">YAML meta ‚Üí SKILL.md ‚Üí linked files. Progressive load accelerates Agent onboarding</span>
                    </div>
                </div>
                <div style="background: rgba(0,255,136,0.1); padding: 0.9rem; border-radius: 8px; border-top: 3px solid var(--primary);">
                    <div style="font-size: 0.9rem; font-weight: 700; color: var(--primary); margin-bottom: 0.4rem;">
                        <span class="lang-ko">‚ò∏Ô∏è GitOps</span>
                        <span class="lang-en">‚ò∏Ô∏è GitOps</span>
                    </div>
                    <div style="font-size: 0.78rem; color: var(--text-secondary); line-height: 1.5;">
                        <span class="lang-ko">ÏΩîÎìúÎ≤†Ïù¥Ïä§Í∞Ä ÌÅ¥Îü¨Ïä§ÌÑ∞ÏôÄ syncÎêòÏñ¥ Desired StateÎ°ú Í∏∞Îä•. Agent ÏûëÏóÖ Î≤îÏúÑÍ∞Ä Ïù∏ÌîÑÎùºÍπåÏßÄ ÌôïÏû•ÎêòÎ©∞ state Ï†ÑÏù¥Î°ú ÏãúÏä§ÌÖú Î∞úÏ†Ñ</span>
                        <span class="lang-en">Codebase syncs with cluster as Desired State. Agent scope extends to infra, system evolves through state transitions</span>
                    </div>
                </div>
            </div>

            <!-- Core Recursive Loop -->
            <div style="padding: 1rem; background: rgba(0,255,136,0.12); border-radius: 8px; border: 1px solid rgba(0,255,136,0.4); margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <span style="font-size: 1.2rem;">üîÅ</span>
                    <strong style="color: var(--primary); font-size: 0.95rem;">
                        <span class="lang-ko">Ïû¨Í∑ÄÏ†Å ÏûêÍ∏∞Í∞úÏÑ† Î£®ÌîÑ</span>
                        <span class="lang-en">Recursive Self-Improvement Loop</span>
                    </strong>
                </div>
                <div style="color: var(--text-secondary); font-size: 0.85rem; line-height: 1.7;">
                    <span class="lang-ko">
                        Îß§ ÏÑ∏ÏÖòÏùò ÏÇ∞Ï∂úÎ¨ºÏù¥ <code style="color: #f59e0b;">reports/</code>Ïóê Ï∂ïÏ†ÅÎêòÍ≥†, Ïù¥Îäî Îã§Ïùå ÏÑ∏ÏÖòÏùò <code style="color: #3b82f6;">foundations/</code>Í∞Ä ÎêòÏñ¥ AgentÏùò ÌåêÎã® Í∑ºÍ±∞Î°ú ÏûëÏö©<br>
                        Î∞òÎ≥µ ÏûëÏóÖÏùÄ <code style="color: #8b5cf6;">skills/</code>Î°ú Ï†ïÏ†úÎêòÏñ¥ ÏΩîÎî© ÏóêÏù¥Ï†ÑÌä∏(ÏÑ∏ÏÖò) Ïò®Î≥¥Îî© ÎπÑÏö© ÏóÜÏù¥ Ï¶âÏãú Ïû¨ÏÇ¨Ïö©<br>
                        ‚Üí <strong style="color: var(--primary);">Î£®ÌîÑÎ•º Í±∞Îì≠Ìï†ÏàòÎ°ù ÌîÑÎ°úÏ†ùÌä∏ ÌäπÌôîÎêú ÏùòÏÇ¨Í≤∞Ï†ï Ï†ïÎ∞ÄÎèÑÍ∞Ä ÎàÑÏ†Å ÏÉÅÏäπ</strong>
                    </span>
                    <span class="lang-en">
                        Each session's outputs accumulate in <code style="color: #f59e0b;">reports/</code>, becoming <code style="color: #3b82f6;">foundations/</code> for next session as Agent's decision basis<br>
                        Repetitive tasks are refined into <code style="color: #8b5cf6;">skills/</code>, instantly reusable without coding agent (session) onboarding cost<br>
                        ‚Üí <strong style="color: var(--primary);">Each loop iteration compounds project-specific decision precision</strong>
                    </span>
                </div>
            </div>

            <!-- Why Context-First -->
            <div style="padding: 1rem; background: rgba(59,130,246,0.1); border-radius: 8px; border-left: 3px solid #3b82f6;">
                <strong style="color: #3b82f6;">
                    <span class="lang-ko">Ïôú Context-FirstÏù∏Í∞Ä?</span>
                    <span class="lang-en">Why Context-First?</span>
                </strong>
                <div class="modal-diagram" style="margin-top: 0.75rem; font-size: 0.7rem;">
<span class="lang-ko">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              üìâ Context Rot ‚Äî MIT RLM Research (arxiv.org/pdf/2512.24601v1)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Context Window Limits: Opus 200K ‚îÇ GPT 272K ‚îÇ Gemini 1M (finite resource)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Token Range    ‚îÇ Performance ‚îÇ Bar                        ‚îÇ Status            ‚îÇ
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ   0K -   8K     ‚îÇ    100%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà       ‚îÇ ‚úÖ baseline       ‚îÇ
‚îÇ   8K -  16K     ‚îÇ     85%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë       ‚îÇ ‚ö†Ô∏è  slight decay  ‚îÇ
‚îÇ  16K -  32K     ‚îÇ     60%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë       ‚îÇ ‚ö†Ô∏è  noticeable    ‚îÇ
‚îÇ  32K -  64K     ‚îÇ     40%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë       ‚îÇ üî¥ significant    ‚îÇ
‚îÇ  64K - 128K     ‚îÇ     20%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë       ‚îÇ üî¥ severe         ‚îÇ
‚îÇ 128K+           ‚îÇ     10%     ‚îÇ ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë       ‚îÇ ‚ùå near failure   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  "Claude Code ÌûàÏä§ÌÜ†Î¶¨Í∞Ä ÎπÑÎåÄÌï¥ÏßÄÍ±∞ÎÇò ChatGPTÏôÄ Ïò§Îûò ÎåÄÌôîÌïòÎ©¥                   ‚îÇ
‚îÇ   ÎßàÏπò Î™®Îç∏Ïù¥... Î©çÏ≤≠Ìï¥ÏßÄÎäî Í≤É Í∞ôÏùÄ ÌòÑÏÉÅ" ‚Äî MIT RLM Paper                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span>
<span class="lang-en">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              üìâ Context Rot ‚Äî MIT RLM Research (arxiv.org/pdf/2512.24601v1)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Context Window Limits: Opus 200K ‚îÇ GPT 272K ‚îÇ Gemini 1M (finite resource)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Token Range    ‚îÇ Performance ‚îÇ Bar                        ‚îÇ Status            ‚îÇ
‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ   0K -   8K     ‚îÇ    100%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà       ‚îÇ ‚úÖ baseline       ‚îÇ
‚îÇ   8K -  16K     ‚îÇ     85%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë       ‚îÇ ‚ö†Ô∏è  slight decay  ‚îÇ
‚îÇ  16K -  32K     ‚îÇ     60%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë       ‚îÇ ‚ö†Ô∏è  noticeable    ‚îÇ
‚îÇ  32K -  64K     ‚îÇ     40%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë       ‚îÇ üî¥ significant    ‚îÇ
‚îÇ  64K - 128K     ‚îÇ     20%     ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë       ‚îÇ üî¥ severe         ‚îÇ
‚îÇ 128K+           ‚îÇ     10%     ‚îÇ ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë       ‚îÇ ‚ùå near failure   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  "When Claude Code history gets bloated or you chat with ChatGPT for a long    ‚îÇ
‚îÇ   time, the model gets... dumber" ‚Äî MIT RLM Paper                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</span>
                </div>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.82rem; line-height: 1.6;">
                    <strong style="color: #10b981;">‚úÖ Solution: Context-First Development</strong>
                    <span class="lang-ko">
                        <br>‚Ä¢ ÏÑ∏ÏÖò Ïª®ÌÖçÏä§Ìä∏ ÏµúÏÜåÌôî ‚Üí foundations/plans/reports Ïô∏Î∂Ä Ï†ÄÏû•ÏÜå ÌôúÏö©
                        <br>‚Ä¢ AgentÍ∞Ä ÌïÑÏöîÌïú Ï†ïÎ≥¥Îßå Self-RAG ‚Üí "Ïã†ÏÑ†Ìïú" Ïª®ÌÖçÏä§Ìä∏ÏóêÏÑú ÏûëÏóÖ
                        <br>‚Ä¢ Progressive DisclosureÎ°ú MCP ÎåÄÎπÑ 85% ÌÜ†ÌÅ∞ Ï†àÍ∞ê
                    </span>
                    <span class="lang-en">
                        <br>‚Ä¢ Minimize session context ‚Üí Use foundations/plans/reports as external storage
                        <br>‚Ä¢ Agent Self-RAGs only needed info ‚Üí Works in "fresh" context
                        <br>‚Ä¢ Progressive Disclosure saves 85% tokens vs MCP
                    </span>
                </div>
            </div>

            <div class="modal-refs" style="margin-top: 1.25rem;">
                <div class="modal-refs-title">
                    <span class="lang-ko">References</span>
                    <span class="lang-en">References</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip" href="https://arxiv.org/pdf/2512.24601v1" target="_blank" rel="noopener">MIT RLM Paper (arXiv)</a>
                    <a class="ref-chip" href="https://www.anthropic.com/engineering/claude-code-best-practices" target="_blank" rel="noopener">Claude Code Best Practices</a>
                    <a class="ref-chip" href="https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills" target="_blank" rel="noopener">Agent Skills</a>
                    <a class="ref-chip" href="https://www.youtube.com/watch?v=TqC1qOfiVcQ" target="_blank" rel="noopener">Harness & Bash (YouTube)</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/category/%EC%9D%B4%EC%BD%94%EC%97%90%EC%BD%94%28Eco%C2%B2%29/Event%20Streams%20%26%20Scaling" target="_blank" rel="noopener"><span class="lang-ko">Ïû¨Í∑Ä Í∞úÏÑ† ÏÇ¨Î°Ä (Blog)</span><span class="lang-en">Recursive Improvement (Blog)</span></a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Observability - EFK Stack -->
    <div class="modal-overlay" id="modal-obs-efk">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-obs-efk')">√ó</button>
            <h3 class="modal-title">üìù 24-Nodes Log Centralization (EFK Stack)</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            EFK Stack ‚Äî Elastic Operator (ECK) v2.11.0 ¬∑ helm.elastic.co         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  24 Nodes (DaemonSet: Fluent Bit v2.2.0)                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ master  ‚îÇ ‚îÇ worker-1‚îÇ ‚îÇ worker-2‚îÇ ‚îÇ storage ‚îÇ ‚îÇ logging ‚îÇ  ...      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ fluent  ‚îÇ ‚îÇ fluent  ‚îÇ ‚îÇ fluent  ‚îÇ ‚îÇ fluent  ‚îÇ ‚îÇ fluent  ‚îÇ           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ           ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ          ‚îÇ                         ‚îÇ
‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îÇ                                   ‚îÇ                                             ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ         ‚îÇ            elastic-system namespace               ‚îÇ                   ‚îÇ
‚îÇ         ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ                   ‚îÇ
‚îÇ         ‚îÇ   ‚îÇ     ECK Operator (eck-operator v2.11.0)  ‚îÇ    ‚îÇ                   ‚îÇ
‚îÇ         ‚îÇ   ‚îÇ     github.com/elastic/cloud-on-k8s      ‚îÇ    ‚îÇ                   ‚îÇ
‚îÇ         ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ                   ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                  ‚îÇ manages CRDs                                 ‚îÇ
‚îÇ                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                  ‚îÇ
‚îÇ                      ‚îÇ Elasticsearch CR (ECK)‚îÇ                                  ‚îÇ
‚îÇ                      ‚îÇ v8.11.0 ¬∑ 50GB ¬∑ 5Gi  ‚îÇ                                  ‚îÇ
‚îÇ                      ‚îÇ eco2-logs-es-http     ‚îÇ                                  ‚îÇ
‚îÇ                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                  ‚îÇ
‚îÇ                                  ‚îÇ                                              ‚îÇ
‚îÇ                      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                  ‚îÇ
‚îÇ                      ‚îÇ     Kibana CR (ECK)   ‚îÇ                                  ‚îÇ
‚îÇ                      ‚îÇ kibana.dev.growbin.app‚îÇ                                  ‚îÇ
‚îÇ                      ‚îÇ   23M+ documents      ‚îÇ                                  ‚îÇ
‚îÇ                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                  ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Pipeline: /var/log/containers/*.log ‚Üí CRI Parser ‚Üí K8s Filter ‚Üí              ‚îÇ
‚îÇ             ECS Lua Enrichment ‚Üí Elasticsearch (logs-YYYY.MM.DD)                ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Component</th><th>Version</th><th>Ïó≠Ìï†</th><th>ÏÑ§Ï†ï</th></tr>
                <tr><td><strong>ECK Operator</strong></td><td>v2.11.0</td><td>ES/Kibana ÎùºÏù¥ÌîÑÏÇ¨Ïù¥ÌÅ¥ Í¥ÄÎ¶¨</td><td>Helm (helm.elastic.co), elastic-system ns</td></tr>
                <tr><td>Fluent Bit</td><td>v2.2.0</td><td>Î°úÍ∑∏ ÏàòÏßë (DaemonSet)</td><td>CRI Parser, K8s Filter, ECS Lua</td></tr>
                <tr><td>Elasticsearch</td><td>v8.11.0</td><td>Î°úÍ∑∏ Ï†ÄÏû•/Í≤ÄÏÉâ (CR)</td><td>elasticsearch.k8s.elastic.co/v1, 50GB gp3</td></tr>
                <tr><td>Kibana</td><td>v8.11.0</td><td>Î°úÍ∑∏ ÏãúÍ∞ÅÌôî (CR)</td><td>kibana.k8s.elastic.co/v1, elasticsearchRef</td></tr>
            </table>

            <!-- Daily Volume Metrics -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin: 1.5rem 0;">
                <div style="background: rgba(138,43,226,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.3rem; font-weight: 700; color: #8b5cf6;">500K-1.1M</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Daily Documents</div>
                </div>
                <div style="background: rgba(0,255,136,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.3rem; font-weight: 700; color: var(--primary);">260-420MB</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Daily Index Size</div>
                </div>
                <div style="background: rgba(245,158,11,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.3rem; font-weight: 700; color: #f59e0b;">7-13/s</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Log Rate</div>
                </div>
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.3rem; font-weight: 700; color: #3b82f6;">23M+</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Total Documents</div>
                </div>
            </div>

            <!-- Index Strategy -->
            <div style="margin-bottom: 1rem; padding: 1rem; background: rgba(59,130,246,0.1); border-radius: 8px; border-left: 3px solid #3b82f6;">
                <strong style="color: #3b82f6;">Index Strategy: Single Pattern + ECS Field Filtering</strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.6;">
                    ‚Ä¢ <strong>Pattern</strong> ‚Äî <code style="background: rgba(59,130,246,0.2); padding: 0.1rem 0.4rem; border-radius: 4px;">logs-YYYY.MM.DD</code> (Logstash format, 1 shard, 0 replica)<br>
                    ‚Ä¢ <strong>Index Template</strong> ‚Äî <code style="background: rgba(59,130,246,0.2); padding: 0.1rem 0.4rem; border-radius: 4px;">eco2-logs-ecs</code> with <code>subobjects: false</code> (dot notation Î≥¥Ï°¥: trace.id, span.id)<br>
                    ‚Ä¢ <strong>Service Filtering</strong> ‚Äî Ïù∏Îç±Ïä§ Î∂ÑÎ¶¨ ÎåÄÏã† <code>service.name</code> ÌïÑÎìúÎ°ú 8Í∞ú ÎèÑÎ©îÏù∏ Íµ¨Î∂Ñ (cross-service trace.id Ï∂îÏ†Å Ïö©Ïù¥)
                </div>
            </div>

            <div style="margin-top: 1rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid #8b5cf6;">
                <strong style="color: #8b5cf6;">Ïôú Elastic Operator (ECK)Ïù∏Í∞Ä?</strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.6;">
                    ‚Ä¢ <strong>Operator Pattern</strong> ‚Äî Elasticsearch/KibanaÎ•º CRDÎ°ú ÏÑ†Ïñ∏Ï†Å Í¥ÄÎ¶¨. TLS Ïù∏Ï¶ùÏÑú, ÌÅ¥Îü¨Ïä§ÌÑ∞ ÌÜ†Ìè¥Î°úÏßÄ, Rolling Upgrade ÏûêÎèôÌôî<br>
                    ‚Ä¢ <strong>Elastic Cloud Ï†ÑÌôò Ïö©Ïù¥</strong> ‚Äî ÎèôÏùºÌïú CRD Ïä§ÌÇ§ÎßàÎ°ú Self-Managed ‚Üí Elastic Cloud on K8s (ECK) ‚Üí Elastic Cloud (SaaS) ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò Í≤ΩÎ°ú ÌôïÎ≥¥<br>
                    ‚Ä¢ <strong>Í≥µÏãù ÏßÄÏõê</strong> ‚Äî <a href="https://github.com/elastic/cloud-on-k8s" target="_blank" style="color: var(--primary);">github.com/elastic/cloud-on-k8s</a> (Elastic Í≥µÏãù Operator)
                </div>
            </div>
            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR / Release</span>
                    <span class="lang-en">Related PRs / Releases</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.6" target="_blank" rel="noopener">v1.0.6</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/146" target="_blank" rel="noopener">#146 ECK</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/194" target="_blank" rel="noopener">#194 Elasticsearch bootstrap</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/32" target="_blank" rel="noopener">Observability ÏÑ§Í≥Ñ</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/33" target="_blank" rel="noopener">EFK Íµ¨Ï∂ï</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/40" target="_blank" rel="noopener">Index Ï†ÑÎûµ</a>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üîó Kibana Dashboard</strong>
                <div style="margin-top: 0.75rem;">
                    <a href="https://kibana.dev.growbin.app/app/r?l=DISCOVER_APP_LOCATOR&v=8.11.0&lz=N4IgjgrgpgTgniAXKSsGJCANCANgQwDsBzCfYqJEAa2nhAF8cBnAexgBckBtbkAAQ4BLALZRmHfCIAO2EABNxAYxABdVTiWtcEEYWY8NIIYUUAPKrlbFmAWihaATLfzTZOEx1gA3fLir4EByscgBmQrheMAaI3Eby%2BJIAakJQAO4AkvKW1nYOrM6u7iDCYgBKRBRIoKEwrCJUjgAMjgBstk0AjB2tACqdnYhdQ60AdI4AnE0AWnLBVISsaYw4MFC14gAWGYRRvv7IIPvQSK1N50040oHMlIgcMNAMDEA" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> logs-eco2-app (23M+ hits)
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Observability - trace_id -->
    <div class="modal-overlay" id="modal-obs-trace">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-obs-trace')">√ó</button>
            <h3 class="modal-title">üîó ECS Log Format + trace_id Correlation</h3>

            <!-- Trace Coverage Metrics -->
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(138,43,226,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #8b5cf6;">1.75M</div>
                    <div style="font-size: 0.75rem; color: var(--text-muted);">Total Logs</div>
                </div>
                <div style="background: rgba(0,255,136,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary);">125K</div>
                    <div style="font-size: 0.75rem; color: var(--text-muted);">with trace.id</div>
                </div>
                <div style="background: rgba(245,158,11,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #f59e0b;">7.16%</div>
                    <div style="font-size: 0.75rem; color: var(--text-muted);">Coverage Rate</div>
                </div>
                <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #3b82f6;">99.8%</div>
                    <div style="font-size: 0.75rem; color: var(--text-muted);">from istio-proxy</div>
                </div>
            </div>

            <!-- Trace Propagation Flow -->
            <div class="modal-diagram" style="font-size: 0.8rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Trace Propagation: Source of Truth = Istio Ingress Gateway         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   Client ‚îÄ‚îÄ‚îÄ‚ñ∫ Istio Ingress ‚îÄ‚îÄ‚îÄ‚ñ∫ ext-authz ‚îÄ‚îÄ‚îÄ‚ñ∫ App Sidecar ‚îÄ‚îÄ‚îÄ‚ñ∫ Python App    ‚îÇ
‚îÇ                    ‚îÇ                  ‚îÇ              ‚îÇ               ‚îÇ          ‚îÇ
‚îÇ               generates          propagates      propagates      reads         ‚îÇ
‚îÇ               trace.id           B3 headers      B3 headers      OTEL SDK      ‚îÇ
‚îÇ                    ‚îÇ                  ‚îÇ              ‚îÇ               ‚îÇ          ‚îÇ
‚îÇ               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ               ‚îÇ x-b3-   ‚îÇ       ‚îÇ gRPC    ‚îÇ    ‚îÇ x-b3-   ‚îÇ    ‚îÇ trace.  ‚îÇ      ‚îÇ
‚îÇ               ‚îÇ traceid ‚îÇ       ‚îÇ metadata‚îÇ    ‚îÇ traceid ‚îÇ    ‚îÇ get_    ‚îÇ      ‚îÇ
‚îÇ               ‚îÇ header  ‚îÇ       ‚îÇ extract ‚îÇ    ‚îÇ inject  ‚îÇ    ‚îÇ current ‚îÇ      ‚îÇ
‚îÇ               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ _span() ‚îÇ      ‚îÇ
‚îÇ                                                               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   B3 Propagator Config: OTEL_PROPAGATORS="b3,tracecontext,baggage"             ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ECS (Elastic Common Schema) v8.11.0 Log Format               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   // Python API Services (FastAPI) - ECSJsonFormatter + OTEL auto-inject       ‚îÇ
‚îÇ   {                                                                             ‚îÇ
‚îÇ     "@timestamp": "2026-01-12T08:59:59.876Z",                                   ‚îÇ
‚îÇ     "message": "Request processed successfully",                                ‚îÇ
‚îÇ     "log.level": "info",                                                        ‚îÇ
‚îÇ     "ecs.version": "8.11.0",                                                    ‚îÇ
‚îÇ     "service.name": "scan-api",                                                 ‚îÇ
‚îÇ     "service.version": "1.0.7",                                                 ‚îÇ
‚îÇ     "trace.id": "a5f2c1804ac4397448149b63a67f6cfd",  ‚Üê OTEL trace.get_span()   ‚îÇ
‚îÇ     "span.id": "1979d304b9",                                                    ‚îÇ
‚îÇ     "labels": { "user_id": "***REDACTED***", "scan_id": "uuid" }  ‚Üê PII ÎßàÏä§ÌÇπ  ‚îÇ
‚îÇ   }                                                                             ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   // Go ext-authz Service - slog (Go 1.21+) ECS                                 ‚îÇ
‚îÇ   {                                                                             ‚îÇ
‚îÇ     "@timestamp": "2026-01-12T08:59:59.876Z",                                   ‚îÇ
‚îÇ     "message": "Authorization allowed",                                         ‚îÇ
‚îÇ     "log.level": "INFO",                                                        ‚îÇ
‚îÇ     "service.name": "ext-authz",                                                ‚îÇ
‚îÇ     "trace.id": "a5f2c1804ac4397448149b63a67f6cfd",  ‚Üê gRPC metadata B3 Ï∂îÏ∂ú   ‚îÇ
‚îÇ     "event.action": "authorization",                                            ‚îÇ
‚îÇ     "event.outcome": "success"                                                  ‚îÇ
‚îÇ   }                                                                             ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   // Istio Envoy Sidecar - EnvoyFilter Access Log (%TRACE_ID% ÏûêÎèô ÏÉùÏÑ±)        ‚îÇ
‚îÇ   {                                                                             ‚îÇ
‚îÇ     "trace.id": "a5f2c1804ac4397448149b63a67f6cfd",                             ‚îÇ
‚îÇ     "span.id": "1979d304b9",                                                    ‚îÇ
‚îÇ     "http.request.method": "GET",                                               ‚îÇ
‚îÇ     "http.response.status_code": 200,                                           ‚îÇ
‚îÇ     "duration_ms": 18                                                           ‚îÇ
‚îÇ   }                                                                             ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   Kibana ‚Üí trace.id ÌÅ¥Î¶≠ ‚Üí Jaeger UI (Î∂ÑÏÇ∞ Ìä∏Î†àÏù¥Ïã± ÏãúÍ∞ÅÌôî)                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Service</th><th>Language</th><th>Tracing SDK</th><th>trace_id Ï£ºÏûÖ Î∞©Ïãù</th></tr>
                <tr><td>auth-api, scan-api, chat-api...</td><td>Python</td><td>OpenTelemetry</td><td>ECSJsonFormatter + trace.get_current_span()</td></tr>
                <tr><td>ext-authz</td><td>Go 1.21+</td><td>OpenTelemetry</td><td>slog + gRPC B3 metadata extraction</td></tr>
                <tr><td>Istio Sidecar</td><td>Envoy</td><td>Built-in</td><td>EnvoyFilter %TRACE_ID% (99.8%)</td></tr>
                <tr><td>Jaeger Collector</td><td>-</td><td>OTLP</td><td>gRPC 4317 ‚Üí Memory (dev)</td></tr>
            </table>

            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR / Blog</span>
                    <span class="lang-en">Related PRs / Blog</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.6" target="_blank" rel="noopener">v1.0.6</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/150" target="_blank" rel="noopener">#150 ECS Logging</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/284" target="_blank" rel="noopener">#284 OTel B3</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/34" target="_blank" rel="noopener">ECS Î°úÍπÖ Í∞ÄÏù¥Îìú</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/37" target="_blank" rel="noopener">Jaeger Ìä∏Î†àÏù¥Ïã±</a>
                    <a class="ref-chip blog" href="https://rooftopsnow.tistory.com/41" target="_blank" rel="noopener">trace.id Ïó∞Îèô</a>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üîó Jaeger Distributed Tracing</strong>
                <div style="margin-top: 0.75rem;">
                    <a href="https://jaeger.dev.growbin.app" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> jaeger.dev.growbin.app
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Observability - Alertmanager + Slack -->
    <div class="modal-overlay" id="modal-obs-alert">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('modal-obs-alert')">√ó</button>
            <h3 class="modal-title">üö® Alertmanager + Slack Integration</h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Alertmanager ‚Üí Slack Automation Pipeline                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ   ‚îÇ Prometheus  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ AlertRules  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇAlertmanager ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Slack     ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ  Metrics    ‚îÇ    ‚îÇ  (PrometheusRule)‚îÇ (groupBy)   ‚îÇ    ‚îÇ  #eco_sre   ‚îÇ      ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   AlertmanagerConfig (CR):                                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  route:                                                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ    groupBy: [alertname, namespace, severity]                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ    groupWait: 30s                                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ    repeatInterval: 4h                                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ    routes:                                                              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      - receiver: slack-critical  (severity=critical)  üî¥                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      - receiver: slack-warning   (severity=warning)   üü†                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      - receiver: 'null'          (alertname=Watchdog) Î¨¥Ïãú              ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Alert Examples:                                                               ‚îÇ
‚îÇ   ‚Ä¢ üü† [WARNING] CPUThrottlingHigh - character namespace 34% throttling         ‚îÇ
‚îÇ   ‚Ä¢ üü† [WARNING] KubeHpaMaxedOut - HPA max replicas 15Î∂Ñ+ Ïú†ÏßÄ                  ‚îÇ
‚îÇ   ‚Ä¢ üü† [WARNING] TargetDown - auth-api targets 100% down                        ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Severity</th><th>Receiver</th><th>Color</th><th>ÏòàÏãú Alert</th></tr>
                <tr><td>üî¥ critical</td><td>slack-critical</td><td>#ff0000</td><td>PodCrashLooping, NodeNotReady</td></tr>
                <tr><td>üü† warning</td><td>slack-warning</td><td>#ffa500</td><td>CPUThrottlingHigh, TargetDown</td></tr>
                <tr><td>üü° info</td><td>slack-info</td><td>#ffff00</td><td>KubeHpaMaxedOut</td></tr>
                <tr><td>- Watchdog</td><td>null</td><td>-</td><td>Î¨¥Ïãú (heartbeat)</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üí¨ Slack Channel</strong>
                <div style="margin-top: 0.75rem;">
                    <a href="https://app.slack.com/client/T0A4KGRV0BC/C0A4G4NDALD" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> #eco_sre (Eco¬≤ Backend / Infra)
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Observability - Kiali + Jaeger -->
    <div class="modal-overlay" id="modal-obs-mesh">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-obs-mesh')">√ó</button>
            <h3 class="modal-title">üó∫Ô∏è Kiali + Jaeger Service Mesh Visualization</h3>

            <!-- Prometheus Service Dependency Graph -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">üìä Prometheus Service Dependency DAG: Jaeger</span>
                    <span class="lang-en">üìä Prometheus Service Dependency DAG: Jaeger</span>
                </h4>
                <div style="background: var(--bg-card); border-radius: 12px; padding: 1rem; border: 1px solid var(--border-subtle);">
                    <img src="assets/gifs/prometheus-service-dag.png" alt="Prometheus Service Dependency Graph" style="width: 100%; border-radius: 8px;">
                    <div style="margin-top: 0.75rem; font-size: 0.8rem; color: var(--text-secondary);">
                        <span class="lang-ko">PrometheusÍ∞Ä Ï§ëÏïô ÌóàÎ∏åÎ°ú Î™®Îì† ÏÑúÎπÑÏä§ÏóêÏÑú Î©îÌä∏Î¶≠ ÏàòÏßë ‚Äî 8Í∞ú ÎèÑÎ©îÏù∏ API, 3Í∞ú Redis Ïù∏Ïä§ÌÑ¥Ïä§, event-router, sse-gateway, ext-authz Îì± Ï†ÑÏ≤¥ ÏÑúÎπÑÏä§ ÌÜ†Ìè¥Î°úÏßÄ</span>
                        <span class="lang-en">Prometheus as central hub collecting metrics from all services ‚Äî 8 domain APIs, 3 Redis instances, event-router, sse-gateway, ext-authz and full service topology</span>
                    </div>
                </div>
            </div>

            <!-- Dual Protocol Architecture -->
            <div class="modal-diagram" style="font-size: 0.8rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          Dual-Protocol Tracing: Zipkin (Istio) + OTLP (Application)            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                         Istio Sidecar (Envoy)                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ App Sidecar ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Zipkin Protocol ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Jaeger    ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ (istio-proxy)‚îÇ       Port 9411                  ‚îÇ All-in-One  ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îÇ  (512MB)    ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                ‚îÇ                ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                         Application Layer                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Python API  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ OTLP/gRPC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   Jaeger    ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ (OTEL SDK)  ‚îÇ       Port 4317                   ‚îÇ  Collector  ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚ö†Ô∏è NetworkPolicy: Port 9411 ÌïÑÏàò (ÎØ∏Í∞úÎ∞© Ïãú "No service dependencies found")  ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Service Mesh Observability (Istio v1.24.1)                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Kiali (Service Graph) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ Istio    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ ext-authz‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ auth-api ‚îÇ                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ Ingress  ‚îÇ      ‚îÇ   (Go)   ‚îÇ      ‚îÇ (Python) ‚îÇ                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                              ‚îÇ                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ scan-api ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ RabbitMQ ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ Workers  ‚îÇ                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îÇ          ‚îÇ      ‚îÇ          ‚îÇ      ‚îÇ (TaskIQ) ‚îÇ                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Traffic: ‚îÅ‚îÅ‚îÅ HTTP/gRPC    ‚îÄ‚îÄ‚îÄ AMQP    ¬∑¬∑¬∑ Redis                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Health: üü¢ Healthy  üü° Degraded  üî¥ Failure                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Jaeger (Distributed Tracing) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Trace: a5f2c1804ac4397448149b63a67f6cfd                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ istio-ingressgateway (2ms)                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ ext-authz (5ms)                                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ scan-api (18ms)                                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ PostgreSQL query (3ms)                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ RabbitMQ publish (2ms)                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ scan-worker (12,450ms)                                             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      ‚îî‚îÄ OpenAI Vision API (3,200ms)                                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      ‚îî‚îÄ OpenAI Answer API (8,100ms)                                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <table class="modal-table">
                <tr><th>Tool</th><th>URL</th><th>Protocol</th><th>Í∏∞Îä•</th></tr>
                <tr><td>Kiali</td><td>kiali.dev.growbin.app</td><td>-</td><td>Service Graph, Traffic Flow, Health Status</td></tr>
                <tr><td>Jaeger</td><td>jaeger.dev.growbin.app</td><td>Zipkin 9411, OTLP 4317</td><td>Distributed Tracing, Span Analysis</td></tr>
                <tr><td>Grafana</td><td>grafana.dev.growbin.app</td><td>-</td><td>Metrics Dashboard, Alerting</td></tr>
            </table>

            <!-- ServiceEntry External Dependencies -->
            <div style="margin-top: 1rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid #8b5cf6;">
                <strong style="color: #8b5cf6;">ServiceEntry: External Dependencies (Mesh Ïô∏Î∂Ä Í∞ÄÏãúÌôî)</strong>
                <div style="margin-top: 0.75rem; display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; font-size: 0.8rem;">
                    <div style="background: rgba(255,255,255,0.05); padding: 0.5rem; border-radius: 4px;">
                        <strong style="color: var(--text-primary);">Google OAuth</strong><br>
                        <span style="color: var(--text-muted);">accounts.google.com<br>www.googleapis.com</span>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 0.5rem; border-radius: 4px;">
                        <strong style="color: var(--text-primary);">Kakao OAuth</strong><br>
                        <span style="color: var(--text-muted);">kauth.kakao.com<br>kapi.kakao.com</span>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 0.5rem; border-radius: 4px;">
                        <strong style="color: var(--text-primary);">Naver OAuth</strong><br>
                        <span style="color: var(--text-muted);">nid.naver.com<br>openapi.naver.com</span>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 0.5rem; border-radius: 4px;">
                        <strong style="color: var(--text-primary);">OpenAI API</strong><br>
                        <span style="color: var(--text-muted);">api.openai.com</span>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 0.5rem; border-radius: 4px;">
                        <strong style="color: var(--text-primary);">AWS S3</strong><br>
                        <span style="color: var(--text-muted);">s3.ap-northeast-2</span>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 0.5rem; border-radius: 4px;">
                        <strong style="color: var(--text-primary);">CloudFront CDN</strong><br>
                        <span style="color: var(--text-muted);">cdn.growbin.app</span>
                    </div>
                </div>
            </div>

            <div style="margin-top: 1rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üîó Service Mesh Tools</strong>
                <div style="margin-top: 0.75rem; display: flex; flex-direction: column; gap: 0.5rem;">
                    <a href="https://kiali.dev.growbin.app" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> Kiali - Service Mesh Topology
                    </a>
                    <a href="https://jaeger.dev.growbin.app" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> Jaeger - Distributed Tracing
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Message Queue - 4-Stage Celery Chain -->
    <div class="modal-overlay" id="modal-mq-chain">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-mq-chain')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">‚õìÔ∏è 4Îã®Í≥Ñ Celery Chain ÌååÏù¥ÌîÑÎùºÏù∏</span>
                <span class="lang-en">‚õìÔ∏è 4-Stage Celery Chain Pipeline</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Scan Pipeline: Celery Chain Architecture                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   Client Request                                                                ‚îÇ
‚îÇ       ‚îÇ                                                                         ‚îÇ
‚îÇ       ‚ñº                                                                         ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ   VISION    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    RULE     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   ANSWER    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   REWARD    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  scan.vision‚îÇ     ‚îÇ  scan.rule  ‚îÇ     ‚îÇ scan.answer ‚îÇ     ‚îÇ scan.reward ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ        ‚îÇ                   ‚îÇ                    ‚îÇ                    ‚îÇ          ‚îÇ
‚îÇ        ‚ñº                   ‚ñº                    ‚ñº                    ‚ñº          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ OpenAI      ‚îÇ     ‚îÇ PostgreSQL  ‚îÇ     ‚îÇ OpenAI      ‚îÇ     ‚îÇ Character   ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ Vision API  ‚îÇ     ‚îÇ Rule DB     ‚îÇ     ‚îÇ Chat API    ‚îÇ     ‚îÇ Matching    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ (~4.5s)     ‚îÇ     ‚îÇ (~0.3s)     ‚îÇ     ‚îÇ (~4.8s)     ‚îÇ     ‚îÇ (~1.7s)     ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Chain Signature: vision.s() | rule.s() | answer.s() | reward.s()             ‚îÇ
‚îÇ   Total Duration: ~11-21s (varies by OpenAI API latency)                        ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr>
                    <th>Stage</th>
                    <th><span class="lang-ko">ÌèâÍ∑†</span><span class="lang-en">Avg</span></th>
                    <th>p99</th>
                    <th><span class="lang-ko">Ïó≠Ìï†</span><span class="lang-en">Role</span></th>
                </tr>
                <tr><td>vision</td><td>4.5s</td><td>6~10s</td><td><span class="lang-ko">OpenAI Vision API (Ïù¥ÎØ∏ÏßÄ Î∂ÑÏÑù)</span><span class="lang-en">OpenAI Vision API (image analysis)</span></td></tr>
                <tr><td>rule</td><td>0.3s</td><td>2~3s</td><td><span class="lang-ko">Î°úÏª¨ Ï∫êÏãú Rule-Based Retrieval</span><span class="lang-en">Local Cache Rule-Based Retrieval</span></td></tr>
                <tr><td>answer</td><td>4.8s</td><td>8~15s</td><td><span class="lang-ko">OpenAI Chat API (ÎãµÎ≥Ä ÏÉùÏÑ±)</span><span class="lang-en">OpenAI Chat API (answer generation)</span></td></tr>
                <tr><td>reward</td><td>1.7s</td><td>3~5s</td><td><span class="lang-ko">Ï∫êÎ¶≠ÌÑ∞ Îß§Ïπ≠ + DB Ï†ÄÏû•</span><span class="lang-en">Character matching + DB save</span></td></tr>
            </table>
            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR / Release</span>
                    <span class="lang-en">Related PRs / Releases</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.7" target="_blank" rel="noopener">v1.0.7</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/337" target="_blank" rel="noopener">#337 Named Exchange</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/353" target="_blank" rel="noopener">#353 Fanout</a>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">
                    <span class="lang-ko">üìä Stage ÏÜåÏöîÏãúÍ∞Ñ ÎπÑÏú®</span>
                    <span class="lang-en">üìä Stage Duration Breakdown</span>
                </strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <div style="margin-bottom: 0.5rem;">answer (45%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 4.8s</div>
                    <div style="margin-bottom: 0.5rem;">vision (40%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 4.5s</div>
                    <div style="margin-bottom: 0.5rem;">reward (14%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 1.7s</div>
                    <div>rule (5%) ‚ñà‚ñà 0.3s</div>
                    <div style="margin-top: 0.75rem; font-style: italic;">
                        <span class="lang-ko">‚ö†Ô∏è OpenAI APIÍ∞Ä Ï†ÑÏ≤¥Ïùò 85% Ï∞®ÏßÄ (vision + answer)</span>
                        <span class="lang-en">‚ö†Ô∏è OpenAI API accounts for 85% of total (vision + answer)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Message Queue - Concurrency Strategy -->
    <div class="modal-overlay" id="modal-mq-concurrency">
        <div class="modal-content" style="max-width: 1200px;">
            <button class="modal-close" onclick="closeModal('modal-mq-concurrency')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîÄ ÎèôÏãúÏÑ± Ï†ÑÎûµ Î∂ÑÎ¶¨ (prefork vs Gevent vs asyncio)</span>
                <span class="lang-en">üîÄ Concurrency Strategy Split (prefork vs Gevent vs asyncio)</span>
            </h3>

            <!-- 3-Way Architecture Diagram -->
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Concurrency Model per Pipeline Characteristics                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ prefork ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ Gevent ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ asyncio ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ OS Process (fork)      ‚îÇ  ‚îÇ Greenlet (monkey-patch)    ‚îÇ  ‚îÇ Coroutine (await)     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ ~10-50MB / worker      ‚îÇ  ‚îÇ ~4-8KB / greenlet          ‚îÇ  ‚îÇ ~2-4KB / coroutine    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Context SW: ~1-10ms    ‚îÇ  ‚îÇ Context SW: ~1-10¬µs        ‚îÇ  ‚îÇ Context SW: ~100ns    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                        ‚îÇ  ‚îÇ                            ‚îÇ  ‚îÇ                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ character-worker       ‚îÇ  ‚îÇ scan-worker                ‚îÇ  ‚îÇ chat-worker           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ info-worker            ‚îÇ  ‚îÇ  -P gevent -c 100          ‚îÇ  ‚îÇ  Taskiq + aio-pika    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ users-worker           ‚îÇ  ‚îÇ                            ‚îÇ  ‚îÇ                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                        ‚îÇ  ‚îÇ  Vision ‚Üí Retrieval ‚Üí      ‚îÇ  ‚îÇ  LangGraph astream()  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Îã®Ïàú DB UPSERT,        ‚îÇ  ‚îÇ  Answer ‚Üí Reward           ‚îÇ  ‚îÇ  async/await native   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Ï∫êÏãú Í∞±Ïã† Îì±            ‚îÇ  ‚îÇ  (I/O 65%: OpenAI API)    ‚îÇ  ‚îÇ  Multi-Agent Î≥ëÎ†¨     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Ï†ÄÎ†àÏù¥ÌÑ¥Ïãú ÌÉúÏä§ÌÅ¨       ‚îÇ  ‚îÇ                            ‚îÇ  ‚îÇ                       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                                         ‚îÇ
‚îÇ  Decision Matrix:                                                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ CPU-bound / Îã®Ïàú   ‚îÇ ‚Üí prefork (GIL Ïö∞Ìöå, ÌîÑÎ°úÏÑ∏Ïä§ Í≤©Î¶¨)                          ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ I/O-bound + ÎèôÍ∏∞   ‚îÇ ‚Üí Gevent (Í∏∞Ï°¥ ÎèôÍ∏∞ ÏΩîÎìú monkey-patchÎ°ú ÎπÑÎèôÍ∏∞Ìôî)            ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ I/O-bound + ÎπÑÎèôÍ∏∞ ‚îÇ ‚Üí asyncio (LangGraph/aiohttp native, ÏµúÏÜå Ïò§Î≤ÑÌó§Îìú)          ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <!-- 3-Column Comparison Table -->
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ìï≠Î™©</span><span class="lang-en">Item</span></th>
                    <th>prefork (Celery)</th>
                    <th>Gevent (Celery)</th>
                    <th>asyncio (Taskiq)</th>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ïã§Ìñâ Îã®ÏúÑ</span><span class="lang-en">Execution Unit</span></td>
                    <td>OS Process</td>
                    <td>Greenlet</td>
                    <td><strong>Coroutine</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Î©îÎ™®Î¶¨/Îã®ÏúÑ</span><span class="lang-en">Memory/Unit</span></td>
                    <td>~10-50MB</td>
                    <td>~4-8KB</td>
                    <td><strong>~2-4KB</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ïª®ÌÖçÏä§Ìä∏ Ïä§ÏúÑÏπò</span><span class="lang-en">Context Switch</span></td>
                    <td>~1-10ms</td>
                    <td>~1-10¬µs</td>
                    <td><strong>~100ns-1¬µs</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÎèôÏãú Ï≤òÎ¶¨</span><span class="lang-en">Concurrency</span></td>
                    <td><span class="lang-ko">6-9 (Î©îÎ™®Î¶¨ Ï†úÌïú)</span><span class="lang-en">6-9 (memory limited)</span></td>
                    <td>100+</td>
                    <td><strong><span class="lang-ko">ÏàòÏ≤ú+ (Ïù¥Î≤§Ìä∏ Î£®ÌîÑ)</span><span class="lang-en">1000s+ (event loop)</span></strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ï†ÅÏö© ÏõåÏª§</span><span class="lang-en">Applied Worker</span></td>
                    <td>character, info, users</td>
                    <td>scan-worker</td>
                    <td><strong>chat-worker</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÏÑ†ÌÉù Í∑ºÍ±∞</span><span class="lang-en">Rationale</span></td>
                    <td><span class="lang-ko">Îã®Ïàú DB ÌÉúÏä§ÌÅ¨, ÌîÑÎ°úÏÑ∏Ïä§ Í≤©Î¶¨</span><span class="lang-en">Simple DB tasks, process isolation</span></td>
                    <td><span class="lang-ko">Í∏∞Ï°¥ ÎèôÍ∏∞ ÏΩîÎìú + Í≥† I/O (65% OpenAI)</span><span class="lang-en">Legacy sync code + high I/O (65% OpenAI)</span></td>
                    <td><span class="lang-ko">LangGraph async native Í∑πÎåÄÌôî</span><span class="lang-en">LangGraph async native maximization</span></td>
                </tr>
                <tr>
                    <td>RPS</td>
                    <td><span class="lang-ko">Ï∂©Î∂Ñ (Í≤ΩÎüâ ÌÉúÏä§ÌÅ¨)</span><span class="lang-en">Sufficient (lightweight tasks)</span></td>
                    <td><span class="lang-ko">~4 (OpenAI rate limit)</span><span class="lang-en">~4 (OpenAI rate limit)</span></td>
                    <td><strong><span class="lang-ko">LLM ÏùëÎãµ ÎåÄÍ∏∞ Ï§ë Îã§Î•∏ ÏöîÏ≤≠ Ï≤òÎ¶¨</span><span class="lang-en">Processes other requests during LLM wait</span></strong></td>
                </tr>
            </table>

            <!-- Scan Worker Migration: prefork ‚Üí Gevent -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(255,165,0,0.08); border-radius: 8px; border-left: 3px solid #f59e0b;">
                <strong style="color: #f59e0b;"><span class="lang-ko">üìä Scan Worker ÎßàÏù¥Í∑∏Î†àÏù¥ÏÖò: prefork ‚Üí Gevent</span><span class="lang-en">üìä Scan Worker Migration: prefork ‚Üí Gevent</span></strong>
                <div style="margin-top: 0.75rem; font-size: 0.8rem; color: var(--text-secondary);">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 0.5rem;">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.3rem;">‚ùå Before (prefork)</div>
                            <div>‚Ä¢ <code>-P prefork -c 8</code></div>
                            <div>‚Ä¢ Memory: ~3.6GB (8 forked processes)</div>
                            <div>‚Ä¢ 1 Worker = 1 Task = 41s blocking</div>
                            <div>‚Ä¢ Measured: 0.0323 RPS</div>
                        </div>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.3rem;">‚úÖ After (Gevent)</div>
                            <div>‚Ä¢ <code>-P gevent -c 100</code></div>
                            <div>‚Ä¢ Memory: ~500MB (single process)</div>
                            <div>‚Ä¢ <span class="lang-ko">I/O ÎåÄÍ∏∞ Ïãú ÏûêÎèô greenlet Ï†ÑÌôò</span><span class="lang-en">Auto greenlet switch on I/O wait</span></div>
                            <div>‚Ä¢ Measured: ~4 RPS (OpenAI limit)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gevent + asyncio Conflict -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(239,68,68,0.08); border-radius: 8px; border-left: 3px solid #ef4444;">
                <strong style="color: #ef4444;"><span class="lang-ko">‚ö†Ô∏è Gevent + asyncio Ïù¥Î≤§Ìä∏ Î£®ÌîÑ Ï∂©Îèå ‚Äî Ïôú TaskiqÏùÑ Î≥ÑÎèÑ ÎèÑÏûÖÌñàÎäîÍ∞Ä</span><span class="lang-en">‚ö†Ô∏è Gevent + asyncio Event Loop Conflict ‚Äî Why Taskiq was adopted separately</span></strong>
                <div style="margin-top: 0.75rem; font-size: 0.8rem; color: var(--text-secondary);">
                    <div><span class="lang-ko">Gevent monkey-patchÍ∞Ä ÏÜåÏºì/SSL/selectÎ•º ÎçÆÏñ¥Ïì∞Î©¥ÏÑú asyncio event loopÏôÄ Ï∂©Îèå ‚Üí 98% ÏöîÏ≤≠ Ïã§Ìå®</span><span class="lang-en">Gevent monkey-patch overrides socket/SSL/select, conflicting with asyncio event loop ‚Üí 98% request failure</span></div>
                    <div class="modal-diagram" style="font-size: 0.7rem; margin-top: 0.5rem; padding: 0.5rem;">
Gevent Pool (libev event loop)
  ‚îî‚îÄ‚îÄ Greenlet: scan_vision_task()
      ‚îî‚îÄ‚îÄ run_async(analyze_images_async())
          ‚îî‚îÄ‚îÄ asyncio.new_event_loop()  ‚ùå Ï∂©Îèå!
              ‚îî‚îÄ‚îÄ libevÍ∞Ä Ïù¥ÎØ∏ select/poll Ï†êÏú†

Ìï¥Í≤∞: Gevent ÏõåÏª§ÏóêÏÑúÎäî ÎèôÍ∏∞ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Îßå ÏÇ¨Ïö© (monkey-patchÍ∞Ä ÏûêÎèô ÎπÑÎèôÍ∏∞Ìôî)
Í≤∞Î°†: LangGraph(async native)Îäî GeventÏôÄ Í≥µÏ°¥ Î∂àÍ∞Ä ‚Üí Taskiq asyncio ÏõåÏª§Î°ú Î∂ÑÎ¶¨</div>
                </div>
            </div>

            <!-- Worker Stack Summary -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.08); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);"><span class="lang-ko">üèóÔ∏è ÌòÑÏû¨ ÏõåÏª§ Ïä§ÌÉù</span><span class="lang-en">üèóÔ∏è Current Worker Stack</span></strong>
                <table class="modal-table" style="margin-top: 0.75rem; font-size: 0.75rem;">
                    <tr><th>Worker</th><th><span class="lang-ko">ÎèôÏãúÏÑ±</span><span class="lang-en">Concurrency</span></th><th>Engine</th><th>Broker</th><th><span class="lang-ko">ÌååÏù¥ÌîÑÎùºÏù∏</span><span class="lang-en">Pipeline</span></th></tr>
                    <tr><td>scan-worker</td><td>Gevent (100)</td><td>Celery</td><td>RabbitMQ</td><td>Vision‚ÜíRetrieval‚ÜíAnswer‚ÜíReward</td></tr>
                    <tr><td>chat-worker</td><td>asyncio</td><td>Taskiq</td><td>RabbitMQ (aio-pika)</td><td>LangGraph Multi-Agent astream()</td></tr>
                    <tr><td>character-worker</td><td>prefork</td><td>Celery</td><td>RabbitMQ</td><td>DB UPSERT, cache sync</td></tr>
                    <tr><td>info-worker</td><td>prefork</td><td>Celery</td><td>RabbitMQ</td><td>Beat: news collection (5m/30m)</td></tr>
                    <tr><td>users-worker</td><td>prefork</td><td>Celery</td><td>RabbitMQ</td><td>save_character UPSERT</td></tr>
                </table>
            </div>

            <!-- Grafana Snapshot -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üìà Grafana Snapshot</strong>
                <div style="margin-top: 0.75rem;">
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/zz5pBgaMfZXuPDf7TwSLYgcMw103UZUE" target="_blank" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> <span class="lang-ko">Gevent Ï†ÑÌôò Ï†Ñ Î∂ÑÏÑù (Chain Avg: 41.65Ï¥à, TTFB p50: 10Ï¥à)</span><span class="lang-en">Pre-Gevent analysis (Chain Avg: 41.65s, TTFB p50: 10s)</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Message Queue - at-least-once + Idempotency -->
    <div class="modal-overlay" id="modal-mq-idempotency">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-mq-idempotency')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üÜî at-least-once + Î©±Îì±ÏÑ± ÌÇ§ Ï†ÑÎûµ</span>
                <span class="lang-en">üÜî at-least-once + Idempotency Key Strategy</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Exactly-once Semantics via Idempotency                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Celery Ïû¨ÏãúÎèÑ Ï†ÑÎûµ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   @celery_app.task(                                                    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       max_retries=5,            # ÏµúÎåÄ 5Ìöå Ïû¨ÏãúÎèÑ                      ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       autoretry_for=(Exception,),                                      ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       retry_backoff=True,       # Exponential backoff                  ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       retry_backoff_max=300,    # ÏµúÎåÄ 5Î∂Ñ ÎåÄÍ∏∞                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   )                                                                    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   Ïû¨ÏãúÎèÑ Í∞ÑÍ≤©: 1Ï¥à ‚Üí 2Ï¥à ‚Üí 4Ï¥à ‚Üí 8Ï¥à ‚Üí 16Ï¥à (ÏßÄÏàò Ï¶ùÍ∞Ä)                ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Î©±Îì±ÏÑ± ÌÇ§ Ìå®ÌÑ¥ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   # Deterministic UUID ÏÉùÏÑ±                                            ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   idempotency_key = uuid5(NAMESPACE, f"{user_id}:{scan_id}")           ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   # Ï§ëÎ≥µ Ï≤¥ÌÅ¨                                                          ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   if redis.exists(f"processed:{idempotency_key}"):                     ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       return {"status": "already_processed"}                           ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   # Ï≤òÎ¶¨ ÌõÑ ÎßàÌÇπ                                                       ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   redis.setex(f"processed:{idempotency_key}", TTL, "1")                ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ DLQ (Dead Letter Queue) ÌùêÎ¶Ñ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Task Ïã§Ìå® (5Ìöå Ïû¨ÏãúÎèÑ ÏÜåÏßÑ)                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   DLX (Dead Letter Exchange) ‚Üí DLQ (dlq.scan.vision Îì±)               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   celery-beat: Îß§ 5Î∂Ñ DLQ Ïû¨Ï≤òÎ¶¨ ÏãúÎèÑ                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Ï†ÑÎûµ</th><th>ÏÑ§Î™Ö</th><th>Ìö®Í≥º</th></tr>
                <tr><td>at-least-once</td><td>Ïã§Ìå® Ïãú ÏûêÎèô Ïû¨ÏãúÎèÑ (ÏµúÎåÄ 5Ìöå)</td><td>Î©îÏãúÏßÄ Ïú†Ïã§ Î∞©ÏßÄ</td></tr>
                <tr><td>Exponential Backoff</td><td>1s ‚Üí 2s ‚Üí 4s ‚Üí 8s ‚Üí 16s</td><td>ÏùºÏãú Ïû•Ïï† Î≥µÏõêÎ†•</td></tr>
                <tr><td>Idempotency Key</td><td>user_id + scan_id Í∏∞Î∞ò</td><td>Ï§ëÎ≥µ Ï≤òÎ¶¨ Î∞©ÏßÄ</td></tr>
                <tr><td>DLQ</td><td>ÏµúÏ¢Ö Ïã§Ìå® Î©îÏãúÏßÄ Î≥¥Í¥Ä</td><td>celery-beat Ïû¨Ï≤òÎ¶¨</td></tr>
            </table>
        </div>
    </div>

    <!-- Modal: Event Bus Layer -->
    <div class="modal-overlay" id="modal-event-bus-layer">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-event-bus-layer')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üöå Event Bus Layer: O(n√óm) ‚Üí O(n) Ïó∞Í≤∞ Î≥µÏû°ÎèÑ Í∞úÏÑ†</span>
                <span class="lang-en">üöå Event Bus Layer: O(n√óm) ‚Üí O(n) Connection Complexity</span>
            </h3>

            <!-- Architecture Evolution -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">ÏïÑÌÇ§ÌÖçÏ≤ò ÏßÑÌôî Í≥ºÏ†ï</span>
                    <span class="lang-en">Architecture Evolution</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         Event Bus Layer Architecture Evolution                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                      ‚îÇ
‚îÇ  ‚ùå Phase 0: Celery Events             ‚îÇ  ‚ùå Phase 1-3: Connection-per-XREAD        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ             ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÇ
‚îÇ  SSE ‚Üí RabbitMQ (21 conn/client)       ‚îÇ  SSE Pod ‚Üî Redis XREAD (N coroutines)      ‚îÇ
‚îÇ  50 VU = 341 connections ‚Üí 503 error   ‚îÇ  CPU 85%, Context switching overhead       ‚îÇ
‚îÇ                                         ‚îÇ  StatefulSet hash mismatch                 ‚îÇ
‚îÇ                                         ‚îÇ                                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                      ‚îÇ
‚îÇ  ‚úÖ Phase 4: Event Bus Layer (Current Solution)                                      ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                     ‚îÇ
‚îÇ                                                                                      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ   ‚îÇ   Worker    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Redis Streams   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Event Router      ‚îÇ            ‚îÇ
‚îÇ   ‚îÇ (Scan/Chat) ‚îÇ XADD ‚îÇ {domain}:events  ‚îÇXREAD ‚îÇ  (Consumer Group)   ‚îÇ            ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ   :{shard 0-3}   ‚îÇ GROUP‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ                           ‚îÇ
‚îÇ                                                          ‚îÇ PUBLISH                   ‚îÇ
‚îÇ                                                          ‚ñº                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ   ‚îÇ   Client    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   SSE Gateway    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ     Pub/Sub         ‚îÇ            ‚îÇ
‚îÇ   ‚îÇ  (Browser)  ‚îÇ SSE  ‚îÇ   (Stateless)    ‚îÇ SUB  ‚îÇ sse:events:{job_id} ‚îÇ            ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                                ‚ñ≤                                                     ‚îÇ
‚îÇ                                ‚îÇ State Recovery                                      ‚îÇ
‚îÇ                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                          ‚îÇ
‚îÇ                        ‚îÇ     State KV     ‚îÇ                                          ‚îÇ
‚îÇ                        ‚îÇ  {domain}:state  ‚îÇ                                          ‚îÇ
‚îÇ                        ‚îÇ    :{job_id}     ‚îÇ                                          ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                          ‚îÇ
‚îÇ                                                                                      ‚îÇ
‚îÇ   Key Benefit: Pod count ‚üÇ Shard count (ÎèÖÎ¶ΩÏ†Å Ïä§ÏºÄÏùºÎßÅ Í∞ÄÎä•)                        ‚îÇ
‚îÇ                                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            </div>

            <!-- 3-Component Separation -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">Ï†ÄÏû• + Ï†ÑÎã¨ + Î≥µÍµ¨ Ï±ÖÏûÑ Î∂ÑÎ¶¨</span>
                    <span class="lang-en">Storage + Delivery + Recovery Separation</span>
                </h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                    <div style="background: rgba(59,130,246,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59,130,246,0.3);">
                        <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">üíæ Redis Streams (ÏòÅÏÜç)</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div><strong>Key:</strong> <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">{domain}:events:{shard}</code></div>
                            <div style="margin-top: 0.5rem;">‚Ä¢ 4 shards (0-3)</div>
                            <div>‚Ä¢ XREADGROUP Consumer Group</div>
                            <div>‚Ä¢ AOF + Replication</div>
                            <div>‚Ä¢ rfr-streams-redis ÌÅ¥Îü¨Ïä§ÌÑ∞</div>
                        </div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <h5 style="color: #10b981; margin-bottom: 0.75rem;">üì° Pub/Sub (Ïã§ÏãúÍ∞Ñ)</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div><strong>Channel:</strong> <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">sse:events:{job_id}</code></div>
                            <div style="margin-top: 0.5rem;">‚Ä¢ Topic-based routing</div>
                            <div>‚Ä¢ Stateless fan-out</div>
                            <div>‚Ä¢ No durability (ephemeral)</div>
                            <div>‚Ä¢ rfr-pubsub-redis ÌÅ¥Îü¨Ïä§ÌÑ∞</div>
                        </div>
                    </div>
                    <div style="background: rgba(245,158,11,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(245,158,11,0.3);">
                        <h5 style="color: #f59e0b; margin-bottom: 0.75rem;">üîÑ State KV (Î≥µÍµ¨)</h5>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">
                            <div><strong>Key:</strong> <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px;">{domain}:state:{job_id}</code></div>
                            <div style="margin-top: 0.5rem;">‚Ä¢ ÎßàÏßÄÎßâ ÏÉÅÌÉú Ïä§ÎÉÖÏÉ∑</div>
                            <div>‚Ä¢ SSE Ïû¨Ïó∞Í≤∞ Ïãú catch-up</div>
                            <div>‚Ä¢ seq Í∏∞Î∞ò Ï§ëÎ≥µ Î∞©ÏßÄ</div>
                            <div>‚Ä¢ TTL 1h (ÏûêÎèô Ï†ïÎ¶¨)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Event Router Components -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">Event Router ÌïµÏã¨ Ïª¥Ìè¨ÎÑåÌä∏</span>
                    <span class="lang-en">Event Router Core Components</span>
                </h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: #8b5cf6; margin-bottom: 0.5rem;">StreamConsumer</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>‚Ä¢ XREADGROUP GROUP eventrouter</div>
                            <div>‚Ä¢ COUNT 100 BLOCK 5000ms</div>
                            <div>‚Ä¢ 4 shards Î≥ëÎ†¨ ÏÜåÎπÑ</div>
                            <div>‚Ä¢ Ï≤òÎ¶¨ ÌõÑ XACK</div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: #ec4899; margin-bottom: 0.5rem;">EventProcessor</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>‚Ä¢ Atomic Lua Script</div>
                            <div>‚Ä¢ Idempotency: <code>router:published:{job_id}:{seq}</code></div>
                            <div>‚Ä¢ Sequence Í≤ÄÏ¶ù</div>
                            <div>‚Ä¢ State ÏóÖÎç∞Ïù¥Ìä∏ ‚Üí PUBLISH</div>
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <h5 style="color: #f59e0b; margin-bottom: 0.5rem;">PendingReclaimer</h5>
                        <div style="font-size: 0.8rem; color: var(--text-secondary);">
                            <div>‚Ä¢ XAUTOCLAIM Ï£ºÍ∏∞: 60s</div>
                            <div>‚Ä¢ Idle threshold: 5Î∂Ñ</div>
                            <div>‚Ä¢ ÎØ∏Ï≤òÎ¶¨ Î©îÏãúÏßÄ Î≥µÍµ¨</div>
                            <div>‚Ä¢ Idempotency Î≥¥Ïû•</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Connection Complexity Comparison -->
            <div style="margin-bottom: 1rem;">
                <h4 style="color: var(--primary); margin-bottom: 1rem; font-size: 1.1rem;">
                    <span class="lang-ko">Ïó∞Í≤∞ Î≥µÏû°ÎèÑ ÎπÑÍµê</span>
                    <span class="lang-en">Connection Complexity Comparison</span>
                </h4>
                <table class="modal-table">
                    <tr>
                        <th><span class="lang-ko">Íµ¨Î∂Ñ</span><span class="lang-en">Phase</span></th>
                        <th><span class="lang-ko">Ïó∞Í≤∞ Íµ¨Ï°∞</span><span class="lang-en">Connection Structure</span></th>
                        <th><span class="lang-ko">50 VU Ïó∞Í≤∞ Ïàò</span><span class="lang-en">50 VU Connections</span></th>
                        <th><span class="lang-ko">Ïä§ÏºÄÏùºÎßÅ</span><span class="lang-en">Scaling</span></th>
                        <th><span class="lang-ko">Í≤∞Í≥º</span><span class="lang-en">Result</span></th>
                    </tr>
                    <tr>
                        <td style="color: #ef4444;">Celery Events</td>
                        <td>SSE √ó RabbitMQ = O(n√óm)</td>
                        <td style="color: #ef4444;"><strong>341Í∞ú</strong> (1:21 ÎπÑÏú®)</td>
                        <td>‚ùå Î∂àÍ∞Ä</td>
                        <td style="color: #ef4444;">503 Error</td>
                    </tr>
                    <tr>
                        <td style="color: #f59e0b;">Connection-per-XREAD</td>
                        <td>SSE √ó Coroutine = O(n)</td>
                        <td>50Í∞ú</td>
                        <td>‚ö†Ô∏è CPU 85%</td>
                        <td style="color: #f59e0b;">62% ÏôÑÎ£åÏú®</td>
                    </tr>
                    <tr>
                        <td style="color: #22c55e;">Event Bus Layer</td>
                        <td>Router(1) + SSE(SUB) = O(n)</td>
                        <td style="color: #22c55e;"><strong>‚âà20Í∞ú</strong></td>
                        <td>‚úÖ HPA/KEDA</td>
                        <td style="color: #22c55e;">99.9% @ 300VU</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <!-- Modal: Event Streams - SSE Metrics -->
    <div class="modal-overlay" id="modal-stream-metrics">
        <div class="modal-content" style="max-width: 1200px;">
            <button class="modal-close" onclick="closeModal('modal-stream-metrics')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üéØ Scan SSE ÏïÑÌÇ§ÌÖçÏ≤ò ÏßÑÌôî Î∞è ÏÑ±Îä• ÏßÄÌëú</span>
                <span class="lang-en">üéØ Scan SSE Architecture Evolution & Performance Metrics</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     SSE Architecture Evolution: Connection Explosion ‚Üí Event Bus‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚ùå Phase 0: Celery Events (50 VU fail)  ‚úÖ Current: Event Bus + Pub/Sub       ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ   Client ‚îÄSSE‚îÄ‚ñ∫ scan-api ‚îÄ‚ñ∫ RabbitMQ      Worker ‚îÄXADD‚îÄ‚ñ∫ Streams ‚îÄ‚ñ∫ Router      ‚îÇ
‚îÇ                    ‚îÇ                                         ‚îÇ                  ‚îÇ
‚îÇ              1:21 connection explosion                       ‚ñº                  ‚îÇ
‚îÇ              (SSE 16 : MQ 341)            Router ‚îÄPUBLISH‚îÄ‚ñ∫ Pub/Sub ‚îÄ‚ñ∫ Gateway  ‚îÇ
‚îÇ                    ‚îÇ                                                ‚îÇ           ‚îÇ
‚îÇ              503 errors                                             ‚ñº           ‚îÇ
‚îÇ                                                              SSE ‚îÄ‚ñ∫ Client      ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Key: SSE : RabbitMQ = 1:21  ‚Üí  SSE : Redis = 1:0 (RabbitMQ dependency removed)‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr>
                    <th>VU</th>
                    <th><span class="lang-ko">ÏôÑÎ£åÏú®</span><span class="lang-en">Completion</span></th>
                    <th><span class="lang-ko">Ï≤òÎ¶¨Îüâ</span><span class="lang-en">Throughput</span></th>
                    <th>E2E p95</th>
                    <th>Scan API p95</th>
                    <th><span class="lang-ko">Ïä§ÎÉÖÏÉ∑</span><span class="lang-en">Snapshot</span></th>
                </tr>
                <tr><td>50</td><td><strong>99.7%</strong></td><td>198 req/m</td><td>17.7s</td><td>93ms</td><td><a href="https://snapshots.raintank.io/dashboard/snapshot/ZdMIItsw6ZRFhXKLO1M1BJDW14QkHC4o" target="_blank">‚Üí</a></td></tr>
                <tr><td>200</td><td><strong>99.8%</strong></td><td>370 req/m</td><td>33.2s</td><td>83ms</td><td><a href="https://snapshots.raintank.io/dashboard/snapshot/Xbr36P3VSZhqvE8RHv2vlpgNm8lHcwSs" target="_blank">‚Üí</a></td></tr>
                <tr><td>250</td><td><strong>99.9%</strong></td><td>418 req/m</td><td>40.5s</td><td>83ms</td><td><a href="https://snapshots.raintank.io/dashboard/snapshot/g3Qa0xMImwNmNuzQTXGW6C6I5VBopY5J" target="_blank">‚Üí</a></td></tr>
                <tr style="background: rgba(0,255,136,0.1);"><td><strong>300</strong></td><td><strong>99.9%</strong></td><td>402 req/m</td><td>48.5s</td><td>83ms</td><td><a href="https://snapshots.raintank.io/dashboard/snapshot/9LbgErvCS0N94vDc9NwO15kVAk7eLzLM" target="_blank" style="color: var(--primary);">SLA ‚Üí</a></td></tr>
                <tr><td>400</td><td>98.9%</td><td>427 req/m</td><td style="color: #ffaa00;">62.0s</td><td style="color: #ffaa00;">207ms</td><td><a href="https://snapshots.raintank.io/dashboard/snapshot/frzezh23ZWCrpiWNprpEtv3tFsdTEouI" target="_blank">‚Üí</a></td></tr>
                <tr><td>500</td><td style="color: #ff6b6b;">94.0%</td><td>428 req/m</td><td style="color: #ff6b6b;">76.3s</td><td>154ms</td><td><a href="https://snapshots.raintank.io/dashboard/snapshot/dtBvLo3J2JlQ3LwWbcM6iwBJJuhboow5" target="_blank">‚Üí</a></td></tr>
            </table>
            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR / Release</span>
                    <span class="lang-en">Related PRs / Releases</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.7" target="_blank" rel="noopener">v1.0.7</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/311" target="_blank" rel="noopener">#311 Event Router</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/320" target="_blank" rel="noopener">#320 SSE Routing</a>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">
                    <span class="lang-ko">üìà VU Î∞úÏ†Ñ Í≥ºÏ†ï Î∂ÑÏÑù</span>
                    <span class="lang-en">üìà VU Progression Analysis</span>
                </strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <span class="lang-ko">
                        <strong>SLA Í∏∞Ï§Ä:</strong> E2E p95 &lt; 60Ï¥à ‚Üí <strong>300 VU</strong>Í∞Ä ÏïàÏ†Ñ ÌïúÍ≥Ñ<br>
                        <strong>400 VU:</strong> 98.9% ÏôÑÎ£åÏú® Ïú†ÏßÄ, ÌïòÏßÄÎßå E2E p95 62Ï¥à (SLA Ï¥àÍ≥º)<br>
                        <strong>500 VU:</strong> ÏôÑÎ£åÏú® 94%Î°ú ÌïòÎùΩ, ÏãúÏä§ÌÖú Ìè¨Ìôî ÏÉÅÌÉú<br>
                        <strong>ÌôïÏû• Ï†ÑÎûµ:</strong> Karpenter Ï†ÅÏö© Ïãú 400 VU √ó ÎÖ∏ÎìúÏàò ÌôïÏû• Í∞ÄÎä•
                    </span>
                    <span class="lang-en">
                        <strong>SLA Criteria:</strong> E2E p95 &lt; 60s ‚Üí <strong>300 VU</strong> is safe limit<br>
                        <strong>400 VU:</strong> 98.9% completion maintained, but E2E p95 62s (SLA exceeded)<br>
                        <strong>500 VU:</strong> Completion drops to 94%, system saturation<br>
                        <strong>Scaling Strategy:</strong> With Karpenter, 400 VU √ó node count scalable
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Event Streams - LLM Pipeline Profile -->
    <div class="modal-overlay" id="modal-stream-llm">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-stream-llm')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üìä LLM ÌååÏù¥ÌîÑÎùºÏù∏ ÌäπÏÑ± Î∂ÑÏÑù</span>
                <span class="lang-en">üìä LLM Pipeline Characteristics Analysis</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        LLM Pipeline I/O-bound ÌäπÏÑ±                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   StageÎ≥Ñ ÏÜåÏöî ÏãúÍ∞Ñ (Ï†ÄÎ∂ÄÌïò k6 VU 10 Í∏∞Ï§Ä)                                       ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                     ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   vision (40%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  4.5Ï¥à (OpenAI Vision)  ‚îÇ
‚îÇ   answer (45%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  4.8Ï¥à (OpenAI Chat)‚îÇ
‚îÇ   rule   (3%)  ‚ñà‚ñà  0.3Ï¥à (PostgreSQL)                                           ‚îÇ
‚îÇ   reward (15%) ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  1.7Ï¥à (Character Match)                         ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ
‚îÇ   Total: ~11-12Ï¥à (Ï†ÄÎ∂ÄÌïò ÌèâÍ∑†) / üéØ SLA 300 VU: p95 48.5Ï¥à                     ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚ö†Ô∏è ÌïµÏã¨ Î≥ëÎ™©: OpenAI API (vision + answer) = Ï†ÑÏ≤¥Ïùò 82%                       ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   100% I/O-bound ÏõåÌÅ¨Î°úÎìú:                                                      ‚îÇ
‚îÇ   ‚îú‚îÄ OpenAI API Ìò∏Ï∂ú: 82% (vision 4.5s + answer 4.8s = 9.3s)                    ‚îÇ
‚îÇ   ‚îú‚îÄ Rule-based retrieval: 3% (PostgreSQL I/O)                                  ‚îÇ
‚îÇ   ‚îî‚îÄ Character matching: 15% (DB + gRPC I/O)                                    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚Üí Gevent (greenlet) Ï†ÑÌôòÏúºÎ°ú 100+ ÎèôÏãú I/O Í∞ÄÎä•                               ‚îÇ
‚îÇ   ‚Üí 300 VUÏóêÏÑú 99.9% ÏôÑÎ£åÏú® Îã¨ÏÑ± (SLA Í∏∞Ï§Ä)                                     ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Stage</th><th><span class="lang-ko">ÌèâÍ∑† (VU 10)</span><span class="lang-en">Avg (VU 10)</span></th><th><span class="lang-ko">ÎπÑÏú®</span><span class="lang-en">Ratio</span></th><th><span class="lang-ko">Î≥ëÎ™© ÏõêÏù∏</span><span class="lang-en">Bottleneck</span></th></tr>
                <tr><td>vision</td><td>4.5Ï¥à</td><td>40%</td><td>OpenAI Vision API (gpt-5.2)</td></tr>
                <tr><td>answer</td><td>4.8Ï¥à</td><td>42%</td><td>OpenAI Chat API (gpt-5.2)</td></tr>
                <tr><td>reward</td><td>1.7Ï¥à</td><td>15%</td><td>Character Match gRPC</td></tr>
                <tr><td>rule</td><td>0.3Ï¥à</td><td>3%</td><td>PostgreSQL ÏøºÎ¶¨</td></tr>
                <tr style="background: rgba(0,255,136,0.1);"><td><strong>Total</strong></td><td><strong>~11.3Ï¥à</strong></td><td>100%</td><td>üéØ SLA: 300 VU p95 48.5Ï¥à</td></tr>
            </table>
        </div>
    </div>

    <!-- Modal: Event Streams - SSE Recovery -->
    <div class="modal-overlay" id="modal-stream-recovery">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-stream-recovery')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîÑ SSE Ïû¨Ïó∞Í≤∞ Î≥µÍµ¨ (State KV + Streams Catch-up)</span>
                <span class="lang-en">üîÑ SSE Reconnection Recovery (State KV + Streams Catch-up)</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    SSE Ïû¨Ïó∞Í≤∞ Ïãú ÎàÑÎùΩ Ïù¥Î≤§Ìä∏ Î≥µÍµ¨ Î©îÏª§ÎãàÏ¶ò                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Redis 3Ï¢Ö Î∂ÑÎ¶¨ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   Streams (ÏòÅÏÜç)           Pub/Sub (Ïã§ÏãúÍ∞Ñ)        State KV (Î≥µÍµ¨)      ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   scan:events:{shard}      sse:events:{job_id}     scan:state:{job_id}  ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ   XADD (4Í∞ú ÏÉ§Îìú)          PUBLISH                  SETEX (TTL 30Î∂Ñ)    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Ïû¨Ïó∞Í≤∞ Î≥µÍµ¨ ÌùêÎ¶Ñ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   1. Client SSE Ïû¨Ïó∞Í≤∞ (ÎÑ§Ìä∏ÏõåÌÅ¨ ÎÅäÍπÄ ÌõÑ)                              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   2. SSE Gateway: Pub/Sub Íµ¨ÎèÖ Î®ºÏ†Ä ÏãúÏûë (Ïù¥Î≤§Ìä∏ ÎàÑÎùΩ Î∞©ÏßÄ)            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   3. State KV Ï°∞Ìöå: scan:state:{job_id}                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ  ‚Üí ÌòÑÏû¨ stage, seq, status ÌôïÏù∏                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   4. Streams Catch-up (last_seq Ïù¥ÌõÑ Ïù¥Î≤§Ìä∏ XRANGE)                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   5. Ïã§ÏãúÍ∞Ñ Pub/Sub Ïù¥Î≤§Ìä∏ ÏàòÏã† Í≥ÑÏÜç                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ÌïµÏã¨ ÏõêÏπô: "Íµ¨ÎèÖ Î®ºÏ†Ä, State Ï°∞Ìöå ÎÇòÏ§ë" ‚Üí Race Condition Î∞©ÏßÄ                 ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Ï†ÄÏû•ÏÜå</th><th>Ïö©ÎèÑ</th><th>TTL</th></tr>
                <tr><td>Redis Streams</td><td>Ïù¥Î≤§Ìä∏ ÏòÅÏÜç Ï†ÄÏû• (4Í∞ú ÏÉ§Îìú)</td><td>maxlen 50</td></tr>
                <tr><td>Redis Pub/Sub</td><td>Ïã§ÏãúÍ∞Ñ Î∏åÎ°úÎìúÏ∫êÏä§Ìä∏</td><td>Fire-and-forget</td></tr>
                <tr><td>Redis State KV</td><td>ÌòÑÏû¨ ÏÉÅÌÉú Ïä§ÎÉÖÏÉ∑</td><td>30Î∂Ñ</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">‚úÖ Race Condition Ìï¥Í≤∞</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    ‚Ä¢ WorkerÏôÄ Event RouterÏùò State Í∞±Ïã† Í∂åÌïú Îã®ÏùºÌôî<br>
                    ‚Ä¢ seq ÏàúÏÑúÏôÄ Í¥ÄÍ≥ÑÏóÜÏù¥ Î™®Îì† Ïù¥Î≤§Ìä∏ Pub/Sub Î∞úÌñâ<br>
                    ‚Ä¢ Pub/Sub Íµ¨ÎèÖ ‚Üí State Ï°∞Ìöå ÏàúÏÑú Í∞ïÏ†ú<br>
                    ‚Ä¢ Streams catch-upÏúºÎ°ú ÎàÑÎùΩ Ïù¥Î≤§Ìä∏ Î≥µÍµ¨
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Eventual Consistency - Write Offloading -->
    <div class="modal-overlay" id="modal-ec-offloading">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-ec-offloading')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üì§ Write Offloading: API‚ÜíWorker Ï±ÖÏûÑ Î∂ÑÎ¶¨</span>
                <span class="lang-en">üì§ Write Offloading: API‚ÜíWorker Responsibility Separation</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Write Offloading: ÌåêÏ†ï/Ï†ÄÏû• Î∂ÑÎ¶¨                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚ùå Before (ÌåêÏ†ï + Ï†ÄÏû• ÎèôÏãú)            ‚úÖ After (ÌåêÏ†ï/Ï†ÄÏû• Î∂ÑÎ¶¨)              ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ            ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
‚îÇ   scan_reward_task ÏãúÏûë                   scan_reward_task ÏãúÏûë                  ‚îÇ
‚îÇ        ‚îÇ                                       ‚îÇ                                 ‚îÇ
‚îÇ        ‚îú‚îÄ Ï∫êÎ¶≠ÌÑ∞ Îß§Ïπ≠ (ÌåêÏ†ï)                   ‚îú‚îÄ Ï∫êÎ¶≠ÌÑ∞ Îß§Ïπ≠ (ÌåêÏ†ï)              ‚îÇ
‚îÇ        ‚îú‚îÄ character_ownerships INSERT          ‚îú‚îÄ persist_reward.delay()         ‚îÇ
‚îÇ        ‚îú‚îÄ session.commit()                     ‚îÇ   (Fire & Forget)               ‚îÇ
‚îÇ        ‚îú‚îÄ sync_to_users_task.delay()              ‚îÇ                                 ‚îÇ
‚îÇ        ‚îú‚îÄ gRPC Ìò∏Ï∂ú                            ‚îî‚îÄ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏùëÎãµ ‚úÖ (~100ms)     ‚îÇ
‚îÇ        ‚îÇ                                                                         ‚îÇ
‚îÇ        ‚îî‚îÄ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏùëÎãµ (~600ms)        (ÎπÑÎèôÍ∏∞, ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏùëÎãµÍ≥º Î¨¥Í¥Ä)        ‚îÇ
‚îÇ                                           persist_reward_task                    ‚îÇ
‚îÇ                                                ‚îÇ                                 ‚îÇ
‚îÇ                                                ‚îú‚îÄ save_ownership.delay()         ‚îÇ
‚îÇ                                                ‚îî‚îÄ save_user_character.delay()      ‚îÇ
‚îÇ                                                                                  ‚îÇ
‚îÇ   ÏùëÎãµ ÏãúÍ∞Ñ: 600ms ‚Üí 100ms (83% Í∞êÏÜå)                                            ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Ìï≠Î™©</th><th>Before</th><th>After</th></tr>
                <tr><td>ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏùëÎãµ</td><td>ÌåêÏ†ï + DB Ï†ÄÏû• ÏôÑÎ£å ÌõÑ</td><td><strong>ÌåêÏ†ï Ï¶âÏãú</strong></td></tr>
                <tr><td>DB Ï†ÄÏû•</td><td>ÏàúÏ∞® (character ‚Üí users gRPC)</td><td><strong>Î≥ëÎ†¨ (Fire & Forget)</strong></td></tr>
                <tr><td>users ÎèÑÎ©îÏù∏ Ïó∞Îèô</td><td>gRPC Ìò∏Ï∂ú</td><td><strong>ÏßÅÏ†ë DB INSERT</strong></td></tr>
                <tr><td>Ïã§Ìå® Ïãú ÏòÅÌñ•</td><td>Ï†ÑÏ≤¥ Ïã§Ìå®</td><td><strong>Í∞ÅÏûê ÎèÖÎ¶Ω Ïû¨ÏãúÎèÑ</strong></td></tr>
            </table>
            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR / Release</span>
                    <span class="lang-en">Related PRs / Releases</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip release" href="https://github.com/eco2-team/backend/releases/tag/v1.0.7" target="_blank" rel="noopener">v1.0.7</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/353" target="_blank" rel="noopener">#353 Fanout</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/338" target="_blank" rel="noopener">#338 Queue Strategy</a>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üìà ÌïµÏã¨ ÏÑ±Í≥º</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    ‚Ä¢ ÏùëÎãµ ÏãúÍ∞Ñ <strong>83% Í∞êÏÜå</strong> (600ms ‚Üí 100ms)<br>
                    ‚Ä¢ gRPC ÎÑ§Ìä∏ÏõåÌÅ¨ Ïò§Î≤ÑÌó§Îìú Ï†úÍ±∞<br>
                    ‚Ä¢ DB Ïû•Ïï† Í≤©Î¶¨ (ÏùëÎãµÏóê ÏòÅÌñ• ÏóÜÏùå)<br>
                    ‚Ä¢ Í∞Å Worker ÎèÖÎ¶ΩÏ†Å Ïû¨ÏãúÎèÑ (5Ìöå, exponential backoff)
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Eventual Consistency - at-least-once -->
    <div class="modal-overlay" id="modal-ec-atleastonce">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-ec-atleastonce')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üÜî Exactly-once Semantics (at-least-once + Î©±Îì±ÏÑ±)</span>
                <span class="lang-en">üÜî Exactly-once Semantics (at-least-once + Idempotency)</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Exactly-once = at-least-once + Idempotency                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Deterministic UUID ÏÉùÏÑ± ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   # user_id + scan_id ‚Üí ÎèôÏùº ÏûÖÎ†•Ïù¥Î©¥ ÎèôÏùº UUID                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   idempotency_key = uuid5(NAMESPACE, f"{user_id}:{scan_id}")           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Ïû•Ï†ê:                                                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Ïû¨ÏãúÎèÑ Ïãú ÎèôÏùº ÌÇ§ Î≥¥Ïû•                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ DB Unique ConstraintÎ°ú Ï§ëÎ≥µ Î∞©ÏßÄ                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Race condition Î∞©Ïñ¥ (ÎèôÏãú ÏöîÏ≤≠ÎèÑ ÌïòÎÇòÎßå ÏÑ±Í≥µ)                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Ïû¨ÏãúÎèÑ Ï†ÑÎûµ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   Ïã§Ìå® ‚Üí ÏûêÎèô Ïû¨ÏãúÎèÑ 5Ìöå (exponential backoff: 1s ‚Üí 2s ‚Üí 4s ‚Üí 8s ‚Üí 16s)‚îÇ    ‚îÇ
‚îÇ   ‚îÇ        ‚Üí ÏµúÏ¢Ö Ïã§Ìå® Ïãú DLQ Î≥¥Í¥Ä                                         ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ        ‚Üí celery-beat: Îß§ 5Î∂Ñ DLQ Ïû¨Ï≤òÎ¶¨                                ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Ï§ëÎ≥µ Ï≤òÎ¶¨ Î∞©Ïñ¥ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   # DB Î†àÎ≤® Î∞©Ïñ¥                                                       ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   try:                                                                 ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       await ownership_repo.insert_owned(...)                           ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       await session.commit()                                           ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   except IntegrityError:                                               ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       # Race condition: Ïù¥ÎØ∏ Îã§Î•∏ ÏöîÏ≤≠Ïù¥ ÏÇΩÏûÖÌï®                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ       return {"saved": False, "reason": "concurrent_insert"}           ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Í≥ÑÏ∏µ</th><th>Î∞©Ïñ¥ Î©îÏª§ÎãàÏ¶ò</th><th>Ìö®Í≥º</th></tr>
                <tr><td>Application</td><td>Deterministic UUID (uuid5)</td><td>ÎèôÏùº ÏûÖÎ†• ‚Üí ÎèôÏùº ÌÇ§</td></tr>
                <tr><td>Cache</td><td>Redis SETEX (idempotency ÎßàÌÇπ)</td><td>Îπ†Î•∏ Ï§ëÎ≥µ Ï≤¥ÌÅ¨</td></tr>
                <tr><td>Database</td><td>Unique Constraint</td><td>ÏµúÏ¢Ö Ï§ëÎ≥µ Î∞©ÏßÄ</td></tr>
                <tr><td>Worker</td><td>IntegrityError Ìï∏Îì§ÎßÅ</td><td>Race condition Î∞©Ïñ¥</td></tr>
            </table>
        </div>
    </div>

    <!-- Modal: Eventual Consistency - Fanout Routing -->
    <div class="modal-overlay" id="modal-ec-fanout">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-ec-fanout')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üì° Fanout 1:N ÎùºÏö∞ÌåÖ (Î≥ëÎ†¨ Ï†ÄÏû•)</span>
                <span class="lang-en">üì° Fanout 1:N Routing (Parallel Persistence)</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Fanout Exchange: Îã®Ïùº Ïù¥Î≤§Ìä∏ ‚Üí Îã§Ï§ë Worker                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   scan_reward_task (ÌåêÏ†ï ÏôÑÎ£å)                                                  ‚îÇ
‚îÇ        ‚îÇ                                                                        ‚îÇ
‚îÇ        ‚ñº                                                                        ‚îÇ
‚îÇ   persist_reward_task.delay() ‚îÄ‚îÄ‚îÄ dispatcher                                    ‚îÇ
‚îÇ        ‚îÇ                                                                        ‚îÇ
‚îÇ        ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                           ‚îÇ
‚îÇ        ‚îÇ                                            ‚îÇ                           ‚îÇ
‚îÇ        ‚ñº                                            ‚ñº                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ   ‚îÇ save_ownership_task ‚îÇ               ‚îÇ save_user_character   ‚îÇ                 ‚îÇ
‚îÇ   ‚îÇ (reward.persist ÌÅê) ‚îÇ               ‚îÇ (users.sync ÌÅê)        ‚îÇ                 ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îÇ              ‚îÇ                                     ‚îÇ                            ‚îÇ
‚îÇ              ‚ñº                                     ‚ñº                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ   ‚îÇ character DB        ‚îÇ               ‚îÇ users DB               ‚îÇ                 ‚îÇ
‚îÇ   ‚îÇ character_ownerships‚îÇ               ‚îÇ user_characters     ‚îÇ                 ‚îÇ
‚îÇ   ‚îÇ INSERT              ‚îÇ               ‚îÇ INSERT (ÏßÅÏ†ë)       ‚îÇ                 ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ÌäπÏßï:                                                                         ‚îÇ
‚îÇ   ‚Ä¢ Îëò Îã§ Fire & Forget (Î∞úÌñâ ÌõÑ Ï¶âÏãú Î∞òÌôò)                                     ‚îÇ
‚îÇ   ‚Ä¢ ÌïòÎÇòÍ∞Ä Ïã§Ìå®Ìï¥ÎèÑ Îã§Î•∏ ÌïòÎÇòÎäî Ï†ïÏÉÅ Î∞úÌñâ                                        ‚îÇ
‚îÇ   ‚Ä¢ Í∞ÅÏûê ÎèÖÎ¶ΩÏ†Å Ïû¨ÏãúÎèÑ (5Ìöå, exponential backoff)                               ‚îÇ
‚îÇ   ‚Ä¢ gRPC Ï†úÍ±∞ ‚Üí users DB ÏßÅÏ†ë Ï†ëÍ∑º                                                 ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Task</th><th>ÌÅê</th><th>ÎåÄÏÉÅ DB</th><th>Ïû¨ÏãúÎèÑ</th></tr>
                <tr><td>persist_reward_task</td><td>reward.persist</td><td>dispatcher</td><td>3Ìöå</td></tr>
                <tr><td>save_ownership_task</td><td>reward.persist</td><td>character.character_ownerships</td><td>5Ìöå</td></tr>
                <tr><td>save_user_character_task</td><td>users.sync</td><td>users.user_characters</td><td>5Ìöå</td></tr>
            </table>
        </div>
    </div>

    <!-- Modal: Eventual Consistency - Cache Invalidation -->
    <div class="modal-overlay" id="modal-ec-cache">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-ec-cache')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîÑ Ï∫êÏãú Î¨¥Ìö®Ìôî Ï†ÑÎûµ (Fanout + TTL)</span>
                <span class="lang-en">üîÑ Cache Invalidation Strategy (Fanout + TTL)</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Cache Invalidation: Eventual Consistency                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Ï∫êÏãú Î¨¥Ìö®Ìôî ÌùêÎ¶Ñ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   DB Î≥ÄÍ≤Ω (character_ownerships INSERT)                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   character.events (Fanout Exchange)                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îÇ                                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        ‚ñº                                            ‚ñº                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ character_worker ‚îÇ               ‚îÇ ext-authz        ‚îÇ             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Local Cache Í∞±Ïã† ‚îÇ               ‚îÇ Local Cache Í∞±Ïã† ‚îÇ             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ TTL Í∏∞Î∞ò ÏûêÎèô ÎßåÎ£å ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Local Cache TTL: 10Ï¥à                                              ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ ÏµúÏïÖÏùò Í≤ΩÏö∞ 10Ï¥àÍ∞Ñ stale data Í∞ÄÎä• (Eventual Consistency)          ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ TTL ÎßåÎ£å ÌõÑ DBÏóêÏÑú fresh data Î°úÎìú                                 ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Ïã†Í∑ú Worker Î∂ÄÌåÖ Ïãú ÏõåÎ∞ç ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   Worker ÏãúÏûë Ïãú:                                                      ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   1. DBÏóêÏÑú ÌòÑÏû¨ ÏÉÅÌÉú Î°úÎìú                                             ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   2. Local Cache Ï¥àÍ∏∞Ìôî                                                ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   3. Fanout Exchange Íµ¨ÎèÖ ÏãúÏûë                                         ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   4. Ïù¥ÌõÑ Ïù¥Î≤§Ìä∏ ÏàòÏã†ÌïòÎ©∞ Ïã§ÏãúÍ∞Ñ Í∞±Ïã†                                   ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Ï†ÑÎûµ</th><th>Î©îÏª§ÎãàÏ¶ò</th><th>ÏßÄÏó∞ ÏãúÍ∞Ñ</th></tr>
                <tr><td>Fanout Broadcast</td><td>Exchange ‚Üí Î™®Îì† Íµ¨ÎèÖ Worker</td><td>~10ms</td></tr>
                <tr><td>TTL Í∏∞Î∞ò ÎßåÎ£å</td><td>Local Cache TTL 10Ï¥à</td><td>ÏµúÎåÄ 10Ï¥à</td></tr>
                <tr><td>Ïã†Í∑ú Worker ÏõåÎ∞ç</td><td>Î∂ÄÌåÖ Ïãú DB Î°úÎìú + Íµ¨ÎèÖ</td><td>Ï¶âÏãú</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">‚ö†Ô∏è Trade-off</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    ‚Ä¢ <strong>Ïû•Ï†ê:</strong> Îπ†Î•∏ ÏùëÎãµ, Ïû•Ïï† Í≤©Î¶¨, ÏàòÌèâ ÌôïÏû• Ïö©Ïù¥<br>
                    ‚Ä¢ <strong>Îã®Ï†ê:</strong> ÏµúÎåÄ 10Ï¥àÍ∞Ñ stale data Í∞ÄÎä•<br>
                    ‚Ä¢ <strong>Ï†ÅÏö© Í∏∞Ï§Ä:</strong> Strong Consistency Î∂àÌïÑÏöîÌïú ÏòÅÏó≠ÏóêÎßå Ï†ÅÏö©
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Eventual Consistency - Chat Async Persistence -->
    <div class="modal-overlay" id="modal-ec-async-persistence">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-ec-async-persistence')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîÅ Chat Async Persistence (3Ï§ë EC Ìå®ÌÑ¥)</span>
                <span class="lang-en">üîÅ Chat Async Persistence (Triple EC Pattern)</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Chat Pipeline - 3Ï§ë Eventual Consistency                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚ë† CheckpointSyncService (LangGraph Ï≤¥ÌÅ¨Ìè¨Ïù∏Ìä∏)                               ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                 ‚îÇ
‚îÇ   chat-worker                    CheckpointSyncService (replicas=1)             ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ   ‚îÇ aput()   ‚îÇ‚îÄ‚îÄRPUSH‚îÄ‚îÄ‚Üí        ‚îÇ BRPOP (blocking, 5s timeout)     ‚îÇ          ‚îÇ
‚îÇ   ‚îÇ Redis    ‚îÇ  sync:queue       ‚îÇ Batch ÏàòÏßë (max=50, drain=2s)   ‚îÇ          ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ Dedup: (thread_id, ns) ‚Üí latest ‚îÇ          ‚îÇ
‚îÇ                                  ‚îÇ Redis read ‚Üí PG upsert          ‚îÇ          ‚îÇ
‚îÇ                                  ‚îÇ Ïã§Ìå® ‚Üí DLQ (checkpoint:sync:dlq)‚îÇ          ‚îÇ
‚îÇ                                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚ë° ReadThroughCheckpointer (ÏùΩÍ∏∞ Í≤ΩÎ°ú ÏµúÏ†ÅÌôî)                                 ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                 ‚îÇ
‚îÇ   graph.ainvoke()                                                               ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ   ‚îÇ aget_tuple() ‚îÇ‚îÄ‚îÄ‚Üí  ‚îÇ Redis hit? ‚Üí return (hot, ~1ms)          ‚îÇ            ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ     ‚îÇ Redis miss? ‚Üí PG read ‚Üí Redis promote   ‚îÇ            ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ     ‚îÇ              (Temporal Locality)         ‚îÇ            ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚ë¢ Chat Persistence Consumer (Î©îÏãúÏßÄ ÏòÅÏÜçÌôî)                                  ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                 ‚îÇ
‚îÇ   chat:events:{shard}            Persistence Consumer (group: chat-persistence) ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ   ‚îÇ done Ïù¥Î≤§Ìä∏  ‚îÇ‚îÄ‚îÄXREADGROUP‚îÄ‚Üí‚îÇ MessageSaveHandler               ‚îÇ           ‚îÇ
‚îÇ   ‚îÇ (chat-worker ‚îÇ              ‚îÇ batch flush: 100Í∞ú or 5Ï¥à        ‚îÇ           ‚îÇ
‚îÇ   ‚îÇ  Î∞úÌñâ)       ‚îÇ              ‚îÇ ‚Üí chat.messages INSERT           ‚îÇ           ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ XACK on success                  ‚îÇ           ‚îÇ
‚îÇ                                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 8px;">
                <div style="color: #f59e0b; font-size: 0.8rem; margin-bottom: 0.5rem;">// checkpoint_sync_service.py ‚Äî Batch Dedup ÌïµÏã¨ Î°úÏßÅ</div>
                <pre style="color: var(--text-secondary); font-size: 0.75rem; line-height: 1.5; margin: 0; overflow-x: auto;">async def _collect_batch(self) -> list[SyncEvent]:
    """BRPOP + drain ‚Üí batch ÏàòÏßë."""
    batch = []
    first = await self._redis.brpop(SYNC_QUEUE_KEY, timeout=5)
    if first:
        batch.append(parse(first))
        # drain: Ï∂îÍ∞Ä Î©îÏãúÏßÄÎ•º 2Ï¥àÍ∞Ñ ÏàòÏßë
        while len(batch) < 50:
            item = await self._redis.rpop(SYNC_QUEUE_KEY)
            if not item: break
            batch.append(parse(item))
    return batch

# Dedup: ÎèôÏùº (thread_id, checkpoint_ns)Îäî ÏµúÏã†Îßå Ïú†ÏßÄ
dedup = {(e.thread_id, e.ns): e for e in batch}</pre>
            </div>
            <table class="modal-table">
                <tr><th>Ìå®ÌÑ¥</th><th>Write Í≤ΩÎ°ú</th><th>Consistency Î≥¥Ïû•</th></tr>
                <tr><td>CheckpointSyncService</td><td>Redis ‚Üí Queue ‚Üí Batch ‚Üí PG</td><td>DLQ fallback, Redis TTL 24h</td></tr>
                <tr><td>ReadThroughCheckpointer</td><td>PG miss ‚Üí Redis promote</td><td>Temporal Locality, LRU</td></tr>
                <tr><td>Persistence Consumer</td><td>Streams ‚Üí Batch flush ‚Üí PG</td><td>Consumer Group, XACK</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üí° ÏÑ§Í≥Ñ ÏõêÏπô</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    ‚Ä¢ <strong>Redis Primary</strong>: Î™®Îì† ÏùΩÍ∏∞/Ïì∞Í∏∞Ïùò hot path (~1ms)<br>
                    ‚Ä¢ <strong>PostgreSQL Eventual</strong>: ÎπÑÎèôÍ∏∞ Î∞∞ÏπòÎ°ú ÏòÅÏÜçÌôî (latency Î¨¥Í¥Ä)<br>
                    ‚Ä¢ <strong>Ïû•Ïï† Í≤©Î¶¨</strong>: PG Î∂àÍ∞Ä Ïãú Queue Ï∂ïÏ†Å, Î≥µÍµ¨ ÌõÑ ÏûêÎèô Ïû¨Í∞ú<br>
                    ‚Ä¢ Chat ÏùëÎãµ ÏßÄÏó∞Ïóê DB Ïì∞Í∏∞Í∞Ä ÏòÅÌñ•ÏùÑ Ï£ºÏßÄ ÏïäÎäî Íµ¨Ï°∞
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Event Streams - KEDA Autoscaling -->
    <div class="modal-overlay" id="modal-stream-keda">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-stream-keda')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">‚öñÔ∏è KEDA Ïù¥Î≤§Ìä∏ ÎìúÎ¶¨Î∏ê Ïò§ÌÜ†Ïä§ÏºÄÏùºÎßÅ</span>
                <span class="lang-en">‚öñÔ∏è KEDA Event-Driven Autoscaling</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      KEDA + RabbitMQ Í∏∞Î∞ò Worker Ïä§ÏºÄÏùºÎßÅ                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚ùå CPU Í∏∞Î∞ò HPAÏùò ÌïúÍ≥Ñ                   ‚úÖ KEDA Ïù¥Î≤§Ìä∏ ÎìúÎ¶¨Î∏ê                ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ            ‚îÇ
‚îÇ   scan-worker (50 VU ÌÖåÏä§Ìä∏ Ï§ë)            RabbitMQ ÌÅê Í∏∏Ïù¥ Í∏∞Î∞ò                ‚îÇ
‚îÇ   CPU: 37m / 1000m (3.7%)                  Î©îÏãúÏßÄ 10Í∞ú Ïù¥ÏÉÅ ‚Üí Ïä§ÏºÄÏùºÏóÖ          ‚îÇ
‚îÇ   ‚Üê CPU ÎØ∏ÏÇ¨Ïö©, HPA ÎØ∏Ìä∏Î¶¨Í±∞!              scan.vision, scan.answer Î™®ÎãàÌÑ∞ÎßÅ    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Ïã§Ï†ú Î≥ëÎ™©: OpenAI API ÎåÄÍ∏∞               Worker 1‚Üí5 ÏûêÎèô ÌôïÏû•                 ‚îÇ
‚îÇ   (6~10Ï¥à/ÏöîÏ≤≠, I/O-bound)                 cooldownPeriod: 30Ï¥à                 ‚îÇ
‚îÇ                                            pollingInterval: 10Ï¥à                 ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ ScaledObject Íµ¨ÏÑ± ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   apiVersion: keda.sh/v1alpha1                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   kind: ScaledObject                                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   spec:                                                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     scaleTargetRef: scan-worker                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     minReplicaCount: 1                                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     maxReplicaCount: 10                                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     triggers:                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     - type: rabbitmq                                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       metadata:                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ         queueName: scan.vision                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ         mode: QueueLength                                              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ         value: '10'   # 10Í∞ú Ïù¥ÏÉÅ ‚Üí Ïä§ÏºÄÏùºÏóÖ                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>ÏÑ§Ï†ï</th><th>Í∞í</th><th>ÏÑ§Î™Ö</th></tr>
                <tr><td>minReplicaCount</td><td>1</td><td>Ïú†Ìú¥ Ïãú ÏµúÏÜå Pod</td></tr>
                <tr><td>maxReplicaCount</td><td>10</td><td>ÏµúÎåÄ Ïä§ÏºÄÏùº ÌïúÍ≥Ñ</td></tr>
                <tr><td>QueueLength threshold</td><td>10</td><td>Ïä§ÏºÄÏùºÏóÖ Ìä∏Î¶¨Í±∞</td></tr>
                <tr><td>cooldownPeriod</td><td>30Ï¥à</td><td>Ïä§ÏºÄÏùºÎã§Ïö¥ ÎåÄÍ∏∞</td></tr>
                <tr><td>pollingInterval</td><td>10Ï¥à</td><td>Î©îÌä∏Î¶≠ Ï≤¥ÌÅ¨ Ï£ºÍ∏∞</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üìà k6 50 VU ÌÖåÏä§Ìä∏ Í∞úÏÑ†</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <strong>Before (CPU HPA):</strong> 35% ÏôÑÎ£åÏú®<br>
                    <strong>After (KEDA):</strong> 86.3% ÏôÑÎ£åÏú® ‚Üí <strong>+51.3%p Í∞úÏÑ†</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Event Streams - Router Internals -->
    <div class="modal-overlay" id="modal-stream-router-internals">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-stream-router-internals')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîß Event Router ÎÇ¥Î∂Ä: Multi-domain + Lua + Reclaimer</span>
                <span class="lang-en">üîß Event Router Internals: Multi-domain + Lua + Reclaimer</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Event Router - Multi-domain Processing                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Stream ÏÜåÎπÑ (Consumer Group: eventrouter) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   stream_configs = [("scan:events", 4), ("chat:events", 4)]              ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   scan:events:0 ‚îÄ‚îÄ‚îê                    chat:events:0 ‚îÄ‚îÄ‚îê                ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   scan:events:1 ‚îÄ‚îÄ‚îº‚îÄ‚Üí XREADGROUP       chat:events:1 ‚îÄ‚îÄ‚îº‚îÄ‚Üí XREADGROUP  ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   scan:events:2 ‚îÄ‚îÄ‚î§   (Consumer Group)  chat:events:2 ‚îÄ‚îÄ‚î§               ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   scan:events:3 ‚îÄ‚îÄ‚îò                    chat:events:3 ‚îÄ‚îÄ‚îò                ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                            ‚îÇ                                                    ‚îÇ
‚îÇ                            ‚ñº                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ Lua Script: UPDATE_STATE_SCRIPT (ÏõêÏûêÏ†Å) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   1. Î©±Îì±ÏÑ± Ï≤¥ÌÅ¨: router:published:{job_id}:{seq} EXISTS?                ‚îÇ ‚îÇ
‚îÇ   ‚îÇ      ‚îî‚îÄ YES ‚Üí return 0 (Ïä§ÌÇµ)                                           ‚îÇ ‚îÇ
‚îÇ   ‚îÇ      ‚îî‚îÄ NO  ‚Üí Í≥ÑÏÜç                                                      ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   2. State Ï°∞Í±¥Î∂Ä Í∞±Ïã†: new_seq > current_seq?                           ‚îÇ ‚îÇ
‚îÇ   ‚îÇ      ‚îî‚îÄ YES ‚Üí SETEX {domain}:state:{job_id} (ÏµúÏã† ÏÉÅÌÉú Ïú†ÏßÄ)            ‚îÇ ‚îÇ
‚îÇ   ‚îÇ      ‚îî‚îÄ NO  ‚Üí State Ïú†ÏßÄ (Îçî ÏµúÏã† Í∞í Î≥¥Ï°¥)                              ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   3. Ï≤òÎ¶¨ ÎßàÌÇπ: SETEX router:published:{job_id}:{seq} TTL=2h            ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   4. return 1 ‚Üí Pub/Sub Î∞úÌñâ (Î™®Îì† Ïù¥Î≤§Ìä∏ Ï†ÑÎã¨, ÏàúÏÑú Î¨¥Í¥Ä)              ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                            ‚îÇ                                                    ‚îÇ
‚îÇ                            ‚ñº                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ Reclaimer (XAUTOCLAIM) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   Ï£ºÍ∏∞: 60Ï¥àÎßàÎã§ Ïã§Ìñâ                                                    ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ÎåÄÏÉÅ: min_idle_ms = 300,000 (5Î∂Ñ Ïù¥ÏÉÅ ÎØ∏ACK Î©îÏãúÏßÄ)                    ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   Ï≤òÎ¶¨: asyncio.gather() ‚Üí Î™®Îì† ÎèÑÎ©îÏù∏/ÏÉ§Îìú Î≥ëÎ†¨ reclaim                 ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   scan:events:0 ‚îÄ‚îê                                                      ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   scan:events:1 ‚îÄ‚î§                                                      ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   chat:events:0 ‚îÄ‚îº‚îÄ‚Üí XAUTOCLAIM ‚Üí re-process ‚Üí ACK                     ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   chat:events:1 ‚îÄ‚î§                                                      ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ...            ‚îÄ‚îò                                                      ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 8px;">
                <div style="color: #f59e0b; font-size: 0.8rem; margin-bottom: 0.5rem;">// apps/event_router/core/processor.py ‚Äî Lua Script (ÌïµÏã¨ Î∞úÏ∑å)</div>
                <pre style="color: var(--text-secondary); font-size: 0.75rem; line-height: 1.5; margin: 0; overflow-x: auto;">UPDATE_STATE_SCRIPT = """
local state_key = KEYS[1]      -- {domain}:state:{job_id}
local publish_key = KEYS[2]    -- router:published:{job_id}:{seq}

-- Î©±Îì±ÏÑ±: Ïù¥ÎØ∏ Ï≤òÎ¶¨ÌñàÏúºÎ©¥ Ïä§ÌÇµ
if redis.call('EXISTS', publish_key) == 1 then
    return 0
end

-- State Ï°∞Í±¥Î∂Ä Í∞±Ïã† (Îçî ÌÅ∞ seqÎßå)
local current = redis.call('GET', state_key)
if current then
    local cur_seq = tonumber(cjson.decode(current).seq) or 0
    if new_seq <= cur_seq then should_update_state = false end
end
if should_update_state then
    redis.call('SETEX', state_key, state_ttl, event_data)
end

-- Ï≤òÎ¶¨ ÎßàÌÇπ + Pub/Sub Î∞úÌñâ ÌóàÏö©
redis.call('SETEX', publish_key, published_ttl, '1')
return 1
"""</pre>
            </div>
            <table class="modal-table">
                <tr><th>Ïª¥Ìè¨ÎÑåÌä∏</th><th>Ïó≠Ìï†</th><th>ÌïµÏã¨ Î©îÏª§ÎãàÏ¶ò</th></tr>
                <tr><td>Consumer</td><td>XREADGROUP Í∏∞Î∞ò Ïù¥Î≤§Ìä∏ ÏÜåÎπÑ</td><td>Multi-domain 8 streams Î≥ëÎ†¨</td></tr>
                <tr><td>Processor</td><td>State Í∞±Ïã† + Pub/Sub Î∞úÌñâ</td><td>Lua Script ÏõêÏûêÏ†Å Ï≤òÎ¶¨</td></tr>
                <tr><td>Reclaimer</td><td>Pending Î©îÏãúÏßÄ Î≥µÍµ¨</td><td>XAUTOCLAIM (5Î∂Ñ idle)</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üîë ÏàòÌèâ ÌôïÏû• Î≥¥Ïû•</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    ‚Ä¢ Ïó¨Îü¨ PodÏù¥ Í∞ôÏùÄ job_id Ïù¥Î≤§Ìä∏Î•º ÎèôÏãúÏóê Ï≤òÎ¶¨Ìï¥ÎèÑ ÏïàÏ†Ñ<br>
                    ‚Ä¢ ÏàúÏÑúÍ∞Ä Îí§ÏßëÌòÄÎèÑ Î™®Îì† Ïù¥Î≤§Ìä∏Îäî Pub/SubÏóê Î∞úÌñâÎê®<br>
                    ‚Ä¢ StateÎäî Í∞ÄÏû• ÌÅ∞ seqÎ°úÎßå Í∞±Ïã† ‚Üí ÏµúÏã† ÏÉÅÌÉú Ìï≠ÏÉÅ Ïú†ÏßÄ<br>
                    ‚Ä¢ Consumer Ïû•Ïï† Ïãú ReclaimerÍ∞Ä 5Î∂Ñ ÌõÑ ÏûêÎèô Ïû¨Ìï†Îãπ
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Message Queue - Topology CR -->
    <div class="modal-overlay" id="modal-mq-topology">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-mq-topology')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üì° RabbitMQ Topology CR Í¥ÄÎ¶¨</span>
                <span class="lang-en">üì° RabbitMQ Topology CR Management</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  RabbitMQ Kubernetes Operator + Messaging Topology              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Operator ÏïÑÌÇ§ÌÖçÏ≤ò ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   RabbitMQ Cluster Operator (v2.12.0)                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ RabbitmqCluster CR ‚Üí eco2-rabbitmq-server (3 replicas, Quorum)   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Messaging Topology Operator (v1.16.0)                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ Exchange, Queue, Binding CRs ‚Üí ÏÑ†Ïñ∏Ï†Å ÌÜ†Ìè¥Î°úÏßÄ Í¥ÄÎ¶¨              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ ÏÑ†Ïñ∏Ï†Å ÌÜ†Ìè¥Î°úÏßÄ ÏòàÏãú ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   # Exchange CR                    # Queue CR                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   apiVersion: rabbitmq.com/v1beta1 apiVersion: rabbitmq.com/v1beta1    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   kind: Exchange                   kind: Queue                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   metadata:                        metadata:                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     name: scan-exchange              name: scan-vision-queue           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   spec:                            spec:                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     name: scan.events                name: scan.vision                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     type: direct                     type: quorum                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     durable: true                    durable: true                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ     rabbitmqClusterReference:        arguments:                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       name: eco2-rabbitmq-server       x-dead-letter-exchange: dlx     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                        x-delivery-limit: 5             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ ÌòÑÏû¨ ÌÜ†Ìè¥Î°úÏßÄ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Exchanges:                       Queues:                             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ scan.events (direct)          ‚îú‚îÄ scan.vision (quorum)            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ blacklist.events (fanout)     ‚îú‚îÄ scan.rule (quorum)              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ dlx (direct)                  ‚îú‚îÄ scan.answer (quorum)            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ character.events (fanout)     ‚îú‚îÄ scan.reward (quorum)            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                    ‚îú‚îÄ reward.persist (quorum)         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                    ‚îú‚îÄ users.sync (quorum)                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                    ‚îî‚îÄ dlq.* (DLQ ÌÅêÎì§)                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr><th>Operator</th><th>Î≤ÑÏ†Ñ</th><th>Ïó≠Ìï†</th></tr>
                <tr><td>RabbitMQ Cluster Operator</td><td>v2.12.0</td><td>RabbitmqCluster CR ‚Üí 3-node Quorum ÌÅ¥Îü¨Ïä§ÌÑ∞</td></tr>
                <tr><td>Messaging Topology Operator</td><td>v1.16.0</td><td>Exchange, Queue, Binding CR Í¥ÄÎ¶¨</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">‚úÖ GitOps Ïû•Ï†ê</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    ‚Ä¢ Queue/ExchangeÎ•º YAMLÎ°ú Î≤ÑÏ†Ñ Í¥ÄÎ¶¨<br>
                    ‚Ä¢ ArgoCDÍ∞Ä ÏûêÎèô ÎèôÍ∏∞Ìôî (ÏÑ†Ïñ∏Ï†Å)<br>
                    ‚Ä¢ ÌôòÍ≤ΩÎ≥Ñ Kustomize overlay Ï†ÅÏö©<br>
                    ‚Ä¢ Î≥ÄÍ≤Ω Ïù¥Î†• Ï∂îÏ†Å Í∞ÄÎä•
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Message Queue - Taskiq Asyncio Worker -->
    <div class="modal-overlay" id="modal-mq-taskiq">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-mq-taskiq')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">‚ö° Taskiq Asyncio Worker (Chat Pipeline)</span>
                <span class="lang-en">‚ö° Taskiq Asyncio Worker (Chat Pipeline)</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Worker Ïù¥Ïõê Íµ¨Ï°∞: Scan (Celery) vs Chat (Taskiq)              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ scan-worker (Celery + Gevent) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Í∏∞Ï°¥ AI Î¶¨ÏÑúÏ≤ò ÏûëÏÑ± ÎèôÍ∏∞ ÏΩîÎìú Í∏∞Î∞ò                                   ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Gevent Î™ΩÌÇ§Ìå®Ïπ≠ÏúºÎ°ú I/O ÎèôÏãúÏÑ± ÌôïÎ≥¥                                  ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Vision‚ÜíRule‚ÜíAnswer‚ÜíReward Ï≤¥Ïù∏ ÌååÏù¥ÌîÑÎùºÏù∏                            ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ prefork ÎåÄÎπÑ Î©îÎ™®Î¶¨ 3.6GB ‚Üí 500MB                                    ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ chat-worker (Taskiq + asyncio) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ LangGraphÍ∞Ä asyncio-native ‚Üí Taskiq ÎèÑÏûÖ                            ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ AioPikaBroker: RabbitMQ Direct Exchange (chat_tasks)                 ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Î∂ÑÏÇ∞ Ìä∏Î†àÏù¥Ïã±: aio-pika + OpenAI + Gemini + LangSmith OTEL          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ W3C traceparent Ï†ÑÌåå ‚Üí JaegerÏóêÏÑú E2E Ï∂îÏ†Å                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ process_chat_task: timeout=300s, retries=3                           ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Í≥µÏú† Ïù∏ÌîÑÎùº ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   RabbitMQ ÌÅ¥Îü¨Ïä§ÌÑ∞ (3-node Quorum)                                      ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ scan.events (direct) ‚Üí scan-worker                                 ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ chat_tasks (direct)  ‚Üí chat-worker                                 ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ K8s Topology OperatorÍ∞Ä Exchange/Queue ÏÑ†Ïñ∏Ï†Å Í¥ÄÎ¶¨                  ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   Redis Event Bus (Ïù¥Î≤§Ìä∏ Î∞úÌñâ Í≥µÏú†)                                     ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ scan:events:{shard} ‚Üê scan-worker                                  ‚îÇ ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ chat:events:{shard} ‚Üê chat-worker                                  ‚îÇ ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 8px;">
                <div style="color: #f59e0b; font-size: 0.8rem; margin-bottom: 0.5rem;">// apps/chat_worker/setup/broker.py</div>
                <pre style="color: var(--text-secondary); font-size: 0.75rem; line-height: 1.5; margin: 0; overflow-x: auto;">broker = AioPikaBroker(
    url=settings.rabbitmq_url,
    declare_exchange=not _is_production,  # Ïö¥ÏòÅ: Topology Operator ÏÇ¨Ïö©
    exchange_name="chat_tasks",
    exchange_type=ExchangeType.DIRECT,
    routing_key="chat.process",
    queue_name="chat.process",
)</pre>
            </div>
            <table class="modal-table">
                <tr><th>ÎπÑÍµê</th><th>scan-worker (Celery)</th><th>chat-worker (Taskiq)</th></tr>
                <tr><td>Îü∞ÌÉÄÏûÑ</td><td>Gevent (Î™ΩÌÇ§Ìå®Ïπ≠)</td><td>asyncio-native</td></tr>
                <tr><td>LLM ÌîÑÎ†àÏûÑÏõåÌÅ¨</td><td>ÎèôÍ∏∞ OpenAI SDK</td><td>LangGraph (async)</td></tr>
                <tr><td>Exchange</td><td>scan.events (direct)</td><td>chat_tasks (direct)</td></tr>
                <tr><td>Ïù¥Î≤§Ìä∏ Î∞úÌñâ</td><td>Redis Streams (scan:events)</td><td>Redis Streams (chat:events)</td></tr>
                <tr><td>Ìä∏Î†àÏù¥Ïã±</td><td>-</td><td>aio-pika + OpenAI + Gemini OTEL</td></tr>
            </table>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üí° ÏÑ†ÌÉù Í∑ºÍ±∞</strong>
                <div style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.9rem;">
                    ‚Ä¢ LangGraphÏùò Î™®Îì† APIÍ∞Ä async/await Í∏∞Î∞ò ‚Üí CeleryÏùò ÎèôÍ∏∞ ÏõåÏª§ Î™®Îç∏Í≥º Î∂àÏùºÏπò<br>
                    ‚Ä¢ Taskiq: asyncio event loop ÏúÑÏóêÏÑú ÎÑ§Ïù¥Ìã∞Î∏å Ïã§Ìñâ, aio-pikaÎ°ú RabbitMQ ÎπÑÎèôÍ∏∞ ÏÜåÎπÑ<br>
                    ‚Ä¢ Í∏∞Ï°¥ scan-workerÎäî ÎèôÍ∏∞ ÏΩîÎìú Í∏∞Î∞òÏù¥ÎØÄÎ°ú GeventÎ°ú Ïú†ÏßÄ (ÏïàÏ†ïÏÑ± Ïö∞ÏÑ†)
                </div>
            </div>
        </div>
    </div>

    <!-- Clean Architecture Modals -->
    <div class="modal-overlay" id="modal-clean-4layer">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-clean-4layer')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üìê 4-Layer DIP Architecture</span>
                <span class="lang-en">üìê 4-Layer DIP Architecture</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Clean Architecture - 4 Layer DIP                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ ÏùòÏ°¥ÏÑ± Î∞©Ìñ• (Î∞îÍπ• ‚Üí ÏïàÏ™Ω) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                  Presentation Layer                             ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  HTTP Controllers, gRPC Servicers, Schemas                     ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ presentation/http/, presentation/grpc/                     ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                           ‚Üì depends on                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                  Application Layer                              ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  Commands (Write), Queries (Read), DTOs, Ports                 ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ application/commands/, queries/, ports/                    ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                           ‚Üì depends on                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                    Domain Layer                                 ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  Entities, Value Objects, Domain Services, Domain Ports        ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ domain/entities/, value_objects/, services/                ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                           ‚Üë implements                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                Infrastructure Layer                             ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  Adapters (Port Íµ¨ÌòÑ), DB/Redis/gRPC/MQ Clients                ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ infrastructure/persistence_postgres/, persistence_redis/   ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ DIP (Dependency Inversion Principle) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚ùå Before (ÏßÅÏ†ë ÏùòÏ°¥)           ‚úÖ After (Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ ÏùòÏ°¥)             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Service ‚îÇ‚îÄ‚îÄ‚Üí‚îÇRepository‚îÇ    ‚îÇ Service ‚îÇ‚îÄ‚îÄ‚Üí‚îÇ  Port   ‚îÇ‚Üê‚îÄ‚îÄ‚îÇ Adapter ‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ(Protocol)‚îÇ  ‚îÇ(SqlAlchemy)‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       ‚îÇ              ‚îÇ               ‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   App Layer    Infra Layer      App Layer     App Layer     Infra Layer   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Î†àÏù¥Ïñ¥</span><span class="lang-en">Layer</span></th>
                    <th><span class="lang-ko">Ï±ÖÏûÑ</span><span class="lang-en">Responsibility</span></th>
                    <th><span class="lang-ko">Íµ¨ÏÑ± ÏöîÏÜå</span><span class="lang-en">Components</span></th>
                </tr>
                <tr><td>Presentation</td><td><span class="lang-ko">Ïô∏Î∂Ä Ïù∏ÌÑ∞ÌéòÏù¥Ïä§</span><span class="lang-en">External Interface</span></td><td>HTTP Router, gRPC Servicer, Schema</td></tr>
                <tr><td>Application</td><td><span class="lang-ko">Ïú†Ïä§ÏºÄÏù¥Ïä§ Ïò§ÏºÄÏä§Ìä∏Î†àÏù¥ÏÖò</span><span class="lang-en">Use Case Orchestration</span></td><td>Command, Query, DTO, Port</td></tr>
                <tr><td>Domain</td><td><span class="lang-ko">ÌïµÏã¨ ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ</span><span class="lang-en">Core Business Logic</span></td><td>Entity, Value Object, Domain Service</td></tr>
                <tr><td>Infrastructure</td><td><span class="lang-ko">Í∏∞Ïà† Íµ¨ÌòÑ (Port Íµ¨ÌòÑÏ≤¥)</span><span class="lang-en">Tech Implementation (Port Impl)</span></td><td>SQLAlchemy Adapter, Redis Adapter, gRPC Client</td></tr>
            </table>
        </div>
    </div>

    <div class="modal-overlay" id="modal-clean-cqrs">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-clean-cqrs')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üéº Application Usecase (CQRS)</span>
                <span class="lang-en">üéº Application Usecase (CQRS)</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CQRS - Command Query Responsibility Segregation              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Application Layer Íµ¨Ï°∞ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   application/                                                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ {feature}/                    # Í∏∞Îä•Î≥Ñ Î∂ÑÎ¶¨                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands/                 # Write ÏûëÏóÖ (Create, Update, Delete)‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ oauth_authorize.py    # OAuth Ïù∏Ï¶ù URL ÏÉùÏÑ±               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ oauth_callback.py     # OAuth ÏΩúÎ∞± Ï≤òÎ¶¨                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logout.py             # Î°úÍ∑∏ÏïÑÏõÉ                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queries/                  # Read ÏûëÏóÖ                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validate_token.py     # ÌÜ†ÌÅ∞ Í≤ÄÏ¶ù                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dto/                      # Request/Response Í∞ùÏ≤¥             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ports/                    # Ïô∏Î∂Ä ÏùòÏ°¥ÏÑ± Ïù∏ÌÑ∞ÌéòÏù¥Ïä§             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ user_command_gateway.py                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ user_query_gateway.py                                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/                     # Î≥µÏû°Ìïú ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Command/Query Ìå®ÌÑ¥ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   class OAuthCallbackCommand:        class ValidateTokenQuery:           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       """UseCase (Write)"""              """UseCase (Read)"""             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       def __init__(                      def __init__(                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           self,                              self,                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           user_gateway: UserCommandGateway,  token_service: TokenService, ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           oauth_client: OAuthClient,         blacklist: TokenBlacklist,   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           token_service: TokenService        ...                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       ):                                 ):                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           self._user_gateway = ...           self._token_service = ...    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       async def execute(self, req):      async def execute(self, req):   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           # 1. Ïú†Ìö®ÏÑ± Í≤ÄÏ¶ù                   # Port Ìò∏Ï∂ú ‚Üí DTO Î∞òÌôò       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           # 2. ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ                 pass                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           # 3. Port Ìò∏Ï∂ú                                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           # 4. Í≤∞Í≥º Î∞òÌôò                                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Service Ïó≠Ìï† Î∂ÑÎ¶¨ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Facade Service (Port Î≥¥Ïú†)          Pure Logic Service (Port ÏóÜÏùå)    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ OAuthFlowService                 ‚îú‚îÄ ProfileBuilder                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ TokenService                     ‚îî‚îÄ ScoreCalculator                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ Ïô∏Î∂Ä ÏãúÏä§ÌÖú Ï∫°ÏäêÌôî                  ‚îî‚îÄ ÏàúÏàò ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ïú†Ìòï</span><span class="lang-en">Type</span></th>
                    <th><span class="lang-ko">Ïó≠Ìï†</span><span class="lang-en">Role</span></th>
                    <th><span class="lang-ko">ÌäπÏßï</span><span class="lang-en">Characteristics</span></th>
                    <th><span class="lang-ko">ÏòàÏãú</span><span class="lang-en">Example</span></th>
                </tr>
                <tr><td>Command</td><td><span class="lang-ko">ÏÉÅÌÉú Î≥ÄÍ≤Ω (Write)</span><span class="lang-en">State Change (Write)</span></td><td>Side Effect, Transaction</td><td>OAuthCallback, Logout</td></tr>
                <tr><td>Query</td><td><span class="lang-ko">Ï°∞Ìöå (Read)</span><span class="lang-en">Read Only</span></td><td>No Side Effect, Cacheable</td><td>ValidateToken, GetProfile</td></tr>
                <tr><td>Port</td><td><span class="lang-ko">Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ï†ïÏùò</span><span class="lang-en">Interface Definition</span></td><td>Protocol/ABC, DI</td><td>UserCommandGateway</td></tr>
                <tr><td>Service</td><td><span class="lang-ko">Î≥µÏû° Î°úÏßÅ Ï∫°ÏäêÌôî</span><span class="lang-en">Complex Logic Encapsulation</span></td><td>Facade or Pure</td><td>OAuthFlowService</td></tr>
            </table>
        </div>
    </div>

    <div class="modal-overlay" id="modal-clean-adapter">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-clean-adapter')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîå Adapter ÍµêÏ≤¥ Ïö©Ïù¥ÏÑ±</span>
                <span class="lang-en">üîå Adapter Swappability</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Port & Adapter - Hexagonal Architecture                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Port/Adapter Îß§Ìïë ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           Driving          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          Driven           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ           Adapters         ‚îÇ  Application    ‚îÇ          Adapters         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                            ‚îÇ     Core        ‚îÇ                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   Port    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  Port   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇHTTP Router‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ ‚îÇ  UseCase  ‚îÇ  ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇSQLAlchemy ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ ‚îÇ + Domain  ‚îÇ  ‚îÇ         ‚îÇ  Adapter  ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   Port    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  Port   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  gRPC     ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ                ‚îÇ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ Servicer  ‚îÇ            ‚îÇ                ‚îÇ         ‚îÇ  Redis    ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ  Adapter  ‚îÇ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ ÌòÑÏû¨ Íµ¨ÌòÑÎêú Adapter ÍµêÏ≤¥ Í∞ÄÎä•ÏÑ± ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Persistence Adapters:                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ UserQueryGatewaySqla      ‚Üê PostgreSQL (ÌòÑÏû¨)                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ ÍµêÏ≤¥ Í∞ÄÎä•: MySQL, MongoDB, DynamoDB                             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ TokenBlacklistStoreRedis  ‚Üê Redis (ÌòÑÏû¨)                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ ÍµêÏ≤¥ Í∞ÄÎä•: Memcached, In-Memory                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                                                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   LLM Adapters (chat_worker):                                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ OpenAIAdapter             ‚Üê GPT-5.2 (ÌòÑÏû¨)                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ ÍµêÏ≤¥ Í∞ÄÎä•: Anthropic, Gemini, Local LLM                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ VisionAdapter             ‚Üê GPT-5.2 (ÌòÑÏû¨)                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ ÍµêÏ≤¥ Í∞ÄÎä•: Claude Vision, Gemini Vision                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                                                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   MQ Adapters:                                                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ RabbitMQPublisher         ‚Üê RabbitMQ (ÌòÑÏû¨)                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ ÍµêÏ≤¥ Í∞ÄÎä•: Kafka, Redis Streams, AWS SQS                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ CeleryTaskAdapter         ‚Üê Celery (ÌòÑÏû¨)                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ ÍµêÏ≤¥ Í∞ÄÎä•: Dramatiq, Huey                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                                                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Event Adapters:                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ RedisStreamNotifier       ‚Üê Redis Streams (ÌòÑÏû¨)                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ ÍµêÏ≤¥ Í∞ÄÎä•: Kafka, RabbitMQ                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Port (Ïù∏ÌÑ∞ÌéòÏù¥Ïä§)</span><span class="lang-en">Port (Interface)</span></th>
                    <th><span class="lang-ko">ÌòÑÏû¨ Adapter</span><span class="lang-en">Current Adapter</span></th>
                    <th><span class="lang-ko">ÍµêÏ≤¥ Í∞ÄÎä• ÏòµÏÖò</span><span class="lang-en">Swappable Options</span></th>
                </tr>
                <tr><td>UserQueryGateway</td><td>SQLAlchemy (PostgreSQL)</td><td>MySQL, MongoDB, DynamoDB</td></tr>
                <tr><td>TokenBlacklistStore</td><td>Redis Adapter</td><td>Memcached, In-Memory</td></tr>
                <tr><td>LLMAdapter (chat)</td><td>OpenAI GPT-5.2</td><td>Anthropic, Gemini, Local LLM</td></tr>
                <tr><td>MessagePublisher</td><td>RabbitMQ</td><td>Kafka, Redis Streams, AWS SQS</td></tr>
                <tr><td>ProgressNotifier</td><td>Redis Streams</td><td>Kafka, RabbitMQ, WebSocket</td></tr>
            </table>
        </div>
    </div>

    <div class="modal-overlay" id="modal-clean-resilience">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-clean-resilience')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üõ°Ô∏è LLM Î≥µÏõêÎ†• Ï†ÑÎûµ</span>
                <span class="lang-en">üõ°Ô∏è LLM Resilience Strategy</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    LLM Pipeline Resilience - Fallback + Checkpoint              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ 4Îã®Í≥Ñ Celery Chain (~12s total) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Vision (3s)  ‚Üí  Rule (0.5s)  ‚Üí  Answer (8s)  ‚Üí  Reward (0.5s)         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   GPT-5.2     Rule Match       GPT-5.2         Score Calc             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      ‚Üì                ‚Üì               ‚Üì               ‚Üì                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   [Checkpoint]   [Checkpoint]    [Checkpoint]    [Persist]               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Fallback Ï†ÑÎûµ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Vision Stage:                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ Primary: GPT-5.2                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ Fallback: GPT-5.2 (ÎπÑÏö© Ï¶ùÍ∞Ä, Ï†ïÌôïÎèÑ Ïú†ÏßÄ)                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ Final: Generic Error Response                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Answer Stage:                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ Primary: GPT-5.2                                                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ Fallback: GPT-5.2                                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ Final: Cached Similar Response                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Checkpoint Recovery ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   scan:{task_id}:state = {                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       "stage": "rule",           # ÌòÑÏû¨ ÏßÑÌñâ Îã®Í≥Ñ                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       "vision_result": {...},    # Vision Í≤∞Í≥º Ï∫êÏãú                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       "retry_count": 1,          # Ïû¨ÏãúÎèÑ ÌöüÏàò                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       "timestamp": "2026-01-15T..."                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   }                                                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Ïû•Ïï† Î∞úÏÉù Ïãú:                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   1. Worker Ïû¨ÏãúÏûë ‚Üí RedisÏóêÏÑú state Ï°∞Ìöå                                ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   2. "rule" stageÎ∂ÄÌÑ∞ Ïû¨Í∞ú (Vision Í≤∞Í≥º Ïû¨ÏÇ¨Ïö©)                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   3. retry_count < 3 ‚Üí ÏûêÎèô Ïû¨ÏãúÎèÑ                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   4. retry_count >= 3 ‚Üí DLQÎ°ú Ïù¥Îèô                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Í≥†ÏßÄÏó∞/Î∂àÏïàÏ†ï Ìó∑ÏßÄ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Timeout ÏÑ§Ï†ï:             Rate Limiting:           Circuit Breaker:    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ Vision: 10s           ‚îú‚îÄ 100 RPM/model        ‚îú‚îÄ 5 failures ‚Üí open ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ Answer: 30s           ‚îú‚îÄ 50k TPM/model        ‚îú‚îÄ 30s cooldown      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ Total: 60s soft       ‚îî‚îÄ Queue backpressure   ‚îî‚îÄ Fallback trigger  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Îã®Í≥Ñ</span><span class="lang-en">Stage</span></th>
                    <th><span class="lang-ko">ÏßÄÏó∞</span><span class="lang-en">Latency</span></th>
                    <th><span class="lang-ko">LLM</span><span class="lang-en">LLM</span></th>
                    <th><span class="lang-ko">Î≥µÏõêÎ†• Ï†ÑÎûµ</span><span class="lang-en">Resilience Strategy</span></th>
                </tr>
                <tr><td>Vision</td><td>~3s</td><td>GPT-5.2</td><td>Fallback ‚Üí GPT-5.2, Checkpoint Ï†ÄÏû•</td></tr>
                <tr><td>Rule</td><td>~0.5s</td><td>-</td><td>Rule Engine, Îπ†Î•∏ Îß§Ïπ≠</td></tr>
                <tr><td>Answer</td><td>~8s</td><td>GPT-5.2</td><td>Fallback ‚Üí GPT-5.2, Streaming</td></tr>
                <tr><td>Reward</td><td>~0.5s</td><td>-</td><td>Batch Persist, Idempotency</td></tr>
            </table>
        </div>
    </div>

    <div class="modal-overlay" id="modal-clean-cohesion">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-clean-cohesion')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üì¶ Í∏∞Ïà† ÏùëÏßëÎèÑ - ÎèÑÎ©îÏù∏Î≥Ñ ÏÑ§Ï†ï Î∂ÑÎ¶¨</span>
                <span class="lang-en">üì¶ Tech Cohesion - Domain-specific Config</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Domain-specific ConfigMap/Secret Management                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ NamespaceÎ≥Ñ ConfigMap/Secret Î∂ÑÎ¶¨ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   auth namespace:              character namespace:                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ auth-config (ConfigMap)   ‚îú‚îÄ character-config (ConfigMap)          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îú‚îÄ JWT_ALGORITHM          ‚îÇ  ‚îú‚îÄ GRPC_PORT                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îú‚îÄ OAUTH_REDIRECT_URL     ‚îÇ  ‚îú‚îÄ CHARACTER_TRAITS_VERSION           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ TOKEN_EXPIRY           ‚îÇ  ‚îî‚îÄ MATCHING_THRESHOLD                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ auth-secret (Secret)      ‚îú‚îÄ character-secret (Secret)             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îú‚îÄ JWT_SECRET             ‚îÇ  ‚îî‚îÄ DB_PASSWORD                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îú‚îÄ OAUTH_CLIENT_ID        ‚îÇ                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ OAUTH_CLIENT_SECRET    ‚îÇ                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                            ‚îÇ                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   chat namespace:              scan namespace:                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ chat-config               ‚îú‚îÄ scan-config                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îú‚îÄ LLM_MODEL              ‚îÇ  ‚îú‚îÄ VISION_MODEL                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îú‚îÄ MAX_CONTEXT_LENGTH     ‚îÇ  ‚îú‚îÄ ANSWER_MODEL                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ STREAM_TIMEOUT         ‚îÇ  ‚îî‚îÄ REWARD_RULES_PATH                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ chat-secret               ‚îú‚îÄ scan-secret                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚îî‚îÄ OPENAI_API_KEY         ‚îÇ  ‚îî‚îÄ OPENAI_API_KEY                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                            ‚îÇ                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ External Secrets Operator ÌÜµÌï© ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   AWS Secrets Manager            External Secret CRD                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ eco2/auth/jwt   ‚îÇ    ‚Üí      ‚îÇ apiVersion: external-secrets.io/v1  ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ eco2/auth/oauth ‚îÇ           ‚îÇ kind: ExternalSecret                ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ eco2/chat/openai‚îÇ           ‚îÇ spec:                               ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ eco2/scan/openai‚îÇ           ‚îÇ   secretStoreRef: aws-secrets       ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ   target: auth-secret               ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ          ‚Üì                      ‚îÇ   data:                             ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   IRSA Auth (ServiceAccount)    ‚îÇ     - secretKey: JWT_SECRET         ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                 ‚îÇ       remoteRef:                    ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                 ‚îÇ         key: eco2/auth/jwt          ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Ïû•Ï†ê ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ ÎèÑÎ©îÏù∏ ÌåÄ ÏûêÏú®ÏÑ±: Í∞Å ÌåÄÏù¥ ÏûêÏ≤¥ ConfigMap/Secret Í¥ÄÎ¶¨               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Î≥ÄÍ≤Ω Í≤©Î¶¨: auth ÏÑ§Ï†ï Î≥ÄÍ≤ΩÏù¥ chatÏóê ÏòÅÌñ• ÏóÜÏùå                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Î≥¥Ïïà Í∞ïÌôî: ÏµúÏÜå Í∂åÌïú ÏõêÏπô, ÎèÑÎ©îÏù∏Î≥Ñ Secret Ï†ëÍ∑º Ï†úÌïú               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Î°§Î∞± Ïö©Ïù¥: ÎèÑÎ©îÏù∏ Îã®ÏúÑÎ°ú ÏÑ§Ï†ï Î°§Î∞± Í∞ÄÎä•                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">ÎèÑÎ©îÏù∏</span><span class="lang-en">Domain</span></th>
                    <th><span class="lang-ko">ConfigMap</span><span class="lang-en">ConfigMap</span></th>
                    <th><span class="lang-ko">Secret</span><span class="lang-en">Secret</span></th>
                    <th><span class="lang-ko">ÌäπÏàò ÏÑ§Ï†ï</span><span class="lang-en">Special Config</span></th>
                </tr>
                <tr><td>auth</td><td>auth-config</td><td>auth-secret (JWT, OAuth)</td><td>OAuth ProviderÎ≥Ñ ÏÑ§Ï†ï</td></tr>
                <tr><td>character</td><td>character-config</td><td>character-secret</td><td>gRPC Ìè¨Ìä∏, Îß§Ïπ≠ ÏûÑÍ≥ÑÍ∞í</td></tr>
                <tr><td>chat</td><td>chat-config</td><td>chat-secret (OpenAI)</td><td>LLM Î™®Îç∏, Ïª®ÌÖçÏä§Ìä∏ Í∏∏Ïù¥</td></tr>
                <tr><td>scan</td><td>scan-config</td><td>scan-secret (OpenAI)</td><td>Vision/Answer Î™®Îç∏</td></tr>
                <tr><td>users</td><td>users-config</td><td>users-secret</td><td>ÎèôÍ∏∞Ìôî ÏÑ§Ï†ï</td></tr>
            </table>
        </div>
    </div>

    <div class="modal-overlay" id="modal-clean-radon">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-clean-radon')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üìä Radon Î≥µÏû°ÎèÑ Ï∏°Ï†ï</span>
                <span class="lang-en">üìä Radon Complexity Analysis</span>
            </h3>
            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Radon Cyclomatic Complexity Analysis                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Ï∏°Ï†ï Í≤∞Í≥º ÏöîÏïΩ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Total Blocks: 2,120                                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Average Complexity: 2.28 (Grade A)                                     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Grade Distribution:                                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ A (1-5)   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 92.3%   ‚îÇ        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ B (6-10)  ‚ñà‚ñà‚ñà‚ñà‚ñà 5.8%                                       ‚îÇ        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ C (11-20) ‚ñà 1.4%                                           ‚îÇ        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ D (21-30) ‚ñë 0.4%                                           ‚îÇ        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ E (31-40) ‚ñë 0.1%                                           ‚îÇ        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ F (41+)   ‚ñë 0.0%                                           ‚îÇ        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ ÎèÑÎ©îÏù∏Î≥Ñ Î≥µÏû°ÎèÑ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Domain        Blocks   Avg CC   Grade   Highest Function               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   auth            342     2.1      A      oauth_callback (8)             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   character       287     2.3      A      match_traits (7)               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   chat_worker     456     2.8      A      intent_classifier (12)         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   scan_worker     389     2.4      A      vision_processor (9)           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   users           198     1.9      A      sync_character (5)             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   location        156     1.7      A      nearby_search (4)              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   images          134     1.8      A      upload_handler (6)             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ext_authz       158     2.2      A      check_permission (7)           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Clean Architecture Í∏∞Ïó¨ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Before (Layered):              After (Clean):                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ AuthService: CC 45          ‚îú‚îÄ OAuthCallbackCommand: CC 8          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  (God Object)                ‚îú‚îÄ LogoutCommand: CC 3                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                              ‚îú‚îÄ RefreshTokenCommand: CC 5           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                              ‚îî‚îÄ ValidateTokenQuery: CC 4            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                                                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ÎÇÆÏùÄ Î≥µÏû°ÎèÑÏùò Ïù¥Ï†ê:                                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ ÌÖåÏä§Ìä∏ Ïª§Î≤ÑÎ¶¨ÏßÄ Ìñ•ÏÉÅ (Îã®ÏàúÌïú Î∂ÑÍ∏∞)                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Î≤ÑÍ∑∏ Î∞úÏÉùÎ•† Í∞êÏÜå (Ïù∏ÏßÄ Î∂ÄÌïò Í∞êÏÜå)                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ ÏΩîÎìú Î¶¨Î∑∞ Ìö®Ïú®ÏÑ± (ÏûëÏùÄ Ìï®Ïàò Îã®ÏúÑ)                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚úÖ Ïã†Í∑ú ÏóêÏù¥Ï†ÑÌä∏ Ïò®Î≥¥Îî© Ïö©Ïù¥                                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Îì±Í∏â</span><span class="lang-en">Grade</span></th>
                    <th><span class="lang-ko">Î≤îÏúÑ</span><span class="lang-en">Range</span></th>
                    <th><span class="lang-ko">ÏùòÎØ∏</span><span class="lang-en">Meaning</span></th>
                    <th><span class="lang-ko">ÎπÑÏú®</span><span class="lang-en">Ratio</span></th>
                </tr>
                <tr style="background: rgba(0,255,136,0.1);"><td>A</td><td>1-5</td><td><span class="lang-ko">Îã®Ïàú, Ï†ÄÏúÑÌóò</span><span class="lang-en">Simple, Low Risk</span></td><td><strong>92.3%</strong></td></tr>
                <tr><td>B</td><td>6-10</td><td><span class="lang-ko">Î≥µÏû°, Ï§ëÏúÑÌóò</span><span class="lang-en">Complex, Moderate Risk</span></td><td>5.8%</td></tr>
                <tr><td>C</td><td>11-20</td><td><span class="lang-ko">Í≥†Î≥µÏû°</span><span class="lang-en">High Complexity</span></td><td>1.4%</td></tr>
                <tr style="background: rgba(255,165,0,0.1);"><td>D-F</td><td>21+</td><td><span class="lang-ko">Î¶¨Ìå©ÌÜ†ÎßÅ ÌïÑÏöî</span><span class="lang-en">Refactor Required</span></td><td>0.5%</td></tr>
            </table>
            <div class="modal-refs">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® PR</span>
                    <span class="lang-en">Related PRs</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/361" target="_blank" rel="noopener">#361 apps/ Migration</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/306" target="_blank" rel="noopener">#306 ORM Registry</a>
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/pull/364" target="_blank" rel="noopener">#364 images rename</a>
                </div>
            </div>
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üìà Radon Ï∏°Ï†ï Î™ÖÎ†πÏñ¥</strong>
                <pre style="margin-top: 0.75rem; color: var(--text-secondary); font-size: 0.85rem; background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 4px; overflow-x: auto;">radon cc apps/ -a -s --total-average
radon cc apps/ -a -nc  # AÎì±Í∏âÎßå Ï†úÏô∏ÌïòÍ≥† ÌëúÏãú</pre>
            </div>

        </div>
    </div>

    <!-- Test Coverage Modal -->
    <div class="modal-overlay" id="modal-test-coverage">
        <div class="modal-content" style="max-width: 1200px;">
            <button class="modal-close" onclick="closeModal('modal-test-coverage')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üß™ ÌÖåÏä§Ìä∏ Ïª§Î≤ÑÎ¶¨ÏßÄ (Unit/Integration)</span>
                <span class="lang-en">üß™ Test Coverage (Unit/Integration)</span>
            </h3>
            
            <div style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.95rem;">
                <span class="lang-ko">
                    Clean Architecture Ï†ÑÌôòÏúºÎ°ú Port/Usecase Îã®ÏúÑÍ∞Ä ÏûëÏïÑÏ†∏ <strong>Mock Í∏∞Î∞ò Îã®ÏúÑ ÌÖåÏä§Ìä∏ ÏûëÏÑ± ÎπÑÏö©</strong>Ïù¥ ÎÇÆÏïÑÏ°åÍ≥†, Ïª§Î≤ÑÎ¶¨ÏßÄ Ï∏°Ï†ïÏù¥ Ïâ¨ÏõåÏ°åÏäµÎãàÎã§.<br>
                    ÏïÑÎûò ÏàòÏπòÎäî ÏΩîÎìúÎ≤†Ïù¥Ïä§ Î¨∏ÏÑú/Î¶¨Ìè¨Ìä∏Ïóê Í∏∞Î°ùÎêú Ïã§Ï∏°(coverage Ï∂úÎ†•) Í∏∞Î∞òÏûÖÎãàÎã§.
                </span>
                <span class="lang-en">
                    Clean Architecture reduces unit size (ports/usecases), lowering <strong>test-writing cost with mocks</strong> and making coverage easier to measure.<br>
                    Numbers below are based on documented measured outputs (coverage reports) in this repo.
                </span>
            </div>

            <div class="modal-diagram">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       Test Coverage Strategy                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Testing Pyramid ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                        ‚ñ≤                                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                       /¬∑\      E2E (Selective)                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                      /¬∑¬∑¬∑\     ‚ñà‚ñà‚ñà‚ñà  ÌïµÏã¨ ÌîåÎ°úÏö∞Îßå                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                     /¬∑¬∑¬∑¬∑¬∑\                                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                    ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                   /¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑\   Integration                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                  /¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑\  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  DB/MQ Ïó∞Îèô                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                /¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑\  Unit Tests                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ               /¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑\ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  88%+        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ              ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ Clean ArchitectureÍ∞Ä ÌÖåÏä§Ìä∏Ïóê ÎØ∏Ïπú ÏòÅÌñ• ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   Before (Layered):              After (Clean Architecture):           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ ÌïòÎÇòÏùò ServiceÏóê Î™®Îì† Î°úÏßÅ  ‚îú‚îÄ Command/Query Î∂ÑÎ¶¨                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚Üí Mock ÎåÄÏÉÅÏù¥ ÎßéÍ≥† Î≥µÏû°     ‚îÇ  ‚Üí ÏûëÏùÄ Îã®ÏúÑ, Ïâ¨Ïö¥ Í≤©Î¶¨             ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ  ‚Üí Ïª§Î≤ÑÎ¶¨ÏßÄ Ï∏°Ï†ï Ïñ¥Î†§ÏõÄ      ‚îÇ  ‚Üí Port Í∏∞Î∞ò ÏùòÏ°¥ÏÑ± Ï£ºÏûÖ            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÇ                              ‚îÇ  ‚Üí Adapter ÍµêÏ≤¥Î°ú Mock Ïö©Ïù¥         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 1rem; font-size: 1.1rem;">
                <span class="lang-ko">üìä Ïï±Î≥Ñ ÌÖåÏä§Ìä∏ ÌòÑÌô© (2026-01 Í∏∞Ï§Ä)</span>
                <span class="lang-en">üìä Test Status by App (as of 2026-01)</span>
            </h4>
            
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ïª¥Ìè¨ÎÑåÌä∏</span><span class="lang-en">Component</span></th>
                    <th><span class="lang-ko">ÌÖåÏä§Ìä∏ ÌååÏùº</span><span class="lang-en">Test Files</span></th>
                    <th><span class="lang-ko">ÌÖåÏä§Ìä∏ Ìï®Ïàò</span><span class="lang-en">Test Functions</span></th>
                    <th><span class="lang-ko">Ï£ºÏöî ÎåÄÏÉÅ</span><span class="lang-en">Target</span></th>
                </tr>
                <tr style="background: rgba(0,255,136,0.08);">
                    <td><strong>chat_worker</strong></td>
                    <td>28</td>
                    <td><strong style="color: var(--primary);">394</strong></td>
                    <td>LangGraph Nodes, Adapters, Commands</td>
                </tr>
                <tr style="background: rgba(0,255,136,0.08);">
                    <td><strong>auth_worker</strong></td>
                    <td>11</td>
                    <td><strong style="color: var(--primary);">69</strong></td>
                    <td>OAuth, JWT, Commands</td>
                </tr>
                <tr>
                    <td><strong>auth</strong></td>
                    <td>10</td>
                    <td>67</td>
                    <td>Controllers, Services</td>
                </tr>
                <tr>
                    <td><strong>auth_relay</strong></td>
                    <td>10</td>
                    <td>64</td>
                    <td>Token Relay, Middleware</td>
                </tr>
                <tr>
                    <td><strong>location</strong></td>
                    <td>4</td>
                    <td>65</td>
                    <td>gRPC, Queries</td>
                </tr>
                <tr>
                    <td><strong>character</strong></td>
                    <td>6</td>
                    <td>42</td>
                    <td>Domain, gRPC</td>
                </tr>
                <tr>
                    <td><strong>sse_gateway</strong></td>
                    <td>4</td>
                    <td>31</td>
                    <td>Event Streaming</td>
                </tr>
                <tr>
                    <td><strong>scan</strong></td>
                    <td>3</td>
                    <td>27</td>
                    <td>Submit API</td>
                </tr>
                <tr>
                    <td><strong>users</strong></td>
                    <td>3</td>
                    <td>26</td>
                    <td>Domain, Controllers</td>
                </tr>
                <tr>
                    <td><strong>scan_worker</strong></td>
                    <td>4</td>
                    <td>15</td>
                    <td>Celery Tasks</td>
                </tr>
                <tr>
                    <td><strong>event_router</strong></td>
                    <td>3</td>
                    <td>13</td>
                    <td>Redis Streams</td>
                </tr>
                <tr style="border-top: 2px solid var(--primary);">
                    <td><strong>Total</strong></td>
                    <td><strong>86</strong></td>
                    <td><strong style="color: var(--primary);">813</strong></td>
                    <td>-</td>
                </tr>
            </table>

            <h4 style="color: var(--primary); margin: 1.5rem 0 1rem; font-size: 1.1rem;">
                <span class="lang-ko">‚öôÔ∏è CI ÌååÏù¥ÌîÑÎùºÏù∏ ÌÜµÌï©</span>
                <span class="lang-en">‚öôÔ∏è CI Pipeline Integration</span>
            </h4>
            
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Îã®Í≥Ñ</span><span class="lang-en">Stage</span></th>
                    <th><span class="lang-ko">ÎèÑÍµ¨</span><span class="lang-en">Tool</span></th>
                    <th><span class="lang-ko">ÏÑ§Ï†ï</span><span class="lang-en">Config</span></th>
                    <th><span class="lang-ko">Ï∂úÎ†•</span><span class="lang-en">Output</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ïª§Î≤ÑÎ¶¨ÏßÄ Ï∏°Ï†ï</span><span class="lang-en">Coverage</span></td>
                    <td>pytest-cov</td>
                    <td><code>--cov=apps/</code></td>
                    <td>coverage.xml</td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÌíàÏßà Î∂ÑÏÑù</span><span class="lang-en">Quality</span></td>
                    <td>SonarCloud</td>
                    <td><code>sonar.python.coverage.reportPaths</code></td>
                    <td><span class="lang-ko">ÎåÄÏãúÎ≥¥Îìú</span><span class="lang-en">Dashboard</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ï†úÏô∏ Ìå®ÌÑ¥</span><span class="lang-en">Exclusions</span></td>
                    <td>pytest.ini</td>
                    <td><code>--ignore=tests/integration</code></td>
                    <td><span class="lang-ko">UnitÎßå CI Ïã§Ìñâ</span><span class="lang-en">Unit-only in CI</span></td>
                </tr>
            </table>

            <div style="margin-top: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                <div style="flex: 1; min-width: 280px; padding: 1rem; background: rgba(0,255,136,0.08); border-radius: 8px; border-left: 3px solid var(--primary);">
                    <strong style="color: var(--primary);">
                        <span class="lang-ko">‚úÖ Unit ÌÖåÏä§Ìä∏ Ï†ÑÎûµ</span>
                        <span class="lang-en">‚úÖ Unit Test Strategy</span>
                    </strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        <span class="lang-ko">
                            ‚Ä¢ Port Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ MockÏúºÎ°ú Í≤©Î¶¨<br>
                            ‚Ä¢ Command/Query Îã®ÏúÑÎ°ú Î∂ÑÎ¶¨<br>
                            ‚Ä¢ 88%+ Ïª§Î≤ÑÎ¶¨ÏßÄ Î™©Ìëú
                        </span>
                        <span class="lang-en">
                            ‚Ä¢ Isolate via Port interface Mocks<br>
                            ‚Ä¢ Separate by Command/Query units<br>
                            ‚Ä¢ Target 88%+ coverage
                        </span>
                    </div>
                </div>
                <div style="flex: 1; min-width: 280px; padding: 1rem; background: rgba(255,165,0,0.08); border-radius: 8px; border-left: 3px solid var(--warning);">
                    <strong style="color: var(--warning);">
                        <span class="lang-ko">üîÑ Integration ÌÖåÏä§Ìä∏ Ï†ÑÎûµ</span>
                        <span class="lang-en">üîÑ Integration Test Strategy</span>
                    </strong>
                    <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                        <span class="lang-ko">
                            ‚Ä¢ ÌïµÏã¨ ÌîåÎ°úÏö∞Îßå ÏÑ†ÌÉùÏ†Å Ïã§Ìñâ<br>
                            ‚Ä¢ CIÏóêÏÑú Í∏∞Î≥∏ Ï†úÏô∏ (ÏÜçÎèÑ)<br>
                            ‚Ä¢ Î∞∞Ìè¨ Ï†Ñ ÏàòÎèô Í≤ÄÏ¶ù
                        </span>
                        <span class="lang-en">
                            ‚Ä¢ Selective run for core flows<br>
                            ‚Ä¢ Excluded by default in CI (speed)<br>
                            ‚Ä¢ Manual verification pre-deploy
                        </span>
                    </div>
                </div>
            </div>

            <div class="modal-refs" style="margin-top: 1.5rem;">
                <div class="modal-refs-title">
                    <span class="lang-ko">Í¥ÄÎ†® ÎßÅÌÅ¨</span>
                    <span class="lang-en">Related Links</span>
                </div>
                <div class="modal-refs-links">
                    <a class="ref-chip" href="https://github.com/eco2-team/backend/blob/main/.github/workflows/ci-sonarcloud.yml" target="_blank" rel="noopener">CI SonarCloud</a>
                    <a class="ref-chip" href="https://rooftopsnow.tistory.com/100" target="_blank" rel="noopener">auth_worker 88%</a>
                    <a class="ref-chip" href="https://rooftopsnow.tistory.com/165" target="_blank" rel="noopener">chat_worker Report</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Scan AI Pipeline Modals -->
    <div class="modal-overlay" id="modal-scan-vision">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-scan-vision')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üëÅÔ∏è Vision LLM (Pre-Retrieval)</span>
                <span class="lang-en">üëÅÔ∏è Vision LLM (Pre-Retrieval)</span>
            </h3>
            <div class="modal-diagram">
                <pre style="font-size: 0.8rem; line-height: 1.5;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Vision LLM Stage                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ  üì∑ Image    ‚îÇ  ‚îÄ‚îÄ‚ñ∫ ‚îÇ  üß† GPT-5.2 /    ‚îÇ  ‚îÄ‚îÄ‚ñ∫ ‚îÇ  üìù Î∂ÑÎ•ò    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  (Base64)    ‚îÇ      ‚îÇ  Gemini 3.0 Pro  ‚îÇ      ‚îÇ  Í≤∞Í≥º       ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                  ‚îÇ                                  ‚îÇ
‚îÇ                                  ‚ñº                                  ‚îÇ
‚îÇ                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ
‚îÇ                       ‚îÇ üìã System Prompt     ‚îÇ                      ‚îÇ
‚îÇ                       ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                       ‚îÇ
‚îÇ                       ‚îÇ ‚Ä¢ Ïû¨ÌôúÏö© Í∞ÄÎä• Ïó¨Î∂Ä   ‚îÇ                       ‚îÇ
‚îÇ                       ‚îÇ ‚Ä¢ Î∂ÑÎ•ò Í∏∞Ï§Ä Ï†úÏãú     ‚îÇ                       ‚îÇ
‚îÇ                       ‚îÇ ‚Ä¢ Ï∂úÎ†• Ìè¨Îß∑ Ï†ïÏùò     ‚îÇ                       ‚îÇ
‚îÇ                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </pre>
            </div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ìï≠Î™©</span><span class="lang-en">Item</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">Î™®Îç∏</span><span class="lang-en">Model</span></td>
                    <td><strong>gpt-5.2</strong> (default) / gemini-3-pro-preview</td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÏûÖÎ†•</span><span class="lang-en">Input</span></td>
                    <td><span class="lang-ko">ÏÇ¨Ïö©ÏûêÍ∞Ä Ï¥¨ÏòÅÌïú Ïù¥ÎØ∏ÏßÄ (Base64 Ïù∏ÏΩîÎî©)</span><span class="lang-en">User-captured image (Base64 encoded)</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ï∂úÎ†•</span><span class="lang-en">Output</span></td>
                    <td><span class="lang-ko">ÌíàÎ™© Î∂ÑÎ•ò Í≤∞Í≥º (ÎåÄÎ∂ÑÎ•ò, ÏÜåÎ∂ÑÎ•ò, Ïû¨Ïßà)</span><span class="lang-en">Item classification (category, subcategory, material)</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÌîÑÎ°¨ÌîÑÌä∏</span><span class="lang-en">Prompt</span></td>
                    <td><span class="lang-ko">Î∂ÑÎ•ò Í∏∞Ï§ÄÍ≥º ÌåêÎã® Í∑ºÍ±∞Î•º Î™ÖÏãúÌïú ÏãúÏä§ÌÖú ÌîÑÎ°¨ÌîÑÌä∏</span><span class="lang-en">System prompt with classification criteria and reasoning guidelines</span></td>
                </tr>
            </table>
            <h4 style="color: var(--primary); margin: 1.2rem 0 0.8rem; font-size: 1rem;">
                <span class="lang-ko">üìä Ïã§Ï∏° Î†àÏù¥ÌÑ¥Ïãú (Prometheus)</span>
                <span class="lang-en">üìä Measured Latency (Prometheus)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ï°∞Í±¥</span><span class="lang-en">Condition</span></th>
                    <th>Avg</th>
                    <th><span class="lang-ko">ÎπÑÍ≥†</span><span class="lang-en">Note</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">Îã®Ïùº ÏöîÏ≤≠</span><span class="lang-en">Single request</span></td>
                    <td><strong>6.9s</strong></td>
                    <td><span class="lang-ko">Í∏∞Ï§ÄÍ∞í (ÏõåÎ∞çÏóÖ ÌõÑ)</span><span class="lang-en">Baseline (warmed up)</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ï†ÄÎ∂ÄÌïò</span><span class="lang-en">Low Load</span> (k6 VU 10)</td>
                    <td><strong>4.5s</strong></td>
                    <td><span class="lang-ko">ÎπÑÎèôÍ∏∞ Gevent Ï†ÑÌôò ÌõÑ</span><span class="lang-en">After Gevent migration</span></td>
                </tr>
                <tr style="background: rgba(0,255,136,0.1);">
                    <td><strong>üéØ SLA</strong> (k6 VU 300)</td>
                    <td colspan="2"><span class="lang-ko">E2E p95: <strong>48.5s</strong> (Ï†ÑÏ≤¥ Chain Í∏∞Ï§Ä)</span><span class="lang-en">E2E p95: <strong>48.5s</strong> (total Chain)</span></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal-overlay" id="modal-scan-rule">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-scan-rule')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üìã Rule Engine (Ïò®ÎàÑÎ¶¨ Í∑úÏ†ï KB)</span>
                <span class="lang-en">üìã Rule Engine (On-Nuri Regulation KB)</span>
            </h3>
            <div class="modal-diagram">
                <pre style="font-size: 0.8rem; line-height: 1.5;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Rule Engine Stage                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ  üìù Î∂ÑÎ•ò     ‚îÇ  ‚îÄ‚îÄ‚ñ∫ ‚îÇ  üîç Rule Search  ‚îÇ  ‚îÄ‚îÄ‚ñ∫ ‚îÇ  üìÑ Í¥ÄÎ†®    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  Í≤∞Í≥º        ‚îÇ      ‚îÇ (Rule-based RAG) ‚îÇ      ‚îÇ  Í∑úÏ†ï       ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                  ‚îÇ                                  ‚îÇ
‚îÇ                                  ‚ñº                                  ‚îÇ
‚îÇ                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ                  ‚îÇ üìÅ YAML Knowledge Base       ‚îÇ                   ‚îÇ
‚îÇ                  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                   ‚îÇ
‚îÇ                  ‚îÇ item_class_list.yaml         ‚îÇ                   ‚îÇ
‚îÇ                  ‚îÇ ‚îú‚îÄ‚îÄ ÎåÄÎ∂ÑÎ•ò: ÌîåÎùºÏä§Ìã±/Ï¢ÖÏù¥/... ‚îÇ                   ‚îÇ
‚îÇ                  ‚îÇ ‚îú‚îÄ‚îÄ ÏÜåÎ∂ÑÎ•ò: PET/PP/PE/...    ‚îÇ                   ‚îÇ
‚îÇ                  ‚îÇ ‚îî‚îÄ‚îÄ Í∑úÏ†ï: ÏÑ∏Ï≤ô/ÎùºÎ≤®Ï†úÍ±∞/...  ‚îÇ                   ‚îÇ
‚îÇ                  ‚îÇ                              ‚îÇ                   ‚îÇ
‚îÇ                  ‚îÇ üìä 200+ ÌíàÎ™© Í∑úÏ†ï ÏàòÎ°ù       ‚îÇ                   ‚îÇ
‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </pre>
            </div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ìï≠Î™©</span><span class="lang-en">Item</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">Îç∞Ïù¥ÌÑ∞ ÏÜåÏä§</span><span class="lang-en">Data Source</span></td>
                    <td><span class="lang-ko">Ïò®ÎàÑÎ¶¨ Ïû¨ÌôúÏö© ÌíàÎ™©Î≥Ñ Í∑úÏ†ï (YAML Íµ¨Ï°∞Ìôî)</span><span class="lang-en">On-Nuri recycling regulations per item (YAML structured)</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Í≤ÄÏÉâ Î∞©Ïãù</span><span class="lang-en">Search Method</span></td>
                    <td><span class="lang-ko">Î∂ÑÎ•ò Í≤∞Í≥º Í∏∞Î∞ò ÌÇ§ÏõåÎìú Îß§Ïπ≠ ‚Üí Í¥ÄÎ†® Í∑úÏ†ï Ï∂îÏ∂ú</span><span class="lang-en">Keyword matching based on classification ‚Üí Extract relevant rules</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Í∑úÏ†ï Ìï≠Î™©</span><span class="lang-en">Rule Items</span></td>
                    <td><span class="lang-ko">ÏÑ∏Ï≤ô Ïó¨Î∂Ä, ÎùºÎ≤® Ï†úÍ±∞, Î∂ÑÎ¶¨Î∞∞Ï∂ú Î∞©Î≤ï, ÌäπÏù¥ÏÇ¨Ìï≠</span><span class="lang-en">Washing, label removal, disposal method, special notes</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÌíàÎ™© Ïàò</span><span class="lang-en">Item Count</span></td>
                    <td>200+ <span class="lang-ko">ÌíàÎ™©</span><span class="lang-en">items</span></td>
                </tr>
            </table>
            <h4 style="color: var(--primary); margin: 1.2rem 0 0.8rem; font-size: 1rem;">
                <span class="lang-ko">üìä Ïã§Ï∏° Î†àÏù¥ÌÑ¥Ïãú (Prometheus)</span>
                <span class="lang-en">üìä Measured Latency (Prometheus)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ï°∞Í±¥</span><span class="lang-en">Condition</span></th>
                    <th>Avg</th>
                    <th><span class="lang-ko">ÎπÑÍ≥†</span><span class="lang-en">Note</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">Îã®Ïùº ÏöîÏ≤≠</span><span class="lang-en">Single request</span></td>
                    <td><strong>0.5ms</strong></td>
                    <td><span class="lang-ko">Í∏∞Ï§ÄÍ∞í (ÏõåÎ∞çÏóÖ ÌõÑ)</span><span class="lang-en">Baseline (warmed up)</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ï†ÄÎ∂ÄÌïò</span><span class="lang-en">Low Load</span> (k6 VU 10)</td>
                    <td><strong>0.3s</strong></td>
                    <td><span class="lang-ko">ÎπÑÎèôÍ∏∞ Gevent Ï†ÑÌôò ÌõÑ</span><span class="lang-en">After Gevent migration</span></td>
                </tr>
                <tr style="background: rgba(0,255,136,0.1);">
                    <td><strong>üéØ SLA</strong> (k6 VU 300)</td>
                    <td colspan="2"><span class="lang-ko">E2E p95: <strong>48.5s</strong> (Ï†ÑÏ≤¥ Chain Í∏∞Ï§Ä)</span><span class="lang-en">E2E p95: <strong>48.5s</strong> (total Chain)</span></td>
                </tr>
            </table>
        </div>
    </div>

    <div class="modal-overlay" id="modal-scan-answer">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-scan-answer')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üí¨ Answer LLM (Post-Retrieval)</span>
                <span class="lang-en">üí¨ Answer LLM (Post-Retrieval)</span>
            </h3>
            <div class="modal-diagram">
                <pre style="font-size: 0.8rem; line-height: 1.5;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Answer LLM Stage                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ  üìÑ Í¥ÄÎ†®     ‚îÇ  ‚îÄ‚îÄ‚ñ∫ ‚îÇ  üß† gpt-5.2-mini ‚îÇ  ‚îÄ‚îÄ‚ñ∫ ‚îÇ  üì§ JSON    ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  Í∑úÏ†ï        ‚îÇ      ‚îÇ  / Gemini 3 Flash‚îÇ      ‚îÇ  Output     ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                  ‚îÇ                                  ‚îÇ
‚îÇ                                  ‚ñº                                  ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ              ‚îÇ üìã Structured Output Schema         ‚îÇ                ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ                ‚îÇ
‚îÇ              ‚îÇ {                                   ‚îÇ                ‚îÇ
‚îÇ              ‚îÇ   "category": "ÌîåÎùºÏä§Ìã±",           ‚îÇ                ‚îÇ
‚îÇ              ‚îÇ   "subcategory": "PET",             ‚îÇ                ‚îÇ
‚îÇ              ‚îÇ   "recyclable": true,               ‚îÇ                ‚îÇ
‚îÇ              ‚îÇ   "instructions": ["ÏÑ∏Ï≤ô", "ÎùºÎ≤®Ï†úÍ±∞"],‚îÇ               ‚îÇ
‚îÇ              ‚îÇ   "reward_points": 10,              ‚îÇ                ‚îÇ
‚îÇ              ‚îÇ   "explanation": "..."              ‚îÇ                ‚îÇ
‚îÇ              ‚îÇ }                                   ‚îÇ                ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </pre>
            </div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ìï≠Î™©</span><span class="lang-en">Item</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">Î™®Îç∏</span><span class="lang-en">Model</span></td>
                    <td><strong>gpt-5.2</strong> (default) / gemini-3-flash-preview</td>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÏûÖÎ†•</span><span class="lang-en">Input</span></td>
                    <td><span class="lang-ko">Vision Î∂ÑÎ•ò Í≤∞Í≥º + Rule Engine Í≤ÄÏÉâ Í∑úÏ†ï</span><span class="lang-en">Vision classification + Rule Engine retrieved regulations</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ï∂úÎ†•</span><span class="lang-en">Output</span></td>
                    <td><span class="lang-ko">JSON Structured Output (Ïä§ÌÇ§Îßà Í∞ïÏ†ú)</span><span class="lang-en">JSON Structured Output (schema enforced)</span></td>
                </tr>
            </table>
            <h4 style="color: var(--primary); margin: 1.2rem 0 0.8rem; font-size: 1rem;">
                <span class="lang-ko">üìä Ïã§Ï∏° Î†àÏù¥ÌÑ¥Ïãú (Prometheus)</span>
                <span class="lang-en">üìä Measured Latency (Prometheus)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ï°∞Í±¥</span><span class="lang-en">Condition</span></th>
                    <th>Avg</th>
                    <th><span class="lang-ko">ÎπÑÍ≥†</span><span class="lang-en">Note</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">Îã®Ïùº ÏöîÏ≤≠</span><span class="lang-en">Single request</span></td>
                    <td><strong>4.8s</strong></td>
                    <td><span class="lang-ko">Í∏∞Ï§ÄÍ∞í (ÏõåÎ∞çÏóÖ ÌõÑ)</span><span class="lang-en">Baseline (warmed up)</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ï†ÄÎ∂ÄÌïò</span><span class="lang-en">Low Load</span> (k6 VU 10)</td>
                    <td><strong>4.8s</strong></td>
                    <td><span class="lang-ko">ÎπÑÎèôÍ∏∞ Gevent Ï†ÑÌôò ÌõÑ</span><span class="lang-en">After Gevent migration</span></td>
                </tr>
            </table>
            <h4 style="color: var(--accent-teal); margin: 1.2rem 0 0.8rem; font-size: 1rem;">
                <span class="lang-ko">‚è±Ô∏è Ï†ÑÏ≤¥ Chain Duration (E2E)</span>
                <span class="lang-en">‚è±Ô∏è Total Chain Duration (E2E)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>VU</th>
                    <th><span class="lang-ko">ÏôÑÎ£åÏú®</span><span class="lang-en">Completion</span></th>
                    <th>E2E p95</th>
                    <th><span class="lang-ko">ÏÉÅÌÉú</span><span class="lang-en">Status</span></th>
                </tr>
                <tr>
                    <td>50</td>
                    <td>99.7%</td>
                    <td>17.7s</td>
                    <td>‚úÖ</td>
                </tr>
                <tr>
                    <td>250</td>
                    <td>99.9%</td>
                    <td>40.5s</td>
                    <td>‚úÖ</td>
                </tr>
                <tr style="background: rgba(0,255,136,0.1);">
                    <td><strong>üéØ 300 (SLA)</strong></td>
                    <td><strong>99.9%</strong></td>
                    <td><strong>48.5s</strong></td>
                    <td>‚úÖ <span class="lang-ko">ÏïàÏ†Ñ ÌïúÍ≥Ñ</span><span class="lang-en">Safe limit</span></td>
                </tr>
                <tr style="background: rgba(255,165,0,0.1);">
                    <td>400</td>
                    <td>98.9%</td>
                    <td style="color: var(--warning);">62.0s</td>
                    <td>‚ö†Ô∏è SLA &gt; 60s</td>
                </tr>
            </table>
            <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(0, 255, 136, 0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">
                    <span class="lang-ko">üìà ÎπÑÎèôÍ∏∞ Ï†ÑÌôò Ìö®Í≥º</span>
                    <span class="lang-en">üìà Async Migration Impact</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <span class="lang-ko">Vision 4.5s + Rule 0.3s + Answer 4.8s + Reward 1.7s = <strong>~11.3s</strong> (Ï†ÄÎ∂ÄÌïò ÌèâÍ∑†). OpenAI APIÍ∞Ä Ï†ÑÏ≤¥ ÌååÏù¥ÌîÑÎùºÏù∏Ïùò <strong>82%</strong> (9.3s/11.3s) Ï∞®ÏßÄ.</span>
                    <span class="lang-en">Vision 4.5s + Rule 0.3s + Answer 4.8s + Reward 1.7s = <strong>~11.3s</strong> (low load avg). OpenAI API accounts for <strong>82%</strong> (9.3s/11.3s) of total pipeline.</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Scan Pipeline Details -->
    <div class="modal-overlay" id="modal-scan-pipeline">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-scan-pipeline')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">‚öôÔ∏è Scan Pipeline Details - Celery Chain & Retry</span>
                <span class="lang-en">‚öôÔ∏è Scan Pipeline Details - Celery Chain & Retry</span>
            </h3>

            <!-- Pipeline Overview Diagram -->
            <div class="modal-diagram">
<pre style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        4-Stage Celery Chain Pipeline                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ   ‚îÇ  üëÅÔ∏è Vision ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  üìã Rule   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  üí¨ Answer ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  üéÅ Reward ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ  ~4.5s     ‚îÇ    ‚îÇ  ~0.3s     ‚îÇ    ‚îÇ  ~4.8s     ‚îÇ    ‚îÇ  ~1.7s     ‚îÇ             ‚îÇ
‚îÇ   ‚îÇ  (40%)     ‚îÇ    ‚îÇ  (5%)      ‚îÇ    ‚îÇ  (45%)     ‚îÇ    ‚îÇ  (10%)     ‚îÇ             ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ         ‚îÇ seq:10-11       ‚îÇ seq:20-21       ‚îÇ seq:30-31       ‚îÇ seq:40-41          ‚îÇ
‚îÇ         ‚ñº                 ‚ñº                 ‚ñº                 ‚ñº                    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ   ‚îÇ                    Redis Event Bus (XADD)                          ‚îÇ            ‚îÇ
‚îÇ   ‚îÇ                scan:events:{shard} (4 shards)                      ‚îÇ            ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ                                                                                    ‚îÇ
‚îÇ   Total: ~11.3s (LLM I/O-bound 85%)                                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <!-- Stage Details Table -->
            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1rem;">
                <span class="lang-ko">üìä StageÎ≥Ñ ÏÉÅÏÑ∏</span>
                <span class="lang-en">üìä Stage Details</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>Stage</th>
                    <th>Queue</th>
                    <th><span class="lang-ko">Ï≤òÎ¶¨ ÎÇ¥Ïö©</span><span class="lang-en">Processing</span></th>
                    <th><span class="lang-ko">Ïô∏Î∂Ä ÏùòÏ°¥ÏÑ±</span><span class="lang-en">External Dependency</span></th>
                    <th>Latency</th>
                </tr>
                <tr>
                    <td><strong>üëÅÔ∏è Vision</strong></td>
                    <td><code>scan.vision</code></td>
                    <td><span class="lang-ko">Ïù¥ÎØ∏ÏßÄ Î∂ÑÎ•ò (GPT Vision)</span><span class="lang-en">Image Classification (GPT Vision)</span></td>
                    <td>OpenAI API (gpt-5.2)</td>
                    <td><strong>~4.5s</strong> (40%)</td>
                </tr>
                <tr>
                    <td><strong>üìã Rule</strong></td>
                    <td><code>scan.rule</code></td>
                    <td><span class="lang-ko">Í∑úÏ†ï Í≤ÄÏÉâ (Lite RAG)</span><span class="lang-en">Regulation Search (Lite RAG)</span></td>
                    <td>JSON File (In-Memory)</td>
                    <td><strong>~0.3s</strong> (5%)</td>
                </tr>
                <tr>
                    <td><strong>üí¨ Answer</strong></td>
                    <td><code>scan.answer</code></td>
                    <td><span class="lang-ko">ÏùëÎãµ ÏÉùÏÑ± (Structured Output)</span><span class="lang-en">Response Generation (Structured Output)</span></td>
                    <td>OpenAI API (gpt-5.2)</td>
                    <td><strong>~4.8s</strong> (45%)</td>
                </tr>
                <tr>
                    <td><strong>üéÅ Reward</strong></td>
                    <td><code>scan.reward</code></td>
                    <td><span class="lang-ko">Ï∫êÎ¶≠ÌÑ∞ Îß§Ïπ≠ + Ìè¨Ïù∏Ìä∏ ÏßÄÍ∏â</span><span class="lang-en">Character Matching + Points</span></td>
                    <td>Character gRPC Service</td>
                    <td><strong>~1.7s</strong> (10%)</td>
                </tr>
            </table>

            <!-- Celery Chain Configuration -->
            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1rem;">
                <span class="lang-ko">üîó Celery Chain ÏÑ§Ï†ï</span>
                <span class="lang-en">üîó Celery Chain Configuration</span>
            </h4>
            <div style="background: var(--bg-code); padding: 1rem; border-radius: 8px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; overflow-x: auto;">
<pre style="margin: 0; color: var(--text-secondary);">
<span style="color: #7c3aed;"># Celery Chain: ÏàúÏ∞® Ïã§Ìñâ Î≥¥Ïû•</span>
chain = (
    vision_task.s(task_id, image_url, model)
    | rule_task.s()      <span style="color: #7c3aed;"># vision Í≤∞Í≥º ÏûêÎèô Ï†ÑÎã¨</span>
    | answer_task.s()    <span style="color: #7c3aed;"># rule Í≤∞Í≥º ÏûêÎèô Ï†ÑÎã¨</span>
    | reward_task.s()    <span style="color: #7c3aed;"># answer Í≤∞Í≥º ÏûêÎèô Ï†ÑÎã¨</span>
)

<span style="color: #7c3aed;"># Ïã§Ìñâ: apply_asyncÎ°ú ÎπÑÎèôÍ∏∞ Î∞úÌñâ</span>
chain.apply_async(task_id=task_id)

<span style="color: #7c3aed;"># Gevent Pool: 100 coroutines per worker</span>
celery -A scan_worker worker --pool=gevent --concurrency=100
</pre>
            </div>

            <!-- Retry Strategy -->
            <h4 style="color: var(--warning); margin: 1.5rem 0 0.8rem; font-size: 1rem;">
                <span class="lang-ko">üîÑ Retry Ï†ÑÎûµ</span>
                <span class="lang-en">üîÑ Retry Strategy</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">ÏÑ§Ï†ï</span><span class="lang-en">Setting</span></th>
                    <th><span class="lang-ko">Í∞í</span><span class="lang-en">Value</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td><code>max_retries</code></td>
                    <td>3</td>
                    <td><span class="lang-ko">ÏµúÎåÄ Ïû¨ÏãúÎèÑ ÌöüÏàò</span><span class="lang-en">Maximum retry attempts</span></td>
                </tr>
                <tr>
                    <td><code>default_retry_delay</code></td>
                    <td>5s</td>
                    <td><span class="lang-ko">Ïû¨ÏãúÎèÑ Í∞ÑÍ≤© (exponential backoff)</span><span class="lang-en">Retry interval (exponential backoff)</span></td>
                </tr>
                <tr>
                    <td><code>acks_late</code></td>
                    <td>true</td>
                    <td><span class="lang-ko">ÏûëÏóÖ ÏôÑÎ£å ÌõÑ ACK (Ïû¨ÏãúÎèÑ Î≥¥Ïû•)</span><span class="lang-en">ACK after completion (retry guarantee)</span></td>
                </tr>
                <tr>
                    <td><code>reject_on_worker_lost</code></td>
                    <td>true</td>
                    <td><span class="lang-ko">ÏõåÏª§ Ïã§Ìå® Ïãú ÌÅê Ïû¨Ï†ÑÎã¨</span><span class="lang-en">Requeue on worker failure</span></td>
                </tr>
                <tr>
                    <td><code>task_time_limit</code></td>
                    <td>300s</td>
                    <td><span class="lang-ko">ÌïòÎìú ÌÉÄÏûÑÏïÑÏõÉ (Í∞ïÏ†ú Ï¢ÖÎ£å)</span><span class="lang-en">Hard timeout (force kill)</span></td>
                </tr>
                <tr>
                    <td><code>task_soft_time_limit</code></td>
                    <td>240s</td>
                    <td><span class="lang-ko">ÏÜåÌîÑÌä∏ ÌÉÄÏûÑÏïÑÏõÉ (SoftTimeLimitExceeded)</span><span class="lang-en">Soft timeout (SoftTimeLimitExceeded)</span></td>
                </tr>
            </table>

            <!-- Event Sequence -->
            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1rem;">
                <span class="lang-ko">üì° Event Sequence (SSE Ï†ÑÏÜ°)</span>
                <span class="lang-en">üì° Event Sequence (SSE Delivery)</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem; text-align: center; font-size: 0.75rem;">
                <div style="background: rgba(139,92,246,0.15); padding: 0.5rem; border-radius: 6px;">
                    <div style="font-weight: 600; color: #8b5cf6;">seq: 10-11</div>
                    <div style="color: var(--text-secondary);">vision.start/done</div>
                </div>
                <div style="background: rgba(245,158,11,0.15); padding: 0.5rem; border-radius: 6px;">
                    <div style="font-weight: 600; color: #f59e0b;">seq: 20-21</div>
                    <div style="color: var(--text-secondary);">rule.start/done</div>
                </div>
                <div style="background: rgba(16,185,129,0.15); padding: 0.5rem; border-radius: 6px;">
                    <div style="font-weight: 600; color: #10b981;">seq: 30-31</div>
                    <div style="color: var(--text-secondary);">answer.start/done</div>
                </div>
                <div style="background: rgba(59,130,246,0.15); padding: 0.5rem; border-radius: 6px;">
                    <div style="font-weight: 600; color: #3b82f6;">seq: 40-41</div>
                    <div style="color: var(--text-secondary);">reward.start/done</div>
                </div>
                <div style="background: rgba(34,197,94,0.15); padding: 0.5rem; border-radius: 6px;">
                    <div style="font-weight: 600; color: #22c55e;">seq: 51</div>
                    <div style="color: var(--text-secondary);">complete</div>
                </div>
            </div>

            <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(139, 92, 246, 0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">
                    <span class="lang-ko">üí° Idempotent Event Ï≤òÎ¶¨</span>
                    <span class="lang-en">üí° Idempotent Event Processing</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <span class="lang-ko">Event RouterÍ∞Ä seq Î≤àÌò∏Î°ú Ï§ëÎ≥µ Í≤ÄÏÇ¨ ‚Üí Lua ScriptÎ°ú ÏõêÏûêÏ†Å ÏóÖÎç∞Ïù¥Ìä∏ ‚Üí published markerÎ°ú Ïû¨Ï†ÑÏÜ° Î∞©ÏßÄ</span>
                    <span class="lang-en">Event Router checks seq for duplicates ‚Üí Atomic update via Lua Script ‚Üí published marker prevents re-delivery</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Agentic Workflow Modals -->
    <div class="modal-overlay" id="modal-chat-intent">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-chat-intent')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üéØ Intent Router (Multi-intent Classifier)</span>
                <span class="lang-en">üéØ Intent Router (Multi-intent Classifier)</span>
            </h3>
            <div class="modal-diagram">
                <pre style="font-size: 0.8rem; line-height: 1.5;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Multi-intent Classification                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ   ‚îÇ  üí¨ User     ‚îÇ  ‚îÄ‚îÄ‚ñ∫ ‚îÇ  üß† LLM          ‚îÇ  ‚îÄ‚îÄ‚ñ∫ ‚îÇ  üè∑Ô∏è Intent ‚îÇ  ‚îÇ
‚îÇ   ‚îÇ  Query       ‚îÇ      ‚îÇ  Classifier      ‚îÇ      ‚îÇ  Tags       ‚îÇ  ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                  ‚îÇ                                  ‚îÇ
‚îÇ                                  ‚ñº                                  ‚îÇ
‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ      ‚îÇ üìã intent.txt (System Prompt)                          ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ 4-Class Routing:                                       ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ ‚îÇ üóëÔ∏è waste  ‚îÇ üé≠ character‚îÇ üìç location‚îÇ üí≠ general ‚îÇ ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ ‚îÇ Î∂ÑÎ¶¨Î∞∞Ï∂ú   ‚îÇ Ï∫êÎ¶≠ÌÑ∞      ‚îÇ ÏàòÍ±∞Ïû•ÏÜå   ‚îÇ ÏùºÎ∞òÎåÄÌôî   ‚îÇ ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ                                                        ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ Î≥µÌï© ÏßàÎ¨∏ Î∂ÑÌï¥:                                        ‚îÇ     ‚îÇ
‚îÇ      ‚îÇ "ÌîåÎùºÏä§Ìã± Î≤ÑÎ¶¨Îäî Í≥≥ ÏïåÎ†§Ï§ò" ‚Üí [waste, location]        ‚îÇ     ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </pre>
            </div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Î∂ÑÎ•ò</span><span class="lang-en">Class</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                    <th><span class="lang-ko">ÏòàÏãú</span><span class="lang-en">Example</span></th>
                </tr>
                <tr>
                    <td>üóëÔ∏è <strong>waste</strong></td>
                    <td><span class="lang-ko">Î∂ÑÎ¶¨Î∞∞Ï∂ú Î∞©Î≤ï ÏßàÎ¨∏</span><span class="lang-en">Recycling method questions</span></td>
                    <td><span class="lang-ko">"ÌéòÌä∏Î≥ë Ïñ¥ÎñªÍ≤å Î≤ÑÎ†§?"</span><span class="lang-en">"How to dispose PET bottles?"</span></td>
                </tr>
                <tr>
                    <td>üé≠ <strong>character</strong></td>
                    <td><span class="lang-ko">Ï∫êÎ¶≠ÌÑ∞ Í¥ÄÎ†® ÏßàÎ¨∏</span><span class="lang-en">Character-related questions</span></td>
                    <td><span class="lang-ko">"Ï¥àÎ°ùÏù¥Í∞Ä Ï¢ãÏïÑÌïòÎäî Í±¥?"</span><span class="lang-en">"What does Choroki like?"</span></td>
                </tr>
                <tr>
                    <td>üìç <strong>location</strong></td>
                    <td><span class="lang-ko">ÏàòÍ±∞ Ïû•ÏÜå ÏßàÎ¨∏</span><span class="lang-en">Collection point questions</span></td>
                    <td><span class="lang-ko">"Í∑ºÏ≤ò Ïû¨ÌôúÏö© ÏÑºÌÑ∞"</span><span class="lang-en">"Nearby recycling center"</span></td>
                </tr>
                <tr>
                    <td>üí≠ <strong>general</strong></td>
                    <td><span class="lang-ko">ÏùºÎ∞ò ÎåÄÌôî/Ïù∏ÏÇ¨</span><span class="lang-en">General chat/greetings</span></td>
                    <td><span class="lang-ko">"ÏïàÎÖï!"</span><span class="lang-en">"Hello!"</span></td>
                </tr>
            </table>
            <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(139, 92, 246, 0.1); border-radius: 8px; border-left: 3px solid rgba(139, 92, 246, 0.8);">
                <strong style="color: rgba(139, 92, 246, 0.9);">
                    <span class="lang-ko">üí° Î≥µÌï© ÏßàÎ¨∏ Î∂ÑÌï¥</span>
                    <span class="lang-en">üí° Compound Query Decomposition</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <span class="lang-ko">ÌïòÎÇòÏùò ÏßàÎ¨∏Ïóê Ïó¨Îü¨ ÏùòÎèÑÍ∞Ä Ìè¨Ìï®Îêú Í≤ΩÏö∞, Í∞ÅÍ∞Å Î≥ÑÎèÑÏùò ÏÑúÎ∏åÏóêÏù¥Ï†ÑÌä∏Î°ú ÎùºÏö∞ÌåÖÌïòÏó¨ Î≥ëÎ†¨ Ï≤òÎ¶¨ ÌõÑ Í≤∞Í≥º ÌÜµÌï©</span>
                    <span class="lang-en">When a query contains multiple intents, route to separate sub-agents for parallel processing, then merge results</span>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-chat-retriever">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-chat-retriever')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üìã TagBasedRetriever (Contextual Retrieval)</span>
                <span class="lang-en">üìã TagBasedRetriever (Contextual Retrieval)</span>
            </h3>
            <div class="modal-diagram">
                <pre style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  TagBasedRetriever Architecture                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ üí¨ Query     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ üîç Vector Search       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ + Intent     ‚îÇ                          ‚îÇ (Embedding Similarity) ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ          ‚îÇ                                              ‚îÇ                ‚îÇ
‚îÇ          ‚ñº                                              ‚ñº                ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ üìÅ Structured Data Injection (YAML ‚Üí Context)                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ item_class_list.yaml          situation_tags.yaml               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îÇ 200+ ÌíàÎ™©            ‚îÇ       ‚îÇ 100+ ÏÉÅÌô© ÌÉúÍ∑∏       ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ ÌîåÎùºÏä§Ìã±         ‚îÇ       ‚îÇ ‚îú‚îÄ‚îÄ Ï≤≠ÏÜå            ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îÇ ‚îÇ   ‚îú‚îÄ‚îÄ PET         ‚îÇ       ‚îÇ ‚îú‚îÄ‚îÄ Î∂ÑÎ¶¨ÏàòÍ±∞        ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îÇ ‚îÇ   ‚îú‚îÄ‚îÄ PP          ‚îÇ       ‚îÇ ‚îú‚îÄ‚îÄ Ïû¨ÌôúÏö©          ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îÇ ‚îÇ   ‚îî‚îÄ‚îÄ PE          ‚îÇ       ‚îÇ ‚îî‚îÄ‚îÄ ÌôòÍ≤ΩÎ≥¥Ìò∏        ‚îÇ          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Ï¢ÖÏù¥            ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ Í∏àÏÜç            ‚îÇ                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                    ‚îÇ                                     ‚îÇ
‚îÇ                                    ‚ñº                                     ‚îÇ
‚îÇ                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îÇ
‚îÇ                        ‚îÇ üìÑ Enriched Context ‚îÇ                          ‚îÇ
‚îÇ                        ‚îÇ (Query + YAML data) ‚îÇ                          ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </pre>
            </div>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">ÌååÏùº</span><span class="lang-en">File</span></th>
                    <th><span class="lang-ko">ÎÇ¥Ïö©</span><span class="lang-en">Content</span></th>
                    <th><span class="lang-ko">Ïö©ÎèÑ</span><span class="lang-en">Purpose</span></th>
                </tr>
                <tr>
                    <td><code>item_class_list.yaml</code></td>
                    <td><span class="lang-ko">200+ ÌíàÎ™© Î∂ÑÎ•ò Ï≤¥Í≥Ñ</span><span class="lang-en">200+ item classification</span></td>
                    <td><span class="lang-ko">Î∂ÑÎ¶¨Î∞∞Ï∂ú ÏßàÎ¨∏ Ïãú ÌíàÎ™© Îß§Ïπ≠</span><span class="lang-en">Item matching for disposal questions</span></td>
                </tr>
                <tr>
                    <td><code>situation_tags.yaml</code></td>
                    <td><span class="lang-ko">100+ ÏÉÅÌô© ÌÉúÍ∑∏</span><span class="lang-en">100+ situation tags</span></td>
                    <td><span class="lang-ko">Ïª®ÌÖçÏä§Ìä∏ Í∏∞Î∞ò Í≤ÄÏÉâ Í∞ïÌôî</span><span class="lang-en">Contextual search enhancement</span></td>
                </tr>
            </table>
            <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(244, 197, 106, 0.1); border-radius: 8px; border-left: 3px solid rgba(244, 197, 106, 0.8);">
                <strong style="color: rgba(244, 197, 106, 0.9);">
                    <span class="lang-ko">üîó Anthropic Contextual Retrieval Ìå®ÌÑ¥</span>
                    <span class="lang-en">üîó Anthropic Contextual Retrieval Pattern</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <span class="lang-ko">Íµ¨Ï°∞ÌôîÎêú YAML Îç∞Ïù¥ÌÑ∞Î•º LLM Ïª®ÌÖçÏä§Ìä∏Ïóê ÏßÅÏ†ë Ï£ºÏûÖÌïòÏó¨ Í≤ÄÏÉâ Ï†ïÌôïÎèÑ Ìñ•ÏÉÅ. Í∏∞Ï°¥ Î≤°ÌÑ∞ Í≤ÄÏÉâÎßåÏúºÎ°úÎäî ÎÜìÏπ† Ïàò ÏûàÎäî ÎèÑÎ©îÏù∏ ÌäπÌôî Ï†ïÎ≥¥Î•º Î≥¥ÏôÑ.</span>
                    <span class="lang-en">Inject structured YAML data directly into LLM context for improved retrieval accuracy. Supplements domain-specific information that vector search alone might miss.</span>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-chat-eval">
        <div class="modal-content" style="max-width: 1050px;">
            <button class="modal-close" onclick="closeModal('modal-chat-eval')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üìä Eval Agent (Phase 1-4 ÌèâÍ∞Ä)</span>
                <span class="lang-en">üìä Eval Agent (Phase 1-4 Evaluation)</span>
            </h3>
            <div class="modal-diagram">
                <pre style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Eval Agent - 4 Phase Evaluation                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Phase 1: Citation (Í∑ºÍ±∞ Í≤ÄÏ¶ù)                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ÏùëÎãµÏù¥ Í≤ÄÏÉâÎêú Î¨∏ÏÑúÏóê Í∏∞Î∞òÌïòÎäîÏßÄ ÌôïÏù∏                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Rule-based Îπ†Î•∏ ÌåêÎã® (Ï†ïÍ∑úÏãù, ÌÇ§ÏõåÎìú Îß§Ïπ≠)                    ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                              ‚ñº                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Phase 2: Nugget (ÏôÑÏ†ÑÏÑ± ÌèâÍ∞Ä)                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ÌïµÏã¨ Ï†ïÎ≥¥ Ìè¨Ìï® Ïó¨Î∂Ä Ï≤¥ÌÅ¨                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ÎàÑÎùΩÎêú Ï†ïÎ≥¥ ÏãùÎ≥Ñ                                              ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                              ‚ñº                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Phase 3: Groundedness (Í≤ÄÏ¶ù)                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ LLM Í∏∞Î∞ò Ï†ïÎ∞Ä ÌèâÍ∞Ä                                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Hallucination ÌÉêÏßÄ                                            ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                              ‚ñº                                           ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Phase 4: Just-in-Time (Îã§Ïùå Ïï°ÏÖò)                               ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ÌíàÏßà Ï†êÏàò Í∏∞Î∞ò Î∂ÑÍ∏∞ Í≤∞Ï†ï                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Pass / Retry / Fallback ÌåêÎã®                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </pre>
            </div>
            <table class="modal-table">
                <tr>
                    <th>Phase</th>
                    <th><span class="lang-ko">ÌèâÍ∞Ä Ìï≠Î™©</span><span class="lang-en">Evaluation</span></th>
                    <th><span class="lang-ko">Î∞©Ïãù</span><span class="lang-en">Method</span></th>
                    <th><span class="lang-ko">Í∏∞Ï§Ä</span><span class="lang-en">Threshold</span></th>
                </tr>
                <tr>
                    <td>1. Citation</td>
                    <td><span class="lang-ko">Í∑ºÍ±∞ Ï°¥Ïû¨</span><span class="lang-en">Evidence exists</span></td>
                    <td>Rule-based</td>
                    <td>‚â•1 <span class="lang-ko">Ï∞∏Ï°∞</span><span class="lang-en">reference</span></td>
                </tr>
                <tr>
                    <td>2. Nugget</td>
                    <td><span class="lang-ko">Ï†ïÎ≥¥ ÏôÑÏ†ÑÏÑ±</span><span class="lang-en">Info completeness</span></td>
                    <td>Rule + LLM</td>
                    <td>‚â•70%</td>
                </tr>
                <tr>
                    <td>3. Groundedness</td>
                    <td><span class="lang-ko">ÏÇ¨Ïã§ Í≤ÄÏ¶ù</span><span class="lang-en">Fact verification</span></td>
                    <td>LLM</td>
                    <td>‚â•0.8 score</td>
                </tr>
                <tr>
                    <td>4. Just-in-Time</td>
                    <td><span class="lang-ko">Îã§Ïùå Ïï°ÏÖò</span><span class="lang-en">Next action</span></td>
                    <td>Decision Tree</td>
                    <td>Pass/Retry/Fallback</td>
                </tr>
            </table>
            <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(77, 170, 141, 0.1); border-radius: 8px; border-left: 3px solid rgba(77, 170, 141, 0.8);">
                <strong style="color: rgba(77, 170, 141, 0.9);">
                    <span class="lang-ko">üî¨ Anthropic RAG Evaluation Patterns</span>
                    <span class="lang-en">üî¨ Anthropic RAG Evaluation Patterns</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <span class="lang-ko">Rule Í∏∞Î∞ò Îπ†Î•∏ ÌåêÎã®Í≥º LLM Í∏∞Î∞ò Ï†ïÎ∞Ä ÌèâÍ∞ÄÎ•º Ï°∞Ìï©ÌïòÏó¨ ÎπÑÏö© Ìö®Ïú®Ï†ÅÏù∏ ÌíàÏßà ÌèâÍ∞Ä. Ï†ÄÌíàÏßà ÏùëÎãµÏùÄ Fallback ChainÏúºÎ°ú Ï†ÑÎã¨.</span>
                    <span class="lang-en">Combines rule-based fast judgment with LLM-based precise evaluation for cost-efficient quality assessment. Low-quality responses are passed to Fallback Chain.</span>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="modal-chat-fallback">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-chat-fallback')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîÑ Fallback Chain (3-tier Recovery)</span>
                <span class="lang-en">üîÑ Fallback Chain (3-tier Recovery)</span>
            </h3>
            <div class="modal-diagram">
                <pre style="font-size: 0.75rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Fallback Chain Strategy                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ   Eval Agent Ï†ÄÌíàÏßà ÌåêÏ†ï                                                 ‚îÇ
‚îÇ        ‚îÇ                                                                 ‚îÇ
‚îÇ        ‚ñº                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Tier 1: RAG Retry (Í≤ÄÏÉâ Ïû¨ÏãúÎèÑ)                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ÏøºÎ¶¨ Î¶¨ÎùºÏù¥ÌåÖ ÌõÑ Ïû¨Í≤ÄÏÉâ                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Îã§Î•∏ Í≤ÄÏÉâ Ï†ÑÎûµ ÏãúÎèÑ                                           ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ        ‚îÇ Ïã§Ìå® Ïãú                                                         ‚îÇ
‚îÇ        ‚ñº                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Tier 2: Web Search (Ïô∏Î∂Ä Í≤ÄÏÉâ)                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Tavily/Serper APIÎ°ú Ïõπ Í≤ÄÏÉâ                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ÏµúÏã† Ï†ïÎ≥¥ Î≥¥ÏôÑ                                                ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ        ‚îÇ Ïã§Ìå® Ïãú                                                         ‚îÇ
‚îÇ        ‚ñº                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Tier 3: General LLM (ÏùºÎ∞ò ÏùëÎãµ)                                 ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ Ïª®ÌÖçÏä§Ìä∏ ÏóÜÏù¥ LLM ÏßÅÏ†ë ÏùëÎãµ                                   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ "Ï†ïÌôïÌïú Ï†ïÎ≥¥ ÌôïÏù∏ ÌïÑÏöî" ÏïàÎÇ¥ Ìè¨Ìï®                             ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ        ‚îÇ ÏùòÎèÑ Î∂àÎ™ÖÌôï Ïãú                                                  ‚îÇ
‚îÇ        ‚ñº                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ  Clarify Template (Î™ÖÌôïÌôî ÏöîÏ≤≠)                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ "Ï¢Ä Îçî Íµ¨Ï≤¥Ï†ÅÏúºÎ°ú ÏßàÎ¨∏Ìï¥ Ï£ºÏÑ∏Ïöî"                              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚Ä¢ ÏòàÏãú ÏßàÎ¨∏ Ï†úÏïà                                                ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </pre>
            </div>
            <table class="modal-table">
                <tr>
                    <th>Tier</th>
                    <th><span class="lang-ko">Ï†ÑÎûµ</span><span class="lang-en">Strategy</span></th>
                    <th><span class="lang-ko">Ï°∞Í±¥</span><span class="lang-en">Condition</span></th>
                    <th><span class="lang-ko">ÎπÑÏö©</span><span class="lang-en">Cost</span></th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>RAG Retry</td>
                    <td><span class="lang-ko">ÌíàÏßà Ï†êÏàò &lt; ÏûÑÍ≥ÑÍ∞í</span><span class="lang-en">Quality score &lt; threshold</span></td>
                    <td><span class="lang-ko">ÎÇÆÏùå</span><span class="lang-en">Low</span></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Web Search</td>
                    <td><span class="lang-ko">RAG Ïû¨ÏãúÎèÑ Ïã§Ìå®</span><span class="lang-en">RAG retry failed</span></td>
                    <td><span class="lang-ko">Ï§ëÍ∞Ñ</span><span class="lang-en">Medium</span></td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>General LLM</td>
                    <td><span class="lang-ko">Web Í≤ÄÏÉâÎèÑ Ïã§Ìå®</span><span class="lang-en">Web search also failed</span></td>
                    <td><span class="lang-ko">ÎÜíÏùå</span><span class="lang-en">High</span></td>
                </tr>
                <tr>
                    <td>-</td>
                    <td>Clarify</td>
                    <td><span class="lang-ko">ÏùòÎèÑ ÌååÏïÖ Î∂àÍ∞Ä</span><span class="lang-en">Intent unclear</span></td>
                    <td><span class="lang-ko">ÏóÜÏùå</span><span class="lang-en">None</span></td>
                </tr>
            </table>
            <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(255, 165, 0, 0.1); border-radius: 8px; border-left: 3px solid rgba(255, 165, 0, 0.8);">
                <strong style="color: rgba(255, 165, 0, 0.9);">
                    <span class="lang-ko">üîÅ Recursive Self-Improvement Loop</span>
                    <span class="lang-en">üîÅ Recursive Self-Improvement Loop</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem;">
                    <span class="lang-ko">Fallback Í≤∞Í≥ºÎèÑ Eval AgentÎ°ú Ïû¨ÌèâÍ∞ÄÌïòÏó¨ ÌíàÏßà Í∏∞Ï§Ä Ï∂©Ï°± ÏãúÍπåÏßÄ Î∞òÎ≥µ. Î¨¥Ìïú Î£®ÌîÑ Î∞©ÏßÄÎ•º ÏúÑÌï¥ ÏµúÎåÄ Ïû¨ÏãúÎèÑ ÌöüÏàò Ï†úÌïú.</span>
                    <span class="lang-en">Fallback results are re-evaluated by Eval Agent, repeating until quality threshold is met. Max retry limit prevents infinite loops.</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Scan Infrastructure -->
    <div class="modal-overlay" id="modal-scan-infra">
        <div class="modal-content" style="max-width: 1200px;">
            <button class="modal-close" onclick="closeModal('modal-scan-infra')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üì¶ Scan Ïù∏ÌîÑÎùº: Celery + Gevent ÌååÏù¥ÌîÑÎùºÏù∏</span>
                <span class="lang-en">üì¶ Scan Infrastructure: Celery + Gevent Pipeline</span>
            </h3>
            
            <div class="modal-diagram">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Scan Worker Infrastructure (Production)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  Celery Worker (gevent pool=100)                                        ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  celery -A scan_worker.main worker --pool=gevent --concurrency=100      ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  -Q scan.vision,scan.rule,scan.answer,scan.reward                       ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   4-Stage Chain + Sequence Events (ÏàúÏ∞® ÏùòÏ°¥ÏÑ±)                                 ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÇ
‚îÇ   vision (5.16s) ‚Üí rule (0.05s) ‚Üí answer (3.69s) ‚Üí reward (0.22s) ‚Üí done       ‚îÇ
‚îÇ     seq:10-11      seq:20-21      seq:30-31        seq:40-41       seq:51      ‚îÇ
‚îÇ        ‚Üì              ‚Üì              ‚Üì                ‚Üì                         ‚îÇ
‚îÇ   OpenAI Vision   Lite RAG      OpenAI Chat     Character gRPC                 ‚îÇ
‚îÇ                  (PostgreSQL)                 (ÏôÑÎ≤Ω Î∂ÑÎ•ò ÏãúÏóêÎßå ÏßÄÍ∏â)            ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   2-Redis Event Bus Layer (Idempotent Fan-out)                                  ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Worker ‚îÄ‚îÄXADD‚îÄ‚îÄ‚ñ∂ Streams Redis ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ Event Router ‚îÄ‚îÄPUBLISH‚îÄ‚îÄ‚ñ∂     ‚îÇ
‚îÇ                    (4 shards: scan:events:0~3)       ‚îÇ                          ‚îÇ
‚îÇ                    (Durable Buffer)                  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ                                                      ‚îú‚îÄ‚îÄ‚ñ∂‚îÇ State KV Update  ‚îÇ   ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ (Lua Atomic)     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ   ‚îÇ   StreamConsumer          EventProcessor        PendingReclaimer            ‚îÇ
‚îÇ   ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ         ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ            ‚îÇ
‚îÇ   ‚îÇ   XREADGROUP              Lua Script            XAUTOCLAIM                  ‚îÇ
‚îÇ   ‚îÇ   eventrouter             seq Ï§ëÎ≥µ Í≤ÄÏÇ¨          5min idle Ïû¨Ï≤òÎ¶¨            ‚îÇ
‚îÇ   ‚îÇ   batch count             published marker      (idempotent safe)           ‚îÇ
‚îÇ   ‚îÇ                           TTL 2h                                            ‚îÇ
‚îÇ   ‚îÇ                                                                             ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ Pub/Sub Redis ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ SSE Gateway ‚îÄ‚îÄ‚ñ∂ Client    ‚îÇ
‚îÇ                (Volatile Broadcast)                   (5s timeout ‚Üí catch-up)   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üéØ SLA ÏÑ±Îä• ÏßÄÌëú (k6 VU 300 Í∏∞Ï§Ä)</span>
                <span class="lang-en">üéØ SLA Performance Metrics (k6 VU 300 baseline)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>VU</th>
                    <th><span class="lang-ko">ÏôÑÎ£åÏú®</span><span class="lang-en">Completion</span></th>
                    <th>E2E p95</th>
                    <th><span class="lang-ko">Ï≤òÎ¶¨Îüâ</span><span class="lang-en">Throughput</span></th>
                    <th><span class="lang-ko">ÏÉÅÌÉú</span><span class="lang-en">Status</span></th>
                </tr>
                <tr>
                    <td>50</td>
                    <td>99.7%</td>
                    <td>17.7s</td>
                    <td>198 req/m</td>
                    <td>‚úÖ</td>
                </tr>
                <tr>
                    <td>200</td>
                    <td>99.8%</td>
                    <td>33.2s</td>
                    <td>370 req/m</td>
                    <td>‚úÖ</td>
                </tr>
                <tr>
                    <td>250</td>
                    <td>99.9%</td>
                    <td>40.5s</td>
                    <td>418 req/m</td>
                    <td>‚úÖ</td>
                </tr>
                <tr style="background: rgba(0,255,136,0.1);">
                    <td><strong>üéØ 300 (SLA)</strong></td>
                    <td><strong>99.9%</strong></td>
                    <td><strong>48.5s</strong></td>
                    <td><strong>402 req/m</strong></td>
                    <td>‚úÖ <span class="lang-ko">ÏïàÏ†Ñ ÌïúÍ≥Ñ</span><span class="lang-en">Safe limit</span></td>
                </tr>
                <tr style="background: rgba(255,165,0,0.1);">
                    <td>400</td>
                    <td>98.9%</td>
                    <td style="color: var(--warning);">62.0s</td>
                    <td>427 req/m</td>
                    <td>‚ö†Ô∏è SLA &gt; 60s</td>
                </tr>
                <tr style="background: rgba(255,0,0,0.1);">
                    <td>500</td>
                    <td style="color: var(--danger);">94.0%</td>
                    <td style="color: var(--danger);">76.3s</td>
                    <td>428 req/m</td>
                    <td>‚ùå <span class="lang-ko">Ìè¨Ìôî</span><span class="lang-en">Saturated</span></td>
                </tr>
            </table>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üìä Ïä§ÌÖåÏù¥ÏßÄÎ≥Ñ Î†àÏù¥ÌÑ¥Ïãú (Ï†ÄÎ∂ÄÌïò k6 VU 10)</span>
                <span class="lang-en">üìä Stage Latency (Low load k6 VU 10)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>Stage</th>
                    <th>Avg</th>
                    <th><span class="lang-ko">ÎπÑÏú®</span><span class="lang-en">Ratio</span></th>
                    <th><span class="lang-ko">Î≥ëÎ™© ÏõêÏù∏</span><span class="lang-en">Bottleneck</span></th>
                </tr>
                <tr><td>vision (seq:10-11)</td><td>5.16s</td><td>57%</td><td>OpenAI Vision API (gpt-5.2)</td></tr>
                <tr><td>answer (seq:30-31)</td><td>3.69s</td><td>40%</td><td>OpenAI Chat API (gpt-5.2)</td></tr>
                <tr><td>reward (seq:40-41)</td><td>0.22s</td><td>2%</td><td><span class="lang-ko">Character gRPC (ÏôÑÎ≤Ω Î∂ÑÎ•ò ÏãúÏóêÎßå)</span><span class="lang-en">Character gRPC (perfect only)</span></td></tr>
                <tr><td>rule (seq:20-21)</td><td>0.05s</td><td>1%</td><td>Lite RAG (Memory, JSON)</td></tr>
                <tr style="background: rgba(0,255,136,0.1);"><td><strong>Total</strong></td><td><strong>~9.12s</strong></td><td>100%</td><td>üéØ SLA 300 VU E2E p95 48.5s</td></tr>
            </table>

            <h4 style="color: var(--accent-purple); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚öôÔ∏è Ïù∏ÌîÑÎùº Íµ¨ÏÑ±</span>
                <span class="lang-en">‚öôÔ∏è Infrastructure Configuration</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Íµ¨ÏÑ± ÏöîÏÜå</span><span class="lang-en">Component</span></th>
                    <th><span class="lang-ko">ÏÑ§Ï†ï</span><span class="lang-en">Config</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td>Celery Pool</td>
                    <td><code>gevent 100</code></td>
                    <td><span class="lang-ko">100% I/O-bound ‚Üí greenlet 100Í∞ú ÎèôÏãú Ï≤òÎ¶¨</span><span class="lang-en">100% I/O-bound ‚Üí 100 concurrent greenlets</span></td>
                </tr>
                <tr>
                    <td>Queues</td>
                    <td><code>scan.vision, rule, answer, reward</code></td>
                    <td><span class="lang-ko">Ïä§ÌÖåÏù¥ÏßÄÎ≥Ñ Í∞úÎ≥Ñ ÌÅê (Topology CR)</span><span class="lang-en">Per-stage queues (Topology CR)</span></td>
                </tr>
                <tr>
                    <td>Redis Streams</td>
                    <td><code>4 shards</code></td>
                    <td><span class="lang-ko">Ïù¥Î≤§Ìä∏ ÏÉ§Îî© (Í∑†Îì± Î∂ÑÎ∞∞)</span><span class="lang-en">Event sharding (balanced)</span></td>
                </tr>
                <tr>
                    <td>KEDA Scaling</td>
                    <td><code>1-5 replicas</code></td>
                    <td><span class="lang-ko">RabbitMQ ÌÅê Í∏∏Ïù¥ Í∏∞Î∞ò</span><span class="lang-en">RabbitMQ queue length based</span></td>
                </tr>
            </table>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÑ 2-Redis Event Bus Layer</span>
                <span class="lang-en">üîÑ 2-Redis Event Bus Layer</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ïª¥Ìè¨ÎÑåÌä∏</span><span class="lang-en">Component</span></th>
                    <th><span class="lang-ko">Ïó≠Ìï†</span><span class="lang-en">Role</span></th>
                    <th><span class="lang-ko">ÏÉÅÏÑ∏</span><span class="lang-en">Details</span></th>
                </tr>
                <tr>
                    <td>Streams Redis</td>
                    <td><span class="lang-ko">ÎÇ¥Íµ¨ÏÑ± Î≤ÑÌçº</span><span class="lang-en">Durable Buffer</span></td>
                    <td><code>scan:events:0~3</code> <span class="lang-ko">4 ÏÉ§Îìú, State KV Ï†ÄÏû•</span><span class="lang-en">4 shards, State KV storage</span></td>
                </tr>
                <tr>
                    <td>Pub/Sub Redis</td>
                    <td><span class="lang-ko">Ïã§ÏãúÍ∞Ñ Î∏åÎ°úÎìúÏ∫êÏä§Ìä∏</span><span class="lang-en">Realtime Broadcast</span></td>
                    <td><span class="lang-ko">Volatile, Ïû•Ïï† Í≤©Î¶¨ (State Î≥µÍµ¨ Í∞ÄÎä•)</span><span class="lang-en">Volatile, fault-isolated (State recoverable)</span></td>
                </tr>
                <tr>
                    <td>StreamConsumer</td>
                    <td><code>XREADGROUP</code></td>
                    <td><span class="lang-ko">Consumer Group: eventrouter, batch ÏÜåÎπÑ</span><span class="lang-en">Consumer Group: eventrouter, batch consume</span></td>
                </tr>
                <tr>
                    <td>EventProcessor</td>
                    <td>Lua Script</td>
                    <td><span class="lang-ko">seq Ï§ëÎ≥µ Í≤ÄÏÇ¨ + State + published marker ÏõêÏûêÏ†Å</span><span class="lang-en">seq dedup + State + published marker atomic</span></td>
                </tr>
                <tr>
                    <td>PendingReclaimer</td>
                    <td><code>XAUTOCLAIM</code></td>
                    <td><span class="lang-ko">5Î∂Ñ idle Î©îÏãúÏßÄ Ïû¨Ï≤òÎ¶¨ (idempotent safe)</span><span class="lang-en">5min idle reclaim (idempotent safe)</span></td>
                </tr>
                <tr>
                    <td>Published Marker</td>
                    <td><code>router:published:{job_id}:{seq}</code></td>
                    <td>TTL 2h <span class="lang-ko">(Ï§ëÎ≥µ Î∞úÌñâ Î∞©ÏßÄ)</span><span class="lang-en">(prevent duplicate publish)</span></td>
                </tr>
            </table>

            <div style="margin-top: 1rem; padding: 0.8rem; background: rgba(138,43,226,0.1); border-radius: 8px;">
                <strong style="color: var(--accent-purple);">üéÅ <span class="lang-ko">Reward Ï°∞Í±¥</span><span class="lang-en">Reward Condition</span></strong>
                <div style="margin-top: 0.3rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <span class="lang-ko">ÏôÑÎ≤ΩÌïú Î∂ÑÎ¶¨Î∞∞Ï∂ú ÏãúÏóêÎßå Ï∫êÎ¶≠ÌÑ∞ Î¶¨ÏõåÎìú ÏßÄÍ∏â (insufficienciesÍ∞Ä ÎπÑÏñ¥ÏûàÏùÑ Îïå)</span>
                    <span class="lang-en">Character reward only for perfect disposal (when insufficiencies is empty)</span>
                </div>
            </div>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,255,136,0.1); border-radius: 8px; border-left: 3px solid var(--primary);">
                <strong style="color: var(--primary);">üìà <span class="lang-ko">Ïä§ÎÉÖÏÉ∑ ÎßÅÌÅ¨</span><span class="lang-en">Snapshot Links</span></strong>
                <div style="margin-top: 0.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/ZdMIItsw6ZRFhXKLO1M1BJDW14QkHC4o" target="_blank" style="color: var(--text-secondary);">VU 50 ‚Üí</a>
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/Xbr36P3VSZhqvE8RHv2vlpgNm8lHcwSs" target="_blank" style="color: var(--text-secondary);">VU 200 ‚Üí</a>
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/g3Qa0xMImwNmNuzQTXGW6C6I5VBopY5J" target="_blank" style="color: var(--text-secondary);">VU 250 ‚Üí</a>
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/9LbgErvCS0N94vDc9NwO15kVAk7eLzLM" target="_blank" style="color: var(--primary); font-weight: bold;">üéØ VU 300 SLA ‚Üí</a>
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/frzezh23ZWCrpiWNprpEtv3tFsdTEouI" target="_blank" style="color: var(--warning);">VU 400 ‚Üí</a>
                    <a href="https://snapshots.raintank.io/dashboard/snapshot/dtBvLo3J2JlQ3LwWbcM6iwBJJuhboow5" target="_blank" style="color: var(--danger);">VU 500 ‚Üí</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Chat Infrastructure -->
    <div class="modal-overlay" id="modal-chat-infra">
        <div class="modal-content" style="max-width: 1200px;">
            <button class="modal-close" onclick="closeModal('modal-chat-infra')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">ü§ñ Chat Ïù∏ÌîÑÎùº: Taskiq + asyncio ÌååÏù¥ÌîÑÎùºÏù∏ <span class="status-badge" style="font-size: 0.8rem; background: rgba(16,185,129,0.2); color: #10b981;">ÏôÑÎ£å</span></span>
                <span class="lang-en">ü§ñ Chat Infrastructure: Taskiq + asyncio Pipeline <span class="status-badge" style="font-size: 0.8rem; background: rgba(16,185,129,0.2); color: #10b981;">Complete</span></span>
            </h3>
            
            <div class="modal-diagram">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Chat Worker Infrastructure (Production)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   Dual-Path Messaging Architecture                                              ‚îÇ
‚îÇ   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê      ‚îÇ
‚îÇ   Path 1: RabbitMQ (Job Execution)    ‚îÇ   Path 2: Redis (Event Streaming)      ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ
‚îÇ   DIRECT exchange: chat_tasks          ‚îÇ   Streams + Pub/Sub (3-Tier)          ‚îÇ
‚îÇ   Queue: chat.process                  ‚îÇ   Durable ‚Üí Router ‚Üí Volatile         ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ  Taskiq Worker (asyncio-native)                                         ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  taskiq worker chat_worker.main:broker --workers 4 --max-async-tasks 10 ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  @broker.task(task_name="chat.process", timeout=120, max_retries=2)     ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Job Submission Flow (chat-api ‚Üí chat-worker)                                  ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÇ
‚îÇ   chat-api                             chat-worker                              ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ   ‚îÇ AioPikaBroker       ‚îÇ   AMQP       ‚îÇ @broker.task        ‚îÇ                 ‚îÇ
‚îÇ   ‚îÇ .kiq(job_id,        ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂  ‚îÇ async def process() ‚îÇ                 ‚îÇ
‚îÇ   ‚îÇ      session_id,    ‚îÇ   JSON       ‚îÇ   ‚Üí LangGraph       ‚îÇ                 ‚îÇ
‚îÇ   ‚îÇ      message,       ‚îÇ              ‚îÇ   ‚Üí Event Publish   ‚îÇ                 ‚îÇ
‚îÇ   ‚îÇ      image_url?)    ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                      ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îÇ   Event Bus Layer (Idempotent Fan-out)                                          ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ      ‚îÇ
‚îÇ   Worker ‚îÄ‚îÄXADD‚îÄ‚îÄ‚ñ∂ Redis Streams ‚îÄ‚îÄ‚ñ∂ Event Router ‚îÄ‚îÄPUBLISH‚îÄ‚îÄ‚ñ∂ Pub/Sub        ‚îÇ
‚îÇ                    (chat:events:*)         ‚îÇ                                   ‚îÇ
‚îÇ                                            ‚îÇ Lua Script (Atomic)               ‚îÇ
‚îÇ                                            ‚îú‚îÄ seq Ï§ëÎ≥µ Í≤ÄÏÇ¨                     ‚îÇ
‚îÇ                                            ‚îú‚îÄ State KV Update                  ‚îÇ
‚îÇ                                            ‚îî‚îÄ router:published:{job}:{seq}     ‚îÇ
‚îÇ                                                      ‚îÇ                          ‚îÇ
‚îÇ                                                      ‚ñº                          ‚îÇ
‚îÇ                                            SSE Gateway ‚îÄ‚îÄ‚ñ∂ Client              ‚îÇ
‚îÇ                                            ‚îú‚îÄ In-memory fan-out                ‚îÇ
‚îÇ                                            ‚îú‚îÄ State recovery (Redis KV)        ‚îÇ
‚îÇ                                            ‚îî‚îÄ Catch-up (XRANGE)                ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚úÖ Ïã§Ï∏° ÏÑ±Îä• Î∞è ÏµúÏ†ÅÌôî</span>
                <span class="lang-en">‚úÖ Measured Performance & Optimization</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">ÏßÄÌëú</span><span class="lang-en">Metric</span></th>
                    <th><span class="lang-ko">Í≤∞Í≥º</span><span class="lang-en">Result</span></th>
                    <th><span class="lang-ko">ÏÉÅÏÑ∏</span><span class="lang-en">Detail</span></th>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÎèôÏãú Ï≤òÎ¶¨</span><span class="lang-en">Concurrency</span></td>
                    <td><strong>40 tasks</strong></td>
                    <td>4 workers √ó 10 async-tasks (--workers 4 --max-async-tasks 10)</td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Connection Pool</span><span class="lang-en">Connection Pool</span></td>
                    <td><strong>212‚Üí33 (84%‚Üì)</strong></td>
                    <td><span class="lang-ko">ReadThroughCheckpointerÎ°ú PostgreSQL ÏßÅÏ†ë Ï†ëÍ∑º Ï†úÍ±∞</span><span class="lang-en">Removed direct PostgreSQL access via ReadThroughCheckpointer</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Ï≤¥ÌÅ¨Ìè¨Ïù∏Ìä∏ Ï†ëÍ∑º</span><span class="lang-en">Checkpoint Access</span></td>
                    <td><strong>~1ms (Redis)</strong></td>
                    <td><span class="lang-ko">Cold: 10-50ms (PG) ‚Üí Warm: ~1ms (Redis Cache)</span><span class="lang-en">Cold: 10-50ms (PG) ‚Üí Warm: ~1ms (Redis Cache)</span></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Î©ÄÌã∞ÌÑ¥ Í≤ÄÏ¶ù</span><span class="lang-en">Multi-turn Verified</span></td>
                    <td><strong>5ÌÑ¥ 38 steps</strong></td>
                    <td><span class="lang-ko">40 checkpoints, 45 blobs, 162 writes Í≤ÄÏ¶ù</span><span class="lang-en">Verified 40 checkpoints, 45 blobs, 162 writes</span></td>
                </tr>
            </table>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚ö° Celery vs Taskiq ÏÑ†ÌÉù Ïù¥Ïú†</span>
                <span class="lang-en">‚ö° Why Taskiq over Celery</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Ìï≠Î™©</span><span class="lang-en">Aspect</span></th>
                    <th>Celery (Scan)</th>
                    <th>Taskiq (Chat)</th>
                </tr>
                <tr>
                    <td><span class="lang-ko">ÎèôÏãúÏÑ± Î™®Îç∏</span><span class="lang-en">Concurrency</span></td>
                    <td>gevent (greenlet)</td>
                    <td><strong>asyncio (native)</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">LangGraph Ìò∏Ìôò</span><span class="lang-en">LangGraph</span></td>
                    <td>‚ñ≥ (<span class="lang-ko">ÎûòÌïë ÌïÑÏöî</span><span class="lang-en">Wrapping needed</span>)</td>
                    <td><strong>‚úÖ Native async</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Broker</span><span class="lang-en">Broker</span></td>
                    <td>RabbitMQ</td>
                    <td><strong>RabbitMQ (Ïû¨ÏÇ¨Ïö©)</strong></td>
                </tr>
                <tr>
                    <td><span class="lang-ko">Í≤∞Í≥º Î∞òÌôò</span><span class="lang-en">Result</span></td>
                    <td>AsyncResult</td>
                    <td><strong>TaskiqResult</strong></td>
                </tr>
            </table>

            <h4 style="color: var(--accent-purple); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚öôÔ∏è Ïù∏ÌîÑÎùº Íµ¨ÏÑ±</span>
                <span class="lang-en">‚öôÔ∏è Infrastructure Configuration</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Íµ¨ÏÑ± ÏöîÏÜå</span><span class="lang-en">Component</span></th>
                    <th><span class="lang-ko">ÏÑ§Ï†ï</span><span class="lang-en">Config</span></th>
                    <th><span class="lang-ko">ÏÑ§Î™Ö</span><span class="lang-en">Description</span></th>
                </tr>
                <tr>
                    <td>Broker</td>
                    <td><code>AioPikaBroker</code></td>
                    <td><span class="lang-ko">RabbitMQ asyncio ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏</span><span class="lang-en">RabbitMQ asyncio client</span></td>
                </tr>
                <tr>
                    <td>Exchange</td>
                    <td><code>chat_tasks (direct)</code></td>
                    <td><span class="lang-ko">Topology CRÎ°ú ÎØ∏Î¶¨ ÏÉùÏÑ±</span><span class="lang-en">Pre-created by Topology CR</span></td>
                </tr>
                <tr>
                    <td>Queue</td>
                    <td><code>chat.process</code></td>
                    <td><span class="lang-ko">DLX, TTL ÏÑ§Ï†ï Ìè¨Ìï®</span><span class="lang-en">With DLX, TTL settings</span></td>
                </tr>
                <tr>
                    <td>Checkpointer</td>
                    <td><code>ReadThroughCheckpointer</code></td>
                    <td><span class="lang-ko">Redis Primary + PostgreSQL Async Sync (3-Tier Memory)</span><span class="lang-en">Redis Primary + PostgreSQL Async Sync (3-Tier Memory)</span></td>
                </tr>
                <tr>
                    <td>LLM Models</td>
                    <td><code>gpt-5.2, gemini-3-flash</code></td>
                    <td><span class="lang-ko">Fallback Ï≤¥Ïù∏</span><span class="lang-en">Fallback chain</span></td>
                </tr>
            </table>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üåä Event Bus Layer (3-Tier Redis)</span>
                <span class="lang-en">üåä Event Bus Layer (3-Tier Redis)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>Tier</th>
                    <th><span class="lang-ko">Ïª¥Ìè¨ÎÑåÌä∏</span><span class="lang-en">Component</span></th>
                    <th><span class="lang-ko">Ïó≠Ìï†</span><span class="lang-en">Role</span></th>
                </tr>
                <tr>
                    <td>1. Streams</td>
                    <td><code>chat:events:{shard}</code></td>
                    <td><span class="lang-ko">Durable Buffer, Worker ‚Üí XADD</span><span class="lang-en">Durable Buffer, Worker ‚Üí XADD</span></td>
                </tr>
                <tr>
                    <td>2. Event Router</td>
                    <td><code>Lua Script</code></td>
                    <td><span class="lang-ko">Idempotent Ï≤òÎ¶¨, seq Ï§ëÎ≥µÍ≤ÄÏÇ¨, State KV</span><span class="lang-en">Idempotent processing, seq dedup, State KV</span></td>
                </tr>
                <tr>
                    <td>3. Pub/Sub</td>
                    <td><code>chat:{job_id}</code></td>
                    <td><span class="lang-ko">Volatile Broadcast ‚Üí SSE Gateway</span><span class="lang-en">Volatile Broadcast ‚Üí SSE Gateway</span></td>
                </tr>
            </table>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üì∫ SSE Gateway Recovery (Token v2)</span>
                <span class="lang-en">üì∫ SSE Gateway Recovery (Token v2)</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">Í∏∞Îä•</span><span class="lang-en">Feature</span></th>
                    <th><span class="lang-ko">Íµ¨ÌòÑ</span><span class="lang-en">Implementation</span></th>
                    <th><span class="lang-ko">ÏÑ§Ï†ïÍ∞í</span><span class="lang-en">Config</span></th>
                </tr>
                <tr>
                    <td>Stale Detection</td>
                    <td><span class="lang-ko">3Ï¥à ÌÉÄÏûÑÏïÑÏõÉ Ïãú ÏûêÎèô Ïû¨Ïó∞Í≤∞</span><span class="lang-en">Auto-reconnect on 3s timeout</span></td>
                    <td><code>3s threshold</code></td>
                </tr>
                <tr>
                    <td>Max Reconnections</td>
                    <td><span class="lang-ko">ÏßÄÏàò Í∞ÑÍ≤©ÏúºÎ°ú ÏµúÎåÄ 3Ìöå ÏãúÎèÑ</span><span class="lang-en">3 attempts with exponential spacing</span></td>
                    <td><code>3 attempts</code></td>
                </tr>
                <tr>
                    <td>Fallback Polling</td>
                    <td><span class="lang-ko">SSE Ïã§Ìå® Ïãú Ìè¥ÎßÅ Ï†ÑÌôò</span><span class="lang-en">Polling fallback if SSE fails</span></td>
                    <td><code>3s interval, 120s max</code></td>
                </tr>
                <tr>
                    <td>Seq Encoding</td>
                    <td><span class="lang-ko">Stage: STAGE_ORDER√ó10, Token: 1000+</span><span class="lang-en">Stage: STAGE_ORDER√ó10, Token: 1000+</span></td>
                    <td><code>Last-Event-ID</code></td>
                </tr>
                <tr>
                    <td>Catch-up</td>
                    <td><span class="lang-ko">XREVRANGEÎ°ú ÎàÑÎùΩ Ïù¥Î≤§Ìä∏ Î≥µÍµ¨</span><span class="lang-en">XREVRANGE for missed events</span></td>
                    <td><code>State KV + Streams</code></td>
                </tr>
            </table>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid var(--accent-purple);">
                <strong style="color: var(--accent-purple);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem; display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; font-size: 0.85rem;">
                    <a href="https://rooftopsnow.tistory.com/242" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">ReadThroughCheckpointer ÏµúÏ†ÅÌôî ‚Üí</span>
                        <span class="lang-en">ReadThroughCheckpointer Optimization ‚Üí</span>
                    </a>
                    <a href="https://rooftopsnow.tistory.com/237" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Event Router ACK Ï†ïÏ±Ö ‚Üí</span>
                        <span class="lang-en">Event Router ACK Policy ‚Üí</span>
                    </a>
                    <a href="https://rooftopsnow.tistory.com/235" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Token v2 XRANGE Recovery ‚Üí</span>
                        <span class="lang-en">Token v2 XRANGE Recovery ‚Üí</span>
                    </a>
                    <a href="https://rooftopsnow.tistory.com/226" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Î©ÄÌã∞ÌÑ¥ ÎåÄÌôî Í≤ÄÏ¶ù ‚Üí</span>
                        <span class="lang-en">Multi-turn Conversation Verification ‚Üí</span>
                    </a>
                    <a href="https://rooftopsnow.tistory.com/225" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">3-Tier Memory ÏïÑÌÇ§ÌÖçÏ≤ò ‚Üí</span>
                        <span class="lang-en">3-Tier Memory Architecture ‚Üí</span>
                    </a>
                    <a href="https://rooftopsnow.tistory.com/240" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">SSE Token v2 ÌîÑÎ°úÌÜ†ÏΩú ‚Üí</span>
                        <span class="lang-en">SSE Token v2 Protocol ‚Üí</span>
                    </a>
                </div>
            </div>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(16,185,129,0.1); border-radius: 8px; border-left: 3px solid #10b981;">
                <strong style="color: #10b981;">‚úÖ <span class="lang-ko">E2E Í≤ÄÏ¶ù ÏôÑÎ£å</span><span class="lang-en">E2E Verification Complete</span></strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.9rem;">
                    <span class="lang-ko">
                        ‚úÖ LangGraph ÌååÏù¥ÌîÑÎùºÏù∏ Íµ¨ÌòÑ Î∞è Î∞∞Ìè¨ ÏôÑÎ£å<br>
                        ‚úÖ ReadThroughCheckpointer (Redis + PostgreSQL Async Sync)<br>
                        ‚úÖ Î©ÄÌã∞ÌÑ¥ ÎåÄÌôî Í≤ÄÏ¶ù (5ÌÑ¥ 38 steps, 40 checkpoints)<br>
                        ‚úÖ Connection Pool ÏµúÏ†ÅÌôî (212‚Üí33, 84%‚Üì)<br>
                        ‚úÖ Token v2 Ïä§Ìä∏Î¶¨Î∞ç + XRANGE Recovery
                    </span>
                    <span class="lang-en">
                        ‚úÖ LangGraph pipeline implemented & deployed<br>
                        ‚úÖ ReadThroughCheckpointer (Redis + PostgreSQL Async Sync)<br>
                        ‚úÖ Multi-turn conversation verified (5 turns, 38 steps, 40 checkpoints)<br>
                        ‚úÖ Connection Pool optimization (212‚Üí33, 84%‚Üì)<br>
                        ‚úÖ Token v2 streaming + XRANGE Recovery
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Chat Observability (LangSmith + OTEL) -->
    <div class="modal-overlay" id="modal-chat-observability">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-chat-observability')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üìä Chat Observability: LangSmith + OpenTelemetry</span>
                <span class="lang-en">üìä Chat Observability: LangSmith + OpenTelemetry</span>
            </h3>

            <div class="modal-diagram">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Chat Observability Architecture                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                    LangSmith (Feature-level Analysis)                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Per-node latency tracking                                           ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Token usage & cost monitoring                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Error tracking & debugging                                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ Run metadata (user_id, job_id, intent tags)                        ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                              ‚îÇ                                                  ‚îÇ
‚îÇ                              ‚îÇ LANGSMITH_OTEL_ENABLED=true                      ‚îÇ
‚îÇ                              ‚ñº                                                  ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                    Jaeger (Distributed Tracing)                          ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   chat-api ‚îÄ‚îÄ‚îÄ‚ñ∂ RabbitMQ ‚îÄ‚îÄ‚îÄ‚ñ∂ chat-worker ‚îÄ‚îÄ‚îÄ‚ñ∂ LangGraph Pipeline       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      ‚îÇ                            ‚îÇ                  ‚îÇ                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ      ‚îî‚îÄ trace_id propagation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                              ‚îÇ                                                  ‚îÇ
‚îÇ                              ‚ñº                                                  ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                    Prometheus + Grafana (Metrics)                        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   chat_stream_token_latency_seconds    ‚îÇ Redis XADD delay detection     ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   chat_stream_duration_seconds         ‚îÇ P95 SLO target: 30s            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   chat_stream_active                   ‚îÇ Concurrent stream count        ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   chat_stream_tokens_total             ‚îÇ Per-node throughput            ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üéØ Clean Architecture: TelemetryConfigPort</span>
                <span class="lang-en">üéØ Clean Architecture: TelemetryConfigPort</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.75rem;">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Application Layer (Ports)                                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  TelemetryConfigPort                                       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îú‚îÄ‚îÄ create_run_config(tags, metadata) ‚Üí RunnableConfig   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ Abstract: LangSmith ÏùòÏ°¥ÏÑ± Î∂ÑÎ¶¨                        ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                              ‚îÇ                                   ‚îÇ
‚îÇ                              ‚ñº                                   ‚îÇ
‚îÇ  Infrastructure Layer (Adapters)                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  LangSmithTelemetryAdapter  ‚îÇ  NoOpTelemetryAdapter        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  (Production)               ‚îÇ  (Testing)                   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üìà Prometheus Metrics</span>
                <span class="lang-en">üìà Prometheus Metrics</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>Metric</th>
                    <th>Type</th>
                    <th><span class="lang-ko">Ïö©ÎèÑ</span><span class="lang-en">Purpose</span></th>
                    <th>Alert</th>
                </tr>
                <tr>
                    <td><code>chat_stream_token_latency_seconds</code></td>
                    <td>Histogram</td>
                    <td><span class="lang-ko">Redis XADD ÏßÄÏó∞ Í∞êÏßÄ</span><span class="lang-en">Redis XADD delay detection</span></td>
                    <td>P95 > 50ms</td>
                </tr>
                <tr>
                    <td><code>chat_stream_duration_seconds</code></td>
                    <td>Histogram</td>
                    <td><span class="lang-ko">Ï†ÑÏ≤¥ Ïä§Ìä∏Î¶º ÏôÑÎ£å ÏãúÍ∞Ñ</span><span class="lang-en">Total stream completion</span></td>
                    <td>P95 > 30s</td>
                </tr>
                <tr>
                    <td><code>chat_stream_active</code></td>
                    <td>Gauge</td>
                    <td><span class="lang-ko">ÎèôÏãú Ïä§Ìä∏Î¶º Ïàò</span><span class="lang-en">Concurrent streams</span></td>
                    <td>> 100</td>
                </tr>
                <tr>
                    <td><code>chat_stream_tokens_total</code></td>
                    <td>Counter</td>
                    <td><span class="lang-ko">ÎÖ∏ÎìúÎ≥Ñ Ï≤òÎ¶¨Îüâ</span><span class="lang-en">Per-node throughput</span></td>
                    <td>-</td>
                </tr>
            </table>

            <h4 style="color: var(--accent-purple); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üè∑Ô∏è LangSmith Run Config</span>
                <span class="lang-en">üè∑Ô∏è LangSmith Run Config</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th><span class="lang-ko">ÌïÑÎìú</span><span class="lang-en">Field</span></th>
                    <th><span class="lang-ko">Í∞í</span><span class="lang-en">Value</span></th>
                    <th><span class="lang-ko">Ïö©ÎèÑ</span><span class="lang-en">Purpose</span></th>
                </tr>
                <tr>
                    <td>tags</td>
                    <td><code>["intent:disposal", "env:prod"]</code></td>
                    <td><span class="lang-ko">UI ÌïÑÌÑ∞ÎßÅ</span><span class="lang-en">UI filtering</span></td>
                </tr>
                <tr>
                    <td>metadata.user_id</td>
                    <td><code>UUID</code></td>
                    <td><span class="lang-ko">ÏÇ¨Ïö©Ïûê Ï∂îÏ†Å</span><span class="lang-en">User tracking</span></td>
                </tr>
                <tr>
                    <td>metadata.job_id</td>
                    <td><code>UUID</code></td>
                    <td><span class="lang-ko">ÏûëÏóÖ ÏÉÅÍ¥ÄÍ¥ÄÍ≥Ñ</span><span class="lang-en">Job correlation</span></td>
                </tr>
                <tr>
                    <td>metadata.session_id</td>
                    <td><code>UUID</code></td>
                    <td><span class="lang-ko">ÎåÄÌôî ÏÑ∏ÏÖò</span><span class="lang-en">Conversation session</span></td>
                </tr>
            </table>

            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(138,43,226,0.1); border-radius: 8px; border-left: 3px solid var(--accent-purple);">
                <strong style="color: var(--accent-purple);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem;">
                    <a href="https://rooftopsnow.tistory.com/203" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">LangSmith + OpenTelemetry Observability Íµ¨ÌòÑ ‚Üí</span>
                        <span class="lang-en">LangSmith + OpenTelemetry Observability Implementation ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Optimistic Update + Eventual Consistency -->
    <div class="modal-overlay" id="modal-chat-optimistic-update">
        <div class="modal-content" style="max-width: 1200px;">
            <button class="modal-close" onclick="closeModal('modal-chat-optimistic-update')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">‚ö° Optimistic Update + Eventual Consistency ÌÜµÌï© ÏïÑÌÇ§ÌÖçÏ≤ò</span>
                <span class="lang-en">‚ö° Optimistic Update + Eventual Consistency Integration</span>
            </h3>

            <!-- Problem Definition -->
            <h4 style="color: var(--primary); margin: 1rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîç Ìï¥Í≤∞Ìïú Î¨∏Ï†ú</span>
                <span class="lang-en">üîç Problem Solved</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #ef4444; font-size: 0.85rem; margin-bottom: 0.5rem;">Issue #1: ÏúÑÏπò Îç∞Ïù¥ÌÑ∞ ÎàÑÎùΩ</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                        <code>userLocation</code>Ïù¥ ÎπÑÎèôÍ∏∞ geolocation APIÏóêÏÑú Î°úÎìúÎêòÎäîÎç∞, ÌÅ¥Î°úÏ†ÄÍ∞Ä Ï¥àÍ∏∞Í∞í(<code>undefined</code>)ÏùÑ Ï∫°Ï≤ò
                    </div>
                </div>
                <div style="background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #f59e0b; font-size: 0.85rem; margin-bottom: 0.5rem;">Issue #2: Î©îÏãúÏßÄ ÏÜåÏã§</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                        ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò Ïãú Optimistic Î©îÏãúÏßÄÏôÄ ÏÑúÎ≤Ñ Îç∞Ïù¥ÌÑ∞ Î∂àÏùºÏπò ‚Üí ÎçÆÏñ¥Ïì∞Í∏∞Î°ú Î©îÏãúÏßÄ ÏÇ¨ÎùºÏßê
                    </div>
                </div>
                <div style="background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #8b5cf6; font-size: 0.85rem; margin-bottom: 0.5rem;">Issue #3: ÏÉàÎ°úÍ≥†Ïπ® ÏÜêÏã§</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                        Î©îÎ™®Î¶¨ ÏÉÅÌÉú(<code>useState</code>)Îßå ÏÇ¨Ïö©ÌïòÏó¨ Î∏åÎùºÏö∞Ï†Ä ÏÉàÎ°úÍ≥†Ïπ® Ïãú Î™®Îì† Î©îÏãúÏßÄ ÏÜêÏã§
                    </div>
                </div>
            </div>

            <!-- Root Cause -->
            <div class="modal-diagram" style="font-size: 0.7rem;">
<pre>
Timeline: ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
T0: User sends message
T1: Frontend Optimistic Update (Ï¶âÏãú)
T2: SSE streaming starts (0.5s)
T3: SSE done event (3s)
T4: Backend DB write starts (3.1s)   ‚Üê Eventual Consistency
T5: Backend DB write completes (3.3s)
T6: User scrolls up ‚Üí API call (4s)  ‚Üê Race Condition!
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Gap: T1~T5 ÏÇ¨Ïù¥Ïóê ÌîÑÎ°†Ìä∏ÏóîÎìúÎäî Î©îÏãúÏßÄÎ•º Í∞ÄÏßÄÍ≥† ÏûàÏßÄÎßå, Î∞±ÏóîÎìú DBÏóêÎäî ÏïÑÏßÅ ÏóÜÏùå
</pre>
            </div>

            <!-- Architecture Diagram -->
            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üèóÔ∏è FE-BE ÌÜµÌï© ÏïÑÌÇ§ÌÖçÏ≤ò</span>
                <span class="lang-en">üèóÔ∏è FE-BE Integration Architecture</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.65rem;">
<pre>
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Frontend-Backend Integration                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ  Frontend (Browser)                                                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  React State (Optimistic)                                               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Messages   ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Reconciler  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  IndexedDB  ‚îÇ                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ (client_id) ‚îÇ    ‚îÇ (30s buffer) ‚îÇ    ‚îÇ (Persistent)‚îÇ                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                            ‚îÇ                        ‚ñ≤                        ‚îÇ
‚îÇ              POST /send    ‚îÇ                        ‚îÇ GET /messages          ‚îÇ
‚îÇ                            ‚ñº                        ‚îÇ                        ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îÇ  Backend (Kubernetes)                                                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  chat-api ‚Üí RabbitMQ ‚Üí chat-worker (LangGraph)                         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                              ‚îÇ                                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              ‚ñº               ‚ñº               ‚ñº                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ       Redis Streams    SSE Gateway     PostgreSQL                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ       (chat:events)    (Real-time)    (Eventual Write)                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              ‚îÇ               ‚ñ≤                  ‚ñ≤                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ              event-router              chat-consumer                    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                       (Async Write)                     ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <!-- Solution Strategies -->
            <h4 style="color: var(--accent-pink); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üéØ ÌïµÏã¨ Ìï¥Í≤∞ Ï†ÑÎûµ</span>
                <span class="lang-en">üéØ Key Solution Strategies</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                <div style="background: rgba(236,72,153,0.1); border: 1px solid rgba(236,72,153,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #ec4899; font-size: 0.9rem; margin-bottom: 0.5rem;">‚è±Ô∏è 30Ï¥à Retention Window</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <code>committed</code> ÏÉÅÌÉúÏù¥ÏßÄÎßå <code>server_id</code> ÏóÜÎäî Î©îÏãúÏßÄÎ•º 30Ï¥àÍ∞Ñ Ïú†ÏßÄ<br>
                        ‚Üí Î∞±ÏóîÎìú DB Ï†ÄÏû• ÏôÑÎ£åÍπåÏßÄÏùò ÏãúÍ∞Ñ Ï∞®Ïù¥ Ìù°Ïàò<br>
                        <span style="color: var(--text-muted);">Why 30Ï¥à? DB write ÌèâÍ∑† 200~500ms + ÌîºÌÅ¨ Ìä∏ÎûòÌîΩ Í≥†Î†§</span>
                    </div>
                </div>
                <div style="background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #8b5cf6; font-size: 0.9rem; margin-bottom: 0.5rem;">üîó Client ID + Server ID Mapping</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <code>client_id</code>: ÌîÑÎ°†Ìä∏ÏóîÎìú UUID (Î∂àÎ≥Ä, idempotency key)<br>
                        <code>server_id</code>: Î∞±ÏóîÎìú DB PK (done Ïù¥Î≤§Ìä∏ ÌõÑ Ìï†Îãπ)<br>
                        <span style="color: var(--text-muted);">Reconcile Ïãú server_id Ïö∞ÏÑ† ÏÇ¨Ïö© ‚Üí Ï§ëÎ≥µ Ï†úÍ±∞</span>
                    </div>
                </div>
                <div style="background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #10b981; font-size: 0.9rem; margin-bottom: 0.5rem;">üì¶ Cache-Aside Pattern (IndexedDB)</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <strong>Read:</strong> IndexedDB Ïö∞ÏÑ† ‚Üí ÏÑúÎ≤Ñ Î∞±Í∑∏ÎùºÏö¥Îìú (0ms UX)<br>
                        <strong>Write:</strong> Optimistic ‚Üí SSE done ‚Üí Reconcile<br>
                        <span style="color: var(--text-muted);">TTL: 7Ïùº (ÏùºÎ∞ò), 30Ï¥à (committed + synced)</span>
                    </div>
                </div>
                <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #3b82f6; font-size: 0.9rem; margin-bottom: 0.5rem;">üìç Location Ref Pattern</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <code>useState</code>Îäî ÌÅ¥Î°úÏ†Ä Ï∫°Ï≤ò ‚Üí ÎπÑÎèôÍ∏∞ ÏôÑÎ£å Ï†Ñ Í∞í Í≥†Ï†ï<br>
                        <code>useRef</code>Îäî Ìï≠ÏÉÅ ÏµúÏã† Í∞í Ï∞∏Ï°∞ ‚Üí geolocation ÏôÑÎ£å ÌõÑ Î∞òÏòÅ<br>
                        <span style="color: var(--text-muted);">userLocationRef.currentÎ°ú Ìï≠ÏÉÅ ÏµúÏã† ÏúÑÏπò Ï†ÑÏÜ°</span>
                    </div>
                </div>
            </div>

            <!-- Consumer Group Fan-out -->
            <h4 style="color: var(--accent-orange); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÄ Backend: Consumer Group Fan-out</span>
                <span class="lang-en">üîÄ Backend: Consumer Group Fan-out</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>Consumer Group</th>
                    <th>Consumer</th>
                    <th><span class="lang-ko">Ïö©ÎèÑ</span><span class="lang-en">Purpose</span></th>
                    <th>Latency</th>
                </tr>
                <tr>
                    <td><code>eventrouter</code></td>
                    <td><code>event-router</code></td>
                    <td><span class="lang-ko">SSE Ïã§ÏãúÍ∞Ñ Ï†ÑÏÜ°</span><span class="lang-en">SSE Real-time</span></td>
                    <td style="color: #22c55e;">~10ms</td>
                </tr>
                <tr>
                    <td><code>chat-persistence</code></td>
                    <td><code>chat-consumer</code></td>
                    <td><span class="lang-ko">PostgreSQL Ï†ÄÏû• (5Ï¥à Batch)</span><span class="lang-en">PostgreSQL Write (5s Batch)</span></td>
                    <td style="color: #f59e0b;">~200ms</td>
                </tr>
            </table>
            <div style="margin-top: 0.75rem; font-size: 0.75rem; color: var(--text-muted);">
                <span class="lang-ko">ÌïµÏã¨: ÎèôÏùº Ïù¥Î≤§Ìä∏Î•º Îëê Consumer GroupÏù¥ ÎèÖÎ¶Ω Ï≤òÎ¶¨ ‚Üí Ïã§ÏãúÍ∞ÑÏÑ± + ÏòÅÏÜçÏÑ± Î∂ÑÎ¶¨</span>
                <span class="lang-en">Key: Same event processed by two independent Consumer Groups ‚Üí Real-time + Persistence separated</span>
            </div>

            <!-- Reference -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(236,72,153,0.1); border-radius: 8px; border-left: 3px solid var(--accent-pink);">
                <strong style="color: var(--accent-pink);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem;">
                    <a href="https://rooftopsnow.tistory.com/235" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Optimistic Update (FE) & Eventual Consistency (BE) ÌÜµÌï© Ìä∏Îü¨Î∏îÏäàÌåÖ ‚Üí</span>
                        <span class="lang-en">Optimistic Update (FE) & Eventual Consistency (BE) Integration ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Multi-Agent Chat Session -->
    <div class="modal-overlay" id="modal-chat-multiagent">
        <div class="modal-content" style="max-width: 1200px;">
            <button class="modal-close" onclick="closeModal('modal-chat-multiagent')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">ü§ñ Multi-Agent Chat Session Management</span>
                <span class="lang-en">ü§ñ Multi-Agent Chat Session Management</span>
            </h3>

            <!-- Message Status State Machine -->
            <h4 style="color: var(--primary); margin: 1rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÑ Message Status State Machine</span>
                <span class="lang-en">üîÑ Message Status State Machine</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.7rem;">
<pre>
type MessageStatus = 'pending' | 'streaming' | 'committed' | 'failed';

interface AgentMessage {
  client_id: string;    // UUID (ÌîÑÎ°†Ìä∏ÏóîÎìú ÏÉùÏÑ±, Î∂àÎ≥Ä)
  server_id?: string;   // DB PK (Î∞±ÏóîÎìú Ìï†Îãπ)
  id: string;           // Legacy compat (server_id || client_id)
  role: 'user' | 'assistant';
  content: string;
  created_at: string;
  status: MessageStatus;
}

User Message:      pending ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ committed
                      ‚îÇ                           ‚ñ≤
                      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           (Ïã§Ìå® Ïãú) failed

Assistant Message: streaming ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ committed
</pre>
            </div>

            <!-- Reconcile Policy -->
            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîÄ Reconcile Algorithm</span>
                <span class="lang-en">üîÄ Reconcile Algorithm</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>Message Status</th>
                    <th>Server_ID</th>
                    <th>Keep?</th>
                    <th><span class="lang-ko">Ïù¥Ïú†</span><span class="lang-en">Reason</span></th>
                </tr>
                <tr>
                    <td><code>pending</code></td>
                    <td>‚ùå</td>
                    <td style="color: #22c55e;">‚úÖ Ìï≠ÏÉÅ</td>
                    <td><span class="lang-ko">Ï†ÑÏÜ° Ï§ë</span><span class="lang-en">Sending</span></td>
                </tr>
                <tr>
                    <td><code>streaming</code></td>
                    <td>‚ùå</td>
                    <td style="color: #22c55e;">‚úÖ Ìï≠ÏÉÅ</td>
                    <td><span class="lang-ko">SSE ÏàòÏã† Ï§ë</span><span class="lang-en">SSE Receiving</span></td>
                </tr>
                <tr>
                    <td><code>committed</code></td>
                    <td style="color: #22c55e;">‚úÖ</td>
                    <td>‚ùå</td>
                    <td><span class="lang-ko">ÏÑúÎ≤Ñ Î≤ÑÏ†ÑÏúºÎ°ú ÎåÄÏ≤¥</span><span class="lang-en">Replace with server</span></td>
                </tr>
                <tr>
                    <td><code>committed</code></td>
                    <td>‚ùå</td>
                    <td style="color: #22c55e;">‚úÖ 30Ï¥à ÎÇ¥</td>
                    <td><span class="lang-ko">Eventual Consistency Î≤ÑÌçº</span><span class="lang-en">Eventual Consistency buffer</span></td>
                </tr>
                <tr>
                    <td><code>failed</code></td>
                    <td>‚ùå</td>
                    <td style="color: #22c55e;">‚úÖ Ìï≠ÏÉÅ</td>
                    <td><span class="lang-ko">Ïû¨ÏãúÎèÑ Í∞ÄÎä•</span><span class="lang-en">Retry available</span></td>
                </tr>
            </table>

            <!-- IndexedDB Schema -->
            <h4 style="color: var(--accent-purple); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üíæ IndexedDB Persistence</span>
                <span class="lang-en">üíæ IndexedDB Persistence</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                <div style="background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #8b5cf6; font-size: 0.9rem; margin-bottom: 0.5rem;">üìù MessageDB Class</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <code>saveMessages(chatId, messages)</code><br>
                        <code>getMessages(chatId)</code><br>
                        <code>cleanup(chatId, options)</code><br>
                        <span style="color: var(--text-muted);">Compound Index: [chat_id, created_at] ‚Üí O(log n)</span>
                    </div>
                </div>
                <div style="background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #10b981; font-size: 0.9rem; margin-bottom: 0.5rem;">üßπ Cleanup Policy</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <strong>TTL (7Ïùº):</strong> Î™®Îì† Î©îÏãúÏßÄ ÏûêÎèô ÏÇ≠Ï†ú<br>
                        <strong>Committed Retention (30Ï¥à):</strong> ÎèôÍ∏∞Ìôî ÏôÑÎ£å ÌõÑ ÏÇ≠Ï†ú<br>
                        <strong>1Î∂Ñ Ï£ºÍ∏∞:</strong> useMessagePersistence ÌõÖÏù¥ cleanup
                    </div>
                </div>
            </div>

            <!-- Performance Optimization -->
            <h4 style="color: var(--accent-orange); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚ö° ÏÑ±Îä• ÏµúÏ†ÅÌôî</span>
                <span class="lang-en">‚ö° Performance Optimization</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                <div style="background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #f59e0b; font-size: 0.85rem; margin-bottom: 0.5rem;">500ms Throttle</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                        SSE ÌÜ†ÌÅ∞ Ïä§Ìä∏Î¶¨Î∞ç Ïãú ÏàòÏã≠ Î≤à ÏóÖÎç∞Ïù¥Ìä∏<br>
                        Throttle ÏóÜÏù¥ ‚Üí 10+ writes/s<br>
                        500ms throttle ‚Üí 1 write/s
                    </div>
                </div>
                <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #3b82f6; font-size: 0.85rem; margin-bottom: 0.5rem;">Compound Index</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                        by-chat-created Î≥µÌï© Ïù∏Îç±Ïä§<br>
                        Îã®Ïùº ÏøºÎ¶¨Î°ú Ï†ïÎ†¨Îêú Í≤∞Í≥º<br>
                        1000+ Î©îÏãúÏßÄÏóêÏÑú 10ms Ïù¥ÎÇ¥
                    </div>
                </div>
                <div style="background: rgba(236,72,153,0.1); border: 1px solid rgba(236,72,153,0.3); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: 600; color: #ec4899; font-size: 0.85rem; margin-bottom: 0.5rem;">Batch Cleanup</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary); line-height: 1.5;">
                        1Î∂Ñ Ï£ºÍ∏∞ ÏûêÎèô cleanup<br>
                        Ïã§ÏãúÍ∞Ñ ‚Üí Îß§ Î©îÏãúÏßÄ Í≤ÄÏÇ¨ (ÎπÑÌö®Ïú®)<br>
                        Î∞∞Ïπò ‚Üí ÏÑ±Îä• ÏòÅÌñ• ÏµúÏÜåÌôî
                    </div>
                </div>
            </div>

            <!-- Data Flow Timeline -->
            <h4 style="color: var(--accent-pink); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üìä ÌÜµÌï© Îç∞Ïù¥ÌÑ∞ ÌîåÎ°úÏö∞</span>
                <span class="lang-en">üìä Integrated Data Flow</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.65rem;">
<pre>
Timeline             Frontend                              Backend
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
T0: User clicks    createUserMessage()
                   ‚îî‚îÄ client_id: uuid-1
                   ‚îî‚îÄ status: 'pending'
                   setMessages([...prev, userMsg])
                   IndexedDB.save(userMsg)
                   API.sendMessage(chatId, {...})  ‚îÄ‚îÄ‚îÄ‚ñ∂  POST /chat/:id/messages

T1: 0.1s                                                  RabbitMQ.publish()
                                                          ‚îî‚îÄ queue: chat.process

T2~T5: Streaming   SSE: onmessage                  ‚óÄ‚îÄ‚îÄ‚îÄ   XADD chat:events:0
                   appendStreamingText(token)              LangGraph Pipeline

T6: done event     handleSSEComplete()             ‚óÄ‚îÄ‚îÄ‚îÄ   {stage: "done", ...}
                   ‚îú‚îÄ updateUserMessage(uuid-1)
                   ‚îÇ  ‚îî‚îÄ status: 'committed'
                   ‚îÇ  ‚îî‚îÄ server_id: 'srv-uuid-1'
                   ‚îî‚îÄ IndexedDB.save(both)

T7~T8: Async                                              chat-consumer
                                                          ‚îî‚îÄ PostgreSQL INSERT

T9: Pagination     loadMoreMessages()
                   API.getChatDetail()             ‚îÄ‚îÄ‚îÄ‚ñ∂   GET /chat/:id/messages
                   reconcileMessages(local, server) ‚óÄ‚îÄ‚îÄ‚îÄ  {messages: [...]}
                   ‚îî‚îÄ Ï§ëÎ≥µ Ï†úÍ±∞ + 30s Î≤ÑÌçº Ïú†ÏßÄ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
</pre>
            </div>

            <!-- Status-Driven UI -->
            <h4 style="color: var(--primary); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üé® Status-Driven UI</span>
                <span class="lang-en">üé® Status-Driven UI</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem;">
                <div style="background: rgba(139,92,246,0.15); border: 1px solid rgba(139,92,246,0.4); border-radius: 6px; padding: 0.5rem; text-align: center;">
                    <div style="font-weight: 600; color: #8b5cf6; font-size: 0.85rem;">pending</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary);">üîÑ Ïä§ÌîºÎÑà ÌëúÏãú</div>
                </div>
                <div style="background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.4); border-radius: 6px; padding: 0.5rem; text-align: center;">
                    <div style="font-weight: 600; color: #3b82f6; font-size: 0.85rem;">streaming</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary);">‚å®Ô∏è ÌÉÄÏù¥Ìïë Ïù∏ÎîîÏºÄÏù¥ÌÑ∞</div>
                </div>
                <div style="background: rgba(34,197,94,0.15); border: 1px solid rgba(34,197,94,0.4); border-radius: 6px; padding: 0.5rem; text-align: center;">
                    <div style="font-weight: 600; color: #22c55e; font-size: 0.85rem;">committed</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary);">‚úÖ Ï†ïÏÉÅ ÌëúÏãú</div>
                </div>
                <div style="background: rgba(239,68,68,0.15); border: 1px solid rgba(239,68,68,0.4); border-radius: 6px; padding: 0.5rem; text-align: center;">
                    <div style="font-weight: 600; color: #ef4444; font-size: 0.85rem;">failed</div>
                    <div style="font-size: 0.7rem; color: var(--text-secondary);">üîÅ Ïû¨ÏãúÎèÑ Î≤ÑÌäº</div>
                </div>
            </div>

            <!-- Tech Stack Summary -->
            <h4 style="color: var(--accent-teal); margin: 1.5rem 0 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üõ†Ô∏è Í∏∞Ïà† Ïä§ÌÉù ÏöîÏïΩ</span>
                <span class="lang-en">üõ†Ô∏è Tech Stack Summary</span>
            </h4>
            <table class="modal-table">
                <tr>
                    <th>Layer</th>
                    <th>Technology</th>
                    <th><span class="lang-ko">Ïö©ÎèÑ</span><span class="lang-en">Purpose</span></th>
                </tr>
                <tr>
                    <td>Frontend State</td>
                    <td>React useState</td>
                    <td><span class="lang-ko">Optimistic UI ÏÉÅÌÉú</span><span class="lang-en">Optimistic UI state</span></td>
                </tr>
                <tr>
                    <td>Frontend Cache</td>
                    <td>IndexedDB (idb)</td>
                    <td><span class="lang-ko">ÏòÅÍµ¨ Ï†ÄÏû• + ÏÉàÎ°úÍ≥†Ïπ® Î≥µÍµ¨</span><span class="lang-en">Persistent + refresh recovery</span></td>
                </tr>
                <tr>
                    <td>Frontend Sync</td>
                    <td>Reconcile Algorithm</td>
                    <td><span class="lang-ko">Î°úÏª¨/ÏÑúÎ≤Ñ Îç∞Ïù¥ÌÑ∞ Î≥ëÌï©</span><span class="lang-en">Local/server merge</span></td>
                </tr>
                <tr>
                    <td>Backend Real-time</td>
                    <td>Redis Streams ‚Üí Pub/Sub ‚Üí SSE</td>
                    <td><span class="lang-ko">SSE Ïù¥Î≤§Ìä∏ Ï†ÑÏÜ°</span><span class="lang-en">SSE event delivery</span></td>
                </tr>
                <tr>
                    <td>Backend Persistence</td>
                    <td>PostgreSQL</td>
                    <td><span class="lang-ko">Eventual Write</span><span class="lang-en">Eventual Write</span></td>
                </tr>
                <tr>
                    <td>Backend Worker</td>
                    <td>LangGraph + TaskIQ + RabbitMQ</td>
                    <td><span class="lang-ko">ÎπÑÎèôÍ∏∞ Î©îÏãúÏßÄ Ï≤òÎ¶¨</span><span class="lang-en">Async message processing</span></td>
                </tr>
            </table>

            <!-- Deep Dive -->
            <div style="margin-top: 1.5rem;">
                <div style="font-size: 0.85rem; font-weight: 600; color: var(--primary); margin-bottom: 0.75rem;">
                    <span class="lang-ko">üîç Deep Dive</span>
                    <span class="lang-en">üîç Deep Dive</span>
                </div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                    <!-- Optimistic Update + Eventual Consistency -->
                    <div style="padding: 0.75rem; background: linear-gradient(135deg, rgba(236,72,153,0.15), rgba(139,92,246,0.15)); border-radius: 8px; border: 1px solid rgba(236,72,153,0.4); cursor: pointer;" onclick="closeModal('modal-chat-multiagent'); setTimeout(() => openModal('modal-optimistic-update'), 300);">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="font-size: 1rem;">‚ö°</span>
                            <div>
                                <div style="color: #ec4899; font-weight: 600; font-size: 0.85rem;">Optimistic Update + Eventual Consistency</div>
                                <div style="color: var(--text-secondary); font-size: 0.7rem;">FE-BE Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî, 30s Retention Window</div>
                            </div>
                        </div>
                    </div>
                    <!-- Multi-LLM Provider -->
                    <div style="padding: 0.75rem; background: linear-gradient(135deg, rgba(251,146,60,0.15), rgba(245,158,11,0.15)); border-radius: 8px; border: 1px solid rgba(251,146,60,0.4); cursor: pointer;" onclick="closeModal('modal-chat-multiagent'); setTimeout(() => openModal('modal-multi-llm-provider'), 300);">
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="font-size: 1rem;">üß†</span>
                            <div>
                                <div style="color: #fb923c; font-weight: 600; font-size: 0.85rem;">Multi-LLM Provider</div>
                                <div style="color: var(--text-secondary); font-size: 0.7rem;">OpenAI, Gemini ÎèôÏ†Å ÏÑ†ÌÉù</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- KEDA Autoscaling -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(245,158,11,0.1); border-radius: 8px; border-left: 3px solid #f59e0b;">
                <strong style="color: #f59e0b;">üìà KEDA <span class="lang-ko">Ïò§ÌÜ†Ïä§ÏºÄÏùºÎßÅ</span><span class="lang-en">Autoscaling</span></strong>
                <div style="margin-top: 0.75rem; display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                    <div style="background: rgba(0,0,0,0.2); padding: 0.75rem; border-radius: 6px;">
                        <div style="font-weight: 600; color: #f59e0b; font-size: 0.8rem; margin-bottom: 0.25rem;">‚öôÔ∏è Chat Worker</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">RabbitMQ ÌÅê Í∏∏Ïù¥ (5msg)</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">1-4 pods</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.2); padding: 0.75rem; border-radius: 6px;">
                        <div style="font-weight: 600; color: #f59e0b; font-size: 0.8rem; margin-bottom: 0.25rem;">üì° SSE Gateway</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">Ïó∞Í≤∞ Ïàò (100/pod)</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">1-3 pods</div>
                    </div>
                    <div style="background: rgba(0,0,0,0.2); padding: 0.75rem; border-radius: 6px;">
                        <div style="font-weight: 600; color: #f59e0b; font-size: 0.8rem; margin-bottom: 0.25rem;">üîÄ Event Router</div>
                        <div style="font-size: 0.7rem; color: var(--text-secondary);">Pending Î©îÏãúÏßÄ (100)</div>
                        <div style="font-size: 0.65rem; color: var(--text-muted);">1-2 pods</div>
                    </div>
                </div>
            </div>

            <!-- Reference -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(14,165,233,0.1); border-radius: 8px; border-left: 3px solid var(--accent-teal);">
                <strong style="color: var(--accent-teal);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem;">
                    <a href="https://rooftopsnow.tistory.com/235" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">Optimistic Update (FE) & Eventual Consistency (BE) ÌÜµÌï© Ìä∏Îü¨Î∏îÏäàÌåÖ ‚Üí</span>
                        <span class="lang-en">Optimistic Update (FE) & Eventual Consistency (BE) Integration ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Tool Calling Architecture -->
    <div class="modal-overlay" id="modal-chat-toolcalling">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-chat-toolcalling')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîß Tool Calling Architecture (Native Function Calling)</span>
                <span class="lang-en">üîß Tool Calling Architecture (Native Function Calling)</span>
            </h3>

            <!-- Tool Calling Flow Diagram -->
            <div class="modal-diagram" style="font-size: 0.75rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Native Tool Calling Pipeline                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ üí¨ User  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ üß† LLM Router    ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ üîß Tool Selection       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  Input   ‚îÇ     ‚îÇ (Intent + Model) ‚îÇ     ‚îÇ (Native Function Call)  ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                          ‚îÇ                  ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ                    ‚îÇ              Tool Registry           ‚îÇ          ‚îÇ      ‚îÇ
‚îÇ                    ‚îÇ                                      ‚ñº          ‚îÇ      ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ                ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ  üìç location   ‚îÇ  üé® image    ‚îÇ  üîç web      ‚îÇ  üóëÔ∏è waste   ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ   _search     ‚îÇ  _generation ‚îÇ  _search     ‚îÇ  _classify   ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ               ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ  KakaoAPI     ‚îÇ  Gemini      ‚îÇ  GPT-5.2 /   ‚îÇ  RAG +       ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ  Places       ‚îÇ  Native API  ‚îÇ  Gemini-3    ‚îÇ  Vision LLM  ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ   ‚îÇ               ‚îÇ  Nano/Pro    ‚îÇ  -flash      ‚îÇ              ‚îÇ  ‚îÇ      ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ      ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                       ‚îÇ                                   ‚îÇ
‚îÇ                                       ‚ñº                                   ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ                    ‚îÇ üìä Response Aggregation       ‚îÇ                       ‚îÇ
‚îÇ                    ‚îÇ + SSE Streaming to Client     ‚îÇ                       ‚îÇ
‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <!-- Tool Details Grid -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <!-- location_search -->
                <div style="background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 8px; padding: 1rem;">
                    <div style="font-weight: 600; color: #ef4444; font-size: 0.9rem; margin-bottom: 0.5rem;">üìç location_search</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><strong>Provider:</strong> KakaoAPI (Places)</div>
                        <div><strong>Input:</strong> user_location + query keyword</div>
                        <div><strong>Output:</strong> Ï£ºÎ≥Ä ÏãúÏÑ§ Î™©Î°ù (Ïù¥Î¶Ñ, Ï£ºÏÜå, Í±∞Î¶¨)</div>
                        <div style="color: var(--text-muted); margin-top: 0.3rem;">Native tool_call ‚Üí KakaoAPI REST ‚Üí JSON parse</div>
                    </div>
                </div>
                <!-- image_generation -->
                <div style="background: rgba(251,146,60,0.1); border: 1px solid rgba(251,146,60,0.3); border-radius: 8px; padding: 1rem;">
                    <div style="font-weight: 600; color: #fb923c; font-size: 0.9rem; margin-bottom: 0.5rem;">üé® image_generation</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><strong>Provider:</strong> Gemini SDK Native</div>
                        <div><strong>Models:</strong> gemini-3-pro-image</div>
                        <div><strong>Output:</strong> Base64 ‚Üí gRPC Images API ‚Üí CDN URL</div>
                        <div style="color: var(--text-muted); margin-top: 0.3rem;">Character Reference ÏßÄÏõê, 13Ï¢Ö Ï∫êÎ¶≠ÌÑ∞ ÏóêÏÖã ÌôúÏö©</div>
                    </div>
                </div>
                <!-- web_search -->
                <div style="background: rgba(168,85,247,0.1); border: 1px solid rgba(168,85,247,0.3); border-radius: 8px; padding: 1rem;">
                    <div style="font-weight: 600; color: #a855f7; font-size: 0.9rem; margin-bottom: 0.5rem;">üîç web_search</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><strong>Provider:</strong> GPT 5.2 / Gemini-3-flash</div>
                        <div><strong>Method:</strong> ÎÑ§Ïù¥Ìã∞Î∏å Ìà¥ÏΩúÎßÅ (Built-in)</div>
                        <div><strong>Output:</strong> Í≤ÄÏÉâ Í≤∞Í≥º ÏöîÏïΩ + ÏÜåÏä§ URL</div>
                        <div style="color: var(--text-muted); margin-top: 0.3rem;">LLMÏù¥ ÏûêÏ≤¥ Ïõπ Í≤ÄÏÉâ ÏàòÌñâ (Ïô∏Î∂Ä API Î∂àÌïÑÏöî)</div>
                    </div>
                </div>
                <!-- waste_classify -->
                <div style="background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 8px; padding: 1rem;">
                    <div style="font-weight: 600; color: #8b5cf6; font-size: 0.9rem; margin-bottom: 0.5rem;">üóëÔ∏è waste_classify (RAG)</div>
                    <div style="font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><strong>Provider:</strong> Vision LLM + Rule Engine</div>
                        <div><strong>Method:</strong> Modular RAG Pipeline</div>
                        <div><strong>Output:</strong> Î∂ÑÎ¶¨Î∞∞Ï∂ú Î∞©Î≤ï + Ïû¨Ïßà Î∂ÑÎ•ò</div>
                        <div style="color: var(--text-muted); margin-top: 0.3rem;">Pre-Retrieval ‚Üí KB ‚Üí Post-Retrieval 3Îã®Í≥Ñ</div>
                    </div>
                </div>
            </div>

            <!-- Native vs Traditional Comparison -->
            <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(16,185,129,0.1); border-radius: 8px; border-left: 3px solid #10b981;">
                <strong style="color: #10b981;">
                    <span class="lang-ko">‚ö° Native Tool Calling vs Traditional API Ìò∏Ï∂ú</span>
                    <span class="lang-en">‚ö° Native Tool Calling vs Traditional API Calls</span>
                </strong>
                <div style="margin-top: 0.75rem; display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.75rem;">
                    <div>
                        <div style="color: #10b981; font-weight: 600; margin-bottom: 0.3rem;">‚úÖ Native (web_search, image_gen)</div>
                        <div style="color: var(--text-secondary); line-height: 1.5;">
                            <span class="lang-ko">‚Ä¢ LLM ÎÇ¥Ïû• Í∏∞Îä•ÏúºÎ°ú ÏßÄÏó∞ ÏµúÏÜåÌôî<br>‚Ä¢ Î≥ÑÎèÑ API ÌÇ§/ÏóîÎìúÌè¨Ïù∏Ìä∏ Î∂àÌïÑÏöî<br>‚Ä¢ Ïª®ÌÖçÏä§Ìä∏ Ïú†ÏßÄÎêú Í≤∞Í≥º Î∞òÌôò</span>
                            <span class="lang-en">‚Ä¢ Minimal latency via LLM built-in<br>‚Ä¢ No separate API keys/endpoints<br>‚Ä¢ Context-aware result generation</span>
                        </div>
                    </div>
                    <div>
                        <div style="color: #f59e0b; font-weight: 600; margin-bottom: 0.3rem;">üîÑ External API (location, waste)</div>
                        <div style="color: var(--text-secondary); line-height: 1.5;">
                            <span class="lang-ko">‚Ä¢ Ïã§ÏãúÍ∞Ñ Îç∞Ïù¥ÌÑ∞ ÌïÑÏöî (ÏúÑÏπò, DB)<br>‚Ä¢ Ï†ÑÏö© Îç∞Ïù¥ÌÑ∞ÏÜåÏä§ Ï†ëÍ∑º ÌïÑÏöî<br>‚Ä¢ tool_call ‚Üí API Ìò∏Ï∂ú ‚Üí Í≤∞Í≥º Ï£ºÏûÖ</span>
                            <span class="lang-en">‚Ä¢ Real-time data needed (location, DB)<br>‚Ä¢ Dedicated datasource access required<br>‚Ä¢ tool_call ‚Üí API call ‚Üí result injection</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SSE Streaming -->
            <div style="padding: 1rem; background: rgba(59,130,246,0.1); border-radius: 8px; border-left: 3px solid #3b82f6;">
                <strong style="color: #3b82f6;">
                    <span class="lang-ko">üåä Tool Execution SSE Streaming</span>
                    <span class="lang-en">üåä Tool Execution SSE Streaming</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.8rem; line-height: 1.6;">
                    <span class="lang-ko">ÎèÑÍµ¨ Ïã§Ìñâ Ï§ëÍ∞Ñ Í≤∞Í≥ºÎ•º SSEÎ°ú Ïã§ÏãúÍ∞Ñ Ïä§Ìä∏Î¶¨Î∞çÌïòÏó¨ ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÏßÑÌñâ ÏÉÅÌô© ÌëúÏãú:<br>
                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem;">tool_start</code> ‚Üí
                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem;">tool_progress</code> ‚Üí
                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem;">tool_result</code> ‚Üí
                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem;">answer_stream</code></span>
                    <span class="lang-en">Real-time SSE streaming of intermediate tool execution results to show progress:<br>
                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem;">tool_start</code> ‚Üí
                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem;">tool_progress</code> ‚Üí
                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem;">tool_result</code> ‚Üí
                    <code style="background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 3px; font-size: 0.7rem;">answer_stream</code></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Data Consistency (Optimistic Update + Eventual Consistency) -->
    <div class="modal-overlay" id="modal-chat-consistency">
        <div class="modal-content" style="max-width: 1050px;">
            <button class="modal-close" onclick="closeModal('modal-chat-consistency')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üîÑ Optimistic Update + Eventual Consistency ÌÜµÌï©</span>
                <span class="lang-en">üîÑ Optimistic Update + Eventual Consistency Integration</span>
            </h3>

            <!-- Problem Statement -->
            <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(239,68,68,0.1); border-radius: 8px; border-left: 3px solid #ef4444;">
                <strong style="color: #ef4444;">
                    <span class="lang-ko">üî¥ Î∞úÍ≤¨Îêú Î¨∏Ï†ú: Race Condition</span>
                    <span class="lang-en">üî¥ Problem: Race Condition</span>
                </strong>
                <div style="margin-top: 0.75rem; font-size: 0.8rem; color: var(--text-secondary); line-height: 1.6;">
                    <span class="lang-ko">Optimistic Update(Ï¶âÏãú)ÏôÄ Eventual Consistency(~200ms ÏßÄÏó∞) Í∞ÑÏùò ÌÉÄÏù¥Î∞ç Î∂àÏùºÏπòÎ°ú Î©îÏãúÏßÄ ÏÜåÏã§ Î∞úÏÉù<br>
                    ‚Ä¢ ÏÇ¨Ïö©Ïûê Î©îÏãúÏßÄ Ï†ÑÏÜ° ‚Üí Optimistic UI ÌëúÏãú ‚Üí Ïù¥Ï†Ñ Î©îÏãúÏßÄ Î°úÎìú ‚Üí ÏÑúÎ≤Ñ ÎØ∏Ï†ÄÏû• ÏÉÅÌÉúÏóêÏÑú ÎçÆÏñ¥Ïì∞Í∏∞ ‚Üí <strong>Î©îÏãúÏßÄ ÏÇ¨ÎùºÏßê</strong></span>
                    <span class="lang-en">Timing mismatch between Optimistic Update (immediate) and Eventual Consistency (~200ms delay) causes message loss<br>
                    ‚Ä¢ Send message ‚Üí Optimistic UI ‚Üí Load older messages ‚Üí Server overwrites before persistence ‚Üí <strong>Message lost</strong></span>
                </div>
            </div>

            <!-- Architecture Diagram -->
            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.7rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Data Consistency Architecture                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ  Frontend (React)                          Backend                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ useState (Optimistic)‚îÇ ‚îÄ‚îÄPOST‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫   ‚îÇ API ‚Üí RabbitMQ ‚Üí LangGraph       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ IndexedDB (Persist)  ‚îÇ                  ‚îÇ         ‚îÇ                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Reconcile Algorithm  ‚îÇ ‚óÑ‚îÄ‚îÄSSE‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ   ‚îÇ         ‚ñº                        ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ  Redis Streams (Fan-out)         ‚îÇ ‚îÇ
‚îÇ         ‚îÇ                                  ‚îÇ  ‚îú‚îÄ eventrouter ‚Üí SSE (~10ms)   ‚îÇ ‚îÇ
‚îÇ         ‚îÇ 500ms throttle                   ‚îÇ  ‚îî‚îÄ persistence ‚Üí PG (~200ms)   ‚îÇ ‚îÇ
‚îÇ         ‚ñº                                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                       ‚îÇ
‚îÇ  ‚îÇ IndexedDB            ‚îÇ  TTL: 7Ïùº (ÏùºÎ∞ò) / 30Ï¥à (synced)                      ‚îÇ
‚îÇ  ‚îÇ + Auto Cleanup (1m)  ‚îÇ  Compound Index: [chat_id, timestamp]                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                                       ‚îÇ
‚îÇ                                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <!-- Solution Grid -->
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <!-- Reconcile Algorithm -->
                <div style="background: rgba(139,92,246,0.1); border: 1px solid rgba(139,92,246,0.3); border-radius: 8px; padding: 1rem;">
                    <div style="font-weight: 600; color: #8b5cf6; font-size: 0.85rem; margin-bottom: 0.5rem;">üìä Reconcile Algorithm</div>
                    <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.6;">
                        <span class="lang-ko">
                        ‚Ä¢ <strong>pending/streaming</strong>: Ìï≠ÏÉÅ Ïú†ÏßÄ (Î°úÏª¨ Ïö∞ÏÑ†)<br>
                        ‚Ä¢ <strong>committed (no server_id)</strong>: 30Ï¥à Ïù¥ÎÇ¥ Ïú†ÏßÄ<br>
                        ‚Ä¢ <strong>Ï§ëÎ≥µ Ï†úÍ±∞</strong>: server_id Í∏∞Ï§Ä Ïö∞ÏÑ†<br>
                        ‚Ä¢ <strong>ÏãúÍ∞ÑÏàú Ï†ïÎ†¨</strong>: timestamp Í∏∞Î∞ò Î≥ëÌï©
                        </span>
                        <span class="lang-en">
                        ‚Ä¢ <strong>pending/streaming</strong>: Always keep (local-first)<br>
                        ‚Ä¢ <strong>committed (no server_id)</strong>: Keep within 30s<br>
                        ‚Ä¢ <strong>Dedup</strong>: server_id takes priority<br>
                        ‚Ä¢ <strong>Sort</strong>: Timestamp-based merge
                        </span>
                    </div>
                </div>
                <!-- Message State Machine -->
                <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 8px; padding: 1rem;">
                    <div style="font-weight: 600; color: #3b82f6; font-size: 0.85rem; margin-bottom: 0.5rem;">üîÄ Message Status State Machine</div>
                    <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.6;">
                        <span class="lang-ko">
                        ‚Ä¢ <strong>pending</strong> ‚Üí committed (SSE done ÏàòÏã†)<br>
                        ‚Ä¢ <strong>pending</strong> ‚Üí failed (timeout/error)<br>
                        ‚Ä¢ <strong>streaming</strong> ‚Üí committed (ÏôÑÎ£å)<br>
                        ‚Ä¢ <strong>ID Îß§Ìïë</strong>: client_id(FE UUID) ‚Üî server_id(DB PK)
                        </span>
                        <span class="lang-en">
                        ‚Ä¢ <strong>pending</strong> ‚Üí committed (SSE done received)<br>
                        ‚Ä¢ <strong>pending</strong> ‚Üí failed (timeout/error)<br>
                        ‚Ä¢ <strong>streaming</strong> ‚Üí committed (complete)<br>
                        ‚Ä¢ <strong>ID mapping</strong>: client_id(FE UUID) ‚Üî server_id(DB PK)
                        </span>
                    </div>
                </div>
                <!-- 30s Retention Window -->
                <div style="background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.3); border-radius: 8px; padding: 1rem;">
                    <div style="font-weight: 600; color: #f59e0b; font-size: 0.85rem; margin-bottom: 0.5rem;">‚è±Ô∏è 30s Retention Window</div>
                    <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.6;">
                        <span class="lang-ko">
                        ‚Ä¢ Eventual Consistency ÏôÑÎ£å ÎåÄÍ∏∞ ÏãúÍ∞Ñ<br>
                        ‚Ä¢ ÎèôÍ∏∞ÌôîÎêú Î©îÏãúÏßÄ 30Ï¥à ÌõÑ IndexedDB ÏÇ≠Ï†ú<br>
                        ‚Ä¢ ÏÑúÎ≤Ñ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏßÑÏã§Ïùò ÏõêÏ≤úÏúºÎ°ú Ï†ÑÌôò<br>
                        ‚Ä¢ Race Condition Î∞©ÏßÄ ÏïàÏ†Ñ Íµ¨Í∞Ñ
                        </span>
                        <span class="lang-en">
                        ‚Ä¢ Eventual Consistency completion wait time<br>
                        ‚Ä¢ Synced messages deleted from IndexedDB after 30s<br>
                        ‚Ä¢ Server data becomes source of truth<br>
                        ‚Ä¢ Safety window preventing Race Conditions
                        </span>
                    </div>
                </div>
                <!-- IndexedDB Persistence -->
                <div style="background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 8px; padding: 1rem;">
                    <div style="font-weight: 600; color: #10b981; font-size: 0.85rem; margin-bottom: 0.5rem;">üíæ IndexedDB Persistence</div>
                    <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.6;">
                        <span class="lang-ko">
                        ‚Ä¢ Î∏åÎùºÏö∞Ï†Ä ÏÉàÎ°úÍ≥†Ïπ® Î≥µÍµ¨ (Cache-Aside)<br>
                        ‚Ä¢ <strong>500ms Throttle</strong>: SSE ÌÜ†ÌÅ∞ Ïä§Ìä∏Î¶¨Î∞ç Ïãú Ïì∞Í∏∞ 10Î∞∞ Í∞êÏÜå<br>
                        ‚Ä¢ <strong>Compound Index</strong>: [chat_id, timestamp]<br>
                        ‚Ä¢ <strong>1Î∂Ñ Ï£ºÍ∏∞ Cleanup</strong>: ÎßåÎ£å Î©îÏãúÏßÄ ÏûêÎèô ÏÇ≠Ï†ú
                        </span>
                        <span class="lang-en">
                        ‚Ä¢ Browser refresh recovery (Cache-Aside)<br>
                        ‚Ä¢ <strong>500ms Throttle</strong>: 10x write reduction during SSE streaming<br>
                        ‚Ä¢ <strong>Compound Index</strong>: [chat_id, timestamp]<br>
                        ‚Ä¢ <strong>1min Cleanup</strong>: Auto-delete expired messages
                        </span>
                    </div>
                </div>
            </div>

            <!-- Timeline Flow -->
            <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(139,92,246,0.1); border-radius: 8px; border-left: 3px solid #8b5cf6;">
                <strong style="color: #8b5cf6;">
                    <span class="lang-ko">üìà ÌÜµÌï© Îç∞Ïù¥ÌÑ∞ ÌîåÎ°úÏö∞ ÌÉÄÏûÑÎùºÏù∏</span>
                    <span class="lang-en">üìà Integrated Data Flow Timeline</span>
                </strong>
                <div style="margin-top: 0.75rem; font-size: 0.75rem; color: var(--text-secondary); line-height: 1.8; font-family: 'Fira Code', monospace;">
                    <span class="lang-ko">
                    T0: User sends ‚Üí <strong>Optimistic Update</strong> (Ï¶âÏãú UI)<br>
                    T1~T6: SSE streaming (vision ‚Üí answer ‚Üí done + server_id Ìï†Îãπ)<br>
                    T7~T8: PostgreSQL INSERT/COMMIT (~200ms)<br>
                    T9: User scrolls ‚Üí <strong>Reconcile</strong>(local + server) ‚Üí Ï§ëÎ≥µ Ï†úÍ±∞ + 30Ï¥à Ïú†ÏßÄ
                    </span>
                    <span class="lang-en">
                    T0: User sends ‚Üí <strong>Optimistic Update</strong> (immediate UI)<br>
                    T1~T6: SSE streaming (vision ‚Üí answer ‚Üí done + server_id assigned)<br>
                    T7~T8: PostgreSQL INSERT/COMMIT (~200ms)<br>
                    T9: User scrolls ‚Üí <strong>Reconcile</strong>(local + server) ‚Üí Dedup + 30s retention
                    </span>
                </div>
            </div>

            <!-- Consumer Group Table -->
            <div style="margin-bottom: 1.5rem;">
                <table class="modal-table" style="font-size: 0.75rem;">
                    <tr>
                        <th>Consumer Group</th>
                        <th><span class="lang-ko">Î™©Ï†Å</span><span class="lang-en">Purpose</span></th>
                        <th><span class="lang-ko">ÏßÄÏó∞ÏãúÍ∞Ñ</span><span class="lang-en">Latency</span></th>
                    </tr>
                    <tr>
                        <td><code>eventrouter</code></td>
                        <td><span class="lang-ko">SSE Ïã§ÏãúÍ∞Ñ Ï†ÑÏÜ°</span><span class="lang-en">SSE Real-time delivery</span></td>
                        <td>~10ms</td>
                    </tr>
                    <tr>
                        <td><code>chat-persistence</code></td>
                        <td><span class="lang-ko">PostgreSQL Ï†ÄÏû•</span><span class="lang-en">PostgreSQL persistence</span></td>
                        <td>~200ms</td>
                    </tr>
                </table>
            </div>

            <!-- Reference -->
            <div style="padding: 0.75rem; background: rgba(14,165,233,0.1); border-radius: 8px; border-left: 3px solid var(--accent-teal, #0ea5e9);">
                <strong style="color: #0ea5e9;">üìö <span class="lang-ko">Î∏îÎ°úÍ∑∏ ÏõêÎ¨∏</span><span class="lang-en">Blog Post</span></strong>
                <div style="margin-top: 0.4rem;">
                    <a href="https://rooftopsnow.tistory.com/235" target="_blank" rel="noopener" style="color: var(--text-secondary); font-size: 0.8rem;">
                        <span class="lang-ko">Optimistic Update (FE) & Eventual Consistency (BE) ÌÜµÌï© Ìä∏Îü¨Î∏îÏäàÌåÖ ‚Üí</span>
                        <span class="lang-en">Optimistic Update (FE) & Eventual Consistency (BE) Integration Troubleshooting ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Multi-Model Orchestration -->
    <div class="modal-overlay" id="modal-chat-multimodel">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-chat-multimodel')">√ó</button>
            <h3 class="modal-title">üß† Multi-Model Orchestration</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Multi-Model LLM Architecture (Port/Adapter)            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                    LLMClientPort (ABC)                         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ generate(prompt, system_prompt) ‚Üí str                     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ generate_stream(prompt) ‚Üí AsyncIterator[str]              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ generate_structured(prompt, schema) ‚Üí T                   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ generate_with_tools(prompt, tools) ‚Üí AsyncIterator[str]   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ generate_function_call(prompt, functions) ‚Üí (name, args)  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                           ‚îÇ                                         ‚îÇ
‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                          ‚îÇ
‚îÇ            ‚ñº              ‚ñº              ‚ñº                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ  ‚îÇ   OpenAI    ‚îÇ ‚îÇ   Gemini    ‚îÇ ‚îÇ  LangChain   ‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ   Adapter   ‚îÇ ‚îÇ   Adapter   ‚îÇ ‚îÇ   Adapter    ‚îÇ                  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                  ‚îÇ
‚îÇ  ‚îÇ gpt-5.2     ‚îÇ ‚îÇ gemini-3-   ‚îÇ ‚îÇ OpenAI SDK   ‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ Agents SDK  ‚îÇ ‚îÇ flash/pro   ‚îÇ ‚îÇ ‚Üí Runnable   ‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ (Primary)   ‚îÇ ‚îÇ Gemini SDK  ‚îÇ ‚îÇ ‚Üí astream()  ‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ +Responses  ‚îÇ ‚îÇ (FC, Image) ‚îÇ ‚îÇ Token capture‚îÇ                  ‚îÇ
‚îÇ  ‚îÇ (Fallback)  ‚îÇ ‚îÇ             ‚îÇ ‚îÇ              ‚îÇ                  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                   Model Registry (provider.py)                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  openai/gpt-5.2              ‚îÇ 400K ctx ‚îÇ tools, vision        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  google/gemini-3-flash-preview   ‚îÇ 1M ctx ‚îÇ tools, vision     ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  google/gemini-3-pro-image         ‚îÇ   -   ‚îÇ image_gen         ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  Runtime Selection: create_llm_client(provider, model)              ‚îÇ
‚îÇ  Auto-Inference: "gemini-*" ‚Üí google, "gpt-*" ‚Üí openai             ‚îÇ
‚îÇ  LLMPolicyPort: ModelTier(FAST/STANDARD/PREMIUM) √ó TaskType         ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">
                    <span class="lang-ko">LLM Native API ÌÜµÌï©</span>
                    <span class="lang-en">LLM Native API Integration</span>
                </h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; font-size: 0.8rem;">
                    <div style="background: rgba(99,102,241,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(99,102,241,0.3);">
                        <strong style="color: #6366f1;">OpenAI Agents SDK + Responses API (Fallback)</strong>
                        <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.75rem;">
                            ‚Ä¢ <code>generate_with_tools()</code> ‚Äî Agents SDK Primary + Responses Fallback<br>
                            ‚Ä¢ <code>generate_structured()</code> ‚Äî Agent output_type (Pydantic ÏûêÎèô ÌååÏã±)<br>
                            ‚Ä¢ <code>generate_function_call()</code> ‚Äî Chat Completions functions<br>
                            ‚Ä¢ Image Generation ‚Äî <code>gpt-image-1.5</code> tool<br>
                            ‚Ä¢ Streaming ‚Äî <code>response.output_text.delta</code> Ïù¥Î≤§Ìä∏
                        </div>
                    </div>
                    <div style="background: rgba(16,185,129,0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(16,185,129,0.3);">
                        <strong style="color: #10b981;">Gemini SDK (google-genai)</strong>
                        <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.75rem;">
                            ‚Ä¢ <code>generate_content()</code> ‚Äî ÌÖçÏä§Ìä∏ ÏÉùÏÑ±<br>
                            ‚Ä¢ <code>generate_content_stream()</code> ‚Äî Ïä§Ìä∏Î¶¨Î∞ç<br>
                            ‚Ä¢ Structured Output ‚Äî <code>response_mime_type</code> + schema<br>
                            ‚Ä¢ Image Gen ‚Äî <code>response_modalities=["TEXT","IMAGE"]</code><br>
                            ‚Ä¢ Reference Image ‚Äî Pro: ÏµúÎåÄ 14Ïû•, Flash: ÏµúÎåÄ 3Ïû•
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">
                    <span class="lang-ko">Îü∞ÌÉÄÏûÑ Î™®Îç∏ Ï†ÑÌôò (Provider Auto-Inference)</span>
                    <span class="lang-en">Runtime Model Switching (Provider Auto-Inference)</span>
                </h4>
                <div style="font-size: 0.78rem; color: var(--text-secondary);">
                    <table style="width: 100%; border-collapse: collapse; font-size: 0.75rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                <th style="text-align: left; padding: 0.4rem;">Model ID</th>
                                <th style="text-align: left; padding: 0.4rem;">Provider</th>
                                <th style="text-align: left; padding: 0.4rem;">Context</th>
                                <th style="text-align: left; padding: 0.4rem;">Capabilities</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td style="padding: 0.4rem;"><code>openai/gpt-5.2</code></td><td>OpenAI</td><td>400K</td><td>tools, vision, web_search</td></tr>
                            <tr><td style="padding: 0.4rem;"><code>google/gemini-3-flash-preview</code></td><td>Google</td><td>1M</td><td>tools, vision</td></tr>
                            <tr><td style="padding: 0.4rem;"><code>google/gemini-3-pro-image</code></td><td>Google</td><td>-</td><td>image_gen, char_ref</td></tr>
                        </tbody>
                    </table>
                </div>
                <div style="margin-top: 0.75rem; font-size: 0.75rem; color: var(--text-muted);">
                    <span class="lang-ko">
                        <code>create_llm_client(provider, model)</code> Ìå©ÌÜ†Î¶¨ÏóêÏÑú Î™®Îç∏Î™Ö prefixÎ°ú Provider ÏûêÎèô Ï∂îÎ°†.<br>
                        <code>LLMPolicyPort.select_model(task_type, tier)</code>Î°ú ÌÉúÏä§ÌÅ¨Î≥Ñ ÏµúÏ†Å Î™®Îç∏ ÏÑ†ÌÉù.<br>
                        Image Generation: ÌÖçÏä§Ìä∏ Î™®Îç∏Ïóê Ïó∞Í≤∞Îêú Ïù¥ÎØ∏ÏßÄ Î™®Îç∏ ÏûêÎèô Îß§Ìïë (gpt-5.2 ‚Üí gpt-image-1.5).
                    </span>
                    <span class="lang-en">
                        <code>create_llm_client(provider, model)</code> factory auto-infers provider from model name prefix.<br>
                        <code>LLMPolicyPort.select_model(task_type, tier)</code> selects optimal model per task.<br>
                        Image Generation: Auto-maps linked image model (gpt-5.2 ‚Üí gpt-image-1.5).
                    </span>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">
                    <span class="lang-ko">LangChain Adapter (Token Streaming)</span>
                    <span class="lang-en">LangChain Adapter (Token Streaming)</span>
                </h4>
                <div style="font-size: 0.75rem; color: var(--text-secondary); background: rgba(99,102,241,0.05); padding: 0.75rem; border-radius: 6px;">
                    <span class="lang-ko">
                        LangGraph <code>stream_mode="messages"</code>Î°ú ÌÜ†ÌÅ∞ Ï∫°Ï≤ò Ïãú:<br>
                        <code>OpenAI SDK ‚Üí LangChainOpenAIRunnable(BaseChatModel) ‚Üí AIMessageChunk</code><br>
                        LangGraphÍ∞Ä ÏßÅÏ†ë ÌÜ†ÌÅ∞ÏùÑ Ï∫°Ï≤òÌïòÏßÄ Î™ªÌïòÎäî Í≤ΩÏö∞ (web_search Îì±):<br>
                        <code>LLMClientPort.generate_with_tools() ‚Üí notify_token_v2()</code> ÏßÅÏ†ë Î∞úÌñâ
                    </span>
                    <span class="lang-en">
                        For LangGraph <code>stream_mode="messages"</code> token capture:<br>
                        <code>OpenAI SDK ‚Üí LangChainOpenAIRunnable(BaseChatModel) ‚Üí AIMessageChunk</code><br>
                        When LangGraph can't capture tokens (web_search etc.):<br>
                        <code>LLMClientPort.generate_with_tools() ‚Üí notify_token_v2()</code> direct emit
                    </span>
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(99,102,241,0.1); border-radius: 8px; border-left: 3px solid #6366f1;">
                <strong style="color: #6366f1;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/application/ports/llm/llm_client.py" target="_blank" style="color: #6366f1;">ports/llm/llm_client.py</a> (LLMClientPort ABC)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/llm/clients/openai_client.py" target="_blank" style="color: #6366f1;">clients/openai_client.py</a> (Agents SDK Primary + Responses Fallback)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/llm/clients/gemini_client.py" target="_blank" style="color: #6366f1;">clients/gemini_client.py</a> (Gemini SDK)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/domain/models/provider.py" target="_blank" style="color: #6366f1;">domain/models/provider.py</a> (MODEL_REGISTRY)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/setup/dependencies.py" target="_blank" style="color: #6366f1;">setup/dependencies.py</a> (create_llm_client Factory)
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================ -->
    <!-- Intent Detail Modals (9 Intents) -->
    <!-- ============================================================ -->

    <!-- Modal: Intent Node (Classification Pipeline) -->
    <div class="modal-overlay" id="modal-intent-node">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-node')">√ó</button>
            <h3 class="modal-title">üß† Intent Node - ÏùòÎèÑ Î∂ÑÎ•ò ÌååÏù¥ÌîÑÎùºÏù∏</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Intent Classification Pipeline                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User Message ‚îÄ‚îÄ‚ñ∫ intent_node ‚îÄ‚îÄ‚ñ∫ dynamic_router ‚îÄ‚îÄ‚ñ∫ subagents     ‚îÇ
‚îÇ                       ‚îÇ                                             ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                               ‚îÇ
‚îÇ         ‚îÇ    ClassifyIntentCommand    ‚îÇ  (UseCase)                   ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ 1. Cache Ï°∞Ìöå          ‚îÇ ‚îÇ  SHA256(message) ‚Üí Redis    ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    TTL: 3600s (1ÏãúÍ∞Ñ)  ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ 2. LLM Ìò∏Ï∂ú            ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    intent.txt ÌîÑÎ°¨ÌîÑÌä∏  ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    ‚Üí JSON ÏùëÎãµ ÌååÏã±     ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ 3. IntentClassifier    ‚îÇ ‚îÇ  (Service)                   ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    Service             ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  ‚Ä¢ Keyword Boost +0.2  ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  ‚Ä¢ Chain-of-Intent     ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    Transition +0.15    ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  ‚Ä¢ Length Penalty -0.1 ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  ‚Ä¢ THRESHOLD: 0.6     ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ 4. Multi-Intent Í∞êÏßÄ   ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    "Í∑∏Î¶¨Í≥†","Îòê","Í∞ôÏù¥" ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    ‚Üí Query Decompose   ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ 5. Ï∫êÎ¶≠ÌÑ∞ Ïù¥Î¶Ñ Í∞êÏßÄ    ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    "ÌéòÌã∞","Ïù¥ÏΩî" Îì±     ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ    ‚Üí image_gen Ï∞∏Ï°∞Ïö©  ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ 6. Cache Ï†ÄÏû•          ‚îÇ ‚îÇ                              ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ                              ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  Output ‚Üí state:                                                    ‚îÇ
‚îÇ    intent, confidence, is_complex, has_multi_intent,                ‚îÇ
‚îÇ    additional_intents, decomposed_queries, intent_history,          ‚îÇ
‚îÇ    detected_character                                               ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Confidence Scoring</h4>
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; font-size: 0.75rem; font-family: 'Fira Code', monospace; color: var(--text-secondary); line-height: 1.6;">
                    final_confidence = <span style="color: #3b82f6;">llm_confidence</span> + <span style="color: #22c55e;">keyword_boost</span> + <span style="color: #f59e0b;">transition_boost</span> + <span style="color: #ef4444;">length_penalty</span><br><br>
                    <span style="color: #3b82f6;">llm_confidence</span>: 0.0~1.0 (LLM JSON ÏùëÎãµ)<br>
                    <span style="color: #22c55e;">keyword_boost</span>: 0.0~0.2 (ÌÇ§ÏõåÎìú Îßµ Îß§Ïπ≠)<br>
                    <span style="color: #f59e0b;">transition_boost</span>: 0.0~0.15 (Chain-of-Intent, last_conf ‚â• 0.7)<br>
                    <span style="color: #ef4444;">length_penalty</span>: -0.1~0.0 (ÏßßÏùÄ ÏßàÎ¨∏)<br><br>
                    CONFIDENCE_THRESHOLD = <span style="color: #ef4444;">0.6</span> (ÎØ∏Îßå ‚Üí general fallback)
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Ï£ºÏûÖ ÌîÑÎ°¨ÌîÑÌä∏ (intent.txt ÌïµÏã¨)</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: var(--primary); margin-bottom: 0.3rem;">9 Categories</div>
                        <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.5;">
                            waste, character, location,<br>
                            bulk_waste, recyclable_price,<br>
                            collection_point, weather,<br>
                            image_generation, general
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: var(--primary); margin-bottom: 0.3rem;">ÌåêÎã® Í∞ÄÏù¥ÎìúÎùºÏù∏</div>
                        <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.5;">
                            1. ÏùòÎØ∏ Ï§ëÏã¨ ÌåêÎã® (ÌÇ§ÏõåÎìú X)<br>
                            2. ÎåÄÌôî Îß•ÎùΩ Í≥†Î†§<br>
                            3. ÌôïÏã† ÎÇÆÏúºÎ©¥ general<br>
                            4. Î≥µÌï© ÏßàÎ¨∏ ‚Üí ÌïµÏã¨ ÏùòÎèÑ ÏÑ†ÌÉù
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: var(--primary); margin-bottom: 0.3rem;">Multi-turn Context</div>
                        <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.5;">
                            conversation_history[-6:]<br>
                            (ÏµúÍ∑º 3ÌÑ¥ Ï∞∏Ï°∞)<br>
                            ‚Üí LLM Îß•ÎùΩ Î∂ÑÎ•ò ÏßÄÏõê
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: var(--primary); margin-bottom: 0.3rem;">Output Format</div>
                        <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.5;">
                            {"intent": "waste",<br>
                            &nbsp;"confidence": 0.95,<br>
                            &nbsp;"reasoning": "Î∂ÑÎ¶¨Î∞∞Ï∂ú Î∞©Î≤ï"}
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Chain-of-Intent Transitions</h4>
                <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.72rem; color: var(--text-secondary); display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem;">
                    <div>waste ‚Üí location: <span style="color: #22c55e;">+0.15</span></div>
                    <div>waste ‚Üí collection_point: <span style="color: #22c55e;">+0.10</span></div>
                    <div>location ‚Üí waste: <span style="color: #22c55e;">+0.10</span></div>
                    <div>bulk_waste ‚Üí location: <span style="color: #22c55e;">+0.10</span></div>
                    <div style="grid-column: span 2; margin-top: 0.3rem; color: var(--text-muted);">‚Äª last_confidence ‚â• 0.7 + intent_history Í∏∞Î∞ò Ï†ÅÏö©</div>
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(59,130,246,0.1); border-radius: 8px; border-left: 3px solid #3b82f6;">
                <strong style="color: #3b82f6;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/intent_node.py" target="_blank" style="color: #3b82f6;">nodes/intent_node.py</a> (Node Adapter)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/application/commands/classify_intent_command.py" target="_blank" style="color: #3b82f6;">commands/classify_intent_command.py</a> (UseCase)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/application/services/intent_classifier_service.py" target="_blank" style="color: #3b82f6;">services/intent_classifier_service.py</a> (Business Logic)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/prompts/classification/intent.txt" target="_blank" style="color: #3b82f6;">prompts/classification/intent.txt</a> (System Prompt)
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - waste (RAG) -->
    <div class="modal-overlay" id="modal-intent-waste">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-waste')">√ó</button>
            <h3 class="modal-title">üóëÔ∏è waste - ÌèêÍ∏∞Î¨º Î∂ÑÎ¶¨Î∞∞Ï∂ú (RAG)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    waste Intent Pipeline (RAG)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User Message ‚îÄ‚îÄ‚ñ∫ rag_node ‚îÄ‚îÄ‚ñ∫ answer_node ‚îÄ‚îÄ‚ñ∫ SSE Stream          ‚îÇ
‚îÇ                      ‚îÇ                                              ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                      ‚îÇ
‚îÇ              ‚îÇ  RetrieverPort ‚îÇ  (Vector DB Search)                  ‚îÇ
‚îÇ              ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                      ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ Query ÏûÑÎ≤†Îî©                                       ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ Similarity Search                                  ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ Top-K Í∑úÏ†ï Î¨∏ÏÑú Î∞òÌôò                                ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                      ‚îÇ
‚îÇ                      ‚îÇ                                              ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                      ‚îÇ
‚îÇ              ‚îÇ SearchRAGCommand‚îÇ                                     ‚îÇ
‚îÇ              ‚îÇ  (UseCase)     ‚îÇ                                      ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ disposal_rules                                     ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ classification                                     ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ situation_tags                                     ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                      ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  Policy: NodeExecutor (FAIL_OPEN, timeout: 3000ms, retry: 1)       ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Clean Architecture</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem;">
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: #8b5cf6; margin-bottom: 0.3rem;">Node (Adapter)</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">rag_node.py<br>LangGraph glue code</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: #8b5cf6; margin-bottom: 0.3rem;">Command (UseCase)</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">SearchRAGCommand<br>Ï†ïÏ±Ö/ÌùêÎ¶Ñ Ï†úÏñ¥</div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: #8b5cf6; margin-bottom: 0.3rem;">Service (Logic)</div>
                        <div style="font-size: 0.75rem; color: var(--text-secondary);">RAGSearcherService<br>ÏàúÏàò ÎπÑÏ¶àÎãàÏä§ Î°úÏßÅ</div>
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Ï£ºÏûÖ ÌîÑÎ°¨ÌîÑÌä∏ (waste_instruction.txt)</h4>
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; font-size: 0.75rem; color: var(--text-secondary); line-height: 1.6;">
                    <strong>Context Î≥ÄÏàò:</strong> {disposal_rules}, {classification}, {situation_tags}<br><br>
                    <strong>ÌïµÏã¨ ÏßÄÏπ®:</strong><br>
                    ‚Ä¢ RAG Í≤ÄÏÉâ Í≤∞Í≥º(Í∑úÏ†ï Î¨∏ÏÑú)Î•º Í∏∞Î∞òÏúºÎ°ú Î∂ÑÎ¶¨Î∞∞Ï∂ú Î∞©Î≤ï ÏïàÎÇ¥<br>
                    ‚Ä¢ disposal_rulesÏóêÏÑú ÌíàÎ™©Î≥Ñ Î∞∞Ï∂ú Í∑úÏ†ï Ï∂îÏ∂ú<br>
                    ‚Ä¢ classification Í≤∞Í≥ºÎ°ú ÏÑ∏Î∂Ä Î∂ÑÎ•ò ÌôïÏù∏<br>
                    ‚Ä¢ situation_tagsÎ°ú ÏÉÅÌô©Î≥Ñ ÎßûÏ∂§ ÏïàÎÇ¥ (ÎπÑÏò¨ Îïå, ÏïºÍ∞Ñ Îì±)
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(139,92,246,0.1); border-radius: 8px; border-left: 3px solid #8b5cf6;">
                <strong style="color: #8b5cf6;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/rag_node.py" target="_blank" style="color: #8b5cf6;">nodes/rag_node.py</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/prompts/local/waste_instruction.txt" target="_blank" style="color: #8b5cf6;">prompts/local/waste_instruction.txt</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/application/commands/search_rag_command.py" target="_blank" style="color: #8b5cf6;">commands/search_rag_command.py</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - character (gRPC) -->
    <div class="modal-overlay" id="modal-intent-character">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-character')">√ó</button>
            <h3 class="modal-title">üåç character - Ï∫êÎ¶≠ÌÑ∞ ÏßàÎ¨∏ (gRPC)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 character Intent Pipeline (gRPC)                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User Message ‚îÄ‚îÄ‚ñ∫ character_node ‚îÄ‚îÄ‚ñ∫ answer_node ‚îÄ‚îÄ‚ñ∫ SSE Stream    ‚îÇ
‚îÇ                        ‚îÇ                                            ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                  ‚îÇ
‚îÇ              ‚îÇ LLM: Ïπ¥ÌÖåÍ≥†Î¶¨ Ï∂îÏ∂ú  ‚îÇ  (CategoryExtractorService)     ‚îÇ
‚îÇ              ‚îÇ "Ïù¥ÏΩîÍ∞Ä ÎàÑÍµ¨Ïïº?"     ‚îÇ                                 ‚îÇ
‚îÇ              ‚îÇ  ‚Üí category: "Ïù¥ÏΩî" ‚îÇ                                 ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                  ‚îÇ
‚îÇ                        ‚îÇ                                            ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                  ‚îÇ
‚îÇ              ‚îÇ CharacterClientPort‚îÇ  (gRPC Call)                     ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                  ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ GetCharacter()   ‚îÇ                                  ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ 13 Ï∫êÎ¶≠ÌÑ∞ Îç∞Ïù¥ÌÑ∞  ‚îÇ                                  ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ Ïù¥ÎØ∏ÏßÄ ÏóêÏÖã Î°úÎìú  ‚îÇ                                  ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                  ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  Policy: NodeExecutor (FAIL_OPEN, timeout: 3000ms, retry: 1)       ‚îÇ
‚îÇ  ‚Äª ÏÑ†ÌÉùÏ†Å Ïª®ÌÖçÏä§Ìä∏ - Ïã§Ìå®Ìï¥ÎèÑ ÌååÏù¥ÌîÑÎùºÏù∏ ÏßÑÌñâ                         ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">13 Eco¬≤ Ï∫êÎ¶≠ÌÑ∞ (character_names.yaml)</h4>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem; font-size: 0.72rem;">
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üåç Ïù¥ÏΩî<br><span style="color: var(--text-muted);">ÎåÄÌëú Ï∫êÎ¶≠ÌÑ∞</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üß¥ ÌéòÌã∞<br><span style="color: var(--text-muted);">Î¨¥ÏÉâÌéòÌä∏Î≥ë</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">ü•´ Î©îÌÉàÎ¶¨<br><span style="color: var(--text-muted);">Í∏àÏÜçÎ•ò</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üìÑ ÌéòÏù¥Ìîº<br><span style="color: var(--text-muted);">Ï¢ÖÏù¥</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üßÉ ÌîåÎ¶¨<br><span style="color: var(--text-muted);">ÌîåÎùºÏä§Ìã±Î•ò</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üõçÔ∏è ÎπÑÎãà<br><span style="color: var(--text-muted);">ÎπÑÎãêÎ•ò</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üì¶ ÌèºÏù¥<br><span style="color: var(--text-muted);">Î∞úÌè¨Ìï©ÏÑ±ÏàòÏßÄ</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">ü´ô Í∏ÄÎûòÏãú<br><span style="color: var(--text-muted);">Ïú†Î¶¨Î≥ë</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">ü•õ Ìå©ÌÜ†Î¶¨<br><span style="color: var(--text-muted);">Ï¢ÖÏù¥Ìå©</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üîã Î∞∞Î¶¨<br><span style="color: var(--text-muted);">Ï†ÑÏßÄ</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üí° ÎùºÏù¥Ìã∞<br><span style="color: var(--text-muted);">Ï°∞Î™ÖÏ†úÌíà</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üëï ÏΩîÌäº<br><span style="color: var(--text-muted);">ÏùòÎ•òÎ∞èÏõêÎã®</span></div>
                    <div style="background: rgba(245,158,11,0.1); padding: 0.5rem; border-radius: 6px; text-align: center;">üì± ÏùºÎ†â<br><span style="color: var(--text-muted);">Ï†ÑÍ∏∞Ï†ÑÏûêÏ†úÌíà</span></div>
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(245,158,11,0.1); border-radius: 8px; border-left: 3px solid #f59e0b;">
                <strong style="color: #f59e0b;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/character_node.py" target="_blank" style="color: #f59e0b;">nodes/character_node.py</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/data/character_names.yaml" target="_blank" style="color: #f59e0b;">data/character_names.yaml</a> (13Ï¢Ö Ï†ïÏùò)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/character_name_detector.py" target="_blank" style="color: #f59e0b;">character_name_detector.py</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/prompts/global/eco_character.txt" target="_blank" style="color: #f59e0b;">prompts/global/eco_character.txt</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - location (KakaoAPI) -->
    <div class="modal-overlay" id="modal-intent-location">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-location')">√ó</button>
            <h3 class="modal-title">üìç location - ÏúÑÏπò Í∏∞Î∞ò Í≤ÄÏÉâ (KakaoAPI)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              location Intent Pipeline (Function Calling)             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User Message ‚îÄ‚îÄ‚ñ∫ kakao_place_node ‚îÄ‚îÄ‚ñ∫ answer_node ‚îÄ‚îÄ‚ñ∫ SSE Stream  ‚îÇ
‚îÇ                        ‚îÇ                                            ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                 ‚îÇ
‚îÇ              ‚îÇ LLM Function Calling‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                 ‚îÇ
‚îÇ              ‚îÇ search_kakao_place: ‚îÇ                                 ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ query: "Ïû¨ÌôúÏö©ÏÑºÌÑ∞"‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ search_type: keyword‚îÇ                              ‚îÇ
‚îÇ              ‚îÇ  ‚Ä¢ radius: 5000 (m)  ‚îÇ                                ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                 ‚îÇ
‚îÇ                        ‚îÇ                                            ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                 ‚îÇ
‚îÇ              ‚îÇ SearchKakaoPlace    ‚îÇ                                 ‚îÇ
‚îÇ              ‚îÇ Command (UseCase)   ‚îÇ                                 ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                 ‚îÇ
‚îÇ              ‚îÇ KakaoLocalClientPort‚îÇ  ‚Üí REST API                    ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ Keyword Search    ‚îÇ                                 ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ Category Search   ‚îÇ                                 ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                 ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  HITL: user_location ÏóÜÏúºÎ©¥ ‚Üí notify_needs_input("location")       ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Function Definition</h4>
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; font-size: 0.72rem; font-family: 'Fira Code', monospace; color: var(--text-secondary); line-height: 1.5;">
                    <span style="color: #ef4444;">search_kakao_place</span>({<br>
                    &nbsp;&nbsp;<span style="color: #22c55e;">query</span>: string,&nbsp;&nbsp;// "Ïû¨ÌôúÏö©ÏÑºÌÑ∞", "Ï†úÎ°úÏõ®Ïù¥Ïä§Ìä∏ÏÉµ"<br>
                    &nbsp;&nbsp;<span style="color: #22c55e;">search_type</span>: "keyword" | "category",<br>
                    &nbsp;&nbsp;<span style="color: #22c55e;">category_code</span>?: string,&nbsp;&nbsp;// CE7(Ïπ¥Ìéò) Îì±<br>
                    &nbsp;&nbsp;<span style="color: #22c55e;">radius</span>?: integer = 5000&nbsp;&nbsp;// ÎØ∏ÌÑ∞<br>
                    })<br><br>
                    <span style="color: var(--text-muted);">// function_call: {"name": "search_kakao_place"} (Í∞ïÏ†ú Ìò∏Ï∂ú)</span>
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(239,68,68,0.1); border-radius: 8px; border-left: 3px solid #ef4444;">
                <strong style="color: #ef4444;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/kakao_place_node.py" target="_blank" style="color: #ef4444;">nodes/kakao_place_node.py</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/prompts/local/location_instruction.txt" target="_blank" style="color: #ef4444;">prompts/local/location_instruction.txt</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/application/commands/search_kakao_place_command.py" target="_blank" style="color: #ef4444;">commands/search_kakao_place_command.py</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - bulk_waste (MOIS API) -->
    <div class="modal-overlay" id="modal-intent-bulk-waste">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-bulk-waste')">√ó</button>
            <h3 class="modal-title">üõãÔ∏è bulk_waste - ÎåÄÌòïÌèêÍ∏∞Î¨º (MOIS API Agent)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            bulk_waste Intent Pipeline (LLM Agent + MOIS API)        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User ‚îÄ‚îÄ‚ñ∫ bulk_waste_agent_node ‚îÄ‚îÄ‚ñ∫ answer_node ‚îÄ‚îÄ‚ñ∫ SSE Stream     ‚îÇ
‚îÇ                    ‚îÇ                                                ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                     ‚îÇ
‚îÇ         ‚îÇ    LLM Agent Loop   ‚îÇ  (max 5 iterations)                 ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ GPT-5.2 Strict‚îÇ  ‚îÇ  or  ‚îÇ Gemini 3 ‚îÇ                  ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ          ‚îÇ          ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ    tool_choice: auto‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ          ‚îÇ          ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  Tool Registry ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚Ä¢ get_collection‚îÇ  ‚îÇ  ‚Üí ÏàòÍ±∞ Î∞©Î≤ï/Ïã†Ï≤≠ URL/Ï†ÑÌôîÎ≤àÌò∏      ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  _info(sigungu)‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚Ä¢ search_fee    ‚îÇ  ‚îÇ  ‚Üí ÌíàÎ™©Î≥Ñ ÏàòÏàòÎ£å Í≤ÄÏÉâ               ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  (sigungu,item)‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                     ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  Î≥ëÎ†¨ Tool Ïã§Ìñâ: asyncio.gather(*tool_calls)                       ‚îÇ
‚îÇ  Provider: OpenAI (Strict Mode) / Gemini (AUTO mode)                ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Tool Definitions (GPT-5.2 Strict Mode)</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                    <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.72rem; font-family: 'Fira Code', monospace; color: var(--text-secondary);">
                        <div style="color: #ec4899; font-weight: 600; margin-bottom: 0.3rem;">get_collection_info</div>
                        sigungu: string (ÌïÑÏàò)<br>
                        ‚Üí Ïã†Ï≤≠ URL, Ï†ÑÌôîÎ≤àÌò∏<br>
                        ‚Üí ÏàòÍ±∞ Î∞©Ïãù, ÏàòÏàòÎ£å ÎÇ©Î∂Ä
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.72rem; font-family: 'Fira Code', monospace; color: var(--text-secondary);">
                        <div style="color: #ec4899; font-weight: 600; margin-bottom: 0.3rem;">search_fee</div>
                        sigungu: string (ÌïÑÏàò)<br>
                        item_name: string (ÌïÑÏàò)<br>
                        ‚Üí ÌíàÎ™©Î≥Ñ ÏàòÏàòÎ£å Î™©Î°ù (max 10)
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Agent System Prompt (ÌïµÏã¨)</h4>
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; font-size: 0.72rem; color: var(--text-secondary); line-height: 1.6;">
                    <strong>Scope Discipline:</strong> get_collection_info, search_feeÎßå ÏÇ¨Ïö©<br>
                    <strong>Preambles (GPT-5.2):</strong> ÎèÑÍµ¨ Ìò∏Ï∂ú Ï†Ñ Ïù¥Ïú† ÏÑ§Î™Ö ÌïÑÏàò<br>
                    <strong>ÏßÄÏó≠ Ï∂îÏ∂ú:</strong> "Í∞ïÎÇ®Íµ¨ ÎåÄÌòïÌèêÍ∏∞Î¨º" ‚Üí sigungu="Í∞ïÎÇ®Íµ¨"<br>
                    <strong>Fallback:</strong> ÏßÄÏó≠Î™Ö ÏóÜÏúºÎ©¥ ÎèÑÍµ¨ Ìò∏Ï∂ú X, ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÏöîÏ≤≠
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(236,72,153,0.1); border-radius: 8px; border-left: 3px solid #ec4899;">
                <strong style="color: #ec4899;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/bulk_waste_agent_node.py" target="_blank" style="color: #ec4899;">nodes/bulk_waste_agent_node.py</a> (733 lines)
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - recyclable_price (KECO API) -->
    <div class="modal-overlay" id="modal-intent-recyclable-price">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-recyclable-price')">√ó</button>
            <h3 class="modal-title">üí∞ recyclable_price - Ïû¨ÌôúÏö© ÏãúÏÑ∏ (KECO API Agent)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        recyclable_price Intent Pipeline (LLM Agent + KECO API)      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User ‚îÄ‚îÄ‚ñ∫ recyclable_price_agent_node ‚îÄ‚îÄ‚ñ∫ answer_node ‚îÄ‚îÄ‚ñ∫ SSE      ‚îÇ
‚îÇ                    ‚îÇ                                                ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                     ‚îÇ
‚îÇ         ‚îÇ    LLM Agent Loop   ‚îÇ  (max 5 iterations)                 ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ GPT-5.2/Gemini‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ          ‚îÇ          ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  Tool Registry ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚Ä¢ search_price  ‚îÇ  ‚îÇ  ‚Üí ÌíàÎ™©Î™Ö Í≤ÄÏÉâ (Î∂ÄÎ∂Ñ Îß§Ïπ≠)          ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  (item_name,   ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ   region?)     ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚Ä¢ get_category  ‚îÇ  ‚îÇ  ‚Üí Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ Ï†ÑÏ≤¥ Ï°∞Ìöå             ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  _prices       ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  (category,    ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ   region?)     ‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                     ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  8 Regions: capital, gangwon, chungbuk, chungnam,                   ‚îÇ
‚îÇ             jeonbuk, jeonnam, gyeongbuk, gyeongnam + national       ‚îÇ
‚îÇ  5 Categories: paper, plastic, glass, metal, tire                   ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Tool Definitions</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                    <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.72rem; font-family: 'Fira Code', monospace; color: var(--text-secondary);">
                        <div style="color: #22c55e; font-weight: 600; margin-bottom: 0.3rem;">search_price</div>
                        item_name: string (ÌïÑÏàò)<br>
                        region?: enum (8Í∞ú Í∂åÏó≠)<br>
                        ‚Üí kgÎãπ Í∞ÄÍ≤©, Ï°∞ÏÇ¨Ïùº, ÌòïÌÉúÎ≥Ñ
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.72rem; font-family: 'Fira Code', monospace; color: var(--text-secondary);">
                        <div style="color: #22c55e; font-weight: 600; margin-bottom: 0.3rem;">get_category_prices</div>
                        category: enum (ÌïÑÏàò)<br>
                        region?: enum<br>
                        ‚Üí Ïπ¥ÌÖåÍ≥†Î¶¨ Ï†ÑÏ≤¥ ÌíàÎ™© Í∞ÄÍ≤©
                    </div>
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(34,197,94,0.1); border-radius: 8px; border-left: 3px solid #22c55e;">
                <strong style="color: #22c55e;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/recyclable_price_agent_node.py" target="_blank" style="color: #22c55e;">nodes/recyclable_price_agent_node.py</a> (799 lines)
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - collection_point (KECO API) -->
    <div class="modal-overlay" id="modal-intent-collection-point">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-collection-point')">√ó</button>
            <h3 class="modal-title">üì¶ collection_point - ÏàòÍ±∞Ìï® ÏúÑÏπò (KECO API Agent)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       collection_point Intent Pipeline (LLM Agent + KECO API)       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User ‚îÄ‚îÄ‚ñ∫ collection_point_agent_node ‚îÄ‚îÄ‚ñ∫ answer_node ‚îÄ‚îÄ‚ñ∫ SSE      ‚îÇ
‚îÇ                    ‚îÇ                                                ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                     ‚îÇ
‚îÇ         ‚îÇ    LLM Agent Loop   ‚îÇ  (max 5 iterations)                 ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ GPT-5.2/Gemini‚îÇ  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ          ‚îÇ          ‚îÇ                                     ‚îÇ
‚îÇ         ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                 ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ     Tool Registry    ‚îÇ                                 ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                  ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚Ä¢ search_collection   ‚îÇ  ‚Üí Ï£ºÏÜå/ÏÉÅÌò∏Î™Ö Í≤ÄÏÉâ              ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  _points             ‚îÇ                                 ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚Ä¢ get_nearby          ‚îÇ  ‚Üí Ï¢åÌëú Í∏∞Î∞ò Ï£ºÎ≥Ä Í≤ÄÏÉâ           ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ  _collection_points  ‚îÇ                                 ‚îÇ
‚îÇ         ‚îÇ  ‚îÇ‚Ä¢ geocode             ‚îÇ  ‚Üí Ïû•ÏÜåÎ™Ö‚ÜíÏ¢åÌëú Î≥ÄÌôò (Kakao)     ‚îÇ
‚îÇ         ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                 ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                 ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  Multi-Step Pattern:                                                ‚îÇ
‚îÇ  "[ÏßÄÏó≠Î™Ö] Í∑ºÏ≤ò ÏàòÍ±∞Ìï®" ‚Üí geocode(ÏßÄÏó≠) ‚Üí get_nearby(lat,lon)       ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  ÏàòÍ±∞ ÌíàÎ™©: ÌèêÏ†ÑÏûêÏ†úÌíà, ÌèêÍ±¥Ï†ÑÏßÄ, ÌèêÌòïÍ¥ëÎì±                          ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Tool Definitions (3 Tools)</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                    <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.7rem; font-family: 'Fira Code', monospace; color: var(--text-secondary);">
                        <div style="color: #0ea5e9; font-weight: 600; margin-bottom: 0.3rem; font-size: 0.68rem;">search_collection_points</div>
                        address_keyword?<br>
                        name_keyword?<br>
                        ‚Üí ÏàòÍ±∞Ìï® Î™©Î°ù
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.7rem; font-family: 'Fira Code', monospace; color: var(--text-secondary);">
                        <div style="color: #0ea5e9; font-weight: 600; margin-bottom: 0.3rem; font-size: 0.68rem;">get_nearby_collection_points</div>
                        latitude: number<br>
                        longitude: number<br>
                        radius_km?: 2.0
                    </div>
                    <div style="background: rgba(0,0,0,0.3); padding: 0.75rem; border-radius: 8px; font-size: 0.7rem; font-family: 'Fira Code', monospace; color: var(--text-secondary);">
                        <div style="color: #0ea5e9; font-weight: 600; margin-bottom: 0.3rem; font-size: 0.68rem;">geocode</div>
                        place_name: string<br>
                        ‚Üí lat, lon Î∞òÌôò<br>
                        (KakaoAPI ÏúÑÏûÑ)
                    </div>
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(14,165,233,0.1); border-radius: 8px; border-left: 3px solid #0ea5e9;">
                <strong style="color: #0ea5e9;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/collection_point_agent_node.py" target="_blank" style="color: #0ea5e9;">nodes/collection_point_agent_node.py</a> (857 lines)
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - web_search (Agents SDK) -->
    <div class="modal-overlay" id="modal-intent-web-search">
        <div class="modal-content" style="max-width: 1050px;">
            <button class="modal-close" onclick="closeModal('modal-intent-web-search')">√ó</button>
            <h3 class="modal-title">üîç web_search - Ïõπ Í≤ÄÏÉâ (OpenAI Agents SDK)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          web_search Intent Pipeline (Agents SDK + Fallback)                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ  AS-IS (Responses API raw)              TO-BE (Agents SDK Primary)          ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ              ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ          ‚îÇ
‚îÇ  Intent ‚Üí /v1/responses (timeoutÎπàÎ∞ú)  Intent ‚Üí Agents SDK Runner          ‚îÇ
‚îÇ       ‚Üí FC 2Ìöå Ìò∏Ï∂ú (Ïû¨ÌôïÏù∏)                 ‚Üí WebSearchTool (Ïû¨ÏãúÎèÑ ÎÇ¥Ïû•)  ‚îÇ
‚îÇ       ‚Üí Í≤ÄÏÉâÍ≤∞Í≥º ÎØ∏Î∞òÏòÅ (FAIL_OPEN)          ‚Üí 1Ìöå Ìò∏Ï∂ú (Router Ïã†Î¢∞)      ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ Primary: Agents SDK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                                                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  agent = Agent(                                                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ      model=OpenAIResponsesModel(model="gpt-5.2"),                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ      tools=[WebSearchTool()],          # SDK ÎÇ¥Ïû• Ïû¨ÏãúÎèÑ               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ      output_type=response_schema,      # Pydantic ÏûêÎèô ÌååÏã±           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  )                                                                    ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  result = await Runner.run(agent, input=prompt)                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Üí result.final_output  # Ïù¥ÎØ∏ Íµ¨Ï°∞ÌôîÎêú ÏùëÎãµ                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                                       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                         ‚îÇ Exception Î∞úÏÉù Ïãú                                 ‚îÇ
‚îÇ  ‚îå‚îÄ Fallback: Responses API ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  generate_with_responses_api(tools=["web_search"])                    ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îÇ  ‚Äª DuckDuckGo web_search_node.pyÎäî DEPRECATED (Feedback FallbackÏö© ÏûîÏ°¥) ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <!-- 3-column: Before / After / Effect -->
            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;"><span class="lang-ko">Ï†ÑÌôò ÎπÑÍµê</span><span class="lang-en">Migration Comparison</span></h4>
                <table class="modal-table" style="font-size: 0.75rem;">
                    <tr>
                        <th><span class="lang-ko">Í∏∞Îä•</span><span class="lang-en">Feature</span></th>
                        <th>AS-IS (Responses API raw)</th>
                        <th>TO-BE (Agents SDK)</th>
                    </tr>
                    <tr><td>Web Search</td><td><span class="lang-ko">Responses API raw Ìò∏Ï∂ú (ÌÉÄÏûÑÏïÑÏõÉ ÎπàÎ∞ú)</span><span class="lang-en">Responses API raw call (frequent timeout)</span></td><td><strong><span class="lang-ko">Agents SDK Primary + Fallback</span></strong></td></tr>
                    <tr><td><span class="lang-ko">Íµ¨Ï°∞Ìôî Ï∂úÎ†•</span><span class="lang-en">Structured Output</span></td><td><span class="lang-ko">json_schema ÏàòÎèô ÌååÏã±</span><span class="lang-en">Manual json_schema parsing</span></td><td><strong><span class="lang-ko">Agent output_type ÏûêÎèôÌôî (Pydantic)</span><span class="lang-en">Agent output_type auto (Pydantic)</span></strong></td></tr>
                    <tr><td><span class="lang-ko">Í≤∞Ï†ï ÌîÑÎ°úÏÑ∏Ïä§</span><span class="lang-en">Decision Process</span></td><td><span class="lang-ko">FCÎ°ú Ïû¨ÌôïÏù∏ (2Ìöå Ìò∏Ï∂ú)</span><span class="lang-en">FC re-confirmation (2 calls)</span></td><td><strong><span class="lang-ko">Router Ïã†Î¢∞ (1Ìöå Ìò∏Ï∂ú, ~500ms‚Üì)</span><span class="lang-en">Router trust (1 call, ~500ms‚Üì)</span></strong></td></tr>
                    <tr><td><span class="lang-ko">ÏóêÎü¨ Ìï∏Îì§ÎßÅ</span><span class="lang-en">Error Handling</span></td><td><span class="lang-ko">ÎØ∏Ï†ÅÏö© (FAIL_OPEN ÎèôÏûë)</span><span class="lang-en">Not applied (FAIL_OPEN behavior)</span></td><td><strong><span class="lang-ko">SDK ÎÇ¥Ïû• Ïû¨ÏãúÎèÑ + Fallback Ï≤¥Ïù∏</span><span class="lang-en">SDK built-in retry + Fallback chain</span></strong></td></tr>
                    <tr><td><span class="lang-ko">Í≤ÄÏ¶ù</span><span class="lang-en">Verification</span></td><td>‚Äî</td><td><strong>760 passed, 5 skipped</strong></td></tr>
                </table>
            </div>

            <!-- Code Pattern -->
            <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(99,102,241,0.08); border-radius: 8px; border-left: 3px solid #6366f1;">
                <strong style="color: #6366f1;"><span class="lang-ko">üîß Primary + Fallback Ìå®ÌÑ¥</span><span class="lang-en">üîß Primary + Fallback Pattern</span></strong>
                <div class="modal-diagram" style="font-size: 0.7rem; margin-top: 0.5rem; padding: 0.5rem;">
async def generate_with_tools(self, prompt, tools, system_prompt=None):
    try:
        # Primary: Agents SDK (ÎÇ¥Ïû• Ïû¨ÏãúÎèÑ, Íµ¨Ï°∞Ìôî Ï∂úÎ†•)
        async for chunk in self._generate_with_agents_sdk(...):
            yield chunk
        return
    except Exception as e:
        logger.warning("Agents SDK failed, fallback to Responses API")

    # Fallback: Responses API raw
    async for chunk in self._generate_with_responses_api(...):
        yield chunk</div>
            </div>

            <!-- Deployment Status -->
            <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(34,197,94,0.08); border-radius: 8px; border-left: 3px solid #22c55e;">
                <strong style="color: #22c55e;"><span class="lang-ko">üöÄ Î∞∞Ìè¨ ÌòÑÌô©</span><span class="lang-en">üöÄ Deployment Status</span></strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <span class="lang-ko">‚Ä¢ 9-10 Pod (HPA), ArgoCD Synced, Health: Healthy</span>
                    <span class="lang-en">‚Ä¢ 9-10 Pods (HPA), ArgoCD Synced, Health: Healthy</span><br>
                    ‚Ä¢ openai>=2.9.0, openai-agents>=0.7.0, langchain-openai>=0.3.0, langgraph>=0.2.0
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(168,85,247,0.1); border-radius: 8px; border-left: 3px solid #a855f7;">
                <strong style="color: #a855f7;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/llm/clients/openai_client.py" target="_blank" style="color: #a855f7;">clients/openai_client.py</a> (Agents SDK Primary + Responses API Fallback)<br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/answer_node.py" target="_blank" style="color: #a855f7;">nodes/answer_node.py</a> (web_search Í≤ΩÎ°ú)<br>
                    <a href="https://rooftopsnow.tistory.com/248" target="_blank" style="color: #a855f7;">Blog: OpenAI Agents SDK Ï†ÑÌôò Î∂ÑÏÑù ‚Üí</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - image_generation (Gemini Native API) -->
    <div class="modal-overlay" id="modal-intent-image-generation">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-image-generation')">√ó</button>
            <h3 class="modal-title">üé® image_generation - Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± (Gemini Native API)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ       image_generation Intent Pipeline (Gemini SDK Native)          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User Message ‚îÄ‚îÄ‚ñ∫ image_generation_node ‚îÄ‚îÄ‚ñ∫ answer_node ‚îÄ‚îÄ‚ñ∫ SSE    ‚îÇ
‚îÇ                         ‚îÇ                                           ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                ‚îÇ
‚îÇ              ‚îÇ Character Reference  ‚îÇ  (CharacterAssetPort)          ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ 13 Ï∫êÎ¶≠ÌÑ∞ ÏóêÏÖã Î°úÎìú‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ Ï∞∏Ï°∞ Ïù¥ÎØ∏ÏßÄ base64 ‚îÇ                                ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                ‚îÇ
‚îÇ                         ‚îÇ                                           ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                ‚îÇ
‚îÇ              ‚îÇ Gemini SDK Native    ‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ gemini-3-pro-image ‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ Native Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±  ‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ response_modalities‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ   : ["TEXT","IMAGE"] ‚îÇ                                ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                ‚îÇ
‚îÇ                         ‚îÇ                                           ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                ‚îÇ
‚îÇ              ‚îÇ ImageStoragePort     ‚îÇ  (gRPC ‚Üí Images API)           ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ base64 ‚Üí bytes     ‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ gRPC UploadImage() ‚îÇ                                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ CDN URL Î∞òÌôò        ‚îÇ                                ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  Timeout: 30000ms | System Prompt: Character Fidelity ÏõêÏπô          ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">System Prompt (Character Fidelity)</h4>
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; font-size: 0.72rem; color: var(--text-secondary); line-height: 1.6;">
                    <strong>NON-NEGOTIABLE Rules:</strong><br>
                    ‚Ä¢ Ï∞∏Ï°∞ Ïù¥ÎØ∏ÏßÄÏôÄ EXACT ÎèôÏùº ÎîîÏûêÏù∏ Î≥µÏÇ¨<br>
                    ‚Ä¢ Same colors, proportions, style Ïú†ÏßÄ<br>
                    ‚Ä¢ Ï∫êÎ¶≠ÌÑ∞Í∞Ä Ï¶âÏãú Ïù∏Ïãù Í∞ÄÎä•Ìï¥Ïïº Ìï®<br><br>
                    <strong>Allowed:</strong> Ìè¨Ï¶à, Î∞∞Í≤Ω, Ï°∞Î™Ö, ÏÜåÌíà Î≥ÄÍ≤Ω<br>
                    <strong>Forbidden:</strong> Ï∫êÎ¶≠ÌÑ∞ Ïû¨Ìï¥ÏÑù, Ïä§ÌÉÄÏùº Î≥ÄÍ≤Ω, ÏÉâÏÉÅ/ÎπÑÏú® Î≥ÄÍ≤Ω
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(251,146,60,0.1); border-radius: 8px; border-left: 3px solid #fb923c;">
                <strong style="color: #fb923c;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/image_generation_node.py" target="_blank" style="color: #fb923c;">nodes/image_generation_node.py</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/prompts/image_generation/system.txt" target="_blank" style="color: #fb923c;">prompts/image_generation/system.txt</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Intent - general (Fallback) -->
    <div class="modal-overlay" id="modal-intent-general">
        <div class="modal-content" style="max-width: 950px;">
            <button class="modal-close" onclick="closeModal('modal-intent-general')">√ó</button>
            <h3 class="modal-title">üí¨ general - ÏùºÎ∞ò ÎåÄÌôî (Fallback + Multi-turn)</h3>

            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
<pre style="font-size: 0.72rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ             general Intent Pipeline (Answer Generation)             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                     ‚îÇ
‚îÇ  User Message ‚îÄ‚îÄ‚ñ∫ answer_node ‚îÄ‚îÄ‚ñ∫ SSE Token Stream                 ‚îÇ
‚îÇ                       ‚îÇ                                             ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                    ‚îÇ
‚îÇ              ‚îÇ Context Assembly ‚îÇ                                   ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                    ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ disposal_rules ‚îÇ  (waste Í≤∞Í≥º)                     ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ character_ctx  ‚îÇ  (character Í≤∞Í≥º)                  ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ location_ctx   ‚îÇ  (location Í≤∞Í≥º)                   ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ price_ctx      ‚îÇ  (recyclable_price Í≤∞Í≥º)           ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ bulk_waste_ctx ‚îÇ  (bulk_waste Í≤∞Í≥º)                 ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ weather_ctx    ‚îÇ  (weather Í≤∞Í≥º)                    ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ collection_ctx ‚îÇ  (collection_point Í≤∞Í≥º)           ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ image_gen_ctx  ‚îÇ  (image_generation Í≤∞Í≥º)           ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ web_search_ctx ‚îÇ  (web_search Í≤∞Í≥º)                 ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                    ‚îÇ
‚îÇ                       ‚îÇ                                             ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                    ‚îÇ
‚îÇ              ‚îÇ PromptBuilder    ‚îÇ                                   ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                    ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ System Prompt  ‚îÇ  (eco_character.txt)               ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ Intent Prompt  ‚îÇ  (general_instruction.txt)         ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ Context Inject ‚îÇ  (ÏúÑ Î™®Îì† Ïª®ÌÖçÏä§Ìä∏)                ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ History (10)   ‚îÇ  (Multi-turn ÎåÄÌôî)                 ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                    ‚îÇ
‚îÇ                       ‚îÇ                                             ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                    ‚îÇ
‚îÇ              ‚îÇ LLM Streaming   ‚îÇ                                    ‚îÇ
‚îÇ              ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ                                    ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ LangChain astream() ‚îÇ                               ‚îÇ
‚îÇ              ‚îÇ ‚Ä¢ or generate_stream()‚îÇ                               ‚îÇ
‚îÇ              ‚îÇ ‚Üí notify_token_v2()   ‚îÇ  ‚Üí Redis ‚Üí SSE              ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                    ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îÇ  Lamport Clock: cleanup_sequence(job_id) at pipeline end            ‚îÇ
‚îÇ                                                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Token Streaming Architecture</h4>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem;">
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: var(--primary); margin-bottom: 0.3rem;">LangChain Path</div>
                        <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.5;">
                            get_langchain_llm()<br>
                            ‚Üí SystemMessage + HumanMessage<br>
                            ‚Üí astream() ÌÜ†ÌÅ∞ Î∞úÌñâ<br>
                            ‚Üí notify_token_v2()
                        </div>
                    </div>
                    <div style="background: var(--bg-card); padding: 0.75rem; border-radius: 8px; border: 1px solid var(--border-subtle);">
                        <div style="font-weight: 600; font-size: 0.8rem; color: var(--primary); margin-bottom: 0.3rem;">Native Path (Gemini)</div>
                        <div style="font-size: 0.72rem; color: var(--text-secondary); line-height: 1.5;">
                            generate_stream()<br>
                            ‚Üí prompt + system_prompt<br>
                            ‚Üí ÎÑ§Ïù¥Ìã∞Î∏å Ïä§Ìä∏Î¶¨Î∞ç<br>
                            ‚Üí notify_token_v2()
                        </div>
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h4 style="color: var(--primary); margin-bottom: 0.75rem; font-size: 1rem;">Ï£ºÏûÖ ÌîÑÎ°¨ÌîÑÌä∏ (general_instruction.txt)</h4>
                <div style="background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; font-size: 0.72rem; color: var(--text-secondary); line-height: 1.6;">
                    <strong>Ïó≠Ìï†:</strong> ÌôòÍ≤Ω/Î∂ÑÎ¶¨Î∞∞Ï∂ú Í¥ÄÎ†® ÏùºÎ∞ò ÎåÄÌôî ÏùëÎåÄ<br>
                    <strong>ÏÑ±Í≤©:</strong> ÏπúÍ∑ºÌïòÍ≥† Î∞ùÏùÄ ÏóêÏΩî Ï∫êÎ¶≠ÌÑ∞ ÌéòÎ•¥ÏÜåÎÇò<br>
                    <strong>Fallback:</strong> Îã§Î•∏ IntentÎ°ú Î∂ÑÎ•òÎêòÏßÄ ÏïäÏùÄ Î™®Îì† ÏßàÎ¨∏<br>
                    <strong>Multi-turn:</strong> ÏµúÍ∑º 10Í∞ú Î©îÏãúÏßÄ ÌûàÏä§ÌÜ†Î¶¨ Ïú†ÏßÄ
                </div>
            </div>

            <div style="padding: 0.75rem; background: rgba(107,114,128,0.1); border-radius: 8px; border-left: 3px solid #6b7280;">
                <strong style="color: #6b7280;">üìÇ Source Files</strong>
                <div style="margin-top: 0.5rem; font-size: 0.75rem; color: var(--text-secondary);">
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/orchestration/langgraph/nodes/answer_node.py" target="_blank" style="color: #6b7280;">nodes/answer_node.py</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/application/commands/generate_answer_command.py" target="_blank" style="color: #6b7280;">commands/generate_answer_command.py</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/prompts/local/general_instruction.txt" target="_blank" style="color: #6b7280;">prompts/local/general_instruction.txt</a><br>
                    <a href="https://github.com/eco2-team/backend/blob/develop/apps/chat_worker/infrastructure/assets/prompts/global/eco_character.txt" target="_blank" style="color: #6b7280;">prompts/global/eco_character.txt</a>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================================ -->
    <!-- End of Intent Detail Modals -->
    <!-- ============================================================ -->

    <!-- Modal: Multi-LLM Provider -->
    <div class="modal-overlay" id="modal-multi-llm-provider">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-multi-llm-provider')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üß† Multi-LLM Provider: ÎèôÏ†Å Î™®Îç∏ ÏÑ†ÌÉù</span>
                <span class="lang-en">üß† Multi-LLM Provider: Dynamic Model Selection</span>
            </h3>

            <!-- Architecture Overview -->
            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Multi-LLM Provider Architecture                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                                 ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                         Client Request                                  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        POST /api/v1/chat/{chat_id}/messages                            ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ        {"message": "...", "model": "gemini-3-pro-preview"}             ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                    ‚îÇ                                            ‚îÇ
‚îÇ                                    ‚ñº                                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                          Chat API                                       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                   (chat/presentation/http)                              ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                                                         ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ ÏöîÏ≤≠ Í≤ÄÏ¶ù (Request Validation)                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚Ä¢ WorkerÏóê ÏûëÏóÖ Ï†úÏ∂ú (model ÌååÎùºÎØ∏ÌÑ∞ Ìè¨Ìï®)                            ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                    ‚îÇ RabbitMQ                                   ‚îÇ
‚îÇ                                    ‚ñº                                            ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ   ‚îÇ                        Chat Worker                                      ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ                    dependencies.py                                ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ                                                                   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ   1. model ÌååÎùºÎØ∏ÌÑ∞ ÌôïÏù∏                                          ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ   2. modelÎ™ÖÏóêÏÑú provider ÏûêÎèô Ï∂îÎ°† (Auto-Inference)              ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      ‚îÇ  gpt-* ‚Üí openai    ‚îÇ  gemini-* ‚Üí google                ‚îÇ   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      ‚îÇ  o1-*  ‚Üí openai    ‚îÇ  models/* ‚Üí google                ‚îÇ   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ   3. providerÏóê Îî∞Îùº LLM ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ ÏÉùÏÑ±                          ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      ‚Ä¢ openai ‚Üí LangChainLLMAdapter (LangChain ÎûòÌçº)             ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ      ‚Ä¢ google ‚Üí GeminiLLMClient (ÎÑ§Ïù¥Ìã∞Î∏å SDK)                   ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                    ‚îÇ                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ                                    ‚ñº                                    ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ                   LangGraph Pipeline                              ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îÇ   intent_node ‚Üí router ‚Üí subagents ‚Üí aggregator ‚Üí answer_node    ‚îÇ  ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            </div>

            <!-- Provider Auto-Inference -->
            <h4 style="color: #fb923c; margin-bottom: 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîç Provider ÏûêÎèô Ï∂îÎ°†</span>
                <span class="lang-en">üîç Provider Auto-Inference</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #10b981; margin-bottom: 0.5rem;"><span class="lang-ko">ÏãúÎÇòÎ¶¨Ïò§ 1: Í∏∞Î≥∏</span><span class="lang-en">Scenario 1: Default</span></h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.6;">
                        <code style="color: #22c55e;">model: ÎØ∏ÏßÄÏ†ï</code><br>
                        <span class="lang-ko">‚Üí ÌôòÍ≤ΩÎ≥ÄÏàò LLM_MODEL ÏÇ¨Ïö©</span>
                        <span class="lang-en">‚Üí Use env LLM_MODEL</span><br>
                        <span style="color: var(--text-muted);">Default: gpt-5.2</span>
                    </div>
                </div>
                <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #3b82f6; margin-bottom: 0.5rem;"><span class="lang-ko">ÏãúÎÇòÎ¶¨Ïò§ 2: OpenAI</span><span class="lang-en">Scenario 2: OpenAI</span></h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.6;">
                        <code style="color: #3b82f6;">model: "gpt-5.2"</code><br>
                        <span class="lang-ko">‚Üí provider ÏûêÎèô Ï∂îÎ°†: openai</span>
                        <span class="lang-en">‚Üí Auto-infer: openai</span><br>
                        <span style="color: var(--text-muted);">LangChainLLMAdapter</span>
                    </div>
                </div>
                <div style="background: rgba(251,146,60,0.1); border: 1px solid rgba(251,146,60,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #fb923c; margin-bottom: 0.5rem;"><span class="lang-ko">ÏãúÎÇòÎ¶¨Ïò§ 3: Gemini</span><span class="lang-en">Scenario 3: Gemini</span></h5>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); line-height: 1.6;">
                        <code style="color: #fb923c;">model: "gemini-3-pro-preview"</code><br>
                        <span class="lang-ko">‚Üí provider ÏûêÎèô Ï∂îÎ°†: google</span>
                        <span class="lang-en">‚Üí Auto-infer: google</span><br>
                        <span style="color: var(--text-muted);">GeminiLLMClient (Native)</span>
                    </div>
                </div>
            </div>

            <!-- LLM Client Architecture -->
            <h4 style="color: #8b5cf6; margin-bottom: 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üîß LLM Client Íµ¨Ï°∞</span>
                <span class="lang-en">üîß LLM Client Architecture</span>
            </h4>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #3b82f6; margin-bottom: 0.75rem;">OpenAI (LangChain Wrapper)</h5>
                    <div style="font-size: 0.78rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><code>LangChainLLMAdapter</code></div>
                        <div>‚Ä¢ <code>get_langchain_llm()</code> <span class="lang-ko">Î©îÏÑúÎìú Ï†úÍ≥µ</span><span class="lang-en">method provided</span></div>
                        <div>‚Ä¢ <code>langchain_llm.astream()</code> <span class="lang-ko">Ïä§Ìä∏Î¶¨Î∞ç</span><span class="lang-en">streaming</span></div>
                        <div>‚Ä¢ LangGraph <span class="lang-ko">ÎÑ§Ïù¥Ìã∞Î∏å ÌÜµÌï©</span><span class="lang-en">native integration</span></div>
                    </div>
                </div>
                <div style="background: rgba(251,146,60,0.1); border: 1px solid rgba(251,146,60,0.3); border-radius: 8px; padding: 1rem;">
                    <h5 style="color: #fb923c; margin-bottom: 0.75rem;">Google Gemini (Native SDK)</h5>
                    <div style="font-size: 0.78rem; color: var(--text-secondary); line-height: 1.6;">
                        <div><code>GeminiLLMClient</code></div>
                        <div>‚Ä¢ <code>generate_stream()</code> <span class="lang-ko">ÏßÅÏ†ë Ïä§Ìä∏Î¶¨Î∞ç</span><span class="lang-en">direct streaming</span></div>
                        <div>‚Ä¢ <code>google-generativeai</code> SDK</div>
                        <div>‚Ä¢ <code>hasattr</code> <span class="lang-ko">Î∂ÑÍ∏∞Î°ú Ìò∏ÌôòÏÑ± ÌôïÎ≥¥</span><span class="lang-en">branching for compatibility</span></div>
                    </div>
                </div>
            </div>

            <!-- Answer Node Compatibility -->
            <h4 style="color: #22c55e; margin-bottom: 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">‚úÖ answer_node Ìò∏ÌôòÏÑ± Ï≤òÎ¶¨</span>
                <span class="lang-en">‚úÖ answer_node Compatibility</span>
            </h4>
            <div class="modal-diagram" style="font-size: 0.72rem; margin-bottom: 1.5rem;">
# answer_nodeÏóêÏÑú LLM ÌÉÄÏûÖÎ≥Ñ Î∂ÑÍ∏∞ Ï≤òÎ¶¨

if hasattr(llm, "get_langchain_llm"):
    # LangChain Î∞©Ïãù (OpenAI)
    langchain_llm = llm.get_langchain_llm()
    async for chunk in langchain_llm.astream(langchain_messages):
        yield chunk.content
else:
    # ÎÑ§Ïù¥Ìã∞Î∏å LLM Î∞©Ïãù (Gemini Îì±)
    async for chunk in llm.generate_stream(prompt, system_prompt):
        yield chunk
            </div>

            <!-- E2E Test Results -->
            <h4 style="color: #ef4444; margin-bottom: 0.8rem; font-size: 1.1rem;">
                <span class="lang-ko">üß™ E2E ÌÖåÏä§Ìä∏ Í≤∞Í≥º</span>
                <span class="lang-en">üß™ E2E Test Results</span>
            </h4>
            <table class="modal-table" style="margin-bottom: 1.5rem;">
                <tr>
                    <th><span class="lang-ko">ÏãúÎÇòÎ¶¨Ïò§</span><span class="lang-en">Scenario</span></th>
                    <th><span class="lang-ko">ÏöîÏ≤≠</span><span class="lang-en">Request</span></th>
                    <th>Provider</th>
                    <th>LLM Client</th>
                    <th><span class="lang-ko">Í≤∞Í≥º</span><span class="lang-en">Result</span></th>
                </tr>
                <tr>
                    <td>1</td>
                    <td><code>model: ÎØ∏ÏßÄÏ†ï</code></td>
                    <td>openai (env)</td>
                    <td>LangChainLLMAdapter</td>
                    <td style="color: #22c55e;">‚úÖ</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td><code>model: "gpt-5.2"</code></td>
                    <td>openai (auto)</td>
                    <td>LangChainLLMAdapter</td>
                    <td style="color: #22c55e;">‚úÖ</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td><code>model: "gemini-3-pro-preview"</code></td>
                    <td>google (auto)</td>
                    <td>GeminiLLMClient</td>
                    <td style="color: #22c55e;">‚úÖ</td>
                </tr>
            </table>

            <!-- Key Benefits -->
            <div style="padding: 1rem; background: rgba(34,197,94,0.1); border-radius: 8px; border-left: 3px solid #22c55e; margin-bottom: 1rem;">
                <strong style="color: #22c55e;">
                    <span class="lang-ko">üéØ ÌïµÏã¨ Ïù¥Ï†ê</span>
                    <span class="lang-en">üéØ Key Benefits</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.6;">
                    <span class="lang-ko">
                        ‚Ä¢ <strong>ÌôïÏû•ÏÑ±</strong> ‚Äî ÏÉà Provider Ï∂îÍ∞Ä Ïãú MODEL_REGISTRY + ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏ Íµ¨ÌòÑÎßå Ï∂îÍ∞Ä<br>
                        ‚Ä¢ <strong>Ìò∏ÌôòÏÑ±</strong> ‚Äî hasattr Ï≤¥ÌÅ¨Î°ú LangChain ÎûòÌçº/ÎÑ§Ïù¥Ìã∞Î∏å Î™®Îëê ÏßÄÏõê<br>
                        ‚Ä¢ <strong>Ï∂îÏ†ÅÏÑ±</strong> ‚Äî Î°úÍπÖÏúºÎ°ú ÏÑ†ÌÉùÎêú Provider/Model Î™ÖÌôïÌûà ÌôïÏù∏<br>
                        ‚Ä¢ <strong>Ïú†Ïó∞ÏÑ±</strong> ‚Äî ÌÅ¥ÎùºÏù¥Ïñ∏Ìä∏Í∞Ä ÏöîÏ≤≠Î≥ÑÎ°ú LLM ÏÑ†ÌÉù Í∞ÄÎä•
                    </span>
                    <span class="lang-en">
                        ‚Ä¢ <strong>Extensibility</strong> ‚Äî Add new Provider via MODEL_REGISTRY + client impl<br>
                        ‚Ä¢ <strong>Compatibility</strong> ‚Äî hasattr check supports both LangChain wrapper/native<br>
                        ‚Ä¢ <strong>Traceability</strong> ‚Äî Logging clearly shows selected Provider/Model<br>
                        ‚Ä¢ <strong>Flexibility</strong> ‚Äî Client can select LLM per request
                    </span>
                </div>
            </div>

            <!-- Reference -->
            <div style="padding: 1rem; background: rgba(251,146,60,0.1); border-radius: 8px; border-left: 3px solid #fb923c;">
                <strong style="color: #fb923c;">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem;">
                    <a href="https://rooftopsnow.tistory.com/231" target="_blank" rel="noopener" style="color: var(--text-secondary);">
                        <span class="lang-ko">LLM Î™®Îç∏ ÏÑ†ÌÉù Í∏∞Îä• E2E Í≤ÄÏ¶ù ÏôÑÎ£å ‚Üí</span>
                        <span class="lang-en">LLM Model Selection E2E Verification ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Scan Pipeline -->
    <div class="modal-overlay" id="modal-scan-pipeline">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-scan-pipeline')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üó∫Ô∏è LLM Image Classification ÌååÏù¥ÌîÑÎùºÏù∏</span>
                <span class="lang-en">üó∫Ô∏è LLM Image Classification Pipeline</span>
            </h3>
            <div style="text-align: center;">
                <img src="assets/images/image_classification_pipeline.png" alt="AI Classification Pipeline" style="max-width: 100%; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">
            </div>
            <div style="margin-top: 1rem; padding: 1rem; background: rgba(139,92,246,0.1); border-radius: 8px; border-left: 3px solid #8b5cf6;">
                <strong style="color: #8b5cf6;">
                    <span class="lang-ko">üìã ÌååÏù¥ÌîÑÎùºÏù∏ Îã®Í≥Ñ</span>
                    <span class="lang-en">üìã Pipeline Stages</span>
                </strong>
                <div style="margin-top: 0.5rem; color: var(--text-secondary); font-size: 0.85rem; line-height: 1.8;">
                    <span class="lang-ko">
                        1Ô∏è‚É£ <strong>Ïù¥ÎØ∏ÏßÄ ÏûÖÎ†•</strong> ‚Äî ÏÇ¨Ïö©ÏûêÍ∞Ä ÌèêÍ∏∞Î¨º ÏÇ¨ÏßÑ ÏóÖÎ°úÎìú<br>
                        2Ô∏è‚É£ <strong>Vision LLM Î∂ÑÏÑù</strong> ‚Äî Gemini VisionÏúºÎ°ú Ïù¥ÎØ∏ÏßÄ ÎÇ¥ Í∞ùÏ≤¥ ÏãùÎ≥Ñ<br>
                        3Ô∏è‚É£ <strong>ÌèêÍ∏∞Î¨º Î∂ÑÎ•ò</strong> ‚Äî ÏãùÎ≥ÑÎêú Í∞ùÏ≤¥Î•º ÌèêÍ∏∞Î¨º Ïπ¥ÌÖåÍ≥†Î¶¨Î°ú Îß§Ìïë<br>
                        4Ô∏è‚É£ <strong>RAG Í≤ÄÏÉâ</strong> ‚Äî Ìï¥Îãπ ÌèêÍ∏∞Î¨ºÏùò Î∂ÑÎ¶¨Î∞∞Ï∂ú Î∞©Î≤ï Í≤ÄÏÉâ<br>
                        5Ô∏è‚É£ <strong>ÏùëÎãµ ÏÉùÏÑ±</strong> ‚Äî ÏÇ¨Ïö©Ïûê ÏπúÌôîÏ†ÅÏù∏ Î∂ÑÎ¶¨Î∞∞Ï∂ú Í∞ÄÏù¥Îìú ÏÉùÏÑ±
                    </span>
                    <span class="lang-en">
                        1Ô∏è‚É£ <strong>Image Input</strong> ‚Äî User uploads waste photo<br>
                        2Ô∏è‚É£ <strong>Vision LLM Analysis</strong> ‚Äî Gemini Vision identifies objects<br>
                        3Ô∏è‚É£ <strong>Waste Classification</strong> ‚Äî Map objects to waste categories<br>
                        4Ô∏è‚É£ <strong>RAG Search</strong> ‚Äî Retrieve disposal methods<br>
                        5Ô∏è‚É£ <strong>Response Generation</strong> ‚Äî Generate user-friendly disposal guide
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Cluster Nodes Visualization -->
    <div class="modal-overlay" id="modal-cluster-nodes">
        <div class="modal-content" style="max-width: 1400px;">
            <button class="modal-close" onclick="closeModal('modal-cluster-nodes')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üñ•Ô∏è 24-Node Kubernetes Cluster Architecture</span>
                <span class="lang-en">üñ•Ô∏è 24-Node Kubernetes Cluster Architecture</span>
            </h3>

            <!-- Cluster Overview Stats -->
            <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 0.75rem; margin-bottom: 1.5rem;">
                <div style="background: rgba(139,92,246,0.15); border: 1px solid rgba(139,92,246,0.4); border-radius: 8px; padding: 0.75rem; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #8b5cf6;">1</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Control Plane</div>
                </div>
                <div style="background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.4); border-radius: 8px; padding: 0.75rem; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #3b82f6;">9</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">API Nodes</div>
                </div>
                <div style="background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.4); border-radius: 8px; padding: 0.75rem; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #f59e0b;">4</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Workers</div>
                </div>
                <div style="background: rgba(16,185,129,0.15); border: 1px solid rgba(16,185,129,0.4); border-radius: 8px; padding: 0.75rem; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #10b981;">6</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Data Layer</div>
                </div>
                <div style="background: rgba(236,72,153,0.15); border: 1px solid rgba(236,72,153,0.4); border-radius: 8px; padding: 0.75rem; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #ec4899;">2</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Observability</div>
                </div>
                <div style="background: rgba(14,165,233,0.15); border: 1px solid rgba(14,165,233,0.4); border-radius: 8px; padding: 0.75rem; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: 700; color: #0ea5e9;">3</div>
                    <div style="font-size: 0.7rem; color: var(--text-muted);">Network</div>
                </div>
            </div>

            <!-- Visual Node Grid -->
            <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
                <!-- Control Plane -->
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.8rem; font-weight: 600; color: #8b5cf6; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span>üëë</span> Control Plane
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <div style="background: linear-gradient(135deg, rgba(139,92,246,0.3), rgba(139,92,246,0.1)); border: 2px solid #8b5cf6; border-radius: 8px; padding: 0.5rem 0.75rem; min-width: 140px;">
                            <div style="font-weight: 600; color: #8b5cf6; font-size: 0.8rem;">k8s-master</div>
                            <div style="font-size: 0.65rem; color: var(--text-muted);">t3.xlarge ¬∑ 16GB ¬∑ 80GB</div>
                            <div style="font-size: 0.6rem; color: var(--text-secondary); margin-top: 0.25rem;">API Server, etcd, Prometheus</div>
                        </div>
                    </div>
                </div>

                <!-- API Nodes -->
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.8rem; font-weight: 600; color: #3b82f6; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span>üîå</span> API Nodes (Business Logic)
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem;">
                        <div style="background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #3b82f6; font-size: 0.75rem;">api-auth</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                        </div>
                        <div style="background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #3b82f6; font-size: 0.75rem;">api-users</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                        </div>
                        <div style="background: rgba(59,130,246,0.2); border: 1px solid rgba(59,130,246,0.5); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #3b82f6; font-size: 0.75rem;">api-scan ‚≠ê</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB</div>
                        </div>
                        <div style="background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #3b82f6; font-size: 0.75rem;">api-character</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                        </div>
                        <div style="background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #3b82f6; font-size: 0.75rem;">api-location</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                        </div>
                        <div style="background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #3b82f6; font-size: 0.75rem;">api-image</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                        </div>
                        <div style="background: rgba(59,130,246,0.2); border: 1px solid rgba(59,130,246,0.5); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #3b82f6; font-size: 0.75rem;">api-chat ‚≠ê</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB</div>
                        </div>
                        <div style="background: rgba(59,130,246,0.15); border: 1px solid rgba(59,130,246,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #3b82f6; font-size: 0.75rem;">api-info</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                        </div>
                    </div>
                </div>

                <!-- Workers -->
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.8rem; font-weight: 600; color: #f59e0b; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span>‚öôÔ∏è</span> Worker Nodes (Async Processing)
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 0.5rem;">
                        <div style="background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #f59e0b; font-size: 0.75rem;">worker-storage</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB ¬∑ 40GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">I/O Bound ¬∑ Eventlet</div>
                        </div>
                        <div style="background: rgba(245,158,11,0.15); border: 1px solid rgba(245,158,11,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #f59e0b; font-size: 0.75rem;">worker-storage-2</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB ¬∑ 40GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">I/O Bound ¬∑ Eventlet</div>
                        </div>
                        <div style="background: rgba(245,158,11,0.2); border: 1px solid rgba(245,158,11,0.5); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #f59e0b; font-size: 0.75rem;">worker-ai ‚≠ê</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB ¬∑ 40GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">LLM ¬∑ Prefork Pool</div>
                        </div>
                        <div style="background: rgba(245,158,11,0.2); border: 1px solid rgba(245,158,11,0.5); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #f59e0b; font-size: 0.75rem;">worker-ai-2 ‚≠ê</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB ¬∑ 40GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">LLM ¬∑ Prefork Pool</div>
                        </div>
                    </div>
                </div>

                <!-- Data Layer -->
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.8rem; font-weight: 600; color: #10b981; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span>üíæ</span> Data Layer (Persistence & Cache)
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(6, 1fr); gap: 0.5rem;">
                        <div style="background: rgba(16,185,129,0.2); border: 1px solid rgba(16,185,129,0.5); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #10b981; font-size: 0.75rem;">postgresql ‚≠ê</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.large ¬∑ 8GB ¬∑ 80GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">7 Domain DBs</div>
                        </div>
                        <div style="background: rgba(16,185,129,0.15); border: 1px solid rgba(16,185,129,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #10b981; font-size: 0.75rem;">redis-auth</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Blacklist, OAuth</div>
                        </div>
                        <div style="background: rgba(16,185,129,0.15); border: 1px solid rgba(16,185,129,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #10b981; font-size: 0.75rem;">redis-streams</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Event Bus</div>
                        </div>
                        <div style="background: rgba(16,185,129,0.15); border: 1px solid rgba(16,185,129,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #10b981; font-size: 0.75rem;">redis-cache</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Domain Cache</div>
                        </div>
                        <div style="background: rgba(16,185,129,0.15); border: 1px solid rgba(16,185,129,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #10b981; font-size: 0.75rem;">redis-pubsub</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Real-time Events</div>
                        </div>
                        <div style="background: rgba(16,185,129,0.15); border: 1px solid rgba(16,185,129,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #10b981; font-size: 0.75rem;">rabbitmq</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB ¬∑ 40GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Message Queue</div>
                        </div>
                    </div>
                </div>

                <!-- Observability -->
                <div style="margin-bottom: 1.5rem;">
                    <div style="font-size: 0.8rem; font-weight: 600; color: #ec4899; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span>üìä</span> Observability (Monitoring & Logging)
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.5rem;">
                        <div style="background: rgba(236,72,153,0.15); border: 1px solid rgba(236,72,153,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #ec4899; font-size: 0.75rem;">monitoring</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.large ¬∑ 8GB ¬∑ 60GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Prometheus, Grafana, Jaeger</div>
                        </div>
                        <div style="background: rgba(236,72,153,0.2); border: 1px solid rgba(236,72,153,0.5); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #ec4899; font-size: 0.75rem;">logging ‚≠ê</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.xlarge ¬∑ 16GB ¬∑ 100GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Elasticsearch, Kibana, Fluent Bit</div>
                        </div>
                    </div>
                </div>

                <!-- Network -->
                <div>
                    <div style="font-size: 0.8rem; font-weight: 600; color: #0ea5e9; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                        <span>üåê</span> Network Layer (Gateway & Events)
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                        <div style="background: rgba(14,165,233,0.2); border: 1px solid rgba(14,165,233,0.5); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #0ea5e9; font-size: 0.75rem;">ingress-gateway ‚≠ê</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.medium ¬∑ 4GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Istio Ingress, ext-authz</div>
                        </div>
                        <div style="background: rgba(14,165,233,0.15); border: 1px solid rgba(14,165,233,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #0ea5e9; font-size: 0.75rem;">sse-gateway</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">SSE Fan-out, Pub/Sub Subscribe</div>
                        </div>
                        <div style="background: rgba(14,165,233,0.15); border: 1px solid rgba(14,165,233,0.4); border-radius: 6px; padding: 0.5rem;">
                            <div style="font-weight: 600; color: #0ea5e9; font-size: 0.75rem;">event-router</div>
                            <div style="font-size: 0.6rem; color: var(--text-muted);">t3.small ¬∑ 2GB</div>
                            <div style="font-size: 0.55rem; color: var(--text-secondary);">Streams ‚Üí Pub/Sub Publisher</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resource Summary Table -->
            <h4 style="color: var(--primary); margin-bottom: 0.8rem; font-size: 1rem;">
                <span class="lang-ko">üìã Î¶¨ÏÜåÏä§ ÏöîÏïΩ</span>
                <span class="lang-en">üìã Resource Summary</span>
            </h4>
            <table class="modal-table" style="font-size: 0.8rem;">
                <tr>
                    <th>Category</th>
                    <th>Nodes</th>
                    <th>Instance Types</th>
                    <th>Total vCPU</th>
                    <th>Total Memory</th>
                    <th>Total Storage</th>
                </tr>
                <tr>
                    <td style="color: #8b5cf6;">Control Plane</td>
                    <td>1</td>
                    <td>t3.xlarge</td>
                    <td>4</td>
                    <td>16GB</td>
                    <td>80GB</td>
                </tr>
                <tr>
                    <td style="color: #3b82f6;">API Nodes</td>
                    <td>8</td>
                    <td>t3.small(6), t3.medium(2)</td>
                    <td>16</td>
                    <td>20GB</td>
                    <td>180GB</td>
                </tr>
                <tr>
                    <td style="color: #f59e0b;">Workers</td>
                    <td>4</td>
                    <td>t3.medium</td>
                    <td>8</td>
                    <td>16GB</td>
                    <td>160GB</td>
                </tr>
                <tr>
                    <td style="color: #10b981;">Data Layer</td>
                    <td>6</td>
                    <td>t3.small(4), t3.medium(2), t3.large(1)</td>
                    <td>12</td>
                    <td>22GB</td>
                    <td>180GB</td>
                </tr>
                <tr>
                    <td style="color: #ec4899;">Observability</td>
                    <td>2</td>
                    <td>t3.large, t3.xlarge</td>
                    <td>6</td>
                    <td>24GB</td>
                    <td>160GB</td>
                </tr>
                <tr>
                    <td style="color: #0ea5e9;">Network</td>
                    <td>3</td>
                    <td>t3.small(2), t3.medium(1)</td>
                    <td>6</td>
                    <td>8GB</td>
                    <td>60GB</td>
                </tr>
                <tr style="background: rgba(0,255,136,0.1); font-weight: 600;">
                    <td style="color: var(--primary);">Total</td>
                    <td>24</td>
                    <td>-</td>
                    <td>52 vCPU</td>
                    <td>106GB</td>
                    <td>820GB</td>
                </tr>
            </table>

            <!-- External Links -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(14,165,233,0.1); border-radius: 8px; border-left: 3px solid #0ea5e9;">
                <strong style="color: #0ea5e9;">üîó <span class="lang-ko">Ïô∏Î∂Ä ÎßÅÌÅ¨</span><span class="lang-en">External Links</span></strong>
                <div style="margin-top: 0.75rem; display: flex; gap: 1.5rem; flex-wrap: wrap;">
                    <a href="https://kiali.dev.growbin.app/kiali/console/overview?duration=60&refresh=60000" target="_blank" rel="noopener" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> Kiali - Service Mesh Topology
                    </a>
                    <a href="https://grafana.dev.growbin.app" target="_blank" rel="noopener" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> Grafana - Metrics Dashboard
                    </a>
                    <a href="https://jaeger.dev.growbin.app" target="_blank" rel="noopener" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> Jaeger - Distributed Tracing
                    </a>
                </div>
            </div>

            <!-- Terraform Source -->
            <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(139,92,246,0.1); border-radius: 8px; border-left: 3px solid #8b5cf6;">
                <div style="font-size: 0.8rem; color: var(--text-secondary);">
                    <strong style="color: #8b5cf6;">üìÅ Source:</strong>
                    <code style="background: rgba(0,0,0,0.3); padding: 0.2rem 0.5rem; border-radius: 4px; margin-left: 0.5rem;">terraform/main.tf</code>
                    <span style="color: var(--text-muted); margin-left: 0.5rem;">‚Äî IaCÎ°ú Í¥ÄÎ¶¨ÎêòÎäî AWS EC2 Í∏∞Î∞ò Kubernetes ÌÅ¥Îü¨Ïä§ÌÑ∞</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Production Resilience -->
    <div class="modal-overlay" id="modal-production-resilience">
        <div class="modal-content" style="max-width: 1000px;">
            <button class="modal-close" onclick="closeModal('modal-production-resilience')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üõ°Ô∏è Production Resilience - Ïû•Ïï† ÎåÄÏùë Ï†ÑÎûµ</span>
                <span class="lang-en">üõ°Ô∏è Production Resilience - Fault Tolerance Strategy</span>
            </h3>

            <!-- NodePolicy Section -->
            <div style="margin-top: 1.5rem;">
                <h4 style="color: #ef4444; margin-bottom: 1rem; font-size: 1rem;">
                    <span class="lang-ko">üîÑ NodePolicy - Ïû•Ïï† Ï≤òÎ¶¨ Ï†ïÏ±Ö</span>
                    <span class="lang-en">üîÑ NodePolicy - Fault Handling Policies</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         NodePolicy Configuration                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  FAIL_OPEN    ‚îÇ  LLM Ïã§Ìå® ÏãúÏóêÎèÑ Îã§Ïùå ÎÖ∏ÎìúÎ°ú ÏßÑÌñâ (Graceful Degradation)      ‚îÇ
‚îÇ               ‚îÇ  Ïòà: summarize Ïã§Ìå® ‚Üí ÏõêÎ≥∏ Î©îÏãúÏßÄ Í∑∏ÎåÄÎ°ú Ï†ÑÎã¨                  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  FAIL_CLOSE   ‚îÇ  Ïã§Ìå® Ïãú Ï¶âÏãú Ï§ëÎã®, ÏóêÎü¨ ÏùëÎãµ Î∞òÌôò (Critical Path)            ‚îÇ
‚îÇ               ‚îÇ  Ïòà: intent_classification Ïã§Ìå® ‚Üí Ï†ÑÏ≤¥ ÏõåÌÅ¨ÌîåÎ°úÏö∞ Ï§ëÎã®        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  FALLBACK     ‚îÇ  Ïã§Ìå® Ïãú ÎåÄÏ≤¥ ÏùëÎãµ Î∞òÌôò (Default Response)                   ‚îÇ
‚îÇ               ‚îÇ  Ïòà: weather_agent Ïã§Ìå® ‚Üí "ÎÇ†Ïî® Ï†ïÎ≥¥Î•º Í∞ÄÏ†∏Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§"      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>
            </div>

            <!-- Circuit Breaker Section -->
            <div style="margin-top: 1.5rem;">
                <h4 style="color: #f59e0b; margin-bottom: 1rem; font-size: 1rem;">
                    <span class="lang-ko">‚ö° Circuit Breaker Pattern</span>
                    <span class="lang-en">‚ö° Circuit Breaker Pattern</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        Circuit Breaker State Machine                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    5Ìöå Ïó∞ÏÜç Ïã§Ìå®     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    60Ï¥à ÌõÑ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ    ‚îÇ  CLOSED  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇ   OPEN   ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí ‚îÇHALF_OPEN ‚îÇ‚îÇ
‚îÇ    ‚îÇ (Ï†ïÏÉÅ)   ‚îÇ                     ‚îÇ (Ï∞®Îã®)   ‚îÇ              ‚îÇ (ÏãúÌóò)   ‚îÇ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îÇ         ‚îÇ                                ‚îÇ                         ‚îÇ      ‚îÇ
‚îÇ         ‚îÇ ‚Üê ÏÑ±Í≥µ                         ‚îÇ Ï¶âÏãú Ïã§Ìå® Î∞òÌôò           ‚îÇ      ‚îÇ
‚îÇ         ‚îÇ                                ‚Üì                         ‚îÇ      ‚îÇ
‚îÇ         ‚îÇ                          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îÇ      ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ÏÑ±Í≥µ ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ 1Ìöå ÏãúÌóò ‚îÇ ‚îÄ‚îÄ Ïã§Ìå® ‚Üí OPEN ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îÇ                                    ‚îÇ  ÏöîÏ≤≠    ‚îÇ                          ‚îÇ
‚îÇ                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Config: failure_threshold=5, recovery_timeout=60s, half_open_max=1        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>
            </div>

            <!-- AgentÎ≥Ñ ÏÑ§Ï†ï -->
            <div style="margin-top: 1.5rem;">
                <h4 style="color: #8b5cf6; margin-bottom: 1rem; font-size: 1rem;">
                    <span class="lang-ko">ü§ñ AgentÎ≥Ñ Resilience ÏÑ§Ï†ï</span>
                    <span class="lang-en">ü§ñ Per-Agent Resilience Config</span>
                </h4>
                <table class="modal-table" style="font-size: 0.75rem;">
                    <thead>
                        <tr>
                            <th>Agent</th>
                            <th>NodePolicy</th>
                            <th>Circuit Breaker</th>
                            <th>Timeout</th>
                            <th>Rationale</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>intent_classifier</code></td>
                            <td style="color: #ef4444;">FAIL_CLOSE</td>
                            <td>5Ìöå/60s</td>
                            <td>10s</td>
                            <td>Intent ÏóÜÏù¥ ÎùºÏö∞ÌåÖ Î∂àÍ∞Ä</td>
                        </tr>
                        <tr>
                            <td><code>weather_agent</code></td>
                            <td style="color: #22c55e;">FALLBACK</td>
                            <td>5Ìöå/60s</td>
                            <td>15s</td>
                            <td>Ïô∏Î∂Ä API ÏùòÏ°¥, ÎåÄÏ≤¥ ÏùëÎãµ Í∞ÄÎä•</td>
                        </tr>
                        <tr>
                            <td><code>eco_guide_agent</code></td>
                            <td style="color: #22c55e;">FALLBACK</td>
                            <td>5Ìöå/60s</td>
                            <td>20s</td>
                            <td>RAG + Web Search Ï≤¥Ïù∏</td>
                        </tr>
                        <tr>
                            <td><code>summarize</code></td>
                            <td style="color: #3b82f6;">FAIL_OPEN</td>
                            <td>3Ìöå/30s</td>
                            <td>10s</td>
                            <td>ÏÑ†ÌÉùÏ†Å ÏïïÏ∂ï, ÏõêÎ≥∏ Ï†ÑÎã¨ Í∞ÄÎä•</td>
                        </tr>
                        <tr>
                            <td><code>aggregator</code></td>
                            <td style="color: #ef4444;">FAIL_CLOSE</td>
                            <td>-</td>
                            <td>30s</td>
                            <td>Î™®Îì† Í≤∞Í≥º ÏàòÏßë ÌïÑÏàò</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Reference -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(14,165,233,0.1); border-radius: 8px; border-left: 3px solid var(--accent-teal);">
                <strong style="color: var(--accent-teal);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-secondary);">
                    <span class="lang-ko">Production ÌôòÍ≤ΩÏóêÏÑú LLM APIÏùò Î∂àÏïàÏ†ïÏÑ±Ïóê ÎåÄÏùëÌïòÍ∏∞ ÏúÑÌïú Ï†ÑÎûµ. Circuit BreakerÎäî Ïó∞ÏáÑ Ïû•Ïï† Î∞©ÏßÄ.</span>
                    <span class="lang-en">Strategies for handling LLM API instability in production. Circuit Breaker prevents cascading failures.</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Feedback + Fallback Chain -->
    <div class="modal-overlay" id="modal-feedback-fallback">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-feedback-fallback')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üìä Feedback + Fallback Chain - RAG ÌèâÍ∞Ä Î∞è Ï≤¥Ïù∏</span>
                <span class="lang-en">üìä Feedback + Fallback Chain - RAG Evaluation & Chain</span>
            </h3>

            <!-- 4-Dimension RAG Evaluation -->
            <div style="margin-top: 1.5rem;">
                <h4 style="color: #22c55e; margin-bottom: 1rem; font-size: 1rem;">
                    <span class="lang-ko">üìê 4-Dimension RAG ÌèâÍ∞Ä (LangSmith Feedback)</span>
                    <span class="lang-en">üìê 4-Dimension RAG Evaluation (LangSmith Feedback)</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      4-Dimension RAG Quality Metrics                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ   ‚îÇ RELEVANCE   ‚îÇ   ‚îÇ GROUNDEDNESS‚îÇ   ‚îÇ COHERENCE   ‚îÇ   ‚îÇ HELPFULNESS ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  Í¥ÄÎ†®ÏÑ±      ‚îÇ   ‚îÇ  Í∑ºÍ±∞ÏÑ±      ‚îÇ   ‚îÇ  ÏùºÍ¥ÄÏÑ±      ‚îÇ   ‚îÇ  Ïú†Ïö©ÏÑ±      ‚îÇ    ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îÇ
‚îÇ   ‚îÇ QueryÏôÄ      ‚îÇ   ‚îÇ Retrieved   ‚îÇ   ‚îÇ ÎãµÎ≥ÄÏùò      ‚îÇ   ‚îÇ ÏÇ¨Ïö©Ïûê      ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ Context     ‚îÇ   ‚îÇ ContextÏóê   ‚îÇ   ‚îÇ ÎÖºÎ¶¨Ï†Å      ‚îÇ   ‚îÇ ÏßàÎ¨∏Ïóê      ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ Îß§Ïπ≠ Ï†êÏàò   ‚îÇ   ‚îÇ Í∏∞Î∞òÌïú ÎãµÎ≥Ä ‚îÇ   ‚îÇ ÌùêÎ¶Ñ        ‚îÇ   ‚îÇ ÎèÑÏõÄ Ï†ïÎèÑ   ‚îÇ    ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ          ‚îÇ                 ‚îÇ                 ‚îÇ                 ‚îÇ           ‚îÇ
‚îÇ          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                                     ‚Üì                                      ‚îÇ
‚îÇ                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                            ‚îÇ
‚îÇ                        ‚îÇ   Composite Score    ‚îÇ                            ‚îÇ
‚îÇ                        ‚îÇ   (0.0 ~ 1.0)        ‚îÇ                            ‚îÇ
‚îÇ                        ‚îÇ   threshold: 0.7     ‚îÇ                            ‚îÇ
‚îÇ                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                            ‚îÇ
‚îÇ                                     ‚îÇ                                      ‚îÇ
‚îÇ                    < 0.7 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚â• 0.7                       ‚îÇ
‚îÇ                       ‚Üì                          ‚Üì                         ‚îÇ
‚îÇ              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                  ‚îÇ
‚îÇ              ‚îÇ Fallback     ‚îÇ            ‚îÇ Use Response ‚îÇ                  ‚îÇ
‚îÇ              ‚îÇ Chain Ïã§Ìñâ   ‚îÇ            ‚îÇ ÎãµÎ≥Ä ÏÇ¨Ïö©     ‚îÇ                  ‚îÇ
‚îÇ              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>
            </div>

            <!-- Fallback Chain -->
            <div style="margin-top: 1.5rem;">
                <h4 style="color: #f59e0b; margin-bottom: 1rem; font-size: 1rem;">
                    <span class="lang-ko">üîó Fallback Chain Íµ¨Ï°∞</span>
                    <span class="lang-en">üîó Fallback Chain Structure</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         RAG ‚Üí Web Search ‚Üí General LLM                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      Score < 0.7      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ  ‚îÇ   1Ô∏è‚É£ RAG        ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí    ‚îÇ  2Ô∏è‚É£ Web Search ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  (Vector DB)   ‚îÇ                       ‚îÇ  (Tavily API)  ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ                ‚îÇ                       ‚îÇ                ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  eco_guide     ‚îÇ                       ‚îÇ  Ïã§ÏãúÍ∞Ñ Ï†ïÎ≥¥   ‚îÇ               ‚îÇ
‚îÇ  ‚îÇ  docs Í≤ÄÏÉâ     ‚îÇ                       ‚îÇ  ÏµúÏã† Îâ¥Ïä§     ‚îÇ               ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                                                   ‚îÇ                        ‚îÇ
‚îÇ                                          Score < 0.7                       ‚îÇ
‚îÇ                                                   ‚Üì                        ‚îÇ
‚îÇ                                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ                                     ‚îÇ  3Ô∏è‚É£ General LLM     ‚îÇ                 ‚îÇ
‚îÇ                                     ‚îÇ  (Fallback ÏùëÎãµ)   ‚îÇ                 ‚îÇ
‚îÇ                                     ‚îÇ                    ‚îÇ                 ‚îÇ
‚îÇ                                     ‚îÇ  "Ï£ÑÏÜ°Ìï©ÎãàÎã§,      ‚îÇ                 ‚îÇ
‚îÇ                                     ‚îÇ   Ï†ïÌôïÌïú Ï†ïÎ≥¥Î•º    ‚îÇ                 ‚îÇ
‚îÇ                                     ‚îÇ   Ï∞æÏßÄ Î™ªÌñàÏäµÎãàÎã§" ‚îÇ                 ‚îÇ
‚îÇ                                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìä Metrics Tracked:                                                        ‚îÇ
‚îÇ  ‚Ä¢ rag_hit_rate: RAGÏóêÏÑú ÏßÅÏ†ë ÏùëÎãµÌïú ÎπÑÏú®                                    ‚îÇ
‚îÇ  ‚Ä¢ fallback_rate: Fallback Ï≤¥Ïù∏ ÏßÑÏûÖ ÎπÑÏú®                                   ‚îÇ
‚îÇ  ‚Ä¢ avg_response_quality: ÌèâÍ∑† ÌíàÏßà Ï†êÏàò                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>
            </div>

            <!-- ÏΩîÎìú ÏòàÏãú -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(0,0,0,0.3); border-radius: 8px;">
                <div style="font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.5rem;">apps/chat_worker/application/agents/eco_guide_agent.py</div>
                <pre style="font-size: 0.7rem; color: var(--text-secondary); margin: 0; overflow-x: auto;"><code># Fallback Chain Implementation
async def run_with_fallback(self, query: str) -> AgentResponse:
    # 1. RAG ÏãúÎèÑ
    rag_response = await self.rag_retriever.query(query)
    if self._evaluate_quality(rag_response) >= 0.7:
        return rag_response
    
    # 2. Web Search ÏãúÎèÑ
    web_response = await self.web_search.search(query)
    if self._evaluate_quality(web_response) >= 0.7:
        return web_response
    
    # 3. General LLM Fallback
    return await self.general_llm.generate_fallback(query)</code></pre>
            </div>

            <!-- Reference -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(14,165,233,0.1); border-radius: 8px; border-left: 3px solid var(--accent-teal);">
                <strong style="color: var(--accent-teal);">üìö <span class="lang-ko">Ï∞∏Í≥†</span><span class="lang-en">Reference</span></strong>
                <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-secondary);">
                    <span class="lang-ko">LangSmithÏùò Feedback Í∏∞Îä•ÏùÑ ÌôúÏö©Ìïú RAG ÌíàÏßà ÌèâÍ∞Ä. ÎÇÆÏùÄ ÌíàÏßà Ïãú ÏûêÎèôÏúºÎ°ú ÎåÄÏïà ÏÜåÏä§ ÌÉêÏÉâ.</span>
                    <span class="lang-en">RAG quality evaluation using LangSmith Feedback. Automatically explores alternative sources on low quality.</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: LangSmith + OTEL -->
    <div class="modal-overlay" id="modal-langsmith-otel">
        <div class="modal-content" style="max-width: 1100px;">
            <button class="modal-close" onclick="closeModal('modal-langsmith-otel')">√ó</button>
            <h3 class="modal-title">
                <span class="lang-ko">üî≠ LangSmith + OTEL - ÌÜµÌï© Observability</span>
                <span class="lang-en">üî≠ LangSmith + OTEL - Unified Observability</span>
            </h3>

            <!-- TelemetryConfigPort -->
            <div style="margin-top: 1.5rem;">
                <h4 style="color: #06b6d4; margin-bottom: 1rem; font-size: 1rem;">
                    <span class="lang-ko">üîå TelemetryConfigPort Ï∂îÏÉÅÌôî</span>
                    <span class="lang-en">üîå TelemetryConfigPort Abstraction</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       TelemetryConfigPort Interface                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ  class TelemetryConfigPort(Protocol):                                       ‚îÇ
‚îÇ      """ÌÖîÎ†àÎ©îÌä∏Î¶¨ ÏÑ§Ï†ï Ï∂îÏÉÅÌôî - ÌôòÍ≤ΩÎ≥Ñ Íµ¨ÌòÑ ÍµêÏ≤¥ Í∞ÄÎä•"""                       ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îÇ      @property                                                              ‚îÇ
‚îÇ      def langsmith_enabled(self) -> bool: ...                               ‚îÇ
‚îÇ      @property                                                              ‚îÇ
‚îÇ      def otel_enabled(self) -> bool: ...                                    ‚îÇ
‚îÇ      @property                                                              ‚îÇ
‚îÇ      def project_name(self) -> str: ...                                     ‚îÇ
‚îÇ      @property                                                              ‚îÇ
‚îÇ      def sampling_rate(self) -> float: ...                                  ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Implementations:                                                           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ DevTelemetryConf ‚îÇ  ‚îÇ ProdTelemetryConf‚îÇ  ‚îÇ TestTelemetryConf‚îÇ          ‚îÇ
‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                  ‚îÇ  ‚îÇ                  ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ langsmith: ‚úÖ    ‚îÇ  ‚îÇ langsmith: ‚úÖ    ‚îÇ  ‚îÇ langsmith: ‚ùå    ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ otel: ‚ùå         ‚îÇ  ‚îÇ otel: ‚úÖ         ‚îÇ  ‚îÇ otel: ‚ùå         ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ sampling: 1.0    ‚îÇ  ‚îÇ sampling: 0.1    ‚îÇ  ‚îÇ sampling: 0.0    ‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>
            </div>

            <!-- Feature Îã®ÏúÑ Run Ï∂îÏ†Å -->
            <div style="margin-top: 1.5rem;">
                <h4 style="color: #8b5cf6; margin-bottom: 1rem; font-size: 1rem;">
                    <span class="lang-ko">üìç Feature Îã®ÏúÑ Run Ï∂îÏ†Å (LangSmith)</span>
                    <span class="lang-en">üìç Feature-Level Run Tracking (LangSmith)</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      LangSmith Run Hierarchy                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ  üèÉ Project: eco2-chat-worker                                               ‚îÇ
‚îÇ  ‚îÇ                                                                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ üìÅ Session: user_123_session_456                                       ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ                                                                      ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ üî∑ Run: intent_classification                                      ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input: "Ïò§Îäò ÎÇ†Ïî® Ïñ¥Îïå?"                                        ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ output: ["WEATHER"]                                            ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ latency: 234ms                                                 ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tokens: { input: 12, output: 8 }                               ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ                                                                      ‚îÇ
‚îÇ  ‚îÇ   ‚îú‚îÄ‚îÄ üî∑ Run: weather_agent                                              ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input: { query: "Ïò§Îäò ÎÇ†Ïî®", location: "ÏÑúÏö∏" }                  ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ output: "ÏÑúÏö∏ ÎßëÏùå, 24¬∞C..."                                    ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ latency: 1,234ms                                               ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ external_api: weather_api                                      ‚îÇ
‚îÇ  ‚îÇ   ‚îÇ                                                                      ‚îÇ
‚îÇ  ‚îÇ   ‚îî‚îÄ‚îÄ üî∑ Run: summarize                                                  ‚îÇ
‚îÇ  ‚îÇ       ‚îú‚îÄ‚îÄ input: { messages: [...] }                                     ‚îÇ
‚îÇ  ‚îÇ       ‚îú‚îÄ‚îÄ output: "ÏïïÏ∂ïÎêú Ïª®ÌÖçÏä§Ìä∏..."                                    ‚îÇ
‚îÇ  ‚îÇ       ‚îî‚îÄ‚îÄ compression_ratio: 0.65                                        ‚îÇ
‚îÇ  ‚îÇ                                                                          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ üìä Metrics:                                                            ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ total_runs: 156                                                    ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ avg_latency: 892ms                                                 ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ error_rate: 0.02%                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>
            </div>

            <!-- OTEL Span ÌÜµÌï© -->
            <div style="margin-top: 1.5rem;">
                <h4 style="color: #f59e0b; margin-bottom: 1rem; font-size: 1rem;">
                    <span class="lang-ko">üîó OTEL Span ÌÜµÌï© (Jaeger)</span>
                    <span class="lang-en">üîó OTEL Span Integration (Jaeger)</span>
                </h4>
                <div class="modal-diagram" style="font-size: 0.7rem; line-height: 1.4;">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    OTEL + LangSmith Correlation                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ  Jaeger Trace (Distributed Tracing)                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ trace_id: abc123def456                                               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                                       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îÇ chat-api     ‚îÇ‚Üí‚îÇ event-router ‚îÇ‚Üí‚îÇ chat-worker  ‚îÇ‚Üí‚îÇ sse-gateway  ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îÇ 50ms         ‚îÇ ‚îÇ 12ms         ‚îÇ ‚îÇ 1,200ms      ‚îÇ ‚îÇ 8ms          ‚îÇ ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                          ‚îÇ                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                    langsmith_run_id                  ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                          ‚Üì                           ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îÇ  LangSmith Run (LLM Observability)                                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ run_id: xyz789                                                       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ parent_trace_id: abc123def456  ‚Üê OTEL Ïó∞Í≤∞                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                                       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ LLM Call Details (prompt, completion, tokens)                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ RAG Retrieval (query, documents, scores)                           ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ ‚Ä¢ Feedback Evaluation (relevance, groundedness)                      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  üìç Correlation Key: span.attributes["langsmith.run_id"]                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>
            </div>

            <!-- External Links -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(14,165,233,0.1); border-radius: 8px; border-left: 3px solid var(--accent-teal);">
                <strong style="color: var(--accent-teal);">üîó <span class="lang-ko">Ïô∏Î∂Ä ÎßÅÌÅ¨</span><span class="lang-en">External Links</span></strong>
                <div style="margin-top: 0.75rem; display: flex; gap: 1.5rem; flex-wrap: wrap;">
                    <a href="https://jaeger.dev.growbin.app" target="_blank" rel="noopener" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> Jaeger - Distributed Tracing
                    </a>
                    <a href="https://smith.langchain.com" target="_blank" rel="noopener" style="color: var(--text-secondary); text-decoration: none; display: flex; align-items: center; gap: 0.5rem;">
                        <span style="color: var(--primary);">‚Üí</span> LangSmith - LLM Observability
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function setLang(lang) {
            document.body.classList.remove('en');
            if (lang === 'en') {
                document.body.classList.add('en');
            }
            
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            localStorage.setItem('portfolio-lang', lang);
        }

        // Load saved language
        document.addEventListener('DOMContentLoaded', () => {
            const savedLang = localStorage.getItem('portfolio-lang');
            if (savedLang === 'en') {
                setLang('en');
                document.querySelectorAll('.lang-btn')[1].classList.add('active');
                document.querySelectorAll('.lang-btn')[0].classList.remove('active');
            }
        });

        // Smooth scroll for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Add scroll animation
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.category-card, .tech-category, .timeline-item').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'all 0.6s ease-out';
            observer.observe(el);
        });

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = '';
        }

        // Click handler for achievements, pipeline stages, subsections, and cycle nodes
        document.querySelectorAll('.achievement.clickable, .pipeline-stage.clickable, .async-item.clickable, .pipeline-subsection.clickable, .domain-card.clickable, .cycle-node.clickable').forEach(el => {
            el.addEventListener('click', (e) => {
                // Prevent opening modal when clicking on links inside
                if (e.target.tagName === 'A') return;
                const modalId = el.getAttribute('data-modal');
                if (modalId) openModal(modalId);
            });
        });

        // Close on overlay click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        });

        // Close on ESC key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.querySelectorAll('.modal-overlay.active').forEach(modal => {
                    modal.classList.remove('active');
                });
                document.body.style.overflow = '';
            }
        });

        // Calculate days since start
        function calculateDays(startDate) {
            const start = new Date(startDate);
            const now = new Date();
            const diff = Math.floor((now - start) / (1000 * 60 * 60 * 24)) + 1;
            return diff;
        }

        // Update day counters
        const devDays = calculateDays('2025-10-31');
        const serviceDays = calculateDays('2025-12-02');
        document.getElementById('dev-days').textContent = devDays + 'ÏùºÏ∞®';
        document.getElementById('service-days').textContent = serviceDays + 'ÏùºÏ∞®';
    </script>
</body>
</html>

